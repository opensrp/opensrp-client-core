var requirejs, require, define;
if (function(global) {
    function isFunction(t) {
        return "[object Function]" === ostring.call(t)
    }
    function isArray(t) {
        return "[object Array]" === ostring.call(t)
    }
    function each(t, e) {
        if (t) {
            var n;
            for (n = 0; n < t.length && (!t[n] || !e(t[n], n, t)); n += 1)
                ;
        }
    }
    function eachReverse(t, e) {
        if (t) {
            var n;
            for (n = t.length - 1; n > -1 && (!t[n] || !e(t[n], n, t)); n -= 1)
                ;
        }
    }
    function hasProp(t, e) {
        return hasOwn.call(t, e)
    }
    function getOwn(t, e) {
        return hasProp(t, e) && t[e]
    }
    function eachProp(t, e) {
        var n;
        for (n in t)
            if (hasProp(t, n) && e(t[n], n))
                break
    }
    function mixin(t, e, n, i) {
        return e && eachProp(e, function(e, o) {
            (n || !hasProp(t, o)) && (!i || "object" != typeof e || !e || isArray(e) || isFunction(e) || e instanceof RegExp ? t[o] = e : (t[o] || (t[o] = {}),
            mixin(t[o], e, n, i)))
        }
        ),
        t
    }
    function bind(t, e) {
        return function() {
            return e.apply(t, arguments)
        }
    }
    function scripts() {
        return document.getElementsByTagName("script")
    }
    function defaultOnError(t) {
        throw t
    }
    function getGlobal(t) {
        if (!t)
            return t;
        var e = global;
        return each(t.split("."), function(t) {
            e = e[t]
        }
        ),
        e
    }
    function makeError(t, e, n, i) {
        var o = new Error(e + "\nhttp://requirejs.org/docs/errors.html#" + t);
        return o.requireType = t,
        o.requireModules = i,
        n && (o.originalError = n),
        o
    }
    function newContext(t) {
        function e(t) {
            var e, n;
            for (e = 0; e < t.length; e++)
                if (n = t[e],
                "." === n)
                    t.splice(e, 1),
                    e -= 1;
                else if (".." === n) {
                    if (0 === e || 1 === e && ".." === t[2] || ".." === t[e - 1])
                        continue;e > 0 && (t.splice(e - 1, 2),
                    e -= 2)
                }
        }
        function n(t, n, i) {
            var o, r, s, a, l, u, c, h, d, p, f, m, g = n && n.split("/"), v = T.map, y = v && v["*"];
            if (t && (t = t.split("/"),
            c = t.length - 1,
            T.nodeIdCompat && jsSuffixRegExp.test(t[c]) && (t[c] = t[c].replace(jsSuffixRegExp, "")),
            "." === t[0].charAt(0) && g && (m = g.slice(0, g.length - 1),
            t = m.concat(t)),
            e(t),
            t = t.join("/")),
            i && v && (g || y)) {
                s = t.split("/");
                t: for (a = s.length; a > 0; a -= 1) {
                    if (u = s.slice(0, a).join("/"),
                    g)
                        for (l = g.length; l > 0; l -= 1)
                            if (r = getOwn(v, g.slice(0, l).join("/")),
                            r && (r = getOwn(r, u))) {
                                h = r,
                                d = a;
                                break t
                            }
                    !p && y && getOwn(y, u) && (p = getOwn(y, u),
                    f = a)
                }
                !h && p && (h = p,
                d = f),
                h && (s.splice(0, d, h),
                t = s.join("/"))
            }
            return o = getOwn(T.pkgs, t),
            o ? o : t
        }
        function i(t) {
            isBrowser && each(scripts(), function(e) {
                return e.getAttribute("data-requiremodule") === t && e.getAttribute("data-requirecontext") === _.contextName ? (e.parentNode.removeChild(e),
                !0) : void 0
            }
            )
        }
        function o(t) {
            var e = getOwn(T.paths, t);
            return e && isArray(e) && e.length > 1 ? (e.shift(),
            _.require.undef(t),
            _.makeRequire(null , {
                skipMap: !0
            })([t]),
            !0) : void 0
        }
        function r(t) {
            var e, n = t ? t.indexOf("!") : -1;
            return n > -1 && (e = t.substring(0, n),
            t = t.substring(n + 1, t.length)),
            [e, t]
        }
        function s(t, e, i, o) {
            var s, a, l, u, c = null , h = e ? e.name : null , d = t, p = !0, f = "";
            return t || (p = !1,
            t = "_@r" + (N += 1)),
            u = r(t),
            c = u[0],
            t = u[1],
            c && (c = n(c, h, o),
            a = getOwn(C, c)),
            t && (c ? f = a && a.normalize ? a.normalize(t, function(t) {
                return n(t, h, o)
            }
            ) : -1 === t.indexOf("!") ? n(t, h, o) : t : (f = n(t, h, o),
            u = r(f),
            c = u[0],
            f = u[1],
            i = !0,
            s = _.nameToUrl(f))),
            l = !c || a || i ? "" : "_unnormalized" + (M += 1),
            {
                prefix: c,
                name: f,
                parentMap: e,
                unnormalized: !!l,
                url: s,
                originalName: d,
                isDefine: p,
                id: (c ? c + "!" + f : f) + l
            }
        }
        function a(t) {
            var e = t.id
              , n = getOwn(k, e);
            return n || (n = k[e] = new _.Module(t)),
            n
        }
        function l(t, e, n) {
            var i = t.id
              , o = getOwn(k, i);
            !hasProp(C, i) || o && !o.defineEmitComplete ? (o = a(t),
            o.error && "error" === e ? n(o.error) : o.on(e, n)) : "defined" === e && n(C[i])
        }
        function u(t, e) {
            var n = t.requireModules
              , i = !1;
            e ? e(t) : (each(n, function(e) {
                var n = getOwn(k, e);
                n && (n.error = t,
                n.events.error && (i = !0,
                n.emit("error", t)))
            }
            ),
            i || req.onError(t))
        }
        function c() {
            globalDefQueue.length && (each(globalDefQueue, function(t) {
                var e = t[0];
                "string" == typeof e && (_.defQueueMap[e] = !0),
                S.push(t)
            }
            ),
            globalDefQueue = [])
        }
        function h(t) {
            delete k[t],
            delete E[t]
        }
        function d(t, e, n) {
            var i = t.map.id;
            t.error ? t.emit("error", t.error) : (e[i] = !0,
            each(t.depMaps, function(i, o) {
                var r = i.id
                  , s = getOwn(k, r);
                !s || t.depMatched[o] || n[r] || (getOwn(e, r) ? (t.defineDep(o, C[r]),
                t.check()) : d(s, e, n))
            }
            ),
            n[i] = !0)
        }
        function p() {
            var t, e, n = 1e3 * T.waitSeconds, r = n && _.startTime + n < (new Date).getTime(), s = [], a = [], l = !1, c = !0;
            if (!y) {
                if (y = !0,
                eachProp(E, function(t) {
                    var n = t.map
                      , u = n.id;
                    if (t.enabled && (n.isDefine || a.push(t),
                    !t.error))
                        if (!t.inited && r)
                            o(u) ? (e = !0,
                            l = !0) : (s.push(u),
                            i(u));
                        else if (!t.inited && t.fetched && n.isDefine && (l = !0,
                        !n.prefix))
                            return c = !1
                }
                ),
                r && s.length)
                    return t = makeError("timeout", "Load timeout for modules: " + s, null , s),
                    t.contextName = _.contextName,
                    u(t);
                c && each(a, function(t) {
                    d(t, {}, {})
                }
                ),
                r && !e || !l || !isBrowser && !isWebWorker || x || (x = setTimeout(function() {
                    x = 0,
                    p()
                }
                , 50)),
                y = !1
            }
        }
        function f(t) {
            hasProp(C, t[0]) || a(s(t[0], null , !0)).init(t[1], t[2])
        }
        function m(t, e, n, i) {
            t.detachEvent && !isOpera ? i && t.detachEvent(i, e) : t.removeEventListener(n, e, !1)
        }
        function g(t) {
            var e = t.currentTarget || t.srcElement;
            return m(e, _.onScriptLoad, "load", "onreadystatechange"),
            m(e, _.onScriptError, "error"),
            {
                node: e,
                id: e && e.getAttribute("data-requiremodule")
            }
        }
        function v() {
            var t;
            for (c(); S.length; ) {
                if (t = S.shift(),
                null  === t[0])
                    return u(makeError("mismatch", "Mismatched anonymous define() module: " + t[t.length - 1]));
                f(t)
            }
            _.defQueueMap = {}
        }
        var y, b, _, w, x, T = {
            waitSeconds: 7,
            baseUrl: "./",
            paths: {},
            bundles: {},
            pkgs: {},
            shim: {},
            config: {}
        }, k = {}, E = {}, D = {}, S = [], C = {}, P = {}, L = {}, N = 1, M = 1;
        return w = {
            require: function(t) {
                return t.require ? t.require : t.require = _.makeRequire(t.map)
            },
            exports: function(t) {
                return t.usingExports = !0,
                t.map.isDefine ? t.exports ? C[t.map.id] = t.exports : t.exports = C[t.map.id] = {} : void 0
            },
            module: function(t) {
                return t.module ? t.module : t.module = {
                    id: t.map.id,
                    uri: t.map.url,
                    config: function() {
                        return getOwn(T.config, t.map.id) || {}
                    },
                    exports: t.exports || (t.exports = {})
                }
            }
        },
        b = function(t) {
            this.events = getOwn(D, t.id) || {},
            this.map = t,
            this.shim = getOwn(T.shim, t.id),
            this.depExports = [],
            this.depMaps = [],
            this.depMatched = [],
            this.pluginMaps = {},
            this.depCount = 0
        }
        ,
        b.prototype = {
            init: function(t, e, n, i) {
                i = i || {},
                this.inited || (this.factory = e,
                n ? this.on("error", n) : this.events.error && (n = bind(this, function(t) {
                    this.emit("error", t)
                }
                )),
                this.depMaps = t && t.slice(0),
                this.errback = n,
                this.inited = !0,
                this.ignore = i.ignore,
                i.enabled || this.enabled ? this.enable() : this.check())
            },
            defineDep: function(t, e) {
                this.depMatched[t] || (this.depMatched[t] = !0,
                this.depCount -= 1,
                this.depExports[t] = e)
            },
            fetch: function() {
                if (!this.fetched) {
                    this.fetched = !0,
                    _.startTime = (new Date).getTime();
                    var t = this.map;
                    return this.shim ? void _.makeRequire(this.map, {
                        enableBuildCallback: !0
                    })(this.shim.deps || [], bind(this, function() {
                        return t.prefix ? this.callPlugin() : this.load()
                    }
                    )) : t.prefix ? this.callPlugin() : this.load()
                }
            },
            load: function() {
                var t = this.map.url;
                P[t] || (P[t] = !0,
                _.load(this.map.id, t))
            },
            check: function() {
                if (this.enabled && !this.enabling) {
                    var t, e, n = this.map.id, i = this.depExports, o = this.exports, r = this.factory;
                    if (this.inited) {
                        if (this.error)
                            this.emit("error", this.error);
                        else if (!this.defining) {
                            if (this.defining = !0,
                            this.depCount < 1 && !this.defined) {
                                if (isFunction(r)) {
                                    if (this.events.error && this.map.isDefine || req.onError !== defaultOnError)
                                        try {
                                            o = _.execCb(n, r, i, o)
                                        } catch (s) {
                                            t = s
                                        }
                                    else
                                        o = _.execCb(n, r, i, o);
                                    if (this.map.isDefine && void 0 === o && (e = this.module,
                                    e ? o = e.exports : this.usingExports && (o = this.exports)),
                                    t)
                                        return t.requireMap = this.map,
                                        t.requireModules = this.map.isDefine ? [this.map.id] : null ,
                                        t.requireType = this.map.isDefine ? "define" : "require",
                                        u(this.error = t)
                                } else
                                    o = r;
                                this.exports = o,
                                this.map.isDefine && !this.ignore && (C[n] = o,
                                req.onResourceLoad && req.onResourceLoad(_, this.map, this.depMaps)),
                                h(n),
                                this.defined = !0
                            }
                            this.defining = !1,
                            this.defined && !this.defineEmitted && (this.defineEmitted = !0,
                            this.emit("defined", this.exports),
                            this.defineEmitComplete = !0)
                        }
                    } else
                        hasProp(_.defQueueMap, n) || this.fetch()
                }
            },
            callPlugin: function() {
                var t = this.map
                  , e = t.id
                  , i = s(t.prefix);
                this.depMaps.push(i),
                l(i, "defined", bind(this, function(i) {
                    var o, r, c, d = getOwn(L, this.map.id), p = this.map.name, f = this.map.parentMap ? this.map.parentMap.name : null , m = _.makeRequire(t.parentMap, {
                        enableBuildCallback: !0
                    });
                    return this.map.unnormalized ? (i.normalize && (p = i.normalize(p, function(t) {
                        return n(t, f, !0)
                    }
                    ) || ""),
                    r = s(t.prefix + "!" + p, this.map.parentMap),
                    l(r, "defined", bind(this, function(t) {
                        this.init([], function() {
                            return t
                        }
                        , null , {
                            enabled: !0,
                            ignore: !0
                        })
                    }
                    )),
                    c = getOwn(k, r.id),
                    void (c && (this.depMaps.push(r),
                    this.events.error && c.on("error", bind(this, function(t) {
                        this.emit("error", t)
                    }
                    )),
                    c.enable()))) : d ? (this.map.url = _.nameToUrl(d),
                    void this.load()) : (o = bind(this, function(t) {
                        this.init([], function() {
                            return t
                        }
                        , null , {
                            enabled: !0
                        })
                    }
                    ),
                    o.error = bind(this, function(t) {
                        this.inited = !0,
                        this.error = t,
                        t.requireModules = [e],
                        eachProp(k, function(t) {
                            0 === t.map.id.indexOf(e + "_unnormalized") && h(t.map.id)
                        }
                        ),
                        u(t)
                    }
                    ),
                    o.fromText = bind(this, function(n, i) {
                        var r = t.name
                          , l = s(r)
                          , c = useInteractive;
                        i && (n = i),
                        c && (useInteractive = !1),
                        a(l),
                        hasProp(T.config, e) && (T.config[r] = T.config[e]);
                        try {
                            req.exec(n)
                        } catch (h) {
                            return u(makeError("fromtexteval", "fromText eval for " + e + " failed: " + h, h, [e]))
                        }
                        c && (useInteractive = !0),
                        this.depMaps.push(l),
                        _.completeLoad(r),
                        m([r], o)
                    }
                    ),
                    void i.load(t.name, m, o, T))
                }
                )),
                _.enable(i, this),
                this.pluginMaps[i.id] = i
            },
            enable: function() {
                E[this.map.id] = this,
                this.enabled = !0,
                this.enabling = !0,
                each(this.depMaps, bind(this, function(t, e) {
                    var n, i, o;
                    if ("string" == typeof t) {
                        if (t = s(t, this.map.isDefine ? this.map : this.map.parentMap, !1, !this.skipMap),
                        this.depMaps[e] = t,
                        o = getOwn(w, t.id))
                            return void (this.depExports[e] = o(this));
                        this.depCount += 1,
                        l(t, "defined", bind(this, function(t) {
                            this.undefed || (this.defineDep(e, t),
                            this.check())
                        }
                        )),
                        this.errback ? l(t, "error", bind(this, this.errback)) : this.events.error && l(t, "error", bind(this, function(t) {
                            this.emit("error", t)
                        }
                        ))
                    }
                    n = t.id,
                    i = k[n],
                    hasProp(w, n) || !i || i.enabled || _.enable(t, this)
                }
                )),
                eachProp(this.pluginMaps, bind(this, function(t) {
                    var e = getOwn(k, t.id);
                    e && !e.enabled && _.enable(t, this)
                }
                )),
                this.enabling = !1,
                this.check()
            },
            on: function(t, e) {
                var n = this.events[t];
                n || (n = this.events[t] = []),
                n.push(e)
            },
            emit: function(t, e) {
                each(this.events[t], function(t) {
                    t(e)
                }
                ),
                "error" === t && delete this.events[t]
            }
        },
        _ = {
            config: T,
            contextName: t,
            registry: k,
            defined: C,
            urlFetched: P,
            defQueue: S,
            defQueueMap: {},
            Module: b,
            makeModuleMap: s,
            nextTick: req.nextTick,
            onError: u,
            configure: function(t) {
                t.baseUrl && "/" !== t.baseUrl.charAt(t.baseUrl.length - 1) && (t.baseUrl += "/");
                var e = T.shim
                  , n = {
                    paths: !0,
                    bundles: !0,
                    config: !0,
                    map: !0
                };
                eachProp(t, function(t, e) {
                    n[e] ? (T[e] || (T[e] = {}),
                    mixin(T[e], t, !0, !0)) : T[e] = t
                }
                ),
                t.bundles && eachProp(t.bundles, function(t, e) {
                    each(t, function(t) {
                        t !== e && (L[t] = e)
                    }
                    )
                }
                ),
                t.shim && (eachProp(t.shim, function(t, n) {
                    isArray(t) && (t = {
                        deps: t
                    }),
                    !t.exports && !t.init || t.exportsFn || (t.exportsFn = _.makeShimExports(t)),
                    e[n] = t
                }
                ),
                T.shim = e),
                t.packages && each(t.packages, function(t) {
                    var e, n;
                    t = "string" == typeof t ? {
                        name: t
                    } : t,
                    n = t.name,
                    e = t.location,
                    e && (T.paths[n] = t.location),
                    T.pkgs[n] = t.name + "/" + (t.main || "main").replace(currDirRegExp, "").replace(jsSuffixRegExp, "")
                }
                ),
                eachProp(k, function(t, e) {
                    t.inited || t.map.unnormalized || (t.map = s(e, null , !0))
                }
                ),
                (t.deps || t.callback) && _.require(t.deps || [], t.callback)
            },
            makeShimExports: function(t) {
                function e() {
                    var e;
                    return t.init && (e = t.init.apply(global, arguments)),
                    e || t.exports && getGlobal(t.exports)
                }
                return e
            },
            makeRequire: function(e, o) {
                function r(n, i, l) {
                    var c, h, d;
                    return o.enableBuildCallback && i && isFunction(i) && (i.__requireJsBuild = !0),
                    "string" == typeof n ? isFunction(i) ? u(makeError("requireargs", "Invalid require call"), l) : e && hasProp(w, n) ? w[n](k[e.id]) : req.get ? req.get(_, n, e, r) : (h = s(n, e, !1, !0),
                    c = h.id,
                    hasProp(C, c) ? C[c] : u(makeError("notloaded", 'Module name "' + c + '" has not been loaded yet for context: ' + t + (e ? "" : ". Use require([])")))) : (v(),
                    _.nextTick(function() {
                        v(),
                        d = a(s(null , e)),
                        d.skipMap = o.skipMap,
                        d.init(n, i, l, {
                            enabled: !0
                        }),
                        p()
                    }
                    ),
                    r)
                }
                return o = o || {},
                mixin(r, {
                    isBrowser: isBrowser,
                    toUrl: function(t) {
                        var i, o = t.lastIndexOf("."), r = t.split("/")[0], s = "." === r || ".." === r;
                        return -1 !== o && (!s || o > 1) && (i = t.substring(o, t.length),
                        t = t.substring(0, o)),
                        _.nameToUrl(n(t, e && e.id, !0), i, !0)
                    },
                    defined: function(t) {
                        return hasProp(C, s(t, e, !1, !0).id)
                    },
                    specified: function(t) {
                        return t = s(t, e, !1, !0).id,
                        hasProp(C, t) || hasProp(k, t)
                    }
                }),
                e || (r.undef = function(t) {
                    c();
                    var n = s(t, e, !0)
                      , o = getOwn(k, t);
                    o.undefed = !0,
                    i(t),
                    delete C[t],
                    delete P[n.url],
                    delete D[t],
                    eachReverse(S, function(e, n) {
                        e[0] === t && S.splice(n, 1)
                    }
                    ),
                    delete _.defQueueMap[t],
                    o && (o.events.defined && (D[t] = o.events),
                    h(t))
                }
                ),
                r
            },
            enable: function(t) {
                var e = getOwn(k, t.id);
                e && a(t).enable()
            },
            completeLoad: function(t) {
                var e, n, i, r = getOwn(T.shim, t) || {}, s = r.exports;
                for (c(); S.length; ) {
                    if (n = S.shift(),
                    null  === n[0]) {
                        if (n[0] = t,
                        e)
                            break;
                        e = !0
                    } else
                        n[0] === t && (e = !0);
                    f(n)
                }
                if (_.defQueueMap = {},
                i = getOwn(k, t),
                !e && !hasProp(C, t) && i && !i.inited) {
                    if (!(!T.enforceDefine || s && getGlobal(s)))
                        return o(t) ? void 0 : u(makeError("nodefine", "No define call for " + t, null , [t]));
                    f([t, r.deps || [], r.exportsFn])
                }
                p()
            },
            nameToUrl: function(t, e, n) {
                var i, o, r, s, a, l, u, c = getOwn(T.pkgs, t);
                if (c && (t = c),
                u = getOwn(L, t))
                    return _.nameToUrl(u, e, n);
                if (req.jsExtRegExp.test(t))
                    a = t + (e || "");
                else {
                    for (i = T.paths,
                    o = t.split("/"),
                    r = o.length; r > 0; r -= 1)
                        if (s = o.slice(0, r).join("/"),
                        l = getOwn(i, s)) {
                            isArray(l) && (l = l[0]),
                            o.splice(0, r, l);
                            break
                        }
                    a = o.join("/"),
                    a += e || (/^data\:|\?/.test(a) || n ? "" : ".js"),
                    a = ("/" === a.charAt(0) || a.match(/^[\w\+\.\-]+:/) ? "" : T.baseUrl) + a
                }
                return T.urlArgs ? a + ((-1 === a.indexOf("?") ? "?" : "&") + T.urlArgs) : a
            },
            load: function(t, e) {
                req.load(_, t, e)
            },
            execCb: function(t, e, n, i) {
                return e.apply(i, n)
            },
            onScriptLoad: function(t) {
                if ("load" === t.type || readyRegExp.test((t.currentTarget || t.srcElement).readyState)) {
                    interactiveScript = null ;
                    var e = g(t);
                    _.completeLoad(e.id)
                }
            },
            onScriptError: function(t) {
                var e = g(t);
                return o(e.id) ? void 0 : u(makeError("scripterror", "Script error for: " + e.id, t, [e.id]))
            }
        },
        _.require = _.makeRequire(),
        _
    }
    function getInteractiveScript() {
        return interactiveScript && "interactive" === interactiveScript.readyState ? interactiveScript : (eachReverse(scripts(), function(t) {
            return "interactive" === t.readyState ? interactiveScript = t : void 0
        }
        ),
        interactiveScript)
    }
    var req, s, head, baseElement, dataMain, src, interactiveScript, currentlyAddingScript, mainScript, subPath, version = "2.1.20", commentRegExp = /(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm, cjsRequireRegExp = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g, jsSuffixRegExp = /\.js$/, currDirRegExp = /^\.\//, op = Object.prototype, ostring = op.toString, hasOwn = op.hasOwnProperty, ap = Array.prototype, isBrowser = !("undefined" == typeof window || "undefined" == typeof navigator || !window.document), isWebWorker = !isBrowser && "undefined" != typeof importScripts, readyRegExp = isBrowser && "PLAYSTATION 3" === navigator.platform ? /^complete$/ : /^(complete|loaded)$/, defContextName = "_", isOpera = "undefined" != typeof opera && "[object Opera]" === opera.toString(), contexts = {}, cfg = {}, globalDefQueue = [], useInteractive = !1;
    if ("undefined" == typeof define) {
        if ("undefined" != typeof requirejs) {
            if (isFunction(requirejs))
                return;
            cfg = requirejs,
            requirejs = void 0
        }
        "undefined" == typeof require || isFunction(require) || (cfg = require,
        require = void 0),
        req = requirejs = function(t, e, n, i) {
            var o, r, s = defContextName;
            return isArray(t) || "string" == typeof t || (r = t,
            isArray(e) ? (t = e,
            e = n,
            n = i) : t = []),
            r && r.context && (s = r.context),
            o = getOwn(contexts, s),
            o || (o = contexts[s] = req.s.newContext(s)),
            r && o.configure(r),
            o.require(t, e, n)
        }
        ,
        req.config = function(t) {
            return req(t)
        }
        ,
        req.nextTick = "undefined" != typeof setTimeout ? function(t) {
            setTimeout(t, 4)
        }
         : function(t) {
            t()
        }
        ,
        require || (require = req),
        req.version = version,
        req.jsExtRegExp = /^\/|:|\?|\.js$/,
        req.isBrowser = isBrowser,
        s = req.s = {
            contexts: contexts,
            newContext: newContext
        },
        req({}),
        each(["toUrl", "undef", "defined", "specified"], function(t) {
            req[t] = function() {
                var e = contexts[defContextName];
                return e.require[t].apply(e, arguments)
            }
        }
        ),
        isBrowser && (head = s.head = document.getElementsByTagName("head")[0],
        baseElement = document.getElementsByTagName("base")[0],
        baseElement && (head = s.head = baseElement.parentNode)),
        req.onError = defaultOnError,
        req.createNode = function(t, e, n) {
            var i = t.xhtml ? document.createElementNS("http://www.w3.org/1999/xhtml", "html:script") : document.createElement("script");
            return i.type = t.scriptType || "text/javascript",
            i.charset = "utf-8",
            i.async = !0,
            i
        }
        ,
        req.load = function(t, e, n) {
            var i, o = t && t.config || {};
            if (isBrowser)
                return i = req.createNode(o, e, n),
                o.onNodeCreated && o.onNodeCreated(i, o, e, n),
                i.setAttribute("data-requirecontext", t.contextName),
                i.setAttribute("data-requiremodule", e),
                !i.attachEvent || i.attachEvent.toString && i.attachEvent.toString().indexOf("[native code") < 0 || isOpera ? (i.addEventListener("load", t.onScriptLoad, !1),
                i.addEventListener("error", t.onScriptError, !1)) : (useInteractive = !0,
                i.attachEvent("onreadystatechange", t.onScriptLoad)),
                i.src = n,
                currentlyAddingScript = i,
                baseElement ? head.insertBefore(i, baseElement) : head.appendChild(i),
                currentlyAddingScript = null ,
                i;
            if (isWebWorker)
                try {
                    importScripts(n),
                    t.completeLoad(e)
                } catch (r) {
                    t.onError(makeError("importscripts", "importScripts failed for " + e + " at " + n, r, [e]))
                }
        }
        ,
        isBrowser && !cfg.skipDataMain && eachReverse(scripts(), function(t) {
            return head || (head = t.parentNode),
            dataMain = t.getAttribute("data-main"),
            dataMain ? (mainScript = dataMain,
            cfg.baseUrl || (src = mainScript.split("/"),
            mainScript = src.pop(),
            subPath = src.length ? src.join("/") + "/" : "./",
            cfg.baseUrl = subPath),
            mainScript = mainScript.replace(jsSuffixRegExp, ""),
            req.jsExtRegExp.test(mainScript) && (mainScript = dataMain),
            cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript],
            !0) : void 0
        }
        ),
        define = function(t, e, n) {
            var i, o;
            "string" != typeof t && (n = e,
            e = t,
            t = null ),
            isArray(e) || (n = e,
            e = null ),
            !e && isFunction(n) && (e = [],
            n.length && (n.toString().replace(commentRegExp, "").replace(cjsRequireRegExp, function(t, n) {
                e.push(n)
            }
            ),
            e = (1 === n.length ? ["require"] : ["require", "exports", "module"]).concat(e))),
            useInteractive && (i = currentlyAddingScript || getInteractiveScript(),
            i && (t || (t = i.getAttribute("data-requiremodule")),
            o = contexts[i.getAttribute("data-requirecontext")])),
            o ? (o.defQueue.push([t, e, n]),
            o.defQueueMap[t] = !0) : globalDefQueue.push([t, e, n])
        }
        ,
        define.amd = {
            jQuery: !0
        },
        req.exec = function(text) {
            return eval(text)
        }
        ,
        req(cfg)
    }
}
(this),
define("../../../lib/bower-components/requirejs/require", function() {}
),
require.config({
    baseUrl: "/src/js/module",
    paths: {
        "require-config": "../require-config",
        "require-online-config": "../require-online-config",
        "enketo-js": "../../../lib/enketo-core/src/js",
        "enketo-widget": "../../../lib/enketo-core/src/widget",
        "enketo-config": "../config.json",
        text: "../../../lib/enketo-core/lib/text/text",
        xpath: "../../../lib/enketo-core/lib/xpath/build/enketo-xpathjs",
        "file-manager": "file-manager",
        "file-system": "../../../lib/file-system/src/file-system",
        "jquery.xpath": "../../../lib/enketo-core/lib/jquery-xpath/jquery.xpath",
        bootstrap: "../../../lib/bower-components/bootstrap-sass-official/assets/javascripts/bootstrap",
        "bootstrap-slider": "../../../lib/enketo-core/lib/bootstrap-slider/js/bootstrap-slider",
        jquery: "../../../lib/bower-components/jquery/dist/jquery",
        "jquery.touchswipe": "../../../lib/enketo-core/lib/jquery-touchswipe/jquery.touchSwipe",
        "file-saver": "../../../lib/bower-components/file-saver/FileSaver",
        Blob: "../../../lib/bower-components/blob/Blob",
        vkbeautify: "../../../lib/vkbeautify/vkbeautify",
        leaflet: "../../../lib/bower-components/leaflet/dist/leaflet",
        q: "../../../lib/bower-components/q/q",
        print: "../../../lib/enketo-core/src/js/print",
        "merge-xml": "../../../lib/bower-components/mergexml/mergexml"
    },
    shim: {
        xpath: {
            exports: "XPathJS"
        },
        bootstrap: {
            deps: ["jquery"],
            exports: "jQuery.fn.popover"
        },
        "enketo-widget/date/bootstrap3-datepicker/js/bootstrap-datepicker": {
            deps: ["jquery"],
            exports: "jQuery.fn.datepicker"
        },
        "enketo-widget/time/bootstrap3-timepicker/js/bootstrap-timepicker": {
            deps: ["jquery"],
            exports: "jQuery.fn.timepicker"
        },
        "file-saver": {
            exports: "saveAs"
        },
        Blob: {
            exports: "Blob"
        },
        vkbeautify: {
            exports: "vkbeautify"
        },
        leaflet: {
            exports: "L"
        }
    }
}),
define("require-config", function() {}
),
define("settings", [], function() {
    "use strict";
    function t() {
        for (var t, e, n = window.location.search.substring(1), i = n.split("&"), o = {}, r = 0; r < i.length; r++) {
            var s = i[r].split("=");
            s[0].length > 0 && (t = decodeURIComponent(s[1]),
            e = "true" === t ? !0 : "false" === t ? !1 : t,
            o[s[0]] = e)
        }
        return o
    }
    var e = t()
      , n = []
      , i = [{
        q: "return",
        s: "returnURL"
    }, {
        q: "returnURL",
        s: "returnURL"
    }, {
        q: "showbranch",
        s: "showBranch"
    }, {
        q: "debug",
        s: "debug"
    }, {
        q: "touch",
        s: "touch"
    }, {
        q: "server",
        s: "serverURL"
    }, {
        q: "serverURL",
        s: "serverURL"
    }, {
        q: "form",
        s: "formURL"
    }, {
        q: "id",
        s: "formId"
    }, {
        q: "formName",
        s: "formId"
    }, {
        q: "instanceId",
        s: "instanceId"
    }, {
        q: "entityId",
        s: "entityId"
    }, {
        q: "supportEmail",
        s: "supportEmail"
    }, {
        q: "source",
        s: "source"
    }];
    return i.forEach(function(t, i) {
        (e[t.q] || "undefined" != typeof settings && settings[t.q]) && (n[t.s] = e[t.q] || settings[t.q] || null )
    }
    ),
    n
}
),
define("performance", ["settings"], function(t) {
    var e = [];
    window.onload = function() {
        setTimeout(function() {
            var n, i, o, r, s = {};
            if (window.performance) {
                i = window.performance.timing,
                o = i.loadEventEnd - i.responseEnd,
                "undefined" != typeof t && t.debug && (r = window.localStorage.getItem("__loadLog"),
                n = r ? JSON.parse(r) : [],
                n.push(o),
                n.length > 10 && n.shift(),
                window.localStorage.setItem("__loadLog", JSON.stringify(n))),
                e.push("total loading time according to window.performance: " + o + " milliseconds");
                for (var a in window.performance.timing)
                    s[a] = window.performance.timing[a];
                window.opener && window.performance && window.postMessage && window.opener.postMessage(JSON.stringify(s), "*"),
                $(e).each(function(t, e) {
                    console.log(e)
                }
                )
            }
        }
        , 0)
    }
}
),
define("enketo-js/support", [], function() {
    var t = {
        inputtypes: {}
    }
      , e = ["date", "datetime", "time"];
    return e.forEach(function(e) {
        var n = document.createElement("input");
        n.setAttribute("type", e),
        t.inputtypes[e] = "text" !== n.type
    }
    ),
    "ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch ? (t.touch = !0,
    document.documentElement.classList += " touch") : t.touch = !1,
    t
}
),
function(t, e) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = t.document ? e(t, !0) : function(t) {
        if (!t.document)
            throw new Error("jQuery requires a window with a document");
        return e(t)
    }
     : e(t)
}
("undefined" != typeof window ? window : this, function(t, e) {
    function n(t) {
        var e = "length" in t && t.length
          , n = K.type(t);
        return "function" === n || K.isWindow(t) ? !1 : 1 === t.nodeType && e ? !0 : "array" === n || 0 === e || "number" == typeof e && e > 0 && e - 1 in t
    }
    function i(t, e, n) {
        if (K.isFunction(e))
            return K.grep(t, function(t, i) {
                return !!e.call(t, i, t) !== n
            }
            );
        if (e.nodeType)
            return K.grep(t, function(t) {
                return t === e !== n
            }
            );
        if ("string" == typeof e) {
            if (at.test(e))
                return K.filter(e, t, n);
            e = K.filter(e, t)
        }
        return K.grep(t, function(t) {
            return W.call(e, t) >= 0 !== n
        }
        )
    }
    function o(t, e) {
        for (; (t = t[e]) && 1 !== t.nodeType; )
            ;
        return t
    }
    function r(t) {
        var e = ft[t] = {};
        return K.each(t.match(pt) || [], function(t, n) {
            e[n] = !0
        }
        ),
        e
    }
    function s() {
        J.removeEventListener("DOMContentLoaded", s, !1),
        t.removeEventListener("load", s, !1),
        K.ready()
    }
    function a() {
        Object.defineProperty(this.cache = {}, 0, {
            get: function() {
                return {}
            }
        }),
        this.expando = K.expando + a.uid++
    }
    function l(t, e, n) {
        var i;
        if (void 0 === n && 1 === t.nodeType)
            if (i = "data-" + e.replace(_t, "-$1").toLowerCase(),
            n = t.getAttribute(i),
            "string" == typeof n) {
                try {
                    n = "true" === n ? !0 : "false" === n ? !1 : "null" === n ? null  : +n + "" === n ? +n : bt.test(n) ? K.parseJSON(n) : n
                } catch (o) {}
                yt.set(t, e, n)
            } else
                n = void 0;
        return n
    }
    function u() {
        return !0
    }
    function c() {
        return !1
    }
    function h() {
        try {
            return J.activeElement
        } catch (t) {}
    }
    function d(t, e) {
        return K.nodeName(t, "table") && K.nodeName(11 !== e.nodeType ? e : e.firstChild, "tr") ? t.getElementsByTagName("tbody")[0] || t.appendChild(t.ownerDocument.createElement("tbody")) : t
    }
    function p(t) {
        return t.type = (null  !== t.getAttribute("type")) + "/" + t.type,
        t
    }
    function f(t) {
        var e = Rt.exec(t.type);
        return e ? t.type = e[1] : t.removeAttribute("type"),
        t
    }
    function m(t, e) {
        for (var n = 0, i = t.length; i > n; n++)
            vt.set(t[n], "globalEval", !e || vt.get(e[n], "globalEval"))
    }
    function g(t, e) {
        var n, i, o, r, s, a, l, u;
        if (1 === e.nodeType) {
            if (vt.hasData(t) && (r = vt.access(t),
            s = vt.set(e, r),
            u = r.events)) {
                delete s.handle,
                s.events = {};
                for (o in u)
                    for (n = 0,
                    i = u[o].length; i > n; n++)
                        K.event.add(e, o, u[o][n])
            }
            yt.hasData(t) && (a = yt.access(t),
            l = K.extend({}, a),
            yt.set(e, l))
        }
    }
    function v(t, e) {
        var n = t.getElementsByTagName ? t.getElementsByTagName(e || "*") : t.querySelectorAll ? t.querySelectorAll(e || "*") : [];
        return void 0 === e || e && K.nodeName(t, e) ? K.merge([t], n) : n
    }
    function y(t, e) {
        var n = e.nodeName.toLowerCase();
        "input" === n && kt.test(t.type) ? e.checked = t.checked : ("input" === n || "textarea" === n) && (e.defaultValue = t.defaultValue)
    }
    function b(e, n) {
        var i, o = K(n.createElement(e)).appendTo(n.body), r = t.getDefaultComputedStyle && (i = t.getDefaultComputedStyle(o[0])) ? i.display : K.css(o[0], "display");
        return o.detach(),
        r
    }
    function _(t) {
        var e = J
          , n = Ft[t];
        return n || (n = b(t, e),
        "none" !== n && n || (Bt = (Bt || K("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),
        e = Bt[0].contentDocument,
        e.write(),
        e.close(),
        n = b(t, e),
        Bt.detach()),
        Ft[t] = n),
        n
    }
    function w(t, e, n) {
        var i, o, r, s, a = t.style;
        return n = n || zt(t),
        n && (s = n.getPropertyValue(e) || n[e]),
        n && ("" !== s || K.contains(t.ownerDocument, t) || (s = K.style(t, e)),
        qt.test(s) && $t.test(e) && (i = a.width,
        o = a.minWidth,
        r = a.maxWidth,
        a.minWidth = a.maxWidth = a.width = s,
        s = n.width,
        a.width = i,
        a.minWidth = o,
        a.maxWidth = r)),
        void 0 !== s ? s + "" : s
    }
    function x(t, e) {
        return {
            get: function() {
                return t() ? void delete this.get : (this.get = e).apply(this, arguments)
            }
        }
    }
    function T(t, e) {
        if (e in t)
            return e;
        for (var n = e[0].toUpperCase() + e.slice(1), i = e, o = Yt.length; o--; )
            if (e = Yt[o] + n,
            e in t)
                return e;
        return i
    }
    function k(t, e, n) {
        var i = Ht.exec(e);
        return i ? Math.max(0, i[1] - (n || 0)) + (i[2] || "px") : e
    }
    function E(t, e, n, i, o) {
        for (var r = n === (i ? "border" : "content") ? 4 : "width" === e ? 1 : 0, s = 0; 4 > r; r += 2)
            "margin" === n && (s += K.css(t, n + xt[r], !0, o)),
            i ? ("content" === n && (s -= K.css(t, "padding" + xt[r], !0, o)),
            "margin" !== n && (s -= K.css(t, "border" + xt[r] + "Width", !0, o))) : (s += K.css(t, "padding" + xt[r], !0, o),
            "padding" !== n && (s += K.css(t, "border" + xt[r] + "Width", !0, o)));
        return s
    }
    function D(t, e, n) {
        var i = !0
          , o = "width" === e ? t.offsetWidth : t.offsetHeight
          , r = zt(t)
          , s = "border-box" === K.css(t, "boxSizing", !1, r);
        if (0 >= o || null  == o) {
            if (o = w(t, e, r),
            (0 > o || null  == o) && (o = t.style[e]),
            qt.test(o))
                return o;
            i = s && (G.boxSizingReliable() || o === t.style[e]),
            o = parseFloat(o) || 0
        }
        return o + E(t, e, n || (s ? "border" : "content"), i, r) + "px"
    }
    function S(t, e) {
        for (var n, i, o, r = [], s = 0, a = t.length; a > s; s++)
            i = t[s],
            i.style && (r[s] = vt.get(i, "olddisplay"),
            n = i.style.display,
            e ? (r[s] || "none" !== n || (i.style.display = ""),
            "" === i.style.display && Tt(i) && (r[s] = vt.access(i, "olddisplay", _(i.nodeName)))) : (o = Tt(i),
            "none" === n && o || vt.set(i, "olddisplay", o ? n : K.css(i, "display"))));
        for (s = 0; a > s; s++)
            i = t[s],
            i.style && (e && "none" !== i.style.display && "" !== i.style.display || (i.style.display = e ? r[s] || "" : "none"));
        return t
    }
    function C(t, e, n, i, o) {
        return new C.prototype.init(t,e,n,i,o)
    }
    function P() {
        return setTimeout(function() {
            Gt = void 0
        }
        ),
        Gt = K.now()
    }
    function L(t, e) {
        var n, i = 0, o = {
            height: t
        };
        for (e = e ? 1 : 0; 4 > i; i += 2 - e)
            n = xt[i],
            o["margin" + n] = o["padding" + n] = t;
        return e && (o.opacity = o.width = t),
        o
    }
    function N(t, e, n) {
        for (var i, o = (ne[e] || []).concat(ne["*"]), r = 0, s = o.length; s > r; r++)
            if (i = o[r].call(n, e, t))
                return i
    }
    function M(t, e, n) {
        var i, o, r, s, a, l, u, c, h = this, d = {}, p = t.style, f = t.nodeType && Tt(t), m = vt.get(t, "fxshow");
        n.queue || (a = K._queueHooks(t, "fx"),
        null  == a.unqueued && (a.unqueued = 0,
        l = a.empty.fire,
        a.empty.fire = function() {
            a.unqueued || l()
        }
        ),
        a.unqueued++,
        h.always(function() {
            h.always(function() {
                a.unqueued--,
                K.queue(t, "fx").length || a.empty.fire()
            }
            )
        }
        )),
        1 === t.nodeType && ("height" in e || "width" in e) && (n.overflow = [p.overflow, p.overflowX, p.overflowY],
        u = K.css(t, "display"),
        c = "none" === u ? vt.get(t, "olddisplay") || _(t.nodeName) : u,
        "inline" === c && "none" === K.css(t, "float") && (p.display = "inline-block")),
        n.overflow && (p.overflow = "hidden",
        h.always(function() {
            p.overflow = n.overflow[0],
            p.overflowX = n.overflow[1],
            p.overflowY = n.overflow[2]
        }
        ));
        for (i in e)
            if (o = e[i],
            Qt.exec(o)) {
                if (delete e[i],
                r = r || "toggle" === o,
                o === (f ? "hide" : "show")) {
                    if ("show" !== o || !m || void 0 === m[i])
                        continue;f = !0
                }
                d[i] = m && m[i] || K.style(t, i)
            } else
                u = void 0;
        if (K.isEmptyObject(d))
            "inline" === ("none" === u ? _(t.nodeName) : u) && (p.display = u);
        else {
            m ? "hidden" in m && (f = m.hidden) : m = vt.access(t, "fxshow", {}),
            r && (m.hidden = !f),
            f ? K(t).show() : h.done(function() {
                K(t).hide()
            }
            ),
            h.done(function() {
                var e;
                vt.remove(t, "fxshow");
                for (e in d)
                    K.style(t, e, d[e])
            }
            );
            for (i in d)
                s = N(f ? m[i] : 0, i, h),
                i in m || (m[i] = s.start,
                f && (s.end = s.start,
                s.start = "width" === i || "height" === i ? 1 : 0))
        }
    }
    function A(t, e) {
        var n, i, o, r, s;
        for (n in t)
            if (i = K.camelCase(n),
            o = e[i],
            r = t[n],
            K.isArray(r) && (o = r[1],
            r = t[n] = r[0]),
            n !== i && (t[i] = r,
            delete t[n]),
            s = K.cssHooks[i],
            s && "expand" in s) {
                r = s.expand(r),
                delete t[i];
                for (n in r)
                    n in t || (t[n] = r[n],
                    e[n] = o)
            } else
                e[i] = o
    }
    function I(t, e, n) {
        var i, o, r = 0, s = ee.length, a = K.Deferred().always(function() {
            delete l.elem
        }
        ), l = function() {
            if (o)
                return !1;
            for (var e = Gt || P(), n = Math.max(0, u.startTime + u.duration - e), i = n / u.duration || 0, r = 1 - i, s = 0, l = u.tweens.length; l > s; s++)
                u.tweens[s].run(r);
            return a.notifyWith(t, [u, r, n]),
            1 > r && l ? n : (a.resolveWith(t, [u]),
            !1)
        }
        , u = a.promise({
            elem: t,
            props: K.extend({}, e),
            opts: K.extend(!0, {
                specialEasing: {}
            }, n),
            originalProperties: e,
            originalOptions: n,
            startTime: Gt || P(),
            duration: n.duration,
            tweens: [],
            createTween: function(e, n) {
                var i = K.Tween(t, u.opts, e, n, u.opts.specialEasing[e] || u.opts.easing);
                return u.tweens.push(i),
                i
            },
            stop: function(e) {
                var n = 0
                  , i = e ? u.tweens.length : 0;
                if (o)
                    return this;
                for (o = !0; i > n; n++)
                    u.tweens[n].run(1);
                return e ? a.resolveWith(t, [u, e]) : a.rejectWith(t, [u, e]),
                this
            }
        }), c = u.props;
        for (A(c, u.opts.specialEasing); s > r; r++)
            if (i = ee[r].call(u, t, c, u.opts))
                return i;
        return K.map(c, N, u),
        K.isFunction(u.opts.start) && u.opts.start.call(t, u),
        K.fx.timer(K.extend(l, {
            elem: t,
            anim: u,
            queue: u.opts.queue
        })),
        u.progress(u.opts.progress).done(u.opts.done, u.opts.complete).fail(u.opts.fail).always(u.opts.always)
    }
    function O(t) {
        return function(e, n) {
            "string" != typeof e && (n = e,
            e = "*");
            var i, o = 0, r = e.toLowerCase().match(pt) || [];
            if (K.isFunction(n))
                for (; i = r[o++]; )
                    "+" === i[0] ? (i = i.slice(1) || "*",
                    (t[i] = t[i] || []).unshift(n)) : (t[i] = t[i] || []).push(n)
        }
    }
    function R(t, e, n, i) {
        function o(a) {
            var l;
            return r[a] = !0,
            K.each(t[a] || [], function(t, a) {
                var u = a(e, n, i);
                return "string" != typeof u || s || r[u] ? s ? !(l = u) : void 0 : (e.dataTypes.unshift(u),
                o(u),
                !1)
            }
            ),
            l
        }
        var r = {}
          , s = t === be;
        return o(e.dataTypes[0]) || !r["*"] && o("*")
    }
    function U(t, e) {
        var n, i, o = K.ajaxSettings.flatOptions || {};
        for (n in e)
            void 0 !== e[n] && ((o[n] ? t : i || (i = {}))[n] = e[n]);
        return i && K.extend(!0, t, i),
        t
    }
    function j(t, e, n) {
        for (var i, o, r, s, a = t.contents, l = t.dataTypes; "*" === l[0]; )
            l.shift(),
            void 0 === i && (i = t.mimeType || e.getResponseHeader("Content-Type"));
        if (i)
            for (o in a)
                if (a[o] && a[o].test(i)) {
                    l.unshift(o);
                    break
                }
        if (l[0] in n)
            r = l[0];
        else {
            for (o in n) {
                if (!l[0] || t.converters[o + " " + l[0]]) {
                    r = o;
                    break
                }
                s || (s = o)
            }
            r = r || s
        }
        return r ? (r !== l[0] && l.unshift(r),
        n[r]) : void 0
    }
    function B(t, e, n, i) {
        var o, r, s, a, l, u = {}, c = t.dataTypes.slice();
        if (c[1])
            for (s in t.converters)
                u[s.toLowerCase()] = t.converters[s];
        for (r = c.shift(); r; )
            if (t.responseFields[r] && (n[t.responseFields[r]] = e),
            !l && i && t.dataFilter && (e = t.dataFilter(e, t.dataType)),
            l = r,
            r = c.shift())
                if ("*" === r)
                    r = l;
                else if ("*" !== l && l !== r) {
                    if (s = u[l + " " + r] || u["* " + r],
                    !s)
                        for (o in u)
                            if (a = o.split(" "),
                            a[1] === r && (s = u[l + " " + a[0]] || u["* " + a[0]])) {
                                s === !0 ? s = u[o] : u[o] !== !0 && (r = a[0],
                                c.unshift(a[1]));
                                break
                            }
                    if (s !== !0)
                        if (s && t["throws"])
                            e = s(e);
                        else
                            try {
                                e = s(e)
                            } catch (h) {
                                return {
                                    state: "parsererror",
                                    error: s ? h : "No conversion from " + l + " to " + r
                                }
                            }
                }
        return {
            state: "success",
            data: e
        }
    }
    function F(t, e, n, i) {
        var o;
        if (K.isArray(e))
            K.each(e, function(e, o) {
                n || ke.test(t) ? i(t, o) : F(t + "[" + ("object" == typeof o ? e : "") + "]", o, n, i)
            }
            );
        else if (n || "object" !== K.type(e))
            i(t, e);
        else
            for (o in e)
                F(t + "[" + o + "]", e[o], n, i)
    }
    function $(t) {
        return K.isWindow(t) ? t : 9 === t.nodeType && t.defaultView
    }
    var q = []
      , z = q.slice
      , V = q.concat
      , H = q.push
      , W = q.indexOf
      , Z = {}
      , X = Z.toString
      , Y = Z.hasOwnProperty
      , G = {}
      , J = t.document
      , Q = "2.1.4"
      , K = function(t, e) {
        return new K.fn.init(t,e)
    }
      , tt = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g
      , et = /^-ms-/
      , nt = /-([\da-z])/gi
      , it = function(t, e) {
        return e.toUpperCase()
    }
    ;
    K.fn = K.prototype = {
        jquery: Q,
        constructor: K,
        selector: "",
        length: 0,
        toArray: function() {
            return z.call(this)
        },
        get: function(t) {
            return null  != t ? 0 > t ? this[t + this.length] : this[t] : z.call(this)
        },
        pushStack: function(t) {
            var e = K.merge(this.constructor(), t);
            return e.prevObject = this,
            e.context = this.context,
            e
        },
        each: function(t, e) {
            return K.each(this, t, e)
        },
        map: function(t) {
            return this.pushStack(K.map(this, function(e, n) {
                return t.call(e, n, e)
            }
            ))
        },
        slice: function() {
            return this.pushStack(z.apply(this, arguments))
        },
        first: function() {
            return this.eq(0)
        },
        last: function() {
            return this.eq(-1)
        },
        eq: function(t) {
            var e = this.length
              , n = +t + (0 > t ? e : 0);
            return this.pushStack(n >= 0 && e > n ? [this[n]] : [])
        },
        end: function() {
            return this.prevObject || this.constructor(null )
        },
        push: H,
        sort: q.sort,
        splice: q.splice
    },
    K.extend = K.fn.extend = function() {
        var t, e, n, i, o, r, s = arguments[0] || {}, a = 1, l = arguments.length, u = !1;
        for ("boolean" == typeof s && (u = s,
        s = arguments[a] || {},
        a++),
        "object" == typeof s || K.isFunction(s) || (s = {}),
        a === l && (s = this,
        a--); l > a; a++)
            if (null  != (t = arguments[a]))
                for (e in t)
                    n = s[e],
                    i = t[e],
                    s !== i && (u && i && (K.isPlainObject(i) || (o = K.isArray(i))) ? (o ? (o = !1,
                    r = n && K.isArray(n) ? n : []) : r = n && K.isPlainObject(n) ? n : {},
                    s[e] = K.extend(u, r, i)) : void 0 !== i && (s[e] = i));
        return s
    }
    ,
    K.extend({
        expando: "jQuery" + (Q + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(t) {
            throw new Error(t)
        },
        noop: function() {},
        isFunction: function(t) {
            return "function" === K.type(t)
        },
        isArray: Array.isArray,
        isWindow: function(t) {
            return null  != t && t === t.window;
        },
        isNumeric: function(t) {
            return !K.isArray(t) && t - parseFloat(t) + 1 >= 0
        },
        isPlainObject: function(t) {
            return "object" !== K.type(t) || t.nodeType || K.isWindow(t) ? !1 : t.constructor && !Y.call(t.constructor.prototype, "isPrototypeOf") ? !1 : !0
        },
        isEmptyObject: function(t) {
            var e;
            for (e in t)
                return !1;
            return !0
        },
        type: function(t) {
            return null  == t ? t + "" : "object" == typeof t || "function" == typeof t ? Z[X.call(t)] || "object" : typeof t
        },
        globalEval: function(t) {
            var e, n = eval;
            t = K.trim(t),
            t && (1 === t.indexOf("use strict") ? (e = J.createElement("script"),
            e.text = t,
            J.head.appendChild(e).parentNode.removeChild(e)) : n(t))
        },
        camelCase: function(t) {
            return t.replace(et, "ms-").replace(nt, it)
        },
        nodeName: function(t, e) {
            return t.nodeName && t.nodeName.toLowerCase() === e.toLowerCase()
        },
        each: function(t, e, i) {
            var o, r = 0, s = t.length, a = n(t);
            if (i) {
                if (a)
                    for (; s > r && (o = e.apply(t[r], i),
                    o !== !1); r++)
                        ;
                else
                    for (r in t)
                        if (o = e.apply(t[r], i),
                        o === !1)
                            break
            } else if (a)
                for (; s > r && (o = e.call(t[r], r, t[r]),
                o !== !1); r++)
                    ;
            else
                for (r in t)
                    if (o = e.call(t[r], r, t[r]),
                    o === !1)
                        break;
            return t
        },
        trim: function(t) {
            return null  == t ? "" : (t + "").replace(tt, "")
        },
        makeArray: function(t, e) {
            var i = e || [];
            return null  != t && (n(Object(t)) ? K.merge(i, "string" == typeof t ? [t] : t) : H.call(i, t)),
            i
        },
        inArray: function(t, e, n) {
            return null  == e ? -1 : W.call(e, t, n)
        },
        merge: function(t, e) {
            for (var n = +e.length, i = 0, o = t.length; n > i; i++)
                t[o++] = e[i];
            return t.length = o,
            t
        },
        grep: function(t, e, n) {
            for (var i, o = [], r = 0, s = t.length, a = !n; s > r; r++)
                i = !e(t[r], r),
                i !== a && o.push(t[r]);
            return o
        },
        map: function(t, e, i) {
            var o, r = 0, s = t.length, a = n(t), l = [];
            if (a)
                for (; s > r; r++)
                    o = e(t[r], r, i),
                    null  != o && l.push(o);
            else
                for (r in t)
                    o = e(t[r], r, i),
                    null  != o && l.push(o);
            return V.apply([], l)
        },
        guid: 1,
        proxy: function(t, e) {
            var n, i, o;
            return "string" == typeof e && (n = t[e],
            e = t,
            t = n),
            K.isFunction(t) ? (i = z.call(arguments, 2),
            o = function() {
                return t.apply(e || this, i.concat(z.call(arguments)))
            }
            ,
            o.guid = t.guid = t.guid || K.guid++,
            o) : void 0
        },
        now: Date.now,
        support: G
    }),
    K.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(t, e) {
        Z["[object " + e + "]"] = e.toLowerCase()
    }
    );
    var ot = function(t) {
        function e(t, e, n, i) {
            var o, r, s, a, l, u, h, p, f, m;
            if ((e ? e.ownerDocument || e : F) !== M && N(e),
            e = e || M,
            n = n || [],
            a = e.nodeType,
            "string" != typeof t || !t || 1 !== a && 9 !== a && 11 !== a)
                return n;
            if (!i && I) {
                if (11 !== a && (o = yt.exec(t)))
                    if (s = o[1]) {
                        if (9 === a) {
                            if (r = e.getElementById(s),
                            !r || !r.parentNode)
                                return n;
                            if (r.id === s)
                                return n.push(r),
                                n
                        } else if (e.ownerDocument && (r = e.ownerDocument.getElementById(s)) && j(e, r) && r.id === s)
                            return n.push(r),
                            n
                    } else {
                        if (o[2])
                            return Q.apply(n, e.getElementsByTagName(t)),
                            n;
                        if ((s = o[3]) && w.getElementsByClassName)
                            return Q.apply(n, e.getElementsByClassName(s)),
                            n
                    }
                if (w.qsa && (!O || !O.test(t))) {
                    if (p = h = B,
                    f = e,
                    m = 1 !== a && t,
                    1 === a && "object" !== e.nodeName.toLowerCase()) {
                        for (u = E(t),
                        (h = e.getAttribute("id")) ? p = h.replace(_t, "\\$&") : e.setAttribute("id", p),
                        p = "[id='" + p + "'] ",
                        l = u.length; l--; )
                            u[l] = p + d(u[l]);
                        f = bt.test(t) && c(e.parentNode) || e,
                        m = u.join(",")
                    }
                    if (m)
                        try {
                            return Q.apply(n, f.querySelectorAll(m)),
                            n
                        } catch (g) {} finally {
                            h || e.removeAttribute("id")
                        }
                }
            }
            return S(t.replace(lt, "$1"), e, n, i)
        }
        function n() {
            function t(n, i) {
                return e.push(n + " ") > x.cacheLength && delete t[e.shift()],
                t[n + " "] = i
            }
            var e = [];
            return t
        }
        function i(t) {
            return t[B] = !0,
            t
        }
        function o(t) {
            var e = M.createElement("div");
            try {
                return !!t(e)
            } catch (n) {
                return !1
            } finally {
                e.parentNode && e.parentNode.removeChild(e),
                e = null 
            }
        }
        function r(t, e) {
            for (var n = t.split("|"), i = t.length; i--; )
                x.attrHandle[n[i]] = e
        }
        function s(t, e) {
            var n = e && t
              , i = n && 1 === t.nodeType && 1 === e.nodeType && (~e.sourceIndex || Z) - (~t.sourceIndex || Z);
            if (i)
                return i;
            if (n)
                for (; n = n.nextSibling; )
                    if (n === e)
                        return -1;
            return t ? 1 : -1
        }
        function a(t) {
            return function(e) {
                var n = e.nodeName.toLowerCase();
                return "input" === n && e.type === t
            }
        }
        function l(t) {
            return function(e) {
                var n = e.nodeName.toLowerCase();
                return ("input" === n || "button" === n) && e.type === t
            }
        }
        function u(t) {
            return i(function(e) {
                return e = +e,
                i(function(n, i) {
                    for (var o, r = t([], n.length, e), s = r.length; s--; )
                        n[o = r[s]] && (n[o] = !(i[o] = n[o]))
                }
                )
            }
            )
        }
        function c(t) {
            return t && "undefined" != typeof t.getElementsByTagName && t
        }
        function h() {}
        function d(t) {
            for (var e = 0, n = t.length, i = ""; n > e; e++)
                i += t[e].value;
            return i
        }
        function p(t, e, n) {
            var i = e.dir
              , o = n && "parentNode" === i
              , r = q++;
            return e.first ? function(e, n, r) {
                for (; e = e[i]; )
                    if (1 === e.nodeType || o)
                        return t(e, n, r)
            }
             : function(e, n, s) {
                var a, l, u = [$, r];
                if (s) {
                    for (; e = e[i]; )
                        if ((1 === e.nodeType || o) && t(e, n, s))
                            return !0
                } else
                    for (; e = e[i]; )
                        if (1 === e.nodeType || o) {
                            if (l = e[B] || (e[B] = {}),
                            (a = l[i]) && a[0] === $ && a[1] === r)
                                return u[2] = a[2];
                            if (l[i] = u,
                            u[2] = t(e, n, s))
                                return !0
                        }
            }
        }
        function f(t) {
            return t.length > 1 ? function(e, n, i) {
                for (var o = t.length; o--; )
                    if (!t[o](e, n, i))
                        return !1;
                return !0
            }
             : t[0]
        }
        function m(t, n, i) {
            for (var o = 0, r = n.length; r > o; o++)
                e(t, n[o], i);
            return i
        }
        function g(t, e, n, i, o) {
            for (var r, s = [], a = 0, l = t.length, u = null  != e; l > a; a++)
                (r = t[a]) && (!n || n(r, i, o)) && (s.push(r),
                u && e.push(a));
            return s
        }
        function v(t, e, n, o, r, s) {
            return o && !o[B] && (o = v(o)),
            r && !r[B] && (r = v(r, s)),
            i(function(i, s, a, l) {
                var u, c, h, d = [], p = [], f = s.length, v = i || m(e || "*", a.nodeType ? [a] : a, []), y = !t || !i && e ? v : g(v, d, t, a, l), b = n ? r || (i ? t : f || o) ? [] : s : y;
                if (n && n(y, b, a, l),
                o)
                    for (u = g(b, p),
                    o(u, [], a, l),
                    c = u.length; c--; )
                        (h = u[c]) && (b[p[c]] = !(y[p[c]] = h));
                if (i) {
                    if (r || t) {
                        if (r) {
                            for (u = [],
                            c = b.length; c--; )
                                (h = b[c]) && u.push(y[c] = h);
                            r(null , b = [], u, l)
                        }
                        for (c = b.length; c--; )
                            (h = b[c]) && (u = r ? tt(i, h) : d[c]) > -1 && (i[u] = !(s[u] = h))
                    }
                } else
                    b = g(b === s ? b.splice(f, b.length) : b),
                    r ? r(null , s, b, l) : Q.apply(s, b)
            }
            )
        }
        function y(t) {
            for (var e, n, i, o = t.length, r = x.relative[t[0].type], s = r || x.relative[" "], a = r ? 1 : 0, l = p(function(t) {
                return t === e
            }
            , s, !0), u = p(function(t) {
                return tt(e, t) > -1
            }
            , s, !0), c = [function(t, n, i) {
                var o = !r && (i || n !== C) || ((e = n).nodeType ? l(t, n, i) : u(t, n, i));
                return e = null ,
                o
            }
            ]; o > a; a++)
                if (n = x.relative[t[a].type])
                    c = [p(f(c), n)];
                else {
                    if (n = x.filter[t[a].type].apply(null , t[a].matches),
                    n[B]) {
                        for (i = ++a; o > i && !x.relative[t[i].type]; i++)
                            ;
                        return v(a > 1 && f(c), a > 1 && d(t.slice(0, a - 1).concat({
                            value: " " === t[a - 2].type ? "*" : ""
                        })).replace(lt, "$1"), n, i > a && y(t.slice(a, i)), o > i && y(t = t.slice(i)), o > i && d(t))
                    }
                    c.push(n)
                }
            return f(c)
        }
        function b(t, n) {
            var o = n.length > 0
              , r = t.length > 0
              , s = function(i, s, a, l, u) {
                var c, h, d, p = 0, f = "0", m = i && [], v = [], y = C, b = i || r && x.find.TAG("*", u), _ = $ += null  == y ? 1 : Math.random() || .1, w = b.length;
                for (u && (C = s !== M && s); f !== w && null  != (c = b[f]); f++) {
                    if (r && c) {
                        for (h = 0; d = t[h++]; )
                            if (d(c, s, a)) {
                                l.push(c);
                                break
                            }
                        u && ($ = _)
                    }
                    o && ((c = !d && c) && p--,
                    i && m.push(c))
                }
                if (p += f,
                o && f !== p) {
                    for (h = 0; d = n[h++]; )
                        d(m, v, s, a);
                    if (i) {
                        if (p > 0)
                            for (; f--; )
                                m[f] || v[f] || (v[f] = G.call(l));
                        v = g(v)
                    }
                    Q.apply(l, v),
                    u && !i && v.length > 0 && p + n.length > 1 && e.uniqueSort(l)
                }
                return u && ($ = _,
                C = y),
                m
            }
            ;
            return o ? i(s) : s
        }
        var _, w, x, T, k, E, D, S, C, P, L, N, M, A, I, O, R, U, j, B = "sizzle" + 1 * new Date, F = t.document, $ = 0, q = 0, z = n(), V = n(), H = n(), W = function(t, e) {
            return t === e && (L = !0),
            0
        }
        , Z = 1 << 31, X = {}.hasOwnProperty, Y = [], G = Y.pop, J = Y.push, Q = Y.push, K = Y.slice, tt = function(t, e) {
            for (var n = 0, i = t.length; i > n; n++)
                if (t[n] === e)
                    return n;
            return -1
        }
        , et = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", nt = "[\\x20\\t\\r\\n\\f]", it = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", ot = it.replace("w", "w#"), rt = "\\[" + nt + "*(" + it + ")(?:" + nt + "*([*^$|!~]?=)" + nt + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + ot + "))|)" + nt + "*\\]", st = ":(" + it + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + rt + ")*)|.*)\\)|)", at = new RegExp(nt + "+","g"), lt = new RegExp("^" + nt + "+|((?:^|[^\\\\])(?:\\\\.)*)" + nt + "+$","g"), ut = new RegExp("^" + nt + "*," + nt + "*"), ct = new RegExp("^" + nt + "*([>+~]|" + nt + ")" + nt + "*"), ht = new RegExp("=" + nt + "*([^\\]'\"]*?)" + nt + "*\\]","g"), dt = new RegExp(st), pt = new RegExp("^" + ot + "$"), ft = {
            ID: new RegExp("^#(" + it + ")"),
            CLASS: new RegExp("^\\.(" + it + ")"),
            TAG: new RegExp("^(" + it.replace("w", "w*") + ")"),
            ATTR: new RegExp("^" + rt),
            PSEUDO: new RegExp("^" + st),
            CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + nt + "*(even|odd|(([+-]|)(\\d*)n|)" + nt + "*(?:([+-]|)" + nt + "*(\\d+)|))" + nt + "*\\)|)","i"),
            bool: new RegExp("^(?:" + et + ")$","i"),
            needsContext: new RegExp("^" + nt + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + nt + "*((?:-\\d)?\\d*)" + nt + "*\\)|)(?=[^-]|$)","i")
        }, mt = /^(?:input|select|textarea|button)$/i, gt = /^h\d$/i, vt = /^[^{]+\{\s*\[native \w/, yt = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, bt = /[+~]/, _t = /'|\\/g, wt = new RegExp("\\\\([\\da-f]{1,6}" + nt + "?|(" + nt + ")|.)","ig"), xt = function(t, e, n) {
            var i = "0x" + e - 65536;
            return i !== i || n ? e : 0 > i ? String.fromCharCode(i + 65536) : String.fromCharCode(i >> 10 | 55296, 1023 & i | 56320)
        }
        , Tt = function() {
            N()
        }
        ;
        try {
            Q.apply(Y = K.call(F.childNodes), F.childNodes),
            Y[F.childNodes.length].nodeType
        } catch (kt) {
            Q = {
                apply: Y.length ? function(t, e) {
                    J.apply(t, K.call(e))
                }
                 : function(t, e) {
                    for (var n = t.length, i = 0; t[n++] = e[i++]; )
                        ;
                    t.length = n - 1
                }
            }
        }
        w = e.support = {},
        k = e.isXML = function(t) {
            var e = t && (t.ownerDocument || t).documentElement;
            return e ? "HTML" !== e.nodeName : !1
        }
        ,
        N = e.setDocument = function(t) {
            var e, n, i = t ? t.ownerDocument || t : F;
            return i !== M && 9 === i.nodeType && i.documentElement ? (M = i,
            A = i.documentElement,
            n = i.defaultView,
            n && n !== n.top && (n.addEventListener ? n.addEventListener("unload", Tt, !1) : n.attachEvent && n.attachEvent("onunload", Tt)),
            I = !k(i),
            w.attributes = o(function(t) {
                return t.className = "i",
                !t.getAttribute("className")
            }
            ),
            w.getElementsByTagName = o(function(t) {
                return t.appendChild(i.createComment("")),
                !t.getElementsByTagName("*").length
            }
            ),
            w.getElementsByClassName = vt.test(i.getElementsByClassName),
            w.getById = o(function(t) {
                return A.appendChild(t).id = B,
                !i.getElementsByName || !i.getElementsByName(B).length
            }
            ),
            w.getById ? (x.find.ID = function(t, e) {
                if ("undefined" != typeof e.getElementById && I) {
                    var n = e.getElementById(t);
                    return n && n.parentNode ? [n] : []
                }
            }
            ,
            x.filter.ID = function(t) {
                var e = t.replace(wt, xt);
                return function(t) {
                    return t.getAttribute("id") === e
                }
            }
            ) : (delete x.find.ID,
            x.filter.ID = function(t) {
                var e = t.replace(wt, xt);
                return function(t) {
                    var n = "undefined" != typeof t.getAttributeNode && t.getAttributeNode("id");
                    return n && n.value === e
                }
            }
            ),
            x.find.TAG = w.getElementsByTagName ? function(t, e) {
                return "undefined" != typeof e.getElementsByTagName ? e.getElementsByTagName(t) : w.qsa ? e.querySelectorAll(t) : void 0
            }
             : function(t, e) {
                var n, i = [], o = 0, r = e.getElementsByTagName(t);
                if ("*" === t) {
                    for (; n = r[o++]; )
                        1 === n.nodeType && i.push(n);
                    return i
                }
                return r
            }
            ,
            x.find.CLASS = w.getElementsByClassName && function(t, e) {
                return I ? e.getElementsByClassName(t) : void 0
            }
            ,
            R = [],
            O = [],
            (w.qsa = vt.test(i.querySelectorAll)) && (o(function(t) {
                A.appendChild(t).innerHTML = "<a id='" + B + "'></a><select id='" + B + "-\f]' msallowcapture=''><option selected=''></option></select>",
                t.querySelectorAll("[msallowcapture^='']").length && O.push("[*^$]=" + nt + "*(?:''|\"\")"),
                t.querySelectorAll("[selected]").length || O.push("\\[" + nt + "*(?:value|" + et + ")"),
                t.querySelectorAll("[id~=" + B + "-]").length || O.push("~="),
                t.querySelectorAll(":checked").length || O.push(":checked"),
                t.querySelectorAll("a#" + B + "+*").length || O.push(".#.+[+~]")
            }
            ),
            o(function(t) {
                var e = i.createElement("input");
                e.setAttribute("type", "hidden"),
                t.appendChild(e).setAttribute("name", "D"),
                t.querySelectorAll("[name=d]").length && O.push("name" + nt + "*[*^$|!~]?="),
                t.querySelectorAll(":enabled").length || O.push(":enabled", ":disabled"),
                t.querySelectorAll("*,:x"),
                O.push(",.*:")
            }
            )),
            (w.matchesSelector = vt.test(U = A.matches || A.webkitMatchesSelector || A.mozMatchesSelector || A.oMatchesSelector || A.msMatchesSelector)) && o(function(t) {
                w.disconnectedMatch = U.call(t, "div"),
                U.call(t, "[s!='']:x"),
                R.push("!=", st)
            }
            ),
            O = O.length && new RegExp(O.join("|")),
            R = R.length && new RegExp(R.join("|")),
            e = vt.test(A.compareDocumentPosition),
            j = e || vt.test(A.contains) ? function(t, e) {
                var n = 9 === t.nodeType ? t.documentElement : t
                  , i = e && e.parentNode;
                return t === i || !(!i || 1 !== i.nodeType || !(n.contains ? n.contains(i) : t.compareDocumentPosition && 16 & t.compareDocumentPosition(i)))
            }
             : function(t, e) {
                if (e)
                    for (; e = e.parentNode; )
                        if (e === t)
                            return !0;
                return !1
            }
            ,
            W = e ? function(t, e) {
                if (t === e)
                    return L = !0,
                    0;
                var n = !t.compareDocumentPosition - !e.compareDocumentPosition;
                return n ? n : (n = (t.ownerDocument || t) === (e.ownerDocument || e) ? t.compareDocumentPosition(e) : 1,
                1 & n || !w.sortDetached && e.compareDocumentPosition(t) === n ? t === i || t.ownerDocument === F && j(F, t) ? -1 : e === i || e.ownerDocument === F && j(F, e) ? 1 : P ? tt(P, t) - tt(P, e) : 0 : 4 & n ? -1 : 1)
            }
             : function(t, e) {
                if (t === e)
                    return L = !0,
                    0;
                var n, o = 0, r = t.parentNode, a = e.parentNode, l = [t], u = [e];
                if (!r || !a)
                    return t === i ? -1 : e === i ? 1 : r ? -1 : a ? 1 : P ? tt(P, t) - tt(P, e) : 0;
                if (r === a)
                    return s(t, e);
                for (n = t; n = n.parentNode; )
                    l.unshift(n);
                for (n = e; n = n.parentNode; )
                    u.unshift(n);
                for (; l[o] === u[o]; )
                    o++;
                return o ? s(l[o], u[o]) : l[o] === F ? -1 : u[o] === F ? 1 : 0
            }
            ,
            i) : M
        }
        ,
        e.matches = function(t, n) {
            return e(t, null , null , n)
        }
        ,
        e.matchesSelector = function(t, n) {
            if ((t.ownerDocument || t) !== M && N(t),
            n = n.replace(ht, "='$1']"),
            !(!w.matchesSelector || !I || R && R.test(n) || O && O.test(n)))
                try {
                    var i = U.call(t, n);
                    if (i || w.disconnectedMatch || t.document && 11 !== t.document.nodeType)
                        return i
                } catch (o) {}
            return e(n, M, null , [t]).length > 0
        }
        ,
        e.contains = function(t, e) {
            return (t.ownerDocument || t) !== M && N(t),
            j(t, e)
        }
        ,
        e.attr = function(t, e) {
            (t.ownerDocument || t) !== M && N(t);
            var n = x.attrHandle[e.toLowerCase()]
              , i = n && X.call(x.attrHandle, e.toLowerCase()) ? n(t, e, !I) : void 0;
            return void 0 !== i ? i : w.attributes || !I ? t.getAttribute(e) : (i = t.getAttributeNode(e)) && i.specified ? i.value : null 
        }
        ,
        e.error = function(t) {
            throw new Error("Syntax error, unrecognized expression: " + t)
        }
        ,
        e.uniqueSort = function(t) {
            var e, n = [], i = 0, o = 0;
            if (L = !w.detectDuplicates,
            P = !w.sortStable && t.slice(0),
            t.sort(W),
            L) {
                for (; e = t[o++]; )
                    e === t[o] && (i = n.push(o));
                for (; i--; )
                    t.splice(n[i], 1)
            }
            return P = null ,
            t
        }
        ,
        T = e.getText = function(t) {
            var e, n = "", i = 0, o = t.nodeType;
            if (o) {
                if (1 === o || 9 === o || 11 === o) {
                    if ("string" == typeof t.textContent)
                        return t.textContent;
                    for (t = t.firstChild; t; t = t.nextSibling)
                        n += T(t)
                } else if (3 === o || 4 === o)
                    return t.nodeValue
            } else
                for (; e = t[i++]; )
                    n += T(e);
            return n
        }
        ,
        x = e.selectors = {
            cacheLength: 50,
            createPseudo: i,
            match: ft,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(t) {
                    return t[1] = t[1].replace(wt, xt),
                    t[3] = (t[3] || t[4] || t[5] || "").replace(wt, xt),
                    "~=" === t[2] && (t[3] = " " + t[3] + " "),
                    t.slice(0, 4)
                },
                CHILD: function(t) {
                    return t[1] = t[1].toLowerCase(),
                    "nth" === t[1].slice(0, 3) ? (t[3] || e.error(t[0]),
                    t[4] = +(t[4] ? t[5] + (t[6] || 1) : 2 * ("even" === t[3] || "odd" === t[3])),
                    t[5] = +(t[7] + t[8] || "odd" === t[3])) : t[3] && e.error(t[0]),
                    t
                },
                PSEUDO: function(t) {
                    var e, n = !t[6] && t[2];
                    return ft.CHILD.test(t[0]) ? null  : (t[3] ? t[2] = t[4] || t[5] || "" : n && dt.test(n) && (e = E(n, !0)) && (e = n.indexOf(")", n.length - e) - n.length) && (t[0] = t[0].slice(0, e),
                    t[2] = n.slice(0, e)),
                    t.slice(0, 3))
                }
            },
            filter: {
                TAG: function(t) {
                    var e = t.replace(wt, xt).toLowerCase();
                    return "*" === t ? function() {
                        return !0
                    }
                     : function(t) {
                        return t.nodeName && t.nodeName.toLowerCase() === e
                    }
                },
                CLASS: function(t) {
                    var e = z[t + " "];
                    return e || (e = new RegExp("(^|" + nt + ")" + t + "(" + nt + "|$)")) && z(t, function(t) {
                        return e.test("string" == typeof t.className && t.className || "undefined" != typeof t.getAttribute && t.getAttribute("class") || "")
                    }
                    )
                },
                ATTR: function(t, n, i) {
                    return function(o) {
                        var r = e.attr(o, t);
                        return null  == r ? "!=" === n : n ? (r += "",
                        "=" === n ? r === i : "!=" === n ? r !== i : "^=" === n ? i && 0 === r.indexOf(i) : "*=" === n ? i && r.indexOf(i) > -1 : "$=" === n ? i && r.slice(-i.length) === i : "~=" === n ? (" " + r.replace(at, " ") + " ").indexOf(i) > -1 : "|=" === n ? r === i || r.slice(0, i.length + 1) === i + "-" : !1) : !0
                    }
                },
                CHILD: function(t, e, n, i, o) {
                    var r = "nth" !== t.slice(0, 3)
                      , s = "last" !== t.slice(-4)
                      , a = "of-type" === e;
                    return 1 === i && 0 === o ? function(t) {
                        return !!t.parentNode
                    }
                     : function(e, n, l) {
                        var u, c, h, d, p, f, m = r !== s ? "nextSibling" : "previousSibling", g = e.parentNode, v = a && e.nodeName.toLowerCase(), y = !l && !a;
                        if (g) {
                            if (r) {
                                for (; m; ) {
                                    for (h = e; h = h[m]; )
                                        if (a ? h.nodeName.toLowerCase() === v : 1 === h.nodeType)
                                            return !1;
                                    f = m = "only" === t && !f && "nextSibling"
                                }
                                return !0
                            }
                            if (f = [s ? g.firstChild : g.lastChild],
                            s && y) {
                                for (c = g[B] || (g[B] = {}),
                                u = c[t] || [],
                                p = u[0] === $ && u[1],
                                d = u[0] === $ && u[2],
                                h = p && g.childNodes[p]; h = ++p && h && h[m] || (d = p = 0) || f.pop(); )
                                    if (1 === h.nodeType && ++d && h === e) {
                                        c[t] = [$, p, d];
                                        break
                                    }
                            } else if (y && (u = (e[B] || (e[B] = {}))[t]) && u[0] === $)
                                d = u[1];
                            else
                                for (; (h = ++p && h && h[m] || (d = p = 0) || f.pop()) && ((a ? h.nodeName.toLowerCase() !== v : 1 !== h.nodeType) || !++d || (y && ((h[B] || (h[B] = {}))[t] = [$, d]),
                                h !== e)); )
                                    ;
                            return d -= o,
                            d === i || d % i === 0 && d / i >= 0
                        }
                    }
                },
                PSEUDO: function(t, n) {
                    var o, r = x.pseudos[t] || x.setFilters[t.toLowerCase()] || e.error("unsupported pseudo: " + t);
                    return r[B] ? r(n) : r.length > 1 ? (o = [t, t, "", n],
                    x.setFilters.hasOwnProperty(t.toLowerCase()) ? i(function(t, e) {
                        for (var i, o = r(t, n), s = o.length; s--; )
                            i = tt(t, o[s]),
                            t[i] = !(e[i] = o[s])
                    }
                    ) : function(t) {
                        return r(t, 0, o)
                    }
                    ) : r
                }
            },
            pseudos: {
                not: i(function(t) {
                    var e = []
                      , n = []
                      , o = D(t.replace(lt, "$1"));
                    return o[B] ? i(function(t, e, n, i) {
                        for (var r, s = o(t, null , i, []), a = t.length; a--; )
                            (r = s[a]) && (t[a] = !(e[a] = r))
                    }
                    ) : function(t, i, r) {
                        return e[0] = t,
                        o(e, null , r, n),
                        e[0] = null ,
                        !n.pop()
                    }
                }
                ),
                has: i(function(t) {
                    return function(n) {
                        return e(t, n).length > 0
                    }
                }
                ),
                contains: i(function(t) {
                    return t = t.replace(wt, xt),
                    function(e) {
                        return (e.textContent || e.innerText || T(e)).indexOf(t) > -1
                    }
                }
                ),
                lang: i(function(t) {
                    return pt.test(t || "") || e.error("unsupported lang: " + t),
                    t = t.replace(wt, xt).toLowerCase(),
                    function(e) {
                        var n;
                        do
                            if (n = I ? e.lang : e.getAttribute("xml:lang") || e.getAttribute("lang"))
                                return n = n.toLowerCase(),
                                n === t || 0 === n.indexOf(t + "-");
                        while ((e = e.parentNode) && 1 === e.nodeType);return !1
                    }
                }
                ),
                target: function(e) {
                    var n = t.location && t.location.hash;
                    return n && n.slice(1) === e.id
                },
                root: function(t) {
                    return t === A
                },
                focus: function(t) {
                    return t === M.activeElement && (!M.hasFocus || M.hasFocus()) && !!(t.type || t.href || ~t.tabIndex)
                },
                enabled: function(t) {
                    return t.disabled === !1
                },
                disabled: function(t) {
                    return t.disabled === !0
                },
                checked: function(t) {
                    var e = t.nodeName.toLowerCase();
                    return "input" === e && !!t.checked || "option" === e && !!t.selected
                },
                selected: function(t) {
                    return t.parentNode && t.parentNode.selectedIndex,
                    t.selected === !0
                },
                empty: function(t) {
                    for (t = t.firstChild; t; t = t.nextSibling)
                        if (t.nodeType < 6)
                            return !1;
                    return !0
                },
                parent: function(t) {
                    return !x.pseudos.empty(t)
                },
                header: function(t) {
                    return gt.test(t.nodeName)
                },
                input: function(t) {
                    return mt.test(t.nodeName)
                },
                button: function(t) {
                    var e = t.nodeName.toLowerCase();
                    return "input" === e && "button" === t.type || "button" === e
                },
                text: function(t) {
                    var e;
                    return "input" === t.nodeName.toLowerCase() && "text" === t.type && (null  == (e = t.getAttribute("type")) || "text" === e.toLowerCase())
                },
                first: u(function() {
                    return [0]
                }
                ),
                last: u(function(t, e) {
                    return [e - 1]
                }
                ),
                eq: u(function(t, e, n) {
                    return [0 > n ? n + e : n]
                }
                ),
                even: u(function(t, e) {
                    for (var n = 0; e > n; n += 2)
                        t.push(n);
                    return t
                }
                ),
                odd: u(function(t, e) {
                    for (var n = 1; e > n; n += 2)
                        t.push(n);
                    return t
                }
                ),
                lt: u(function(t, e, n) {
                    for (var i = 0 > n ? n + e : n; --i >= 0; )
                        t.push(i);
                    return t
                }
                ),
                gt: u(function(t, e, n) {
                    for (var i = 0 > n ? n + e : n; ++i < e; )
                        t.push(i);
                    return t
                }
                )
            }
        },
        x.pseudos.nth = x.pseudos.eq;
        for (_ in {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        })
            x.pseudos[_] = a(_);
        for (_ in {
            submit: !0,
            reset: !0
        })
            x.pseudos[_] = l(_);
        return h.prototype = x.filters = x.pseudos,
        x.setFilters = new h,
        E = e.tokenize = function(t, n) {
            var i, o, r, s, a, l, u, c = V[t + " "];
            if (c)
                return n ? 0 : c.slice(0);
            for (a = t,
            l = [],
            u = x.preFilter; a; ) {
                (!i || (o = ut.exec(a))) && (o && (a = a.slice(o[0].length) || a),
                l.push(r = [])),
                i = !1,
                (o = ct.exec(a)) && (i = o.shift(),
                r.push({
                    value: i,
                    type: o[0].replace(lt, " ")
                }),
                a = a.slice(i.length));
                for (s in x.filter)
                    !(o = ft[s].exec(a)) || u[s] && !(o = u[s](o)) || (i = o.shift(),
                    r.push({
                        value: i,
                        type: s,
                        matches: o
                    }),
                    a = a.slice(i.length));
                if (!i)
                    break
            }
            return n ? a.length : a ? e.error(t) : V(t, l).slice(0)
        }
        ,
        D = e.compile = function(t, e) {
            var n, i = [], o = [], r = H[t + " "];
            if (!r) {
                for (e || (e = E(t)),
                n = e.length; n--; )
                    r = y(e[n]),
                    r[B] ? i.push(r) : o.push(r);
                r = H(t, b(o, i)),
                r.selector = t
            }
            return r
        }
        ,
        S = e.select = function(t, e, n, i) {
            var o, r, s, a, l, u = "function" == typeof t && t, h = !i && E(t = u.selector || t);
            if (n = n || [],
            1 === h.length) {
                if (r = h[0] = h[0].slice(0),
                r.length > 2 && "ID" === (s = r[0]).type && w.getById && 9 === e.nodeType && I && x.relative[r[1].type]) {
                    if (e = (x.find.ID(s.matches[0].replace(wt, xt), e) || [])[0],
                    !e)
                        return n;
                    u && (e = e.parentNode),
                    t = t.slice(r.shift().value.length)
                }
                for (o = ft.needsContext.test(t) ? 0 : r.length; o-- && (s = r[o],
                !x.relative[a = s.type]); )
                    if ((l = x.find[a]) && (i = l(s.matches[0].replace(wt, xt), bt.test(r[0].type) && c(e.parentNode) || e))) {
                        if (r.splice(o, 1),
                        t = i.length && d(r),
                        !t)
                            return Q.apply(n, i),
                            n;
                        break
                    }
            }
            return (u || D(t, h))(i, e, !I, n, bt.test(t) && c(e.parentNode) || e),
            n
        }
        ,
        w.sortStable = B.split("").sort(W).join("") === B,
        w.detectDuplicates = !!L,
        N(),
        w.sortDetached = o(function(t) {
            return 1 & t.compareDocumentPosition(M.createElement("div"))
        }
        ),
        o(function(t) {
            return t.innerHTML = "<a href='#'></a>",
            "#" === t.firstChild.getAttribute("href")
        }
        ) || r("type|href|height|width", function(t, e, n) {
            return n ? void 0 : t.getAttribute(e, "type" === e.toLowerCase() ? 1 : 2)
        }
        ),
        w.attributes && o(function(t) {
            return t.innerHTML = "<input/>",
            t.firstChild.setAttribute("value", ""),
            "" === t.firstChild.getAttribute("value")
        }
        ) || r("value", function(t, e, n) {
            return n || "input" !== t.nodeName.toLowerCase() ? void 0 : t.defaultValue
        }
        ),
        o(function(t) {
            return null  == t.getAttribute("disabled")
        }
        ) || r(et, function(t, e, n) {
            var i;
            return n ? void 0 : t[e] === !0 ? e.toLowerCase() : (i = t.getAttributeNode(e)) && i.specified ? i.value : null 
        }
        ),
        e
    }
    (t);
    K.find = ot,
    K.expr = ot.selectors,
    K.expr[":"] = K.expr.pseudos,
    K.unique = ot.uniqueSort,
    K.text = ot.getText,
    K.isXMLDoc = ot.isXML,
    K.contains = ot.contains;
    var rt = K.expr.match.needsContext
      , st = /^<(\w+)\s*\/?>(?:<\/\1>|)$/
      , at = /^.[^:#\[\.,]*$/;
    K.filter = function(t, e, n) {
        var i = e[0];
        return n && (t = ":not(" + t + ")"),
        1 === e.length && 1 === i.nodeType ? K.find.matchesSelector(i, t) ? [i] : [] : K.find.matches(t, K.grep(e, function(t) {
            return 1 === t.nodeType
        }
        ))
    }
    ,
    K.fn.extend({
        find: function(t) {
            var e, n = this.length, i = [], o = this;
            if ("string" != typeof t)
                return this.pushStack(K(t).filter(function() {
                    for (e = 0; n > e; e++)
                        if (K.contains(o[e], this))
                            return !0
                }
                ));
            for (e = 0; n > e; e++)
                K.find(t, o[e], i);
            return i = this.pushStack(n > 1 ? K.unique(i) : i),
            i.selector = this.selector ? this.selector + " " + t : t,
            i
        },
        filter: function(t) {
            return this.pushStack(i(this, t || [], !1))
        },
        not: function(t) {
            return this.pushStack(i(this, t || [], !0))
        },
        is: function(t) {
            return !!i(this, "string" == typeof t && rt.test(t) ? K(t) : t || [], !1).length
        }
    });
    var lt, ut = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, ct = K.fn.init = function(t, e) {
        var n, i;
        if (!t)
            return this;
        if ("string" == typeof t) {
            if (n = "<" === t[0] && ">" === t[t.length - 1] && t.length >= 3 ? [null , t, null ] : ut.exec(t),
            !n || !n[1] && e)
                return !e || e.jquery ? (e || lt).find(t) : this.constructor(e).find(t);
            if (n[1]) {
                if (e = e instanceof K ? e[0] : e,
                K.merge(this, K.parseHTML(n[1], e && e.nodeType ? e.ownerDocument || e : J, !0)),
                st.test(n[1]) && K.isPlainObject(e))
                    for (n in e)
                        K.isFunction(this[n]) ? this[n](e[n]) : this.attr(n, e[n]);
                return this
            }
            return i = J.getElementById(n[2]),
            i && i.parentNode && (this.length = 1,
            this[0] = i),
            this.context = J,
            this.selector = t,
            this
        }
        return t.nodeType ? (this.context = this[0] = t,
        this.length = 1,
        this) : K.isFunction(t) ? "undefined" != typeof lt.ready ? lt.ready(t) : t(K) : (void 0 !== t.selector && (this.selector = t.selector,
        this.context = t.context),
        K.makeArray(t, this))
    }
    ;
    ct.prototype = K.fn,
    lt = K(J);
    var ht = /^(?:parents|prev(?:Until|All))/
      , dt = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    K.extend({
        dir: function(t, e, n) {
            for (var i = [], o = void 0 !== n; (t = t[e]) && 9 !== t.nodeType; )
                if (1 === t.nodeType) {
                    if (o && K(t).is(n))
                        break;
                    i.push(t)
                }
            return i
        },
        sibling: function(t, e) {
            for (var n = []; t; t = t.nextSibling)
                1 === t.nodeType && t !== e && n.push(t);
            return n
        }
    }),
    K.fn.extend({
        has: function(t) {
            var e = K(t, this)
              , n = e.length;
            return this.filter(function() {
                for (var t = 0; n > t; t++)
                    if (K.contains(this, e[t]))
                        return !0
            }
            )
        },
        closest: function(t, e) {
            for (var n, i = 0, o = this.length, r = [], s = rt.test(t) || "string" != typeof t ? K(t, e || this.context) : 0; o > i; i++)
                for (n = this[i]; n && n !== e; n = n.parentNode)
                    if (n.nodeType < 11 && (s ? s.index(n) > -1 : 1 === n.nodeType && K.find.matchesSelector(n, t))) {
                        r.push(n);
                        break
                    }
            return this.pushStack(r.length > 1 ? K.unique(r) : r)
        },
        index: function(t) {
            return t ? "string" == typeof t ? W.call(K(t), this[0]) : W.call(this, t.jquery ? t[0] : t) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        },
        add: function(t, e) {
            return this.pushStack(K.unique(K.merge(this.get(), K(t, e))))
        },
        addBack: function(t) {
            return this.add(null  == t ? this.prevObject : this.prevObject.filter(t))
        }
    }),
    K.each({
        parent: function(t) {
            var e = t.parentNode;
            return e && 11 !== e.nodeType ? e : null 
        },
        parents: function(t) {
            return K.dir(t, "parentNode")
        },
        parentsUntil: function(t, e, n) {
            return K.dir(t, "parentNode", n)
        },
        next: function(t) {
            return o(t, "nextSibling")
        },
        prev: function(t) {
            return o(t, "previousSibling")
        },
        nextAll: function(t) {
            return K.dir(t, "nextSibling")
        },
        prevAll: function(t) {
            return K.dir(t, "previousSibling")
        },
        nextUntil: function(t, e, n) {
            return K.dir(t, "nextSibling", n)
        },
        prevUntil: function(t, e, n) {
            return K.dir(t, "previousSibling", n)
        },
        siblings: function(t) {
            return K.sibling((t.parentNode || {}).firstChild, t)
        },
        children: function(t) {
            return K.sibling(t.firstChild)
        },
        contents: function(t) {
            return t.contentDocument || K.merge([], t.childNodes)
        }
    }, function(t, e) {
        K.fn[t] = function(n, i) {
            var o = K.map(this, e, n);
            return "Until" !== t.slice(-5) && (i = n),
            i && "string" == typeof i && (o = K.filter(i, o)),
            this.length > 1 && (dt[t] || K.unique(o),
            ht.test(t) && o.reverse()),
            this.pushStack(o)
        }
    }
    );
    var pt = /\S+/g
      , ft = {};
    K.Callbacks = function(t) {
        t = "string" == typeof t ? ft[t] || r(t) : K.extend({}, t);
        var e, n, i, o, s, a, l = [], u = !t.once && [], c = function(r) {
            for (e = t.memory && r,
            n = !0,
            a = o || 0,
            o = 0,
            s = l.length,
            i = !0; l && s > a; a++)
                if (l[a].apply(r[0], r[1]) === !1 && t.stopOnFalse) {
                    e = !1;
                    break
                }
            i = !1,
            l && (u ? u.length && c(u.shift()) : e ? l = [] : h.disable())
        }
        , h = {
            add: function() {
                if (l) {
                    var n = l.length;
                    !function r(e) {
                        K.each(e, function(e, n) {
                            var i = K.type(n);
                            "function" === i ? t.unique && h.has(n) || l.push(n) : n && n.length && "string" !== i && r(n)
                        }
                        )
                    }
                    (arguments),
                    i ? s = l.length : e && (o = n,
                    c(e))
                }
                return this
            },
            remove: function() {
                return l && K.each(arguments, function(t, e) {
                    for (var n; (n = K.inArray(e, l, n)) > -1; )
                        l.splice(n, 1),
                        i && (s >= n && s--,
                        a >= n && a--)
                }
                ),
                this
            },
            has: function(t) {
                return t ? K.inArray(t, l) > -1 : !(!l || !l.length)
            },
            empty: function() {
                return l = [],
                s = 0,
                this
            },
            disable: function() {
                return l = u = e = void 0,
                this
            },
            disabled: function() {
                return !l
            },
            lock: function() {
                return u = void 0,
                e || h.disable(),
                this
            },
            locked: function() {
                return !u
            },
            fireWith: function(t, e) {
                return !l || n && !u || (e = e || [],
                e = [t, e.slice ? e.slice() : e],
                i ? u.push(e) : c(e)),
                this
            },
            fire: function() {
                return h.fireWith(this, arguments),
                this
            },
            fired: function() {
                return !!n
            }
        };
        return h
    }
    ,
    K.extend({
        Deferred: function(t) {
            var e = [["resolve", "done", K.Callbacks("once memory"), "resolved"], ["reject", "fail", K.Callbacks("once memory"), "rejected"], ["notify", "progress", K.Callbacks("memory")]]
              , n = "pending"
              , i = {
                state: function() {
                    return n
                },
                always: function() {
                    return o.done(arguments).fail(arguments),
                    this
                },
                then: function() {
                    var t = arguments;
                    return K.Deferred(function(n) {
                        K.each(e, function(e, r) {
                            var s = K.isFunction(t[e]) && t[e];
                            o[r[1]](function() {
                                var t = s && s.apply(this, arguments);
                                t && K.isFunction(t.promise) ? t.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[r[0] + "With"](this === i ? n.promise() : this, s ? [t] : arguments)
                            }
                            )
                        }
                        ),
                        t = null 
                    }
                    ).promise()
                },
                promise: function(t) {
                    return null  != t ? K.extend(t, i) : i
                }
            }
              , o = {};
            return i.pipe = i.then,
            K.each(e, function(t, r) {
                var s = r[2]
                  , a = r[3];
                i[r[1]] = s.add,
                a && s.add(function() {
                    n = a
                }
                , e[1 ^ t][2].disable, e[2][2].lock),
                o[r[0]] = function() {
                    return o[r[0] + "With"](this === o ? i : this, arguments),
                    this
                }
                ,
                o[r[0] + "With"] = s.fireWith
            }
            ),
            i.promise(o),
            t && t.call(o, o),
            o
        },
        when: function(t) {
            var e, n, i, o = 0, r = z.call(arguments), s = r.length, a = 1 !== s || t && K.isFunction(t.promise) ? s : 0, l = 1 === a ? t : K.Deferred(), u = function(t, n, i) {
                return function(o) {
                    n[t] = this,
                    i[t] = arguments.length > 1 ? z.call(arguments) : o,
                    i === e ? l.notifyWith(n, i) : --a || l.resolveWith(n, i)
                }
            }
            ;
            if (s > 1)
                for (e = new Array(s),
                n = new Array(s),
                i = new Array(s); s > o; o++)
                    r[o] && K.isFunction(r[o].promise) ? r[o].promise().done(u(o, i, r)).fail(l.reject).progress(u(o, n, e)) : --a;
            return a || l.resolveWith(i, r),
            l.promise()
        }
    });
    var mt;
    K.fn.ready = function(t) {
        return K.ready.promise().done(t),
        this
    }
    ,
    K.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function(t) {
            t ? K.readyWait++ : K.ready(!0)
        },
        ready: function(t) {
            (t === !0 ? --K.readyWait : K.isReady) || (K.isReady = !0,
            t !== !0 && --K.readyWait > 0 || (mt.resolveWith(J, [K]),
            K.fn.triggerHandler && (K(J).triggerHandler("ready"),
            K(J).off("ready"))))
        }
    }),
    K.ready.promise = function(e) {
        return mt || (mt = K.Deferred(),
        "complete" === J.readyState ? setTimeout(K.ready) : (J.addEventListener("DOMContentLoaded", s, !1),
        t.addEventListener("load", s, !1))),
        mt.promise(e)
    }
    ,
    K.ready.promise();
    var gt = K.access = function(t, e, n, i, o, r, s) {
        var a = 0
          , l = t.length
          , u = null  == n;
        if ("object" === K.type(n)) {
            o = !0;
            for (a in n)
                K.access(t, e, a, n[a], !0, r, s)
        } else if (void 0 !== i && (o = !0,
        K.isFunction(i) || (s = !0),
        u && (s ? (e.call(t, i),
        e = null ) : (u = e,
        e = function(t, e, n) {
            return u.call(K(t), n)
        }
        )),
        e))
            for (; l > a; a++)
                e(t[a], n, s ? i : i.call(t[a], a, e(t[a], n)));
        return o ? t : u ? e.call(t) : l ? e(t[0], n) : r
    }
    ;
    K.acceptData = function(t) {
        return 1 === t.nodeType || 9 === t.nodeType || !+t.nodeType
    }
    ,
    a.uid = 1,
    a.accepts = K.acceptData,
    a.prototype = {
        key: function(t) {
            if (!a.accepts(t))
                return 0;
            var e = {}
              , n = t[this.expando];
            if (!n) {
                n = a.uid++;
                try {
                    e[this.expando] = {
                        value: n
                    },
                    Object.defineProperties(t, e)
                } catch (i) {
                    e[this.expando] = n,
                    K.extend(t, e)
                }
            }
            return this.cache[n] || (this.cache[n] = {}),
            n
        },
        set: function(t, e, n) {
            var i, o = this.key(t), r = this.cache[o];
            if ("string" == typeof e)
                r[e] = n;
            else if (K.isEmptyObject(r))
                K.extend(this.cache[o], e);
            else
                for (i in e)
                    r[i] = e[i];
            return r
        },
        get: function(t, e) {
            var n = this.cache[this.key(t)];
            return void 0 === e ? n : n[e]
        },
        access: function(t, e, n) {
            var i;
            return void 0 === e || e && "string" == typeof e && void 0 === n ? (i = this.get(t, e),
            void 0 !== i ? i : this.get(t, K.camelCase(e))) : (this.set(t, e, n),
            void 0 !== n ? n : e)
        },
        remove: function(t, e) {
            var n, i, o, r = this.key(t), s = this.cache[r];
            if (void 0 === e)
                this.cache[r] = {};
            else {
                K.isArray(e) ? i = e.concat(e.map(K.camelCase)) : (o = K.camelCase(e),
                e in s ? i = [e, o] : (i = o,
                i = i in s ? [i] : i.match(pt) || [])),
                n = i.length;
                for (; n--; )
                    delete s[i[n]]
            }
        },
        hasData: function(t) {
            return !K.isEmptyObject(this.cache[t[this.expando]] || {})
        },
        discard: function(t) {
            t[this.expando] && delete this.cache[t[this.expando]]
        }
    };
    var vt = new a
      , yt = new a
      , bt = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/
      , _t = /([A-Z])/g;
    K.extend({
        hasData: function(t) {
            return yt.hasData(t) || vt.hasData(t)
        },
        data: function(t, e, n) {
            return yt.access(t, e, n)
        },
        removeData: function(t, e) {
            yt.remove(t, e)
        },
        _data: function(t, e, n) {
            return vt.access(t, e, n)
        },
        _removeData: function(t, e) {
            vt.remove(t, e)
        }
    }),
    K.fn.extend({
        data: function(t, e) {
            var n, i, o, r = this[0], s = r && r.attributes;
            if (void 0 === t) {
                if (this.length && (o = yt.get(r),
                1 === r.nodeType && !vt.get(r, "hasDataAttrs"))) {
                    for (n = s.length; n--; )
                        s[n] && (i = s[n].name,
                        0 === i.indexOf("data-") && (i = K.camelCase(i.slice(5)),
                        l(r, i, o[i])));
                    vt.set(r, "hasDataAttrs", !0)
                }
                return o
            }
            return "object" == typeof t ? this.each(function() {
                yt.set(this, t)
            }
            ) : gt(this, function(e) {
                var n, i = K.camelCase(t);
                if (r && void 0 === e) {
                    if (n = yt.get(r, t),
                    void 0 !== n)
                        return n;
                    if (n = yt.get(r, i),
                    void 0 !== n)
                        return n;
                    if (n = l(r, i, void 0),
                    void 0 !== n)
                        return n
                } else
                    this.each(function() {
                        var n = yt.get(this, i);
                        yt.set(this, i, e),
                        -1 !== t.indexOf("-") && void 0 !== n && yt.set(this, t, e)
                    }
                    )
            }
            , null , e, arguments.length > 1, null , !0)
        },
        removeData: function(t) {
            return this.each(function() {
                yt.remove(this, t)
            }
            )
        }
    }),
    K.extend({
        queue: function(t, e, n) {
            var i;
            return t ? (e = (e || "fx") + "queue",
            i = vt.get(t, e),
            n && (!i || K.isArray(n) ? i = vt.access(t, e, K.makeArray(n)) : i.push(n)),
            i || []) : void 0
        },
        dequeue: function(t, e) {
            e = e || "fx";
            var n = K.queue(t, e)
              , i = n.length
              , o = n.shift()
              , r = K._queueHooks(t, e)
              , s = function() {
                K.dequeue(t, e)
            }
            ;
            "inprogress" === o && (o = n.shift(),
            i--),
            o && ("fx" === e && n.unshift("inprogress"),
            delete r.stop,
            o.call(t, s, r)),
            !i && r && r.empty.fire()
        },
        _queueHooks: function(t, e) {
            var n = e + "queueHooks";
            return vt.get(t, n) || vt.access(t, n, {
                empty: K.Callbacks("once memory").add(function() {
                    vt.remove(t, [e + "queue", n])
                }
                )
            })
        }
    }),
    K.fn.extend({
        queue: function(t, e) {
            var n = 2;
            return "string" != typeof t && (e = t,
            t = "fx",
            n--),
            arguments.length < n ? K.queue(this[0], t) : void 0 === e ? this : this.each(function() {
                var n = K.queue(this, t, e);
                K._queueHooks(this, t),
                "fx" === t && "inprogress" !== n[0] && K.dequeue(this, t)
            }
            )
        },
        dequeue: function(t) {
            return this.each(function() {
                K.dequeue(this, t)
            }
            )
        },
        clearQueue: function(t) {
            return this.queue(t || "fx", [])
        },
        promise: function(t, e) {
            var n, i = 1, o = K.Deferred(), r = this, s = this.length, a = function() {
                --i || o.resolveWith(r, [r])
            }
            ;
            for ("string" != typeof t && (e = t,
            t = void 0),
            t = t || "fx"; s--; )
                n = vt.get(r[s], t + "queueHooks"),
                n && n.empty && (i++,
                n.empty.add(a));
            return a(),
            o.promise(e)
        }
    });
    var wt = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source
      , xt = ["Top", "Right", "Bottom", "Left"]
      , Tt = function(t, e) {
        return t = e || t,
        "none" === K.css(t, "display") || !K.contains(t.ownerDocument, t)
    }
      , kt = /^(?:checkbox|radio)$/i;
    !function() {
        var t = J.createDocumentFragment()
          , e = t.appendChild(J.createElement("div"))
          , n = J.createElement("input");
        n.setAttribute("type", "radio"),
        n.setAttribute("checked", "checked"),
        n.setAttribute("name", "t"),
        e.appendChild(n),
        G.checkClone = e.cloneNode(!0).cloneNode(!0).lastChild.checked,
        e.innerHTML = "<textarea>x</textarea>",
        G.noCloneChecked = !!e.cloneNode(!0).lastChild.defaultValue
    }
    ();
    var Et = "undefined";
    G.focusinBubbles = "onfocusin" in t;
    var Dt = /^key/
      , St = /^(?:mouse|pointer|contextmenu)|click/
      , Ct = /^(?:focusinfocus|focusoutblur)$/
      , Pt = /^([^.]*)(?:\.(.+)|)$/;
    K.event = {
        global: {},
        add: function(t, e, n, i, o) {
            var r, s, a, l, u, c, h, d, p, f, m, g = vt.get(t);
            if (g)
                for (n.handler && (r = n,
                n = r.handler,
                o = r.selector),
                n.guid || (n.guid = K.guid++),
                (l = g.events) || (l = g.events = {}),
                (s = g.handle) || (s = g.handle = function(e) {
                    return typeof K !== Et && K.event.triggered !== e.type ? K.event.dispatch.apply(t, arguments) : void 0
                }
                ),
                e = (e || "").match(pt) || [""],
                u = e.length; u--; )
                    a = Pt.exec(e[u]) || [],
                    p = m = a[1],
                    f = (a[2] || "").split(".").sort(),
                    p && (h = K.event.special[p] || {},
                    p = (o ? h.delegateType : h.bindType) || p,
                    h = K.event.special[p] || {},
                    c = K.extend({
                        type: p,
                        origType: m,
                        data: i,
                        handler: n,
                        guid: n.guid,
                        selector: o,
                        needsContext: o && K.expr.match.needsContext.test(o),
                        namespace: f.join(".")
                    }, r),
                    (d = l[p]) || (d = l[p] = [],
                    d.delegateCount = 0,
                    h.setup && h.setup.call(t, i, f, s) !== !1 || t.addEventListener && t.addEventListener(p, s, !1)),
                    h.add && (h.add.call(t, c),
                    c.handler.guid || (c.handler.guid = n.guid)),
                    o ? d.splice(d.delegateCount++, 0, c) : d.push(c),
                    K.event.global[p] = !0)
        },
        remove: function(t, e, n, i, o) {
            var r, s, a, l, u, c, h, d, p, f, m, g = vt.hasData(t) && vt.get(t);
            if (g && (l = g.events)) {
                for (e = (e || "").match(pt) || [""],
                u = e.length; u--; )
                    if (a = Pt.exec(e[u]) || [],
                    p = m = a[1],
                    f = (a[2] || "").split(".").sort(),
                    p) {
                        for (h = K.event.special[p] || {},
                        p = (i ? h.delegateType : h.bindType) || p,
                        d = l[p] || [],
                        a = a[2] && new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"),
                        s = r = d.length; r--; )
                            c = d[r],
                            !o && m !== c.origType || n && n.guid !== c.guid || a && !a.test(c.namespace) || i && i !== c.selector && ("**" !== i || !c.selector) || (d.splice(r, 1),
                            c.selector && d.delegateCount--,
                            h.remove && h.remove.call(t, c));
                        s && !d.length && (h.teardown && h.teardown.call(t, f, g.handle) !== !1 || K.removeEvent(t, p, g.handle),
                        delete l[p])
                    } else
                        for (p in l)
                            K.event.remove(t, p + e[u], n, i, !0);
                K.isEmptyObject(l) && (delete g.handle,
                vt.remove(t, "events"))
            }
        },
        trigger: function(e, n, i, o) {
            var r, s, a, l, u, c, h, d = [i || J], p = Y.call(e, "type") ? e.type : e, f = Y.call(e, "namespace") ? e.namespace.split(".") : [];
            if (s = a = i = i || J,
            3 !== i.nodeType && 8 !== i.nodeType && !Ct.test(p + K.event.triggered) && (p.indexOf(".") >= 0 && (f = p.split("."),
            p = f.shift(),
            f.sort()),
            u = p.indexOf(":") < 0 && "on" + p,
            e = e[K.expando] ? e : new K.Event(p,"object" == typeof e && e),
            e.isTrigger = o ? 2 : 3,
            e.namespace = f.join("."),
            e.namespace_re = e.namespace ? new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)") : null ,
            e.result = void 0,
            e.target || (e.target = i),
            n = null  == n ? [e] : K.makeArray(n, [e]),
            h = K.event.special[p] || {},
            o || !h.trigger || h.trigger.apply(i, n) !== !1)) {
                if (!o && !h.noBubble && !K.isWindow(i)) {
                    for (l = h.delegateType || p,
                    Ct.test(l + p) || (s = s.parentNode); s; s = s.parentNode)
                        d.push(s),
                        a = s;
                    a === (i.ownerDocument || J) && d.push(a.defaultView || a.parentWindow || t)
                }
                for (r = 0; (s = d[r++]) && !e.isPropagationStopped(); )
                    e.type = r > 1 ? l : h.bindType || p,
                    c = (vt.get(s, "events") || {})[e.type] && vt.get(s, "handle"),
                    c && c.apply(s, n),
                    c = u && s[u],
                    c && c.apply && K.acceptData(s) && (e.result = c.apply(s, n),
                    e.result === !1 && e.preventDefault());
                return e.type = p,
                o || e.isDefaultPrevented() || h._default && h._default.apply(d.pop(), n) !== !1 || !K.acceptData(i) || u && K.isFunction(i[p]) && !K.isWindow(i) && (a = i[u],
                a && (i[u] = null ),
                K.event.triggered = p,
                i[p](),
                K.event.triggered = void 0,
                a && (i[u] = a)),
                e.result
            }
        },
        dispatch: function(t) {
            t = K.event.fix(t);
            var e, n, i, o, r, s = [], a = z.call(arguments), l = (vt.get(this, "events") || {})[t.type] || [], u = K.event.special[t.type] || {};
            if (a[0] = t,
            t.delegateTarget = this,
            !u.preDispatch || u.preDispatch.call(this, t) !== !1) {
                for (s = K.event.handlers.call(this, t, l),
                e = 0; (o = s[e++]) && !t.isPropagationStopped(); )
                    for (t.currentTarget = o.elem,
                    n = 0; (r = o.handlers[n++]) && !t.isImmediatePropagationStopped(); )
                        (!t.namespace_re || t.namespace_re.test(r.namespace)) && (t.handleObj = r,
                        t.data = r.data,
                        i = ((K.event.special[r.origType] || {}).handle || r.handler).apply(o.elem, a),
                        void 0 !== i && (t.result = i) === !1 && (t.preventDefault(),
                        t.stopPropagation()));
                return u.postDispatch && u.postDispatch.call(this, t),
                t.result
            }
        },
        handlers: function(t, e) {
            var n, i, o, r, s = [], a = e.delegateCount, l = t.target;
            if (a && l.nodeType && (!t.button || "click" !== t.type))
                for (; l !== this; l = l.parentNode || this)
                    if (l.disabled !== !0 || "click" !== t.type) {
                        for (i = [],
                        n = 0; a > n; n++)
                            r = e[n],
                            o = r.selector + " ",
                            void 0 === i[o] && (i[o] = r.needsContext ? K(o, this).index(l) >= 0 : K.find(o, this, null , [l]).length),
                            i[o] && i.push(r);
                        i.length && s.push({
                            elem: l,
                            handlers: i
                        })
                    }
            return a < e.length && s.push({
                elem: this,
                handlers: e.slice(a)
            }),
            s
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(t, e) {
                return null  == t.which && (t.which = null  != e.charCode ? e.charCode : e.keyCode),
                t
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(t, e) {
                var n, i, o, r = e.button;
                return null  == t.pageX && null  != e.clientX && (n = t.target.ownerDocument || J,
                i = n.documentElement,
                o = n.body,
                t.pageX = e.clientX + (i && i.scrollLeft || o && o.scrollLeft || 0) - (i && i.clientLeft || o && o.clientLeft || 0),
                t.pageY = e.clientY + (i && i.scrollTop || o && o.scrollTop || 0) - (i && i.clientTop || o && o.clientTop || 0)),
                t.which || void 0 === r || (t.which = 1 & r ? 1 : 2 & r ? 3 : 4 & r ? 2 : 0),
                t
            }
        },
        fix: function(t) {
            if (t[K.expando])
                return t;
            var e, n, i, o = t.type, r = t, s = this.fixHooks[o];
            for (s || (this.fixHooks[o] = s = St.test(o) ? this.mouseHooks : Dt.test(o) ? this.keyHooks : {}),
            i = s.props ? this.props.concat(s.props) : this.props,
            t = new K.Event(r),
            e = i.length; e--; )
                n = i[e],
                t[n] = r[n];
            return t.target || (t.target = J),
            3 === t.target.nodeType && (t.target = t.target.parentNode),
            s.filter ? s.filter(t, r) : t
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    return this !== h() && this.focus ? (this.focus(),
                    !1) : void 0
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    return this === h() && this.blur ? (this.blur(),
                    !1) : void 0
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    return "checkbox" === this.type && this.click && K.nodeName(this, "input") ? (this.click(),
                    !1) : void 0
                },
                _default: function(t) {
                    return K.nodeName(t.target, "a")
                }
            },
            beforeunload: {
                postDispatch: function(t) {
                    void 0 !== t.result && t.originalEvent && (t.originalEvent.returnValue = t.result)
                }
            }
        },
        simulate: function(t, e, n, i) {
            var o = K.extend(new K.Event, n, {
                type: t,
                isSimulated: !0,
                originalEvent: {}
            });
            i ? K.event.trigger(o, null , e) : K.event.dispatch.call(e, o),
            o.isDefaultPrevented() && n.preventDefault()
        }
    },
    K.removeEvent = function(t, e, n) {
        t.removeEventListener && t.removeEventListener(e, n, !1)
    }
    ,
    K.Event = function(t, e) {
        return this instanceof K.Event ? (t && t.type ? (this.originalEvent = t,
        this.type = t.type,
        this.isDefaultPrevented = t.defaultPrevented || void 0 === t.defaultPrevented && t.returnValue === !1 ? u : c) : this.type = t,
        e && K.extend(this, e),
        this.timeStamp = t && t.timeStamp || K.now(),
        void (this[K.expando] = !0)) : new K.Event(t,e)
    }
    ,
    K.Event.prototype = {
        isDefaultPrevented: c,
        isPropagationStopped: c,
        isImmediatePropagationStopped: c,
        preventDefault: function() {
            var t = this.originalEvent;
            this.isDefaultPrevented = u,
            t && t.preventDefault && t.preventDefault()
        },
        stopPropagation: function() {
            var t = this.originalEvent;
            this.isPropagationStopped = u,
            t && t.stopPropagation && t.stopPropagation()
        },
        stopImmediatePropagation: function() {
            var t = this.originalEvent;
            this.isImmediatePropagationStopped = u,
            t && t.stopImmediatePropagation && t.stopImmediatePropagation(),
            this.stopPropagation()
        }
    },
    K.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function(t, e) {
        K.event.special[t] = {
            delegateType: e,
            bindType: e,
            handle: function(t) {
                var n, i = this, o = t.relatedTarget, r = t.handleObj;
                return (!o || o !== i && !K.contains(i, o)) && (t.type = r.origType,
                n = r.handler.apply(this, arguments),
                t.type = e),
                n
            }
        }
    }
    ),
    G.focusinBubbles || K.each({
        focus: "focusin",
        blur: "focusout"
    }, function(t, e) {
        var n = function(t) {
            K.event.simulate(e, t.target, K.event.fix(t), !0)
        }
        ;
        K.event.special[e] = {
            setup: function() {
                var i = this.ownerDocument || this
                  , o = vt.access(i, e);
                o || i.addEventListener(t, n, !0),
                vt.access(i, e, (o || 0) + 1)
            },
            teardown: function() {
                var i = this.ownerDocument || this
                  , o = vt.access(i, e) - 1;
                o ? vt.access(i, e, o) : (i.removeEventListener(t, n, !0),
                vt.remove(i, e))
            }
        }
    }
    ),
    K.fn.extend({
        on: function(t, e, n, i, o) {
            var r, s;
            if ("object" == typeof t) {
                "string" != typeof e && (n = n || e,
                e = void 0);
                for (s in t)
                    this.on(s, e, n, t[s], o);
                return this
            }
            if (null  == n && null  == i ? (i = e,
            n = e = void 0) : null  == i && ("string" == typeof e ? (i = n,
            n = void 0) : (i = n,
            n = e,
            e = void 0)),
            i === !1)
                i = c;
            else if (!i)
                return this;
            return 1 === o && (r = i,
            i = function(t) {
                return K().off(t),
                r.apply(this, arguments)
            }
            ,
            i.guid = r.guid || (r.guid = K.guid++)),
            this.each(function() {
                K.event.add(this, t, i, n, e)
            }
            )
        },
        one: function(t, e, n, i) {
            return this.on(t, e, n, i, 1)
        },
        off: function(t, e, n) {
            var i, o;
            if (t && t.preventDefault && t.handleObj)
                return i = t.handleObj,
                K(t.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler),
                this;
            if ("object" == typeof t) {
                for (o in t)
                    this.off(o, e, t[o]);
                return this
            }
            return (e === !1 || "function" == typeof e) && (n = e,
            e = void 0),
            n === !1 && (n = c),
            this.each(function() {
                K.event.remove(this, t, n, e)
            }
            )
        },
        trigger: function(t, e) {
            return this.each(function() {
                K.event.trigger(t, e, this)
            }
            )
        },
        triggerHandler: function(t, e) {
            var n = this[0];
            return n ? K.event.trigger(t, e, n, !0) : void 0
        }
    });
    var Lt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi
      , Nt = /<([\w:]+)/
      , Mt = /<|&#?\w+;/
      , At = /<(?:script|style|link)/i
      , It = /checked\s*(?:[^=]|=\s*.checked.)/i
      , Ot = /^$|\/(?:java|ecma)script/i
      , Rt = /^true\/(.*)/
      , Ut = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g
      , jt = {
        option: [1, "<select multiple='multiple'>", "</select>"],
        thead: [1, "<table>", "</table>"],
        col: [2, "<table><colgroup>", "</colgroup></table>"],
        tr: [2, "<table><tbody>", "</tbody></table>"],
        td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
        _default: [0, "", ""]
    };
    jt.optgroup = jt.option,
    jt.tbody = jt.tfoot = jt.colgroup = jt.caption = jt.thead,
    jt.th = jt.td,
    K.extend({
        clone: function(t, e, n) {
            var i, o, r, s, a = t.cloneNode(!0), l = K.contains(t.ownerDocument, t);
            if (!(G.noCloneChecked || 1 !== t.nodeType && 11 !== t.nodeType || K.isXMLDoc(t)))
                for (s = v(a),
                r = v(t),
                i = 0,
                o = r.length; o > i; i++)
                    y(r[i], s[i]);
            if (e)
                if (n)
                    for (r = r || v(t),
                    s = s || v(a),
                    i = 0,
                    o = r.length; o > i; i++)
                        g(r[i], s[i]);
                else
                    g(t, a);
            return s = v(a, "script"),
            s.length > 0 && m(s, !l && v(t, "script")),
            a
        },
        buildFragment: function(t, e, n, i) {
            for (var o, r, s, a, l, u, c = e.createDocumentFragment(), h = [], d = 0, p = t.length; p > d; d++)
                if (o = t[d],
                o || 0 === o)
                    if ("object" === K.type(o))
                        K.merge(h, o.nodeType ? [o] : o);
                    else if (Mt.test(o)) {
                        for (r = r || c.appendChild(e.createElement("div")),
                        s = (Nt.exec(o) || ["", ""])[1].toLowerCase(),
                        a = jt[s] || jt._default,
                        r.innerHTML = a[1] + o.replace(Lt, "<$1></$2>") + a[2],
                        u = a[0]; u--; )
                            r = r.lastChild;
                        K.merge(h, r.childNodes),
                        r = c.firstChild,
                        r.textContent = ""
                    } else
                        h.push(e.createTextNode(o));
            for (c.textContent = "",
            d = 0; o = h[d++]; )
                if ((!i || -1 === K.inArray(o, i)) && (l = K.contains(o.ownerDocument, o),
                r = v(c.appendChild(o), "script"),
                l && m(r),
                n))
                    for (u = 0; o = r[u++]; )
                        Ot.test(o.type || "") && n.push(o);
            return c
        },
        cleanData: function(t) {
            for (var e, n, i, o, r = K.event.special, s = 0; void 0 !== (n = t[s]); s++) {
                if (K.acceptData(n) && (o = n[vt.expando],
                o && (e = vt.cache[o]))) {
                    if (e.events)
                        for (i in e.events)
                            r[i] ? K.event.remove(n, i) : K.removeEvent(n, i, e.handle);
                    vt.cache[o] && delete vt.cache[o]
                }
                delete yt.cache[n[yt.expando]]
            }
        }
    }),
    K.fn.extend({
        text: function(t) {
            return gt(this, function(t) {
                return void 0 === t ? K.text(this) : this.empty().each(function() {
                    (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && (this.textContent = t)
                }
                )
            }
            , null , t, arguments.length)
        },
        append: function() {
            return this.domManip(arguments, function(t) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var e = d(this, t);
                    e.appendChild(t)
                }
            }
            )
        },
        prepend: function() {
            return this.domManip(arguments, function(t) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var e = d(this, t);
                    e.insertBefore(t, e.firstChild)
                }
            }
            )
        },
        before: function() {
            return this.domManip(arguments, function(t) {
                this.parentNode && this.parentNode.insertBefore(t, this)
            }
            )
        },
        after: function() {
            return this.domManip(arguments, function(t) {
                this.parentNode && this.parentNode.insertBefore(t, this.nextSibling)
            }
            )
        },
        remove: function(t, e) {
            for (var n, i = t ? K.filter(t, this) : this, o = 0; null  != (n = i[o]); o++)
                e || 1 !== n.nodeType || K.cleanData(v(n)),
                n.parentNode && (e && K.contains(n.ownerDocument, n) && m(v(n, "script")),
                n.parentNode.removeChild(n));
            return this
        },
        empty: function() {
            for (var t, e = 0; null  != (t = this[e]); e++)
                1 === t.nodeType && (K.cleanData(v(t, !1)),
                t.textContent = "");
            return this
        },
        clone: function(t, e) {
            return t = null  == t ? !1 : t,
            e = null  == e ? t : e,
            this.map(function() {
                return K.clone(this, t, e)
            }
            )
        },
        html: function(t) {
            return gt(this, function(t) {
                var e = this[0] || {}
                  , n = 0
                  , i = this.length;
                if (void 0 === t && 1 === e.nodeType)
                    return e.innerHTML;
                if ("string" == typeof t && !At.test(t) && !jt[(Nt.exec(t) || ["", ""])[1].toLowerCase()]) {
                    t = t.replace(Lt, "<$1></$2>");
                    try {
                        for (; i > n; n++)
                            e = this[n] || {},
                            1 === e.nodeType && (K.cleanData(v(e, !1)),
                            e.innerHTML = t);
                        e = 0
                    } catch (o) {}
                }
                e && this.empty().append(t)
            }
            , null , t, arguments.length)
        },
        replaceWith: function() {
            var t = arguments[0];
            return this.domManip(arguments, function(e) {
                t = this.parentNode,
                K.cleanData(v(this)),
                t && t.replaceChild(e, this)
            }
            ),
            t && (t.length || t.nodeType) ? this : this.remove()
        },
        detach: function(t) {
            return this.remove(t, !0)
        },
        domManip: function(t, e) {
            t = V.apply([], t);
            var n, i, o, r, s, a, l = 0, u = this.length, c = this, h = u - 1, d = t[0], m = K.isFunction(d);
            if (m || u > 1 && "string" == typeof d && !G.checkClone && It.test(d))
                return this.each(function(n) {
                    var i = c.eq(n);
                    m && (t[0] = d.call(this, n, i.html())),
                    i.domManip(t, e)
                }
                );
            if (u && (n = K.buildFragment(t, this[0].ownerDocument, !1, this),
            i = n.firstChild,
            1 === n.childNodes.length && (n = i),
            i)) {
                for (o = K.map(v(n, "script"), p),
                r = o.length; u > l; l++)
                    s = n,
                    l !== h && (s = K.clone(s, !0, !0),
                    r && K.merge(o, v(s, "script"))),
                    e.call(this[l], s, l);
                if (r)
                    for (a = o[o.length - 1].ownerDocument,
                    K.map(o, f),
                    l = 0; r > l; l++)
                        s = o[l],
                        Ot.test(s.type || "") && !vt.access(s, "globalEval") && K.contains(a, s) && (s.src ? K._evalUrl && K._evalUrl(s.src) : K.globalEval(s.textContent.replace(Ut, "")))
            }
            return this
        }
    }),
    K.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(t, e) {
        K.fn[t] = function(t) {
            for (var n, i = [], o = K(t), r = o.length - 1, s = 0; r >= s; s++)
                n = s === r ? this : this.clone(!0),
                K(o[s])[e](n),
                H.apply(i, n.get());
            return this.pushStack(i)
        }
    }
    );
    var Bt, Ft = {}, $t = /^margin/, qt = new RegExp("^(" + wt + ")(?!px)[a-z%]+$","i"), zt = function(e) {
        return e.ownerDocument.defaultView.opener ? e.ownerDocument.defaultView.getComputedStyle(e, null ) : t.getComputedStyle(e, null )
    }
    ;
    !function() {
        function e() {
            s.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",
            s.innerHTML = "",
            o.appendChild(r);
            var e = t.getComputedStyle(s, null );
            n = "1%" !== e.top,
            i = "4px" === e.width,
            o.removeChild(r)
        }
        var n, i, o = J.documentElement, r = J.createElement("div"), s = J.createElement("div");
        s.style && (s.style.backgroundClip = "content-box",
        s.cloneNode(!0).style.backgroundClip = "",
        G.clearCloneStyle = "content-box" === s.style.backgroundClip,
        r.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",
        r.appendChild(s),
        t.getComputedStyle && K.extend(G, {
            pixelPosition: function() {
                return e(),
                n
            },
            boxSizingReliable: function() {
                return null  == i && e(),
                i
            },
            reliableMarginRight: function() {
                var e, n = s.appendChild(J.createElement("div"));
                return n.style.cssText = s.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",
                n.style.marginRight = n.style.width = "0",
                s.style.width = "1px",
                o.appendChild(r),
                e = !parseFloat(t.getComputedStyle(n, null ).marginRight),
                o.removeChild(r),
                s.removeChild(n),
                e
            }
        }))
    }
    (),
    K.swap = function(t, e, n, i) {
        var o, r, s = {};
        for (r in e)
            s[r] = t.style[r],
            t.style[r] = e[r];
        o = n.apply(t, i || []);
        for (r in e)
            t.style[r] = s[r];
        return o
    }
    ;
    var Vt = /^(none|table(?!-c[ea]).+)/
      , Ht = new RegExp("^(" + wt + ")(.*)$","i")
      , Wt = new RegExp("^([+-])=(" + wt + ")","i")
      , Zt = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    }
      , Xt = {
        letterSpacing: "0",
        fontWeight: "400"
    }
      , Yt = ["Webkit", "O", "Moz", "ms"];
    K.extend({
        cssHooks: {
            opacity: {
                get: function(t, e) {
                    if (e) {
                        var n = w(t, "opacity");
                        return "" === n ? "1" : n
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": "cssFloat"
        },
        style: function(t, e, n, i) {
            if (t && 3 !== t.nodeType && 8 !== t.nodeType && t.style) {
                var o, r, s, a = K.camelCase(e), l = t.style;
                return e = K.cssProps[a] || (K.cssProps[a] = T(l, a)),
                s = K.cssHooks[e] || K.cssHooks[a],
                void 0 === n ? s && "get" in s && void 0 !== (o = s.get(t, !1, i)) ? o : l[e] : (r = typeof n,
                "string" === r && (o = Wt.exec(n)) && (n = (o[1] + 1) * o[2] + parseFloat(K.css(t, e)),
                r = "number"),
                null  != n && n === n && ("number" !== r || K.cssNumber[a] || (n += "px"),
                G.clearCloneStyle || "" !== n || 0 !== e.indexOf("background") || (l[e] = "inherit"),
                s && "set" in s && void 0 === (n = s.set(t, n, i)) || (l[e] = n)),
                void 0)
            }
        },
        css: function(t, e, n, i) {
            var o, r, s, a = K.camelCase(e);
            return e = K.cssProps[a] || (K.cssProps[a] = T(t.style, a)),
            s = K.cssHooks[e] || K.cssHooks[a],
            s && "get" in s && (o = s.get(t, !0, n)),
            void 0 === o && (o = w(t, e, i)),
            "normal" === o && e in Xt && (o = Xt[e]),
            "" === n || n ? (r = parseFloat(o),
            n === !0 || K.isNumeric(r) ? r || 0 : o) : o
        }
    }),
    K.each(["height", "width"], function(t, e) {
        K.cssHooks[e] = {
            get: function(t, n, i) {
                return n ? Vt.test(K.css(t, "display")) && 0 === t.offsetWidth ? K.swap(t, Zt, function() {
                    return D(t, e, i)
                }
                ) : D(t, e, i) : void 0
            },
            set: function(t, n, i) {
                var o = i && zt(t);
                return k(t, n, i ? E(t, e, i, "border-box" === K.css(t, "boxSizing", !1, o), o) : 0)
            }
        }
    }
    ),
    K.cssHooks.marginRight = x(G.reliableMarginRight, function(t, e) {
        return e ? K.swap(t, {
            display: "inline-block"
        }, w, [t, "marginRight"]) : void 0
    }
    ),
    K.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(t, e) {
        K.cssHooks[t + e] = {
            expand: function(n) {
                for (var i = 0, o = {}, r = "string" == typeof n ? n.split(" ") : [n]; 4 > i; i++)
                    o[t + xt[i] + e] = r[i] || r[i - 2] || r[0];
                return o
            }
        },
        $t.test(t) || (K.cssHooks[t + e].set = k)
    }
    ),
    K.fn.extend({
        css: function(t, e) {
            return gt(this, function(t, e, n) {
                var i, o, r = {}, s = 0;
                if (K.isArray(e)) {
                    for (i = zt(t),
                    o = e.length; o > s; s++)
                        r[e[s]] = K.css(t, e[s], !1, i);
                    return r
                }
                return void 0 !== n ? K.style(t, e, n) : K.css(t, e)
            }
            , t, e, arguments.length > 1)
        },
        show: function() {
            return S(this, !0)
        },
        hide: function() {
            return S(this)
        },
        toggle: function(t) {
            return "boolean" == typeof t ? t ? this.show() : this.hide() : this.each(function() {
                Tt(this) ? K(this).show() : K(this).hide()
            }
            )
        }
    }),
    K.Tween = C,
    C.prototype = {
        constructor: C,
        init: function(t, e, n, i, o, r) {
            this.elem = t,
            this.prop = n,
            this.easing = o || "swing",
            this.options = e,
            this.start = this.now = this.cur(),
            this.end = i,
            this.unit = r || (K.cssNumber[n] ? "" : "px")
        },
        cur: function() {
            var t = C.propHooks[this.prop];
            return t && t.get ? t.get(this) : C.propHooks._default.get(this)
        },
        run: function(t) {
            var e, n = C.propHooks[this.prop];
            return this.options.duration ? this.pos = e = K.easing[this.easing](t, this.options.duration * t, 0, 1, this.options.duration) : this.pos = e = t,
            this.now = (this.end - this.start) * e + this.start,
            this.options.step && this.options.step.call(this.elem, this.now, this),
            n && n.set ? n.set(this) : C.propHooks._default.set(this),
            this
        }
    },
    C.prototype.init.prototype = C.prototype,
    C.propHooks = {
        _default: {
            get: function(t) {
                var e;
                return null  == t.elem[t.prop] || t.elem.style && null  != t.elem.style[t.prop] ? (e = K.css(t.elem, t.prop, ""),
                e && "auto" !== e ? e : 0) : t.elem[t.prop]
            },
            set: function(t) {
                K.fx.step[t.prop] ? K.fx.step[t.prop](t) : t.elem.style && (null  != t.elem.style[K.cssProps[t.prop]] || K.cssHooks[t.prop]) ? K.style(t.elem, t.prop, t.now + t.unit) : t.elem[t.prop] = t.now
            }
        }
    },
    C.propHooks.scrollTop = C.propHooks.scrollLeft = {
        set: function(t) {
            t.elem.nodeType && t.elem.parentNode && (t.elem[t.prop] = t.now)
        }
    },
    K.easing = {
        linear: function(t) {
            return t
        },
        swing: function(t) {
            return .5 - Math.cos(t * Math.PI) / 2
        }
    },
    K.fx = C.prototype.init,
    K.fx.step = {};
    var Gt, Jt, Qt = /^(?:toggle|show|hide)$/, Kt = new RegExp("^(?:([+-])=|)(" + wt + ")([a-z%]*)$","i"), te = /queueHooks$/, ee = [M], ne = {
        "*": [function(t, e) {
            var n = this.createTween(t, e)
              , i = n.cur()
              , o = Kt.exec(e)
              , r = o && o[3] || (K.cssNumber[t] ? "" : "px")
              , s = (K.cssNumber[t] || "px" !== r && +i) && Kt.exec(K.css(n.elem, t))
              , a = 1
              , l = 20;
            if (s && s[3] !== r) {
                r = r || s[3],
                o = o || [],
                s = +i || 1;
                do
                    a = a || ".5",
                    s /= a,
                    K.style(n.elem, t, s + r);
                while (a !== (a = n.cur() / i) && 1 !== a && --l)
            }
            return o && (s = n.start = +s || +i || 0,
            n.unit = r,
            n.end = o[1] ? s + (o[1] + 1) * o[2] : +o[2]),
            n
        }
        ]
    };
    K.Animation = K.extend(I, {
        tweener: function(t, e) {
            K.isFunction(t) ? (e = t,
            t = ["*"]) : t = t.split(" ");
            for (var n, i = 0, o = t.length; o > i; i++)
                n = t[i],
                ne[n] = ne[n] || [],
                ne[n].unshift(e)
        },
        prefilter: function(t, e) {
            e ? ee.unshift(t) : ee.push(t)
        }
    }),
    K.speed = function(t, e, n) {
        var i = t && "object" == typeof t ? K.extend({}, t) : {
            complete: n || !n && e || K.isFunction(t) && t,
            duration: t,
            easing: n && e || e && !K.isFunction(e) && e
        };
        return i.duration = K.fx.off ? 0 : "number" == typeof i.duration ? i.duration : i.duration in K.fx.speeds ? K.fx.speeds[i.duration] : K.fx.speeds._default,
        (null  == i.queue || i.queue === !0) && (i.queue = "fx"),
        i.old = i.complete,
        i.complete = function() {
            K.isFunction(i.old) && i.old.call(this),
            i.queue && K.dequeue(this, i.queue)
        }
        ,
        i
    }
    ,
    K.fn.extend({
        fadeTo: function(t, e, n, i) {
            return this.filter(Tt).css("opacity", 0).show().end().animate({
                opacity: e
            }, t, n, i)
        },
        animate: function(t, e, n, i) {
            var o = K.isEmptyObject(t)
              , r = K.speed(e, n, i)
              , s = function() {
                var e = I(this, K.extend({}, t), r);
                (o || vt.get(this, "finish")) && e.stop(!0)
            }
            ;
            return s.finish = s,
            o || r.queue === !1 ? this.each(s) : this.queue(r.queue, s)
        },
        stop: function(t, e, n) {
            var i = function(t) {
                var e = t.stop;
                delete t.stop,
                e(n)
            }
            ;
            return "string" != typeof t && (n = e,
            e = t,
            t = void 0),
            e && t !== !1 && this.queue(t || "fx", []),
            this.each(function() {
                var e = !0
                  , o = null  != t && t + "queueHooks"
                  , r = K.timers
                  , s = vt.get(this);
                if (o)
                    s[o] && s[o].stop && i(s[o]);
                else
                    for (o in s)
                        s[o] && s[o].stop && te.test(o) && i(s[o]);
                for (o = r.length; o--; )
                    r[o].elem !== this || null  != t && r[o].queue !== t || (r[o].anim.stop(n),
                    e = !1,
                    r.splice(o, 1));
                (e || !n) && K.dequeue(this, t)
            }
            )
        },
        finish: function(t) {
            return t !== !1 && (t = t || "fx"),
            this.each(function() {
                var e, n = vt.get(this), i = n[t + "queue"], o = n[t + "queueHooks"], r = K.timers, s = i ? i.length : 0;
                for (n.finish = !0,
                K.queue(this, t, []),
                o && o.stop && o.stop.call(this, !0),
                e = r.length; e--; )
                    r[e].elem === this && r[e].queue === t && (r[e].anim.stop(!0),
                    r.splice(e, 1));
                for (e = 0; s > e; e++)
                    i[e] && i[e].finish && i[e].finish.call(this);
                delete n.finish
            }
            )
        }
    }),
    K.each(["toggle", "show", "hide"], function(t, e) {
        var n = K.fn[e];
        K.fn[e] = function(t, i, o) {
            return null  == t || "boolean" == typeof t ? n.apply(this, arguments) : this.animate(L(e, !0), t, i, o)
        }
    }
    ),
    K.each({
        slideDown: L("show"),
        slideUp: L("hide"),
        slideToggle: L("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(t, e) {
        K.fn[t] = function(t, n, i) {
            return this.animate(e, t, n, i)
        }
    }
    ),
    K.timers = [],
    K.fx.tick = function() {
        var t, e = 0, n = K.timers;
        for (Gt = K.now(); e < n.length; e++)
            t = n[e],
            t() || n[e] !== t || n.splice(e--, 1);
        n.length || K.fx.stop(),
        Gt = void 0
    }
    ,
    K.fx.timer = function(t) {
        K.timers.push(t),
        t() ? K.fx.start() : K.timers.pop()
    }
    ,
    K.fx.interval = 13,
    K.fx.start = function() {
        Jt || (Jt = setInterval(K.fx.tick, K.fx.interval))
    }
    ,
    K.fx.stop = function() {
        clearInterval(Jt),
        Jt = null 
    }
    ,
    K.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    },
    K.fn.delay = function(t, e) {
        return t = K.fx ? K.fx.speeds[t] || t : t,
        e = e || "fx",
        this.queue(e, function(e, n) {
            var i = setTimeout(e, t);
            n.stop = function() {
                clearTimeout(i)
            }
        }
        )
    }
    ,
    function() {
        var t = J.createElement("input")
          , e = J.createElement("select")
          , n = e.appendChild(J.createElement("option"));
        t.type = "checkbox",
        G.checkOn = "" !== t.value,
        G.optSelected = n.selected,
        e.disabled = !0,
        G.optDisabled = !n.disabled,
        t = J.createElement("input"),
        t.value = "t",
        t.type = "radio",
        G.radioValue = "t" === t.value
    }
    ();
    var ie, oe, re = K.expr.attrHandle;
    K.fn.extend({
        attr: function(t, e) {
            return gt(this, K.attr, t, e, arguments.length > 1)
        },
        removeAttr: function(t) {
            return this.each(function() {
                K.removeAttr(this, t)
            }
            )
        }
    }),
    K.extend({
        attr: function(t, e, n) {
            var i, o, r = t.nodeType;
            if (t && 3 !== r && 8 !== r && 2 !== r)
                return typeof t.getAttribute === Et ? K.prop(t, e, n) : (1 === r && K.isXMLDoc(t) || (e = e.toLowerCase(),
                i = K.attrHooks[e] || (K.expr.match.bool.test(e) ? oe : ie)),
                void 0 === n ? i && "get" in i && null  !== (o = i.get(t, e)) ? o : (o = K.find.attr(t, e),
                null  == o ? void 0 : o) : null  !== n ? i && "set" in i && void 0 !== (o = i.set(t, n, e)) ? o : (t.setAttribute(e, n + ""),
                n) : void K.removeAttr(t, e))
        },
        removeAttr: function(t, e) {
            var n, i, o = 0, r = e && e.match(pt);
            if (r && 1 === t.nodeType)
                for (; n = r[o++]; )
                    i = K.propFix[n] || n,
                    K.expr.match.bool.test(n) && (t[i] = !1),
                    t.removeAttribute(n)
        },
        attrHooks: {
            type: {
                set: function(t, e) {
                    if (!G.radioValue && "radio" === e && K.nodeName(t, "input")) {
                        var n = t.value;
                        return t.setAttribute("type", e),
                        n && (t.value = n),
                        e
                    }
                }
            }
        }
    }),
    oe = {
        set: function(t, e, n) {
            return e === !1 ? K.removeAttr(t, n) : t.setAttribute(n, n),
            n
        }
    },
    K.each(K.expr.match.bool.source.match(/\w+/g), function(t, e) {
        var n = re[e] || K.find.attr;
        re[e] = function(t, e, i) {
            var o, r;
            return i || (r = re[e],
            re[e] = o,
            o = null  != n(t, e, i) ? e.toLowerCase() : null ,
            re[e] = r),
            o
        }
    }
    );
    var se = /^(?:input|select|textarea|button)$/i;
    K.fn.extend({
        prop: function(t, e) {
            return gt(this, K.prop, t, e, arguments.length > 1)
        },
        removeProp: function(t) {
            return this.each(function() {
                delete this[K.propFix[t] || t]
            }
            )
        }
    }),
    K.extend({
        propFix: {
            "for": "htmlFor",
            "class": "className"
        },
        prop: function(t, e, n) {
            var i, o, r, s = t.nodeType;
            if (t && 3 !== s && 8 !== s && 2 !== s)
                return r = 1 !== s || !K.isXMLDoc(t),
                r && (e = K.propFix[e] || e,
                o = K.propHooks[e]),
                void 0 !== n ? o && "set" in o && void 0 !== (i = o.set(t, n, e)) ? i : t[e] = n : o && "get" in o && null  !== (i = o.get(t, e)) ? i : t[e]
        },
        propHooks: {
            tabIndex: {
                get: function(t) {
                    return t.hasAttribute("tabindex") || se.test(t.nodeName) || t.href ? t.tabIndex : -1
                }
            }
        }
    }),
    G.optSelected || (K.propHooks.selected = {
        get: function(t) {
            var e = t.parentNode;
            return e && e.parentNode && e.parentNode.selectedIndex,
            null 
        }
    }),
    K.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
        K.propFix[this.toLowerCase()] = this
    }
    );
    var ae = /[\t\r\n\f]/g;
    K.fn.extend({
        addClass: function(t) {
            var e, n, i, o, r, s, a = "string" == typeof t && t, l = 0, u = this.length;
            if (K.isFunction(t))
                return this.each(function(e) {
                    K(this).addClass(t.call(this, e, this.className))
                }
                );
            if (a)
                for (e = (t || "").match(pt) || []; u > l; l++)
                    if (n = this[l],
                    i = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(ae, " ") : " ")) {
                        for (r = 0; o = e[r++]; )
                            i.indexOf(" " + o + " ") < 0 && (i += o + " ");
                        s = K.trim(i),
                        n.className !== s && (n.className = s)
                    }
            return this
        },
        removeClass: function(t) {
            var e, n, i, o, r, s, a = 0 === arguments.length || "string" == typeof t && t, l = 0, u = this.length;
            if (K.isFunction(t))
                return this.each(function(e) {
                    K(this).removeClass(t.call(this, e, this.className))
                }
                );
            if (a)
                for (e = (t || "").match(pt) || []; u > l; l++)
                    if (n = this[l],
                    i = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(ae, " ") : "")) {
                        for (r = 0; o = e[r++]; )
                            for (; i.indexOf(" " + o + " ") >= 0; )
                                i = i.replace(" " + o + " ", " ");
                        s = t ? K.trim(i) : "",
                        n.className !== s && (n.className = s)
                    }
            return this
        },
        toggleClass: function(t, e) {
            var n = typeof t;
            return "boolean" == typeof e && "string" === n ? e ? this.addClass(t) : this.removeClass(t) : K.isFunction(t) ? this.each(function(n) {
                K(this).toggleClass(t.call(this, n, this.className, e), e)
            }
            ) : this.each(function() {
                if ("string" === n)
                    for (var e, i = 0, o = K(this), r = t.match(pt) || []; e = r[i++]; )
                        o.hasClass(e) ? o.removeClass(e) : o.addClass(e);
                else
                    (n === Et || "boolean" === n) && (this.className && vt.set(this, "__className__", this.className),
                    this.className = this.className || t === !1 ? "" : vt.get(this, "__className__") || "")
            }
            )
        },
        hasClass: function(t) {
            for (var e = " " + t + " ", n = 0, i = this.length; i > n; n++)
                if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(ae, " ").indexOf(e) >= 0)
                    return !0;
            return !1
        }
    });
    var le = /\r/g;
    K.fn.extend({
        val: function(t) {
            var e, n, i, o = this[0];
            {
                if (arguments.length)
                    return i = K.isFunction(t),
                    this.each(function(n) {
                        var o;
                        1 === this.nodeType && (o = i ? t.call(this, n, K(this).val()) : t,
                        null  == o ? o = "" : "number" == typeof o ? o += "" : K.isArray(o) && (o = K.map(o, function(t) {
                            return null  == t ? "" : t + ""
                        }
                        )),
                        e = K.valHooks[this.type] || K.valHooks[this.nodeName.toLowerCase()],
                        e && "set" in e && void 0 !== e.set(this, o, "value") || (this.value = o))
                    }
                    );
                if (o)
                    return e = K.valHooks[o.type] || K.valHooks[o.nodeName.toLowerCase()],
                    e && "get" in e && void 0 !== (n = e.get(o, "value")) ? n : (n = o.value,
                    "string" == typeof n ? n.replace(le, "") : null  == n ? "" : n)
            }
        }
    }),
    K.extend({
        valHooks: {
            option: {
                get: function(t) {
                    var e = K.find.attr(t, "value");
                    return null  != e ? e : K.trim(K.text(t))
                }
            },
            select: {
                get: function(t) {
                    for (var e, n, i = t.options, o = t.selectedIndex, r = "select-one" === t.type || 0 > o, s = r ? null  : [], a = r ? o + 1 : i.length, l = 0 > o ? a : r ? o : 0; a > l; l++)
                        if (n = i[l],
                        !(!n.selected && l !== o || (G.optDisabled ? n.disabled : null  !== n.getAttribute("disabled")) || n.parentNode.disabled && K.nodeName(n.parentNode, "optgroup"))) {
                            if (e = K(n).val(),
                            r)
                                return e;
                            s.push(e)
                        }
                    return s
                },
                set: function(t, e) {
                    for (var n, i, o = t.options, r = K.makeArray(e), s = o.length; s--; )
                        i = o[s],
                        (i.selected = K.inArray(i.value, r) >= 0) && (n = !0);
                    return n || (t.selectedIndex = -1),
                    r
                }
            }
        }
    }),
    K.each(["radio", "checkbox"], function() {
        K.valHooks[this] = {
            set: function(t, e) {
                return K.isArray(e) ? t.checked = K.inArray(K(t).val(), e) >= 0 : void 0
            }
        },
        G.checkOn || (K.valHooks[this].get = function(t) {
            return null  === t.getAttribute("value") ? "on" : t.value
        }
        )
    }
    ),
    K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(t, e) {
        K.fn[e] = function(t, n) {
            return arguments.length > 0 ? this.on(e, null , t, n) : this.trigger(e)
        }
    }
    ),
    K.fn.extend({
        hover: function(t, e) {
            return this.mouseenter(t).mouseleave(e || t)
        },
        bind: function(t, e, n) {
            return this.on(t, null , e, n)
        },
        unbind: function(t, e) {
            return this.off(t, null , e)
        },
        delegate: function(t, e, n, i) {
            return this.on(e, t, n, i)
        },
        undelegate: function(t, e, n) {
            return 1 === arguments.length ? this.off(t, "**") : this.off(e, t || "**", n)
        }
    });
    var ue = K.now()
      , ce = /\?/;
    K.parseJSON = function(t) {
        return JSON.parse(t + "")
    }
    ,
    K.parseXML = function(t) {
        var e, n;
        if (!t || "string" != typeof t)
            return null ;
        try {
            n = new DOMParser,
            e = n.parseFromString(t, "text/xml")
        } catch (i) {
            e = void 0
        }
        return (!e || e.getElementsByTagName("parsererror").length) && K.error("Invalid XML: " + t),
        e
    }
    ;
    var he = /#.*$/
      , de = /([?&])_=[^&]*/
      , pe = /^(.*?):[ \t]*([^\r\n]*)$/gm
      , fe = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/
      , me = /^(?:GET|HEAD)$/
      , ge = /^\/\//
      , ve = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/
      , ye = {}
      , be = {}
      , _e = "*/".concat("*")
      , we = t.location.href
      , xe = ve.exec(we.toLowerCase()) || [];
    K.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: we,
            type: "GET",
            isLocal: fe.test(xe[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": _e,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": K.parseJSON,
                "text xml": K.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(t, e) {
            return e ? U(U(t, K.ajaxSettings), e) : U(K.ajaxSettings, t)
        },
        ajaxPrefilter: O(ye),
        ajaxTransport: O(be),
        ajax: function(t, e) {
            function n(t, e, n, s) {
                var l, c, v, y, _, x = e;
                2 !== b && (b = 2,
                a && clearTimeout(a),
                i = void 0,
                r = s || "",
                w.readyState = t > 0 ? 4 : 0,
                l = t >= 200 && 300 > t || 304 === t,
                n && (y = j(h, w, n)),
                y = B(h, y, w, l),
                l ? (h.ifModified && (_ = w.getResponseHeader("Last-Modified"),
                _ && (K.lastModified[o] = _),
                _ = w.getResponseHeader("etag"),
                _ && (K.etag[o] = _)),
                204 === t || "HEAD" === h.type ? x = "nocontent" : 304 === t ? x = "notmodified" : (x = y.state,
                c = y.data,
                v = y.error,
                l = !v)) : (v = x,
                (t || !x) && (x = "error",
                0 > t && (t = 0))),
                w.status = t,
                w.statusText = (e || x) + "",
                l ? f.resolveWith(d, [c, x, w]) : f.rejectWith(d, [w, x, v]),
                w.statusCode(g),
                g = void 0,
                u && p.trigger(l ? "ajaxSuccess" : "ajaxError", [w, h, l ? c : v]),
                m.fireWith(d, [w, x]),
                u && (p.trigger("ajaxComplete", [w, h]),
                --K.active || K.event.trigger("ajaxStop")))
            }
            "object" == typeof t && (e = t,
            t = void 0),
            e = e || {};
            var i, o, r, s, a, l, u, c, h = K.ajaxSetup({}, e), d = h.context || h, p = h.context && (d.nodeType || d.jquery) ? K(d) : K.event, f = K.Deferred(), m = K.Callbacks("once memory"), g = h.statusCode || {}, v = {}, y = {}, b = 0, _ = "canceled", w = {
                readyState: 0,
                getResponseHeader: function(t) {
                    var e;
                    if (2 === b) {
                        if (!s)
                            for (s = {}; e = pe.exec(r); )
                                s[e[1].toLowerCase()] = e[2];
                        e = s[t.toLowerCase()]
                    }
                    return null  == e ? null  : e
                },
                getAllResponseHeaders: function() {
                    return 2 === b ? r : null 
                },
                setRequestHeader: function(t, e) {
                    var n = t.toLowerCase();
                    return b || (t = y[n] = y[n] || t,
                    v[t] = e),
                    this
                },
                overrideMimeType: function(t) {
                    return b || (h.mimeType = t),
                    this
                },
                statusCode: function(t) {
                    var e;
                    if (t)
                        if (2 > b)
                            for (e in t)
                                g[e] = [g[e], t[e]];
                        else
                            w.always(t[w.status]);
                    return this
                },
                abort: function(t) {
                    var e = t || _;
                    return i && i.abort(e),
                    n(0, e),
                    this
                }
            };
            if (f.promise(w).complete = m.add,
            w.success = w.done,
            w.error = w.fail,
            h.url = ((t || h.url || we) + "").replace(he, "").replace(ge, xe[1] + "//"),
            h.type = e.method || e.type || h.method || h.type,
            h.dataTypes = K.trim(h.dataType || "*").toLowerCase().match(pt) || [""],
            null  == h.crossDomain && (l = ve.exec(h.url.toLowerCase()),
            h.crossDomain = !(!l || l[1] === xe[1] && l[2] === xe[2] && (l[3] || ("http:" === l[1] ? "80" : "443")) === (xe[3] || ("http:" === xe[1] ? "80" : "443")))),
            h.data && h.processData && "string" != typeof h.data && (h.data = K.param(h.data, h.traditional)),
            R(ye, h, e, w),
            2 === b)
                return w;
            u = K.event && h.global,
            u && 0 === K.active++ && K.event.trigger("ajaxStart"),
            h.type = h.type.toUpperCase(),
            h.hasContent = !me.test(h.type),
            o = h.url,
            h.hasContent || (h.data && (o = h.url += (ce.test(o) ? "&" : "?") + h.data,
            delete h.data),
            h.cache === !1 && (h.url = de.test(o) ? o.replace(de, "$1_=" + ue++) : o + (ce.test(o) ? "&" : "?") + "_=" + ue++)),
            h.ifModified && (K.lastModified[o] && w.setRequestHeader("If-Modified-Since", K.lastModified[o]),
            K.etag[o] && w.setRequestHeader("If-None-Match", K.etag[o])),
            (h.data && h.hasContent && h.contentType !== !1 || e.contentType) && w.setRequestHeader("Content-Type", h.contentType),
            w.setRequestHeader("Accept", h.dataTypes[0] && h.accepts[h.dataTypes[0]] ? h.accepts[h.dataTypes[0]] + ("*" !== h.dataTypes[0] ? ", " + _e + "; q=0.01" : "") : h.accepts["*"]);
            for (c in h.headers)
                w.setRequestHeader(c, h.headers[c]);
            if (h.beforeSend && (h.beforeSend.call(d, w, h) === !1 || 2 === b))
                return w.abort();
            _ = "abort";
            for (c in {
                success: 1,
                error: 1,
                complete: 1
            })
                w[c](h[c]);
            if (i = R(be, h, e, w)) {
                w.readyState = 1,
                u && p.trigger("ajaxSend", [w, h]),
                h.async && h.timeout > 0 && (a = setTimeout(function() {
                    w.abort("timeout")
                }
                , h.timeout));
                try {
                    b = 1,
                    i.send(v, n)
                } catch (x) {
                    if (!(2 > b))
                        throw x;
                    n(-1, x)
                }
            } else
                n(-1, "No Transport");
            return w
        },
        getJSON: function(t, e, n) {
            return K.get(t, e, n, "json")
        },
        getScript: function(t, e) {
            return K.get(t, void 0, e, "script")
        }
    }),
    K.each(["get", "post"], function(t, e) {
        K[e] = function(t, n, i, o) {
            return K.isFunction(n) && (o = o || i,
            i = n,
            n = void 0),
            K.ajax({
                url: t,
                type: e,
                dataType: o,
                data: n,
                success: i
            })
        }
    }
    ),
    K._evalUrl = function(t) {
        return K.ajax({
            url: t,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            "throws": !0
        })
    }
    ,
    K.fn.extend({
        wrapAll: function(t) {
            var e;
            return K.isFunction(t) ? this.each(function(e) {
                K(this).wrapAll(t.call(this, e))
            }
            ) : (this[0] && (e = K(t, this[0].ownerDocument).eq(0).clone(!0),
            this[0].parentNode && e.insertBefore(this[0]),
            e.map(function() {
                for (var t = this; t.firstElementChild; )
                    t = t.firstElementChild;
                return t
            }
            ).append(this)),
            this)
        },
        wrapInner: function(t) {
            return K.isFunction(t) ? this.each(function(e) {
                K(this).wrapInner(t.call(this, e))
            }
            ) : this.each(function() {
                var e = K(this)
                  , n = e.contents();
                n.length ? n.wrapAll(t) : e.append(t)
            }
            )
        },
        wrap: function(t) {
            var e = K.isFunction(t);
            return this.each(function(n) {
                K(this).wrapAll(e ? t.call(this, n) : t)
            }
            )
        },
        unwrap: function() {
            return this.parent().each(function() {
                K.nodeName(this, "body") || K(this).replaceWith(this.childNodes)
            }
            ).end()
        }
    }),
    K.expr.filters.hidden = function(t) {
        return t.offsetWidth <= 0 && t.offsetHeight <= 0
    }
    ,
    K.expr.filters.visible = function(t) {
        return !K.expr.filters.hidden(t)
    }
    ;
    var Te = /%20/g
      , ke = /\[\]$/
      , Ee = /\r?\n/g
      , De = /^(?:submit|button|image|reset|file)$/i
      , Se = /^(?:input|select|textarea|keygen)/i;
    K.param = function(t, e) {
        var n, i = [], o = function(t, e) {
            e = K.isFunction(e) ? e() : null  == e ? "" : e,
            i[i.length] = encodeURIComponent(t) + "=" + encodeURIComponent(e)
        }
        ;
        if (void 0 === e && (e = K.ajaxSettings && K.ajaxSettings.traditional),
        K.isArray(t) || t.jquery && !K.isPlainObject(t))
            K.each(t, function() {
                o(this.name, this.value)
            }
            );
        else
            for (n in t)
                F(n, t[n], e, o);
        return i.join("&").replace(Te, "+")
    }
    ,
    K.fn.extend({
        serialize: function() {
            return K.param(this.serializeArray())
        },
        serializeArray: function() {
            return this.map(function() {
                var t = K.prop(this, "elements");
                return t ? K.makeArray(t) : this
            }
            ).filter(function() {
                var t = this.type;
                return this.name && !K(this).is(":disabled") && Se.test(this.nodeName) && !De.test(t) && (this.checked || !kt.test(t))
            }
            ).map(function(t, e) {
                var n = K(this).val();
                return null  == n ? null  : K.isArray(n) ? K.map(n, function(t) {
                    return {
                        name: e.name,
                        value: t.replace(Ee, "\r\n")
                    }
                }
                ) : {
                    name: e.name,
                    value: n.replace(Ee, "\r\n")
                }
            }
            ).get()
        }
    }),
    K.ajaxSettings.xhr = function() {
        try {
            return new XMLHttpRequest
        } catch (t) {}
    }
    ;
    var Ce = 0
      , Pe = {}
      , Le = {
        0: 200,
        1223: 204
    }
      , Ne = K.ajaxSettings.xhr();
    t.attachEvent && t.attachEvent("onunload", function() {
        for (var t in Pe)
            Pe[t]()
    }
    ),
    G.cors = !!Ne && "withCredentials" in Ne,
    G.ajax = Ne = !!Ne,
    K.ajaxTransport(function(t) {
        var e;
        return G.cors || Ne && !t.crossDomain ? {
            send: function(n, i) {
                var o, r = t.xhr(), s = ++Ce;
                if (r.open(t.type, t.url, t.async, t.username, t.password),
                t.xhrFields)
                    for (o in t.xhrFields)
                        r[o] = t.xhrFields[o];
                t.mimeType && r.overrideMimeType && r.overrideMimeType(t.mimeType),
                t.crossDomain || n["X-Requested-With"] || (n["X-Requested-With"] = "XMLHttpRequest");
                for (o in n)
                    r.setRequestHeader(o, n[o]);
                e = function(t) {
                    return function() {
                        e && (delete Pe[s],
                        e = r.onload = r.onerror = null ,
                        "abort" === t ? r.abort() : "error" === t ? i(r.status, r.statusText) : i(Le[r.status] || r.status, r.statusText, "string" == typeof r.responseText ? {
                            text: r.responseText
                        } : void 0, r.getAllResponseHeaders()))
                    }
                }
                ,
                r.onload = e(),
                r.onerror = e("error"),
                e = Pe[s] = e("abort");
                try {
                    r.send(t.hasContent && t.data || null )
                } catch (a) {
                    if (e)
                        throw a
                }
            },
            abort: function() {
                e && e()
            }
        } : void 0
    }
    ),
    K.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /(?:java|ecma)script/
        },
        converters: {
            "text script": function(t) {
                return K.globalEval(t),
                t
            }
        }
    }),
    K.ajaxPrefilter("script", function(t) {
        void 0 === t.cache && (t.cache = !1),
        t.crossDomain && (t.type = "GET")
    }
    ),
    K.ajaxTransport("script", function(t) {
        if (t.crossDomain) {
            var e, n;
            return {
                send: function(i, o) {
                    e = K("<script>").prop({
                        async: !0,
                        charset: t.scriptCharset,
                        src: t.url
                    }).on("load error", n = function(t) {
                        e.remove(),
                        n = null ,
                        t && o("error" === t.type ? 404 : 200, t.type)
                    }
                    ),
                    J.head.appendChild(e[0])
                },
                abort: function() {
                    n && n()
                }
            }
        }
    }
    );
    var Me = []
      , Ae = /(=)\?(?=&|$)|\?\?/;
    K.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var t = Me.pop() || K.expando + "_" + ue++;
            return this[t] = !0,
            t
        }
    }),
    K.ajaxPrefilter("json jsonp", function(e, n, i) {
        var o, r, s, a = e.jsonp !== !1 && (Ae.test(e.url) ? "url" : "string" == typeof e.data && !(e.contentType || "").indexOf("application/x-www-form-urlencoded") && Ae.test(e.data) && "data");
        return a || "jsonp" === e.dataTypes[0] ? (o = e.jsonpCallback = K.isFunction(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback,
        a ? e[a] = e[a].replace(Ae, "$1" + o) : e.jsonp !== !1 && (e.url += (ce.test(e.url) ? "&" : "?") + e.jsonp + "=" + o),
        e.converters["script json"] = function() {
            return s || K.error(o + " was not called"),
            s[0]
        }
        ,
        e.dataTypes[0] = "json",
        r = t[o],
        t[o] = function() {
            s = arguments
        }
        ,
        i.always(function() {
            t[o] = r,
            e[o] && (e.jsonpCallback = n.jsonpCallback,
            Me.push(o)),
            s && K.isFunction(r) && r(s[0]),
            s = r = void 0
        }
        ),
        "script") : void 0
    }
    ),
    K.parseHTML = function(t, e, n) {
        if (!t || "string" != typeof t)
            return null ;
        "boolean" == typeof e && (n = e,
        e = !1),
        e = e || J;
        var i = st.exec(t)
          , o = !n && [];
        return i ? [e.createElement(i[1])] : (i = K.buildFragment([t], e, o),
        o && o.length && K(o).remove(),
        K.merge([], i.childNodes))
    }
    ;
    var Ie = K.fn.load;
    K.fn.load = function(t, e, n) {
        if ("string" != typeof t && Ie)
            return Ie.apply(this, arguments);
        var i, o, r, s = this, a = t.indexOf(" ");
        return a >= 0 && (i = K.trim(t.slice(a)),
        t = t.slice(0, a)),
        K.isFunction(e) ? (n = e,
        e = void 0) : e && "object" == typeof e && (o = "POST"),
        s.length > 0 && K.ajax({
            url: t,
            type: o,
            dataType: "html",
            data: e
        }).done(function(t) {
            r = arguments,
            s.html(i ? K("<div>").append(K.parseHTML(t)).find(i) : t)
        }
        ).complete(n && function(t, e) {
            s.each(n, r || [t.responseText, e, t])
        }
        ),
        this
    }
    ,
    K.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(t, e) {
        K.fn[e] = function(t) {
            return this.on(e, t)
        }
    }
    ),
    K.expr.filters.animated = function(t) {
        return K.grep(K.timers, function(e) {
            return t === e.elem
        }
        ).length
    }
    ;
    var Oe = t.document.documentElement;
    K.offset = {
        setOffset: function(t, e, n) {
            var i, o, r, s, a, l, u, c = K.css(t, "position"), h = K(t), d = {};
            "static" === c && (t.style.position = "relative"),
            a = h.offset(),
            r = K.css(t, "top"),
            l = K.css(t, "left"),
            u = ("absolute" === c || "fixed" === c) && (r + l).indexOf("auto") > -1,
            u ? (i = h.position(),
            s = i.top,
            o = i.left) : (s = parseFloat(r) || 0,
            o = parseFloat(l) || 0),
            K.isFunction(e) && (e = e.call(t, n, a)),
            null  != e.top && (d.top = e.top - a.top + s),
            null  != e.left && (d.left = e.left - a.left + o),
            "using" in e ? e.using.call(t, d) : h.css(d)
        }
    },
    K.fn.extend({
        offset: function(t) {
            if (arguments.length)
                return void 0 === t ? this : this.each(function(e) {
                    K.offset.setOffset(this, t, e)
                }
                );
            var e, n, i = this[0], o = {
                top: 0,
                left: 0
            }, r = i && i.ownerDocument;
            if (r)
                return e = r.documentElement,
                K.contains(e, i) ? (typeof i.getBoundingClientRect !== Et && (o = i.getBoundingClientRect()),
                n = $(r),
                {
                    top: o.top + n.pageYOffset - e.clientTop,
                    left: o.left + n.pageXOffset - e.clientLeft
                }) : o
        },
        position: function() {
            if (this[0]) {
                var t, e, n = this[0], i = {
                    top: 0,
                    left: 0
                };
                return "fixed" === K.css(n, "position") ? e = n.getBoundingClientRect() : (t = this.offsetParent(),
                e = this.offset(),
                K.nodeName(t[0], "html") || (i = t.offset()),
                i.top += K.css(t[0], "borderTopWidth", !0),
                i.left += K.css(t[0], "borderLeftWidth", !0)),
                {
                    top: e.top - i.top - K.css(n, "marginTop", !0),
                    left: e.left - i.left - K.css(n, "marginLeft", !0)
                }
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var t = this.offsetParent || Oe; t && !K.nodeName(t, "html") && "static" === K.css(t, "position"); )
                    t = t.offsetParent;
                return t || Oe
            }
            )
        }
    }),
    K.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(e, n) {
        var i = "pageYOffset" === n;
        K.fn[e] = function(o) {
            return gt(this, function(e, o, r) {
                var s = $(e);
                return void 0 === r ? s ? s[n] : e[o] : void (s ? s.scrollTo(i ? t.pageXOffset : r, i ? r : t.pageYOffset) : e[o] = r)
            }
            , e, o, arguments.length, null )
        }
    }
    ),
    K.each(["top", "left"], function(t, e) {
        K.cssHooks[e] = x(G.pixelPosition, function(t, n) {
            return n ? (n = w(t, e),
            qt.test(n) ? K(t).position()[e] + "px" : n) : void 0
        }
        )
    }
    ),
    K.each({
        Height: "height",
        Width: "width"
    }, function(t, e) {
        K.each({
            padding: "inner" + t,
            content: e,
            "": "outer" + t
        }, function(n, i) {
            K.fn[i] = function(i, o) {
                var r = arguments.length && (n || "boolean" != typeof i)
                  , s = n || (i === !0 || o === !0 ? "margin" : "border");
                return gt(this, function(e, n, i) {
                    var o;
                    return K.isWindow(e) ? e.document.documentElement["client" + t] : 9 === e.nodeType ? (o = e.documentElement,
                    Math.max(e.body["scroll" + t], o["scroll" + t], e.body["offset" + t], o["offset" + t], o["client" + t])) : void 0 === i ? K.css(e, n, s) : K.style(e, n, i, s)
                }
                , e, r ? i : void 0, r, null )
            }
        }
        )
    }
    ),
    K.fn.size = function() {
        return this.length
    }
    ,
    K.fn.andSelf = K.fn.addBack,
    "function" == typeof define && define.amd && define("jquery", [], function() {
        return K
    }
    );
    var Re = t.jQuery
      , Ue = t.$;
    return K.noConflict = function(e) {
        return t.$ === K && (t.$ = Ue),
        e && t.jQuery === K && (t.jQuery = Re),
        K
    }
    ,
    typeof e === Et && (t.jQuery = t.$ = K),
    K
}
),
define("print", ["jquery"], function(t) {
    "use strict";
    function e() {
        var t = {}
          , e = document.body.appendChild(document.createElement("DIV"));
        e.style.width = "1in",
        e.style.padding = "0",
        t.v = e.offsetWidth,
        e.parentNode.removeChild(e),
        h = t.v
    }
    function n() {
        var t;
        for (var e in document.styleSheets)
            if (document.styleSheets.hasOwnProperty(e) && (t = document.styleSheets[e],
            "print" === t.media.mediaText))
                return t;
        return null 
    }
    function i() {
        return t('link[media="print"]:eq(0)')
    }
    function o() {
        d = d || n(),
        p = p || i(),
        d.media.mediaText = "all",
        p.attr("media", "all")
    }
    function r() {
        d.media.mediaText = "print",
        p.attr("media", "print"),
        t(".print-height-adjusted, .print-width-adjusted, .main").removeAttr("style").removeClass("print-height-adjusted print-width-adjusted"),
        t(".back-to-screen-view").off("click").remove()
    }
    function s() {
        return /theme-.*grid.*/.test(t("form.or").attr("class"))
    }
    function a(e) {
        var n, i, o, r, s, a;
        t(".main").css("width", l(e)).addClass("print-width-adjusted"),
        setTimeout(function() {
            s = t("#form-title").outerWidth() - 1,
            t(".question, .note, .trigger").not(".draft").each(function() {
                if (i = t(this),
                o = i.offset().top,
                r = r || 0 === r ? r : o,
                n = n || i,
                o === r)
                    n = n.add(i);
                else if (o > r) {
                    var e, l = [], u = 0, c = 0;
                    n.each(function() {
                        e = t(this).outerHeight(),
                        c = e > c ? e : c,
                        l.push(Number(t(this).css("width").replace("px", "")))
                    }
                    ),
                    n.addClass("print-height-adjusted").css("height", c + "px"),
                    l.forEach(function(t) {
                        u += t
                    }
                    ),
                    s > u && (a = s - u,
                    n.each(function(e) {
                        var n = l[e] + l[e] / u * a;
                        t(this).css("width", Math.floor(100 * n / s * 100) / 100 + "%").addClass("print-width-adjusted")
                    }
                    )),
                    n = i,
                    r = i.offset().top
                } else
                    console.error("unexpected question top position: ", o, "for element:", i, "expected >=", r)
            }
            ),
            t(".main").css("width", "auto").removeClass("print-width-adjusted"),
            t(window).trigger("printviewready")
        }
        , 1e3)
    }
    function l(t) {
        var e, n = .4, i = {
            A4: {
                width: 8.27,
                height: 11.69
            },
            letter: {
                width: 8.5,
                height: 11
            }
        };
        return e = "portrait" === t.orientation ? i[t.format].width : i[t.format].height,
        (e - 2 * n) * h + "px"
    }
    function u(e) {
        var n = {
            dialog: "print",
            heading: "Select Print Settings"
        }
          , i = {
            posButton: "Prepare",
            posAction: function(e) {
                a(e),
                t(window).one("printviewready", function() {
                    window.print()
                }
                )
            },
            negButton: "Close",
            negAction: function() {
                r()
            },
            afterAction: function() {
                setTimeout(function() {
                    r()
                }
                , 1500)
            }
        };
        e(n, i)
    }
    function c(e) {
        s() ? (o(),
        t('<button class="btn back-to-screen-view">Back to Normal View</button>').prependTo(t("form.or")).on("click", function() {
            r()
        }
        ),
        u(e)) : window.print()
    }
    var h, d, p;
    return t(document).ready(function() {
        e()
    }
    ),
    c
}
),
define("plugin", ["jquery"], function(t) {
    "use strict";
    t.fn.capitalizeStart = function(t) {
        t || (t = 1);
        var e = this.contents().filter(function() {
            return 3 == this.nodeType
        }
        ).first()
          , n = e.text()
          , i = n.split(" ", t).join(" ");
        e.length && (e[0].nodeValue = n.slice(i.length),
        e.before('<span class="capitalize">' + i + "</span>"))
    }
    ,
    t.fn.btnBusyState = function(e) {
        var n, i;
        return this.each(function() {
            n = t(this),
            i = n.data("btnContent"),
            e && !i ? (i = n.html(),
            n.data("btnContent", i),
            n.empty().append("<progress></progress>").attr("disabled", !0)) : !e && i && (n.data("btnContent", null ),
            n.empty().append(i).removeAttr("disabled"))
        }
        )
    }
}
),
"undefined" == typeof jQuery)
    throw new Error("Bootstrap's JavaScript requires jQuery");
+function(t) {
    "use strict";
    var e = t.fn.jquery.split(" ")[0].split(".");
    if (e[0] < 2 && e[1] < 9 || 1 == e[0] && 9 == e[1] && e[2] < 1)
        throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")
}
(jQuery),
+function(t) {
    "use strict";
    function e() {
        var t = document.createElement("bootstrap")
          , e = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "oTransitionEnd otransitionend",
            transition: "transitionend"
        };
        for (var n in e)
            if (void 0 !== t.style[n])
                return {
                    end: e[n]
                };
        return !1
    }
    t.fn.emulateTransitionEnd = function(e) {
        var n = !1
          , i = this;
        t(this).one("bsTransitionEnd", function() {
            n = !0
        }
        );
        var o = function() {
            n || t(i).trigger(t.support.transition.end)
        }
        ;
        return setTimeout(o, e),
        this
    }
    ,
    t(function() {
        t.support.transition = e(),
        t.support.transition && (t.event.special.bsTransitionEnd = {
            bindType: t.support.transition.end,
            delegateType: t.support.transition.end,
            handle: function(e) {
                return t(e.target).is(this) ? e.handleObj.handler.apply(this, arguments) : void 0
            }
        })
    }
    )
}
(jQuery),
+function(t) {
    "use strict";
    function e(e) {
        return this.each(function() {
            var n = t(this)
              , o = n.data("bs.alert");
            o || n.data("bs.alert", o = new i(this)),
            "string" == typeof e && o[e].call(n)
        }
        )
    }
    var n = '[data-dismiss="alert"]'
      , i = function(e) {
        t(e).on("click", n, this.close)
    }
    ;
    i.VERSION = "3.3.5",
    i.TRANSITION_DURATION = 150,
    i.prototype.close = function(e) {
        function n() {
            s.detach().trigger("closed.bs.alert").remove()
        }
        var o = t(this)
          , r = o.attr("data-target");
        r || (r = o.attr("href"),
        r = r && r.replace(/.*(?=#[^\s]*$)/, ""));
        var s = t(r);
        e && e.preventDefault(),
        s.length || (s = o.closest(".alert")),
        s.trigger(e = t.Event("close.bs.alert")),
        e.isDefaultPrevented() || (s.removeClass("in"),
        t.support.transition && s.hasClass("fade") ? s.one("bsTransitionEnd", n).emulateTransitionEnd(i.TRANSITION_DURATION) : n())
    }
    ;
    var o = t.fn.alert;
    t.fn.alert = e,
    t.fn.alert.Constructor = i,
    t.fn.alert.noConflict = function() {
        return t.fn.alert = o,
        this
    }
    ,
    t(document).on("click.bs.alert.data-api", n, i.prototype.close)
}
(jQuery),
+function(t) {
    "use strict";
    function e(e) {
        return this.each(function() {
            var i = t(this)
              , o = i.data("bs.button")
              , r = "object" == typeof e && e;
            o || i.data("bs.button", o = new n(this,r)),
            "toggle" == e ? o.toggle() : e && o.setState(e)
        }
        )
    }
    var n = function(e, i) {
        this.$element = t(e),
        this.options = t.extend({}, n.DEFAULTS, i),
        this.isLoading = !1
    }
    ;
    n.VERSION = "3.3.5",
    n.DEFAULTS = {
        loadingText: "loading..."
    },
    n.prototype.setState = function(e) {
        var n = "disabled"
          , i = this.$element
          , o = i.is("input") ? "val" : "html"
          , r = i.data();
        e += "Text",
        null  == r.resetText && i.data("resetText", i[o]()),
        setTimeout(t.proxy(function() {
            i[o](null  == r[e] ? this.options[e] : r[e]),
            "loadingText" == e ? (this.isLoading = !0,
            i.addClass(n).attr(n, n)) : this.isLoading && (this.isLoading = !1,
            i.removeClass(n).removeAttr(n))
        }
        , this), 0)
    }
    ,
    n.prototype.toggle = function() {
        var t = !0
          , e = this.$element.closest('[data-toggle="buttons"]');
        if (e.length) {
            var n = this.$element.find("input");
            "radio" == n.prop("type") ? (n.prop("checked") && (t = !1),
            e.find(".active").removeClass("active"),
            this.$element.addClass("active")) : "checkbox" == n.prop("type") && (n.prop("checked") !== this.$element.hasClass("active") && (t = !1),
            this.$element.toggleClass("active")),
            n.prop("checked", this.$element.hasClass("active")),
            t && n.trigger("change")
        } else
            this.$element.attr("aria-pressed", !this.$element.hasClass("active")),
            this.$element.toggleClass("active")
    }
    ;
    var i = t.fn.button;
    t.fn.button = e,
    t.fn.button.Constructor = n,
    t.fn.button.noConflict = function() {
        return t.fn.button = i,
        this
    }
    ,
    t(document).on("click.bs.button.data-api", '[data-toggle^="button"]', function(n) {
        var i = t(n.target);
        i.hasClass("btn") || (i = i.closest(".btn")),
        e.call(i, "toggle"),
        t(n.target).is('input[type="radio"]') || t(n.target).is('input[type="checkbox"]') || n.preventDefault()
    }
    ).on("focus.bs.button.data-api blur.bs.button.data-api", '[data-toggle^="button"]', function(e) {
        t(e.target).closest(".btn").toggleClass("focus", /^focus(in)?$/.test(e.type))
    }
    )
}
(jQuery),
+function(t) {
    "use strict";
    function e(e) {
        return this.each(function() {
            var i = t(this)
              , o = i.data("bs.carousel")
              , r = t.extend({}, n.DEFAULTS, i.data(), "object" == typeof e && e)
              , s = "string" == typeof e ? e : r.slide;
            o || i.data("bs.carousel", o = new n(this,r)),
            "number" == typeof e ? o.to(e) : s ? o[s]() : r.interval && o.pause().cycle()
        }
        )
    }
    var n = function(e, n) {
        this.$element = t(e),
        this.$indicators = this.$element.find(".carousel-indicators"),
        this.options = n,
        this.paused = null ,
        this.sliding = null ,
        this.interval = null ,
        this.$active = null ,
        this.$items = null ,
        this.options.keyboard && this.$element.on("keydown.bs.carousel", t.proxy(this.keydown, this)),
        "hover" == this.options.pause && !("ontouchstart" in document.documentElement) && this.$element.on("mouseenter.bs.carousel", t.proxy(this.pause, this)).on("mouseleave.bs.carousel", t.proxy(this.cycle, this))
    }
    ;
    n.VERSION = "3.3.5",
    n.TRANSITION_DURATION = 600,
    n.DEFAULTS = {
        interval: 5e3,
        pause: "hover",
        wrap: !0,
        keyboard: !0
    },
    n.prototype.keydown = function(t) {
        if (!/input|textarea/i.test(t.target.tagName)) {
            switch (t.which) {
            case 37:
                this.prev();
                break;
            case 39:
                this.next();
                break;
            default:
                return
            }
            t.preventDefault()
        }
    }
    ,
    n.prototype.cycle = function(e) {
        return e || (this.paused = !1),
        this.interval && clearInterval(this.interval),
        this.options.interval && !this.paused && (this.interval = setInterval(t.proxy(this.next, this), this.options.interval)),
        this
    }
    ,
    n.prototype.getItemIndex = function(t) {
        return this.$items = t.parent().children(".item"),
        this.$items.index(t || this.$active)
    }
    ,
    n.prototype.getItemForDirection = function(t, e) {
        var n = this.getItemIndex(e)
          , i = "prev" == t && 0 === n || "next" == t && n == this.$items.length - 1;
        if (i && !this.options.wrap)
            return e;
        var o = "prev" == t ? -1 : 1
          , r = (n + o) % this.$items.length;
        return this.$items.eq(r)
    }
    ,
    n.prototype.to = function(t) {
        var e = this
          , n = this.getItemIndex(this.$active = this.$element.find(".item.active"));
        return t > this.$items.length - 1 || 0 > t ? void 0 : this.sliding ? this.$element.one("slid.bs.carousel", function() {
            e.to(t)
        }
        ) : n == t ? this.pause().cycle() : this.slide(t > n ? "next" : "prev", this.$items.eq(t))
    }
    ,
    n.prototype.pause = function(e) {
        return e || (this.paused = !0),
        this.$element.find(".next, .prev").length && t.support.transition && (this.$element.trigger(t.support.transition.end),
        this.cycle(!0)),
        this.interval = clearInterval(this.interval),
        this
    }
    ,
    n.prototype.next = function() {
        return this.sliding ? void 0 : this.slide("next")
    }
    ,
    n.prototype.prev = function() {
        return this.sliding ? void 0 : this.slide("prev")
    }
    ,
    n.prototype.slide = function(e, i) {
        var o = this.$element.find(".item.active")
          , r = i || this.getItemForDirection(e, o)
          , s = this.interval
          , a = "next" == e ? "left" : "right"
          , l = this;
        if (r.hasClass("active"))
            return this.sliding = !1;
        var u = r[0]
          , c = t.Event("slide.bs.carousel", {
            relatedTarget: u,
            direction: a
        });
        if (this.$element.trigger(c),
        !c.isDefaultPrevented()) {
            if (this.sliding = !0,
            s && this.pause(),
            this.$indicators.length) {
                this.$indicators.find(".active").removeClass("active");
                var h = t(this.$indicators.children()[this.getItemIndex(r)]);
                h && h.addClass("active")
            }
            var d = t.Event("slid.bs.carousel", {
                relatedTarget: u,
                direction: a
            });
            return t.support.transition && this.$element.hasClass("slide") ? (r.addClass(e),
            r[0].offsetWidth,
            o.addClass(a),
            r.addClass(a),
            o.one("bsTransitionEnd", function() {
                r.removeClass([e, a].join(" ")).addClass("active"),
                o.removeClass(["active", a].join(" ")),
                l.sliding = !1,
                setTimeout(function() {
                    l.$element.trigger(d)
                }
                , 0)
            }
            ).emulateTransitionEnd(n.TRANSITION_DURATION)) : (o.removeClass("active"),
            r.addClass("active"),
            this.sliding = !1,
            this.$element.trigger(d)),
            s && this.cycle(),
            this
        }
    }
    ;
    var i = t.fn.carousel;
    t.fn.carousel = e,
    t.fn.carousel.Constructor = n,
    t.fn.carousel.noConflict = function() {
        return t.fn.carousel = i,
        this
    }
    ;
    var o = function(n) {
        var i, o = t(this), r = t(o.attr("data-target") || (i = o.attr("href")) && i.replace(/.*(?=#[^\s]+$)/, ""));
        if (r.hasClass("carousel")) {
            var s = t.extend({}, r.data(), o.data())
              , a = o.attr("data-slide-to");
            a && (s.interval = !1),
            e.call(r, s),
            a && r.data("bs.carousel").to(a),
            n.preventDefault()
        }
    }
    ;
    t(document).on("click.bs.carousel.data-api", "[data-slide]", o).on("click.bs.carousel.data-api", "[data-slide-to]", o),
    t(window).on("load", function() {
        t('[data-ride="carousel"]').each(function() {
            var n = t(this);
            e.call(n, n.data())
        }
        )
    }
    )
}
(jQuery),
+function(t) {
    "use strict";
    function e(e) {
        var n, i = e.attr("data-target") || (n = e.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, "");
        return t(i)
    }
    function n(e) {
        return this.each(function() {
            var n = t(this)
              , o = n.data("bs.collapse")
              , r = t.extend({}, i.DEFAULTS, n.data(), "object" == typeof e && e);
            !o && r.toggle && /show|hide/.test(e) && (r.toggle = !1),
            o || n.data("bs.collapse", o = new i(this,r)),
            "string" == typeof e && o[e]()
        }
        )
    }
    var i = function(e, n) {
        this.$element = t(e),
        this.options = t.extend({}, i.DEFAULTS, n),
        this.$trigger = t('[data-toggle="collapse"][href="#' + e.id + '"],[data-toggle="collapse"][data-target="#' + e.id + '"]'),
        this.transitioning = null ,
        this.options.parent ? this.$parent = this.getParent() : this.addAriaAndCollapsedClass(this.$element, this.$trigger),
        this.options.toggle && this.toggle()
    }
    ;
    i.VERSION = "3.3.5",
    i.TRANSITION_DURATION = 350,
    i.DEFAULTS = {
        toggle: !0
    },
    i.prototype.dimension = function() {
        var t = this.$element.hasClass("width");
        return t ? "width" : "height"
    }
    ,
    i.prototype.show = function() {
        if (!this.transitioning && !this.$element.hasClass("in")) {
            var e, o = this.$parent && this.$parent.children(".panel").children(".in, .collapsing");
            if (!(o && o.length && (e = o.data("bs.collapse"),
            e && e.transitioning))) {
                var r = t.Event("show.bs.collapse");
                if (this.$element.trigger(r),
                !r.isDefaultPrevented()) {
                    o && o.length && (n.call(o, "hide"),
                    e || o.data("bs.collapse", null ));
                    var s = this.dimension();
                    this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded", !0),
                    this.$trigger.removeClass("collapsed").attr("aria-expanded", !0),
                    this.transitioning = 1;
                    var a = function() {
                        this.$element.removeClass("collapsing").addClass("collapse in")[s](""),
                        this.transitioning = 0,
                        this.$element.trigger("shown.bs.collapse")
                    }
                    ;
                    if (!t.support.transition)
                        return a.call(this);
                    var l = t.camelCase(["scroll", s].join("-"));
                    this.$element.one("bsTransitionEnd", t.proxy(a, this)).emulateTransitionEnd(i.TRANSITION_DURATION)[s](this.$element[0][l])
                }
            }
        }
    }
    ,
    i.prototype.hide = function() {
        if (!this.transitioning && this.$element.hasClass("in")) {
            var e = t.Event("hide.bs.collapse");
            if (this.$element.trigger(e),
            !e.isDefaultPrevented()) {
                var n = this.dimension();
                this.$element[n](this.$element[n]())[0].offsetHeight,
                this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded", !1),
                this.$trigger.addClass("collapsed").attr("aria-expanded", !1),
                this.transitioning = 1;
                var o = function() {
                    this.transitioning = 0,
                    this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")
                }
                ;
                return t.support.transition ? void this.$element[n](0).one("bsTransitionEnd", t.proxy(o, this)).emulateTransitionEnd(i.TRANSITION_DURATION) : o.call(this)
            }
        }
    }
    ,
    i.prototype.toggle = function() {
        this[this.$element.hasClass("in") ? "hide" : "show"]()
    }
    ,
    i.prototype.getParent = function() {
        return t(this.options.parent).find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]').each(t.proxy(function(n, i) {
            var o = t(i);
            this.addAriaAndCollapsedClass(e(o), o)
        }
        , this)).end()
    }
    ,
    i.prototype.addAriaAndCollapsedClass = function(t, e) {
        var n = t.hasClass("in");
        t.attr("aria-expanded", n),
        e.toggleClass("collapsed", !n).attr("aria-expanded", n)
    }
    ;
    var o = t.fn.collapse;
    t.fn.collapse = n,
    t.fn.collapse.Constructor = i,
    t.fn.collapse.noConflict = function() {
        return t.fn.collapse = o,
        this
    }
    ,
    t(document).on("click.bs.collapse.data-api", '[data-toggle="collapse"]', function(i) {
        var o = t(this);
        o.attr("data-target") || i.preventDefault();
        var r = e(o)
          , s = r.data("bs.collapse")
          , a = s ? "toggle" : o.data();
        n.call(r, a)
    }
    )
}
(jQuery),
+function(t) {
    "use strict";
    function e(e) {
        var n = e.attr("data-target");
        n || (n = e.attr("href"),
        n = n && /#[A-Za-z]/.test(n) && n.replace(/.*(?=#[^\s]*$)/, ""));
        var i = n && t(n);
        return i && i.length ? i : e.parent()
    }
    function n(n) {
        n && 3 === n.which || (t(o).remove(),
        t(r).each(function() {
            var i = t(this)
              , o = e(i)
              , r = {
                relatedTarget: this
            };
            o.hasClass("open") && (n && "click" == n.type && /input|textarea/i.test(n.target.tagName) && t.contains(o[0], n.target) || (o.trigger(n = t.Event("hide.bs.dropdown", r)),
            n.isDefaultPrevented() || (i.attr("aria-expanded", "false"),
            o.removeClass("open").trigger("hidden.bs.dropdown", r))))
        }
        ))
    }
    function i(e) {
        return this.each(function() {
            var n = t(this)
              , i = n.data("bs.dropdown");
            i || n.data("bs.dropdown", i = new s(this)),
            "string" == typeof e && i[e].call(n)
        }
        )
    }
    var o = ".dropdown-backdrop"
      , r = '[data-toggle="dropdown"]'
      , s = function(e) {
        t(e).on("click.bs.dropdown", this.toggle)
    }
    ;
    s.VERSION = "3.3.5",
    s.prototype.toggle = function(i) {
        var o = t(this);
        if (!o.is(".disabled, :disabled")) {
            var r = e(o)
              , s = r.hasClass("open");
            if (n(),
            !s) {
                "ontouchstart" in document.documentElement && !r.closest(".navbar-nav").length && t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click", n);
                var a = {
                    relatedTarget: this
                };
                if (r.trigger(i = t.Event("show.bs.dropdown", a)),
                i.isDefaultPrevented())
                    return;
                o.trigger("focus").attr("aria-expanded", "true"),
                r.toggleClass("open").trigger("shown.bs.dropdown", a)
            }
            return !1
        }
    }
    ,
    s.prototype.keydown = function(n) {
        if (/(38|40|27|32)/.test(n.which) && !/input|textarea/i.test(n.target.tagName)) {
            var i = t(this);
            if (n.preventDefault(),
            n.stopPropagation(),
            !i.is(".disabled, :disabled")) {
                var o = e(i)
                  , s = o.hasClass("open");
                if (!s && 27 != n.which || s && 27 == n.which)
                    return 27 == n.which && o.find(r).trigger("focus"),
                    i.trigger("click");
                var a = " li:not(.disabled):visible a"
                  , l = o.find(".dropdown-menu" + a);
                if (l.length) {
                    var u = l.index(n.target);
                    38 == n.which && u > 0 && u--,
                    40 == n.which && u < l.length - 1 && u++,
                    ~u || (u = 0),
                    l.eq(u).trigger("focus")
                }
            }
        }
    }
    ;
    var a = t.fn.dropdown;
    t.fn.dropdown = i,
    t.fn.dropdown.Constructor = s,
    t.fn.dropdown.noConflict = function() {
        return t.fn.dropdown = a,
        this
    }
    ,
    t(document).on("click.bs.dropdown.data-api", n).on("click.bs.dropdown.data-api", ".dropdown form", function(t) {
        t.stopPropagation()
    }
    ).on("click.bs.dropdown.data-api", r, s.prototype.toggle).on("keydown.bs.dropdown.data-api", r, s.prototype.keydown).on("keydown.bs.dropdown.data-api", ".dropdown-menu", s.prototype.keydown)
}
(jQuery),
+function(t) {
    "use strict";
    function e(e, i) {
        return this.each(function() {
            var o = t(this)
              , r = o.data("bs.modal")
              , s = t.extend({}, n.DEFAULTS, o.data(), "object" == typeof e && e);
            r || o.data("bs.modal", r = new n(this,s)),
            "string" == typeof e ? r[e](i) : s.show && r.show(i)
        }
        )
    }
    var n = function(e, n) {
        this.options = n,
        this.$body = t(document.body),
        this.$element = t(e),
        this.$dialog = this.$element.find(".modal-dialog"),
        this.$backdrop = null ,
        this.isShown = null ,
        this.originalBodyPad = null ,
        this.scrollbarWidth = 0,
        this.ignoreBackdropClick = !1,
        this.options.remote && this.$element.find(".modal-content").load(this.options.remote, t.proxy(function() {
            this.$element.trigger("loaded.bs.modal")
        }
        , this))
    }
    ;
    n.VERSION = "3.3.5",
    n.TRANSITION_DURATION = 300,
    n.BACKDROP_TRANSITION_DURATION = 150,
    n.DEFAULTS = {
        backdrop: !0,
        keyboard: !0,
        show: !0
    },
    n.prototype.toggle = function(t) {
        return this.isShown ? this.hide() : this.show(t)
    }
    ,
    n.prototype.show = function(e) {
        var i = this
          , o = t.Event("show.bs.modal", {
            relatedTarget: e
        });
        this.$element.trigger(o),
        this.isShown || o.isDefaultPrevented() || (this.isShown = !0,
        this.checkScrollbar(),
        this.setScrollbar(),
        this.$body.addClass("modal-open"),
        this.escape(),
        this.resize(),
        this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', t.proxy(this.hide, this)),
        this.$dialog.on("mousedown.dismiss.bs.modal", function() {
            i.$element.one("mouseup.dismiss.bs.modal", function(e) {
                t(e.target).is(i.$element) && (i.ignoreBackdropClick = !0)
            }
            )
        }
        ),
        this.backdrop(function() {
            var o = t.support.transition && i.$element.hasClass("fade");
            i.$element.parent().length || i.$element.appendTo(i.$body),
            i.$element.show().scrollTop(0),
            i.adjustDialog(),
            o && i.$element[0].offsetWidth,
            i.$element.addClass("in"),
            i.enforceFocus();
            var r = t.Event("shown.bs.modal", {
                relatedTarget: e
            });
            o ? i.$dialog.one("bsTransitionEnd", function() {
                i.$element.trigger("focus").trigger(r)
            }
            ).emulateTransitionEnd(n.TRANSITION_DURATION) : i.$element.trigger("focus").trigger(r)
        }
        ))
    }
    ,
    n.prototype.hide = function(e) {
        e && e.preventDefault(),
        e = t.Event("hide.bs.modal"),
        this.$element.trigger(e),
        this.isShown && !e.isDefaultPrevented() && (this.isShown = !1,
        this.escape(),
        this.resize(),
        t(document).off("focusin.bs.modal"),
        this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),
        this.$dialog.off("mousedown.dismiss.bs.modal"),
        t.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", t.proxy(this.hideModal, this)).emulateTransitionEnd(n.TRANSITION_DURATION) : this.hideModal())
    }
    ,
    n.prototype.enforceFocus = function() {
        t(document).off("focusin.bs.modal").on("focusin.bs.modal", t.proxy(function(t) {
            this.$element[0] === t.target || this.$element.has(t.target).length || this.$element.trigger("focus")
        }
        , this))
    }
    ,
    n.prototype.escape = function() {
        this.isShown && this.options.keyboard ? this.$element.on("keydown.dismiss.bs.modal", t.proxy(function(t) {
            27 == t.which && this.hide()
        }
        , this)) : this.isShown || this.$element.off("keydown.dismiss.bs.modal")
    }
    ,
    n.prototype.resize = function() {
        this.isShown ? t(window).on("resize.bs.modal", t.proxy(this.handleUpdate, this)) : t(window).off("resize.bs.modal")
    }
    ,
    n.prototype.hideModal = function() {
        var t = this;
        this.$element.hide(),
        this.backdrop(function() {
            t.$body.removeClass("modal-open"),
            t.resetAdjustments(),
            t.resetScrollbar(),
            t.$element.trigger("hidden.bs.modal")
        }
        )
    }
    ,
    n.prototype.removeBackdrop = function() {
        this.$backdrop && this.$backdrop.remove(),
        this.$backdrop = null 
    }
    ,
    n.prototype.backdrop = function(e) {
        var i = this
          , o = this.$element.hasClass("fade") ? "fade" : "";
        if (this.isShown && this.options.backdrop) {
            var r = t.support.transition && o;
            if (this.$backdrop = t(document.createElement("div")).addClass("modal-backdrop " + o).appendTo(this.$body),
            this.$element.on("click.dismiss.bs.modal", t.proxy(function(t) {
                return this.ignoreBackdropClick ? void (this.ignoreBackdropClick = !1) : void (t.target === t.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus() : this.hide()))
            }
            , this)),
            r && this.$backdrop[0].offsetWidth,
            this.$backdrop.addClass("in"),
            !e)
                return;
            r ? this.$backdrop.one("bsTransitionEnd", e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION) : e()
        } else if (!this.isShown && this.$backdrop) {
            this.$backdrop.removeClass("in");
            var s = function() {
                i.removeBackdrop(),
                e && e()
            }
            ;
            t.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION) : s()
        } else
            e && e()
    }
    ,
    n.prototype.handleUpdate = function() {
        this.adjustDialog()
    }
    ,
    n.prototype.adjustDialog = function() {
        var t = this.$element[0].scrollHeight > document.documentElement.clientHeight;
        this.$element.css({
            paddingLeft: !this.bodyIsOverflowing && t ? this.scrollbarWidth : "",
            paddingRight: this.bodyIsOverflowing && !t ? this.scrollbarWidth : ""
        })
    }
    ,
    n.prototype.resetAdjustments = function() {
        this.$element.css({
            paddingLeft: "",
            paddingRight: ""
        })
    }
    ,
    n.prototype.checkScrollbar = function() {
        var t = window.innerWidth;
        if (!t) {
            var e = document.documentElement.getBoundingClientRect();
            t = e.right - Math.abs(e.left)
        }
        this.bodyIsOverflowing = document.body.clientWidth < t,
        this.scrollbarWidth = this.measureScrollbar()
    }
    ,
    n.prototype.setScrollbar = function() {
        var t = parseInt(this.$body.css("padding-right") || 0, 10);
        this.originalBodyPad = document.body.style.paddingRight || "",
        this.bodyIsOverflowing && this.$body.css("padding-right", t + this.scrollbarWidth)
    }
    ,
    n.prototype.resetScrollbar = function() {
        this.$body.css("padding-right", this.originalBodyPad)
    }
    ,
    n.prototype.measureScrollbar = function() {
        var t = document.createElement("div");
        t.className = "modal-scrollbar-measure",
        this.$body.append(t);
        var e = t.offsetWidth - t.clientWidth;
        return this.$body[0].removeChild(t),
        e
    }
    ;
    var i = t.fn.modal;
    t.fn.modal = e,
    t.fn.modal.Constructor = n,
    t.fn.modal.noConflict = function() {
        return t.fn.modal = i,
        this
    }
    ,
    t(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function(n) {
        var i = t(this)
          , o = i.attr("href")
          , r = t(i.attr("data-target") || o && o.replace(/.*(?=#[^\s]+$)/, ""))
          , s = r.data("bs.modal") ? "toggle" : t.extend({
            remote: !/#/.test(o) && o
        }, r.data(), i.data());
        i.is("a") && n.preventDefault(),
        r.one("show.bs.modal", function(t) {
            t.isDefaultPrevented() || r.one("hidden.bs.modal", function() {
                i.is(":visible") && i.trigger("focus")
            }
            )
        }
        ),
        e.call(r, s, this)
    }
    )
}
(jQuery),
+function(t) {
    "use strict";
    function e(e) {
        return this.each(function() {
            var i = t(this)
              , o = i.data("bs.tooltip")
              , r = "object" == typeof e && e;
            (o || !/destroy|hide/.test(e)) && (o || i.data("bs.tooltip", o = new n(this,r)),
            "string" == typeof e && o[e]())
        }
        )
    }
    var n = function(t, e) {
        this.type = null ,
        this.options = null ,
        this.enabled = null ,
        this.timeout = null ,
        this.hoverState = null ,
        this.$element = null ,
        this.inState = null ,
        this.init("tooltip", t, e)
    }
    ;
    n.VERSION = "3.3.5",
    n.TRANSITION_DURATION = 150,
    n.DEFAULTS = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1,
        viewport: {
            selector: "body",
            padding: 0
        }
    },
    n.prototype.init = function(e, n, i) {
        if (this.enabled = !0,
        this.type = e,
        this.$element = t(n),
        this.options = this.getOptions(i),
        this.$viewport = this.options.viewport && t(t.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : this.options.viewport.selector || this.options.viewport),
        this.inState = {
            click: !1,
            hover: !1,
            focus: !1
        },
        this.$element[0] instanceof document.constructor && !this.options.selector)
            throw new Error("`selector` option must be specified when initializing " + this.type + " on the window.document object!");
        for (var o = this.options.trigger.split(" "), r = o.length; r--; ) {
            var s = o[r];
            if ("click" == s)
                this.$element.on("click." + this.type, this.options.selector, t.proxy(this.toggle, this));
            else if ("manual" != s) {
                var a = "hover" == s ? "mouseenter" : "focusin"
                  , l = "hover" == s ? "mouseleave" : "focusout";
                this.$element.on(a + "." + this.type, this.options.selector, t.proxy(this.enter, this)),
                this.$element.on(l + "." + this.type, this.options.selector, t.proxy(this.leave, this))
            }
        }
        this.options.selector ? this._options = t.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle()
    }
    ,
    n.prototype.getDefaults = function() {
        return n.DEFAULTS
    }
    ,
    n.prototype.getOptions = function(e) {
        return e = t.extend({}, this.getDefaults(), this.$element.data(), e),
        e.delay && "number" == typeof e.delay && (e.delay = {
            show: e.delay,
            hide: e.delay
        }),
        e
    }
    ,
    n.prototype.getDelegateOptions = function() {
        var e = {}
          , n = this.getDefaults();
        return this._options && t.each(this._options, function(t, i) {
            n[t] != i && (e[t] = i)
        }
        ),
        e
    }
    ,
    n.prototype.enter = function(e) {
        var n = e instanceof this.constructor ? e : t(e.currentTarget).data("bs." + this.type);
        return n || (n = new this.constructor(e.currentTarget,this.getDelegateOptions()),
        t(e.currentTarget).data("bs." + this.type, n)),
        e instanceof t.Event && (n.inState["focusin" == e.type ? "focus" : "hover"] = !0),
        n.tip().hasClass("in") || "in" == n.hoverState ? void (n.hoverState = "in") : (clearTimeout(n.timeout),
        n.hoverState = "in",
        n.options.delay && n.options.delay.show ? void (n.timeout = setTimeout(function() {
            "in" == n.hoverState && n.show()
        }
        , n.options.delay.show)) : n.show())
    }
    ,
    n.prototype.isInStateTrue = function() {
        for (var t in this.inState)
            if (this.inState[t])
                return !0;
        return !1
    }
    ,
    n.prototype.leave = function(e) {
        var n = e instanceof this.constructor ? e : t(e.currentTarget).data("bs." + this.type);
        return n || (n = new this.constructor(e.currentTarget,this.getDelegateOptions()),
        t(e.currentTarget).data("bs." + this.type, n)),
        e instanceof t.Event && (n.inState["focusout" == e.type ? "focus" : "hover"] = !1),
        n.isInStateTrue() ? void 0 : (clearTimeout(n.timeout),
        n.hoverState = "out",
        n.options.delay && n.options.delay.hide ? void (n.timeout = setTimeout(function() {
            "out" == n.hoverState && n.hide()
        }
        , n.options.delay.hide)) : n.hide())
    }
    ,
    n.prototype.show = function() {
        var e = t.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            this.$element.trigger(e);
            var i = t.contains(this.$element[0].ownerDocument.documentElement, this.$element[0]);
            if (e.isDefaultPrevented() || !i)
                return;
            var o = this
              , r = this.tip()
              , s = this.getUID(this.type);
            this.setContent(),
            r.attr("id", s),
            this.$element.attr("aria-describedby", s),
            this.options.animation && r.addClass("fade");
            var a = "function" == typeof this.options.placement ? this.options.placement.call(this, r[0], this.$element[0]) : this.options.placement
              , l = /\s?auto?\s?/i
              , u = l.test(a);
            u && (a = a.replace(l, "") || "top"),
            r.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(a).data("bs." + this.type, this),
            this.options.container ? r.appendTo(this.options.container) : r.insertAfter(this.$element),
            this.$element.trigger("inserted.bs." + this.type);
            var c = this.getPosition()
              , h = r[0].offsetWidth
              , d = r[0].offsetHeight;
            if (u) {
                var p = a
                  , f = this.getPosition(this.$viewport);
                a = "bottom" == a && c.bottom + d > f.bottom ? "top" : "top" == a && c.top - d < f.top ? "bottom" : "right" == a && c.right + h > f.width ? "left" : "left" == a && c.left - h < f.left ? "right" : a,
                r.removeClass(p).addClass(a)
            }
            var m = this.getCalculatedOffset(a, c, h, d);
            this.applyPlacement(m, a);
            var g = function() {
                var t = o.hoverState;
                o.$element.trigger("shown.bs." + o.type),
                o.hoverState = null ,
                "out" == t && o.leave(o)
            }
            ;
            t.support.transition && this.$tip.hasClass("fade") ? r.one("bsTransitionEnd", g).emulateTransitionEnd(n.TRANSITION_DURATION) : g()
        }
    }
    ,
    n.prototype.applyPlacement = function(e, n) {
        var i = this.tip()
          , o = i[0].offsetWidth
          , r = i[0].offsetHeight
          , s = parseInt(i.css("margin-top"), 10)
          , a = parseInt(i.css("margin-left"), 10);
        isNaN(s) && (s = 0),
        isNaN(a) && (a = 0),
        e.top += s,
        e.left += a,
        t.offset.setOffset(i[0], t.extend({
            using: function(t) {
                i.css({
                    top: Math.round(t.top),
                    left: Math.round(t.left)
                })
            }
        }, e), 0),
        i.addClass("in");
        var l = i[0].offsetWidth
          , u = i[0].offsetHeight;
        "top" == n && u != r && (e.top = e.top + r - u);
        var c = this.getViewportAdjustedDelta(n, e, l, u);
        c.left ? e.left += c.left : e.top += c.top;
        var h = /top|bottom/.test(n)
          , d = h ? 2 * c.left - o + l : 2 * c.top - r + u
          , p = h ? "offsetWidth" : "offsetHeight";
        i.offset(e),
        this.replaceArrow(d, i[0][p], h)
    }
    ,
    n.prototype.replaceArrow = function(t, e, n) {
        this.arrow().css(n ? "left" : "top", 50 * (1 - t / e) + "%").css(n ? "top" : "left", "")
    }
    ,
    n.prototype.setContent = function() {
        var t = this.tip()
          , e = this.getTitle();
        t.find(".tooltip-inner")[this.options.html ? "html" : "text"](e),
        t.removeClass("fade in top bottom left right")
    }
    ,
    n.prototype.hide = function(e) {
        function i() {
            "in" != o.hoverState && r.detach(),
            o.$element.removeAttr("aria-describedby").trigger("hidden.bs." + o.type),
            e && e()
        }
        var o = this
          , r = t(this.$tip)
          , s = t.Event("hide.bs." + this.type);
        return this.$element.trigger(s),
        s.isDefaultPrevented() ? void 0 : (r.removeClass("in"),
        t.support.transition && r.hasClass("fade") ? r.one("bsTransitionEnd", i).emulateTransitionEnd(n.TRANSITION_DURATION) : i(),
        this.hoverState = null ,
        this)
    }
    ,
    n.prototype.fixTitle = function() {
        var t = this.$element;
        (t.attr("title") || "string" != typeof t.attr("data-original-title")) && t.attr("data-original-title", t.attr("title") || "").attr("title", "")
    }
    ,
    n.prototype.hasContent = function() {
        return this.getTitle()
    }
    ,
    n.prototype.getPosition = function(e) {
        e = e || this.$element;
        var n = e[0]
          , i = "BODY" == n.tagName
          , o = n.getBoundingClientRect();
        null  == o.width && (o = t.extend({}, o, {
            width: o.right - o.left,
            height: o.bottom - o.top
        }));
        var r = i ? {
            top: 0,
            left: 0
        } : e.offset()
          , s = {
            scroll: i ? document.documentElement.scrollTop || document.body.scrollTop : e.scrollTop()
        }
          , a = i ? {
            width: t(window).width(),
            height: t(window).height()
        } : null ;
        return t.extend({}, o, s, a, r)
    }
    ,
    n.prototype.getCalculatedOffset = function(t, e, n, i) {
        return "bottom" == t ? {
            top: e.top + e.height,
            left: e.left + e.width / 2 - n / 2
        } : "top" == t ? {
            top: e.top - i,
            left: e.left + e.width / 2 - n / 2
        } : "left" == t ? {
            top: e.top + e.height / 2 - i / 2,
            left: e.left - n
        } : {
            top: e.top + e.height / 2 - i / 2,
            left: e.left + e.width
        }
    }
    ,
    n.prototype.getViewportAdjustedDelta = function(t, e, n, i) {
        var o = {
            top: 0,
            left: 0
        };
        if (!this.$viewport)
            return o;
        var r = this.options.viewport && this.options.viewport.padding || 0
          , s = this.getPosition(this.$viewport);
        if (/right|left/.test(t)) {
            var a = e.top - r - s.scroll
              , l = e.top + r - s.scroll + i;
            a < s.top ? o.top = s.top - a : l > s.top + s.height && (o.top = s.top + s.height - l)
        } else {
            var u = e.left - r
              , c = e.left + r + n;
            u < s.left ? o.left = s.left - u : c > s.right && (o.left = s.left + s.width - c)
        }
        return o
    }
    ,
    n.prototype.getTitle = function() {
        var t, e = this.$element, n = this.options;
        return t = e.attr("data-original-title") || ("function" == typeof n.title ? n.title.call(e[0]) : n.title)
    }
    ,
    n.prototype.getUID = function(t) {
        do
            t += ~~(1e6 * Math.random());
        while (document.getElementById(t));return t
    }
    ,
    n.prototype.tip = function() {
        if (!this.$tip && (this.$tip = t(this.options.template),
        1 != this.$tip.length))
            throw new Error(this.type + " `template` option must consist of exactly 1 top-level element!");
        return this.$tip
    }
    ,
    n.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    }
    ,
    n.prototype.enable = function() {
        this.enabled = !0
    }
    ,
    n.prototype.disable = function() {
        this.enabled = !1
    }
    ,
    n.prototype.toggleEnabled = function() {
        this.enabled = !this.enabled
    }
    ,
    n.prototype.toggle = function(e) {
        var n = this;
        e && (n = t(e.currentTarget).data("bs." + this.type),
        n || (n = new this.constructor(e.currentTarget,this.getDelegateOptions()),
        t(e.currentTarget).data("bs." + this.type, n))),
        e ? (n.inState.click = !n.inState.click,
        n.isInStateTrue() ? n.enter(n) : n.leave(n)) : n.tip().hasClass("in") ? n.leave(n) : n.enter(n)
    }
    ,
    n.prototype.destroy = function() {
        var t = this;
        clearTimeout(this.timeout),
        this.hide(function() {
            t.$element.off("." + t.type).removeData("bs." + t.type),
            t.$tip && t.$tip.detach(),
            t.$tip = null ,
            t.$arrow = null ,
            t.$viewport = null 
        }
        )
    }
    ;
    var i = t.fn.tooltip;
    t.fn.tooltip = e,
    t.fn.tooltip.Constructor = n,
    t.fn.tooltip.noConflict = function() {
        return t.fn.tooltip = i,
        this
    }
}
(jQuery),
+function(t) {
    "use strict";
    function e(e) {
        return this.each(function() {
            var i = t(this)
              , o = i.data("bs.popover")
              , r = "object" == typeof e && e;
            (o || !/destroy|hide/.test(e)) && (o || i.data("bs.popover", o = new n(this,r)),
            "string" == typeof e && o[e]())
        }
        )
    }
    var n = function(t, e) {
        this.init("popover", t, e)
    }
    ;
    if (!t.fn.tooltip)
        throw new Error("Popover requires tooltip.js");
    n.VERSION = "3.3.5",
    n.DEFAULTS = t.extend({}, t.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }),
    n.prototype = t.extend({}, t.fn.tooltip.Constructor.prototype),
    n.prototype.constructor = n,
    n.prototype.getDefaults = function() {
        return n.DEFAULTS
    }
    ,
    n.prototype.setContent = function() {
        var t = this.tip()
          , e = this.getTitle()
          , n = this.getContent();
        t.find(".popover-title")[this.options.html ? "html" : "text"](e),
        t.find(".popover-content").children().detach().end()[this.options.html ? "string" == typeof n ? "html" : "append" : "text"](n),
        t.removeClass("fade top bottom left right in"),
        t.find(".popover-title").html() || t.find(".popover-title").hide()
    }
    ,
    n.prototype.hasContent = function() {
        return this.getTitle() || this.getContent()
    }
    ,
    n.prototype.getContent = function() {
        var t = this.$element
          , e = this.options;
        return t.attr("data-content") || ("function" == typeof e.content ? e.content.call(t[0]) : e.content)
    }
    ,
    n.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".arrow")
    }
    ;
    var i = t.fn.popover;
    t.fn.popover = e,
    t.fn.popover.Constructor = n,
    t.fn.popover.noConflict = function() {
        return t.fn.popover = i,
        this
    }
}
(jQuery),
+function(t) {
    "use strict";
    function e(n, i) {
        this.$body = t(document.body),
        this.$scrollElement = t(t(n).is(document.body) ? window : n),
        this.options = t.extend({}, e.DEFAULTS, i),
        this.selector = (this.options.target || "") + " .nav li > a",
        this.offsets = [],
        this.targets = [],
        this.activeTarget = null ,
        this.scrollHeight = 0,
        this.$scrollElement.on("scroll.bs.scrollspy", t.proxy(this.process, this)),
        this.refresh(),
        this.process()
    }
    function n(n) {
        return this.each(function() {
            var i = t(this)
              , o = i.data("bs.scrollspy")
              , r = "object" == typeof n && n;
            o || i.data("bs.scrollspy", o = new e(this,r)),
            "string" == typeof n && o[n]()
        }
        )
    }
    e.VERSION = "3.3.5",
    e.DEFAULTS = {
        offset: 10
    },
    e.prototype.getScrollHeight = function() {
        return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }
    ,
    e.prototype.refresh = function() {
        var e = this
          , n = "offset"
          , i = 0;
        this.offsets = [],
        this.targets = [],
        this.scrollHeight = this.getScrollHeight(),
        t.isWindow(this.$scrollElement[0]) || (n = "position",
        i = this.$scrollElement.scrollTop()),
        this.$body.find(this.selector).map(function() {
            var e = t(this)
              , o = e.data("target") || e.attr("href")
              , r = /^#./.test(o) && t(o);
            return r && r.length && r.is(":visible") && [[r[n]().top + i, o]] || null 
        }
        ).sort(function(t, e) {
            return t[0] - e[0]
        }
        ).each(function() {
            e.offsets.push(this[0]),
            e.targets.push(this[1])
        }
        )
    }
    ,
    e.prototype.process = function() {
        var t, e = this.$scrollElement.scrollTop() + this.options.offset, n = this.getScrollHeight(), i = this.options.offset + n - this.$scrollElement.height(), o = this.offsets, r = this.targets, s = this.activeTarget;
        if (this.scrollHeight != n && this.refresh(),
        e >= i)
            return s != (t = r[r.length - 1]) && this.activate(t);
        if (s && e < o[0])
            return this.activeTarget = null ,
            this.clear();
        for (t = o.length; t--; )
            s != r[t] && e >= o[t] && (void 0 === o[t + 1] || e < o[t + 1]) && this.activate(r[t])
    }
    ,
    e.prototype.activate = function(e) {
        this.activeTarget = e,
        this.clear();
        var n = this.selector + '[data-target="' + e + '"],' + this.selector + '[href="' + e + '"]'
          , i = t(n).parents("li").addClass("active");
        i.parent(".dropdown-menu").length && (i = i.closest("li.dropdown").addClass("active")),
        i.trigger("activate.bs.scrollspy")
    }
    ,
    e.prototype.clear = function() {
        t(this.selector).parentsUntil(this.options.target, ".active").removeClass("active")
    }
    ;
    var i = t.fn.scrollspy;
    t.fn.scrollspy = n,
    t.fn.scrollspy.Constructor = e,
    t.fn.scrollspy.noConflict = function() {
        return t.fn.scrollspy = i,
        this
    }
    ,
    t(window).on("load.bs.scrollspy.data-api", function() {
        t('[data-spy="scroll"]').each(function() {
            var e = t(this);
            n.call(e, e.data())
        }
        )
    }
    )
}
(jQuery),
+function(t) {
    "use strict";
    function e(e) {
        return this.each(function() {
            var i = t(this)
              , o = i.data("bs.tab");
            o || i.data("bs.tab", o = new n(this)),
            "string" == typeof e && o[e]()
        }
        )
    }
    var n = function(e) {
        this.element = t(e)
    }
    ;
    n.VERSION = "3.3.5",
    n.TRANSITION_DURATION = 150,
    n.prototype.show = function() {
        var e = this.element
          , n = e.closest("ul:not(.dropdown-menu)")
          , i = e.data("target");
        if (i || (i = e.attr("href"),
        i = i && i.replace(/.*(?=#[^\s]*$)/, "")),
        !e.parent("li").hasClass("active")) {
            var o = n.find(".active:last a")
              , r = t.Event("hide.bs.tab", {
                relatedTarget: e[0]
            })
              , s = t.Event("show.bs.tab", {
                relatedTarget: o[0]
            });
            if (o.trigger(r),
            e.trigger(s),
            !s.isDefaultPrevented() && !r.isDefaultPrevented()) {
                var a = t(i);
                this.activate(e.closest("li"), n),
                this.activate(a, a.parent(), function() {
                    o.trigger({
                        type: "hidden.bs.tab",
                        relatedTarget: e[0]
                    }),
                    e.trigger({
                        type: "shown.bs.tab",
                        relatedTarget: o[0]
                    })
                }
                )
            }
        }
    }
    ,
    n.prototype.activate = function(e, i, o) {
        function r() {
            s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !1),
            e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded", !0),
            a ? (e[0].offsetWidth,
            e.addClass("in")) : e.removeClass("fade"),
            e.parent(".dropdown-menu").length && e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !0),
            o && o()
        }
        var s = i.find("> .active")
          , a = o && t.support.transition && (s.length && s.hasClass("fade") || !!i.find("> .fade").length);
        s.length && a ? s.one("bsTransitionEnd", r).emulateTransitionEnd(n.TRANSITION_DURATION) : r(),
        s.removeClass("in")
    }
    ;
    var i = t.fn.tab;
    t.fn.tab = e,
    t.fn.tab.Constructor = n,
    t.fn.tab.noConflict = function() {
        return t.fn.tab = i,
        this
    }
    ;
    var o = function(n) {
        n.preventDefault(),
        e.call(t(this), "show")
    }
    ;
    t(document).on("click.bs.tab.data-api", '[data-toggle="tab"]', o).on("click.bs.tab.data-api", '[data-toggle="pill"]', o)
}
(jQuery),
+function(t) {
    "use strict";
    function e(e) {
        return this.each(function() {
            var i = t(this)
              , o = i.data("bs.affix")
              , r = "object" == typeof e && e;
            o || i.data("bs.affix", o = new n(this,r)),
            "string" == typeof e && o[e]()
        }
        )
    }
    var n = function(e, i) {
        this.options = t.extend({}, n.DEFAULTS, i),
        this.$target = t(this.options.target).on("scroll.bs.affix.data-api", t.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", t.proxy(this.checkPositionWithEventLoop, this)),
        this.$element = t(e),
        this.affixed = null ,
        this.unpin = null ,
        this.pinnedOffset = null ,
        this.checkPosition()
    }
    ;
    n.VERSION = "3.3.5",
    n.RESET = "affix affix-top affix-bottom",
    n.DEFAULTS = {
        offset: 0,
        target: window
    },
    n.prototype.getState = function(t, e, n, i) {
        var o = this.$target.scrollTop()
          , r = this.$element.offset()
          , s = this.$target.height();
        if (null  != n && "top" == this.affixed)
            return n > o ? "top" : !1;
        if ("bottom" == this.affixed)
            return null  != n ? o + this.unpin <= r.top ? !1 : "bottom" : t - i >= o + s ? !1 : "bottom";
        var a = null  == this.affixed
          , l = a ? o : r.top
          , u = a ? s : e;
        return null  != n && n >= o ? "top" : null  != i && l + u >= t - i ? "bottom" : !1
    }
    ,
    n.prototype.getPinnedOffset = function() {
        if (this.pinnedOffset)
            return this.pinnedOffset;
        this.$element.removeClass(n.RESET).addClass("affix");
        var t = this.$target.scrollTop()
          , e = this.$element.offset();
        return this.pinnedOffset = e.top - t
    }
    ,
    n.prototype.checkPositionWithEventLoop = function() {
        setTimeout(t.proxy(this.checkPosition, this), 1)
    }
    ,
    n.prototype.checkPosition = function() {
        if (this.$element.is(":visible")) {
            var e = this.$element.height()
              , i = this.options.offset
              , o = i.top
              , r = i.bottom
              , s = Math.max(t(document).height(), t(document.body).height());
            "object" != typeof i && (r = o = i),
            "function" == typeof o && (o = i.top(this.$element)),
            "function" == typeof r && (r = i.bottom(this.$element));
            var a = this.getState(s, e, o, r);
            if (this.affixed != a) {
                null  != this.unpin && this.$element.css("top", "");
                var l = "affix" + (a ? "-" + a : "")
                  , u = t.Event(l + ".bs.affix");
                if (this.$element.trigger(u),
                u.isDefaultPrevented())
                    return;
                this.affixed = a,
                this.unpin = "bottom" == a ? this.getPinnedOffset() : null ,
                this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix", "affixed") + ".bs.affix")
            }
            "bottom" == a && this.$element.offset({
                top: s - e - r
            })
        }
    }
    ;
    var i = t.fn.affix;
    t.fn.affix = e,
    t.fn.affix.Constructor = n,
    t.fn.affix.noConflict = function() {
        return t.fn.affix = i,
        this
    }
    ,
    t(window).on("load", function() {
        t('[data-spy="affix"]').each(function() {
            var n = t(this)
              , i = n.data();
            i.offset = i.offset || {},
            null  != i.offsetBottom && (i.offset.bottom = i.offsetBottom),
            null  != i.offsetTop && (i.offset.top = i.offsetTop),
            e.call(n, i)
        }
        )
    }
    )
}
(jQuery),
define("bootstrap", ["jquery"], function(t) {
    return function() {
        var e;
        return e || t.jQuery.fn.popover
    }
}
(this)),
define("gui", ["enketo-js/support", "settings", "print", "jquery", "plugin", "bootstrap"], function(t, e, n, i) {
    "use strict";
    function o() {
        m.setup(),
        g.init(),
        r(),
        i("footer").detach().appendTo("#container"),
        p(),
        "undefined" == typeof console && (console = {
            log: function() {}
        }),
        "undefined" == typeof window.console.debug && (console.debug = console.log),
        e.debug || (window.console.log = function() {}
        ,
        window.console.debug = function() {}
        ),
        e.touch ? (t.touch = !0,
        i("html").addClass("touch")) : e.touch === !1 && (t.touch = !1,
        i("html").removeClass("touch"))
    }
    function r() {
        i(document).on("click", "#feedback-bar .close", function(t) {
            return y.hide(),
            !1
        }
        ),
        i(document).on("click", ".touch #feedback-bar", function(t) {
            y.hide()
        }
        ),
        i(document).on("click", "#page .close", function(t) {
            return g.close(),
            !1
        }
        ),
        i(document).on("click", ".side-slider .close", function(t) {
            i("body").removeClass("show-side-slider")
        }
        ),
        i("button.print").on("click", function() {
            n(l)
        }
        ),
        i(".side-slider-toggle").on("click", function() {
            var t = i("body");
            window.scrollTo(0, 0),
            t.toggleClass("show-side-slider")
        }
        ),
        i(".offline-enabled-icon").on("click", function() {
            var t = "<p>This form can now be loaded and used without an Internet connection on this device. Bookmark it for easy offline access.<p>Records are automatically stored and queued on your computer until an Internet connection is available. When the app is online, records will be automatically submitted - one by one.</p><p>Only after a record has been succesfully submitted, it will be removed from the queue. You can safely close down your browser and computer with items in the queue. They will still be there next time you load the form.</p>";
            a(t, "Form works offline!", "normal")
        }
        ),
        i(document).on("click", 'a[href^="#"]:not([href="#"]):not(nav ul li a)', function(t) {
            var e = i(this).attr("href");
            console.log("captured click to nav page, href=" + e),
            "#" !== e && (t.preventDefault(),
            i('nav li a[href="' + e + '"]').click())
        }
        ),
        i('nav ul li a[href^="#"]').click(function(t) {
            t.preventDefault();
            var e = i(this).attr("href").substr(1);
            g.open(e),
            i(this).closest("li").addClass("active").siblings().removeClass("active")
        }
        ),
        i(window).on("onlinestatuschange", function(t, e) {
            v.connection(e)
        }
        ),
        i(document).on("edit", "form.jr", function(t, e) {
            v.edit(e)
        }
        ),
        i(document).on("browsersupport", function(t, e) {
            v.support(e)
        }
        ),
        i("#page, #feedback-bar").on("changepagebar", function() {
            p()
        }
        ),
        i(document).on("xpatherror", function(t, n) {
            var i = e.supportEmail;
            a('A formula evaluation error occurred. Please contact <a href="mailto:' + i + "?subject=xpath errors for: " + location.href + "&body=" + n + '" target="_blank" >' + i + '</a> with this error:<ul class="error-list"><li>' + n + "</li></ul>", "Formula Error")
        }
        ),
        i(".ad .close").on("click", function() {
            i(this).closest(".ad").remove()
        }
        )
    }
    function s(e, n, i, o) {
        i = i || "Information",
        t.touch ? o ? l({
            msg: e,
            heading: i
        }, o, null , n) : a(e, i, "info", n) : y.show(e, n)
    }
    function a(t, e, n, o) {
        var r, s, a = i("#dialog-alert");
        if (e = e || "Alert",
        n = n || "danger",
        r = "normal" === n ? "" : "alert alert-" + n,
        a.find(".modal-header h3").text(e),
        a.find(".modal-body p").removeClass().addClass(r).html(t).capitalizeStart(),
        a.modal({
            keyboard: !0,
            show: !0
        }),
        a.on("hidden.bs.modal", function() {
            a.find(".modal-header h3, .modal-body p").html(""),
            clearInterval(s)
        }
        ),
        "number" == typeof o) {
            var l = o;
            a.find(".self-destruct-timer").text(l),
            s = setInterval(function() {
                l--,
                a.find(".self-destruct-timer").text(l)
            }
            , 1e3),
            setTimeout(function() {
                clearInterval(s),
                a.find(".close").click()
            }
            , 1e3 * o)
        }
    }
    function l(t, e, n, o) {
        function r() {
            console.log("confirm dialog reset called"),
            i("body>.modal-backdrop").remove(),
            c.find("button.positive, button.negative").off("click"),
            c.find(".modal-body .msg, .modal-body .alert-danger, button").text("")
        }
        var s, a, l, u, c, h;
        if ("string" == typeof t ? s = t : "string" == typeof t.msg && (s = t.msg),
        s = s || "Please confirm action",
        a = t.heading || "Are you sure?",
        l = t.errorMsg || "",
        u = t.dialog || "confirm",
        n = n || {},
        e = e || {},
        e.posButton = e.posButton || "Confirm",
        e.negButton = e.negButton || "Cancel",
        e.posAction = e.posAction || function() {}
        ,
        e.negAction = e.negAction || function() {}
        ,
        e.beforeAction = e.beforeAction || function() {}
        ,
        e.afterAction = e.afterAction || function() {}
        ,
        c = i("#dialog-" + u),
        c.find(".modal-header h3").text(a),
        c.find(".modal-body .msg").html(s).capitalizeStart(),
        c.find(".modal-body .alert-danger").html(l).show(),
        l || c.find(".modal-body .alert-danger").hide(),
        c.find("input, select, textarea").each(function() {
            var t = i(this).attr("name");
            "undefined" != typeof n[t] && i(this).val(n[t])
        }
        ),
        c.modal("show"),
        c.one("shown.bs.modal", function() {
            e.beforeAction.call()
        }
        ),
        c.one("hidden.bs.modal", function() {
            console.log("after action"),
            e.afterAction.call(),
            r()
        }
        ),
        c.find("button.positive").one("click", function() {
            var t = {}
              , n = c.find(".modal-body form");
            i.each(n.serializeArray(), function(e, n) {
                t.hasOwnProperty(n.name) ? (t[n.name] = i.makeArray(t[n.name]),
                t[n.name].push(n.value)) : t[n.name] = n.value
            }
            ),
            c.modal("hide"),
            e.posAction.call(void 0, t)
        }
        ).text(e.posButton),
        c.find("button.negative").one("click", function() {
            c.modal("hide"),
            e.negAction.call()
        }
        ).text(e.negButton),
        "number" == typeof o) {
            var d = o.toString();
            c.find(".self-destruct-timer").text(d),
            h = setInterval(function() {
                d--,
                c.find(".self-destruct-timer").text(d)
            }
            , 1e3),
            setTimeout(function() {
                clearInterval(h),
                c.find(".close").click()
            }
            , 1e3 * o)
        }
    }
    function u(t, n) {
        t = t || "<p>In order to submit your queued data, you need to login. If you want to do this now, you will be redirected, and loose unsaved information.</p><p>Would you like to login now or later?</p>",
        n = n || e.serverURL,
        l({
            msg: t,
            heading: "Login Required"
        }, {
            posButton: "Log in now",
            negButton: "Later",
            posAction: function() {
                var t = "?server=" + encodeURIComponent(n) + "&return=" + encodeURIComponent(location.href);
                t += e.formId ? "&id=" + e.formId : "",
                t += e.touch ? "&touch=" + e.touch : "",
                t += e.debug ? "&debug=" + e.debug : "",
                location.href = location.protocol + "//" + location.host + "/authenticate" + t
            },
            negAction: function() {
                console.log("login cancelled")
            },
            beforeAction: function() {}
        })
    }
    function c(t, n) {
        var i = '<ul class="error-list"><li>' + t.join("</li><li>") + "</li></ul"
          , o = "* " + t.join("* ")
          , r = t.length > 1 ? "s" : ""
          , s = e.supportEmail;
        n = n || "",
        a("<p>Error" + r + " occured during the loading of this form. " + n + '</p><br/><p>Please contact <a href="mailto:' + s + "?subject=loading errors for: " + location.href + "&body=" + o + '" target="_blank" >' + s + "</a> with the link to this page and the error message" + r + " below:</p>" + i, "Loading Error" + r)
    }
    function h() {
        var t = "Offline application launch is not supported by your browser. You can use the form without this feature or see options for resolving this"
          , n = {
            posButton: "Show options",
            negButton: "Use it",
            posAction: function() {
                window.location = e.modernBrowsersURL
            }
        };
        l({
            msg: t,
            heading: "Application cannot launch offline"
        }, n)
    }
    function d(t) {
        var e = i(window).height()
          , n = i("header").outerHeight(!0)
          , o = t.outerHeight() - t.height();
        return e - n - o
    }
    function p() {
        console.log("positionPageAndBar called");
        Android.javascriptLoaded();
        var t, e, n = i("header.navbar"), o = n.outerHeight() || 0, r = i("#feedback-bar"), s = r.find("p").length > 0 ? !0 : !1, a = r.outerHeight(), l = i("#page"), u = g.isShowing(), c = l.outerHeight() || 0;
        return l.css({
            position: n.css("position")
        }),
        n.length > 0 && "fixed" !== n.css("position") ? (s || r.hide(),
        u || l.hide(),
        !1) : (t = s ? o : 0 - a,
        e = u ? s ? t + a : o : 0 - c,
        void setTimeout(function() {
            r.css("top", t + "px"),
            l.css("top", e + "px")
        }
        , 100))
    }
    function f(t, e, n) {
        var o, r = "";
        if (console.log("list: ", t),
        i.isEmptyObject(t))
            e.addClass("empty"),
            n || (r = '<p class="alert alert-danger">Error occurred during creation of form list or no forms found</p>');
        else {
            for (o = 0; o < t.length; o++)
                r += '<li><a class="btn btn-block btn-info" id="' + t[o].form_id + '" title="' + t[o].title + '" href="' + t[o].url + '" data-server="' + t[o].server_url + '" >' + t[o].name + "</a></li>";
            e.removeClass("empty")
        }
        e.find("ul").empty().append(r)
    }
    var m, g, v, y;
    '<a href="mailto:' + e.supportEmail + '">' + e.supportEmail + "</a>";
    return m = {
        setup: function() {
            i("article.page").each(function() {
                var t, e, n, o = "";
                e = i(this).attr("id"),
                t = i(this).attr("data-display-icon") ? '<span class="glyphicon glyphicon-' + i(this).attr("data-display-icon") + '" > </span>' : i(this).attr("data-display") ? i(this).attr("data-display") : e,
                o = i(this).attr("data-title") ? i(this).attr("data-title") : e,
                n = i(this).attr("data-ext-link") ? i(this).attr("data-ext-link") : "#" + e,
                i('<li class=""><a href="' + n + '" title="' + o + '" >' + t + "</a></li>").appendTo(i(".navbar-right"))
            }
            )
        },
        reset: function() {
            i("nav ul li").removeClass("active")
        }
    },
    g = {
        init: function() {
            this.$pages = i("<pages></pages>"),
            i("article.page").detach().appendTo(this.$pages)
        },
        get: function(t) {
            var e = this.$pages.find('article[id="' + t + '"]');
            return e = e.length > 0 ? e : i('article[id="' + t + '"]')
        },
        isShowing: function(t) {
            var e = "undefined" != typeof t ? '[id="' + t + '"]' : "";
            return i("#page article.page" + e).length > 0
        },
        open: function(t) {
            var e, n = (i("header"),
            this);
            if (!this.isShowing(t)) {
                if (e = this.get(t),
                1 !== e.length)
                    return void console.error("page not found");
                this.isShowing() && this.close(),
                i("#page .content").prepend(e.show()).trigger("changepagebar"),
                i("#page").show(),
                i(".main").css("opacity", "0.3"),
                i(window).on("resize.pageEvents", function() {
                    i("#page").trigger("changepagebar")
                }
                ),
                setTimeout(function() {
                    i(window).on("click.pageEvents", function(t) {
                        return 0 === i(t.target).parents("#page").length && n.close(),
                        !0
                    }
                    )
                }
                , 1e3)
            }
        },
        close: function() {
            var t = i("#page .page");
            t.length > 0 && (this.$pages.append(t.detach()),
            i("#page").trigger("changepagebar"),
            i(".navbar-right li").removeClass("active"),
            i(window).off(".pageEvents")),
            i(".main").css("opacity", "1")
        }
    },
    y = {
        show: function(t, e) {
            var n;
            e = e ? 1e3 * e : 1e4,
            i("#feedback-bar p").eq(1).remove(),
            i("#feedback-bar p").html() !== t && (n = i("<p></p>"),
            n.append(t),
            i("#feedback-bar").prepend(n)),
            i("#feedback-bar").show().trigger("changepagebar"),
            setTimeout(function() {
                "undefined" != typeof n && n.remove(),
                i("#feedback-bar").trigger("changepagebar")
            }
            , e)
        },
        hide: function() {
            i("#feedback-bar p").remove(),
            i("#feedback-bar").trigger("changepagebar")
        }
    },
    v = {
        connection: function(t) {},
        edit: function(t) {
            t ? i("header #status-editing").removeClass().addClass("ui-icon ui-icon-pencil").attr("title", "Form is being edited.") : i("header #status-editing").removeClass().attr("title", "")
        },
        support: function(t) {},
        offlineLaunch: function(t) {
            t ? i(".offline-enabled-icon.not-enabled").removeClass("not-enabled") : i(".offline-enabled-icon").addClass("not-enabled")
        }
    },
    o(),
    {
        alert: a,
        confirm: l,
        feedback: s,
        updateStatus: v,
        pages: g,
        fillHeight: d,
        confirmLogin: u,
        showLoadErrors: c,
        showCacheUnsupported: h,
        parseFormlist: f
    }
}
),
define("enketo-js/extend", ["require"], function(t) {
    String.prototype.pad = function(t) {
        for (var e = this; e.length < t; )
            e = "0" + e;
        return e
    }
    ,
    Date.prototype.toISOLocalString = function() {
        var t = {}
          , e = function(t) {
            return 10 > t ? "0" + t : t
        }
        ;
        return "Invalid Date" === this.toString() ? this.toString() : (t.minstotal = this.getTimezoneOffset(),
        t.direction = t.minstotal < 0 ? "+" : "-",
        t.hrspart = e(Math.abs(Math.floor(t.minstotal / 60))),
        t.minspart = e(Math.abs(Math.floor(t.minstotal % 60))),
        new Date(this.getTime() - 60 * t.minstotal * 1e3).toISOString().replace("Z", t.direction + t.hrspart + ":" + t.minspart))
    }
}
),
define("store", ["jquery", "enketo-js/extend"], function(t) {
    "use strict";
    function e() {
        try {
            return "localStorage" in window && null  !== window.localStorage
        } catch (t) {
            return !1
        }
    }
    function n() {
        var t = o("__writetest", "x", null , !0);
        return "success" === t ? (s("__writetest"),
        !0) : !1
    }
    function i() {
        return g
    }
    function o(t, e, n, i, o) {
        var r;
        if (!t || "string" != typeof t || t.length < 1)
            return "require";
        if (t = t.trim(),
        o = "string" == typeof o ? o.trim() : null ,
        i = "undefined" != typeof i && i === !0 ? !0 : !1,
        "string" == typeof e.data && d(t))
            return "forbidden";
        if ("string" == typeof e.data && o !== t && p(t) && i !== !0 || o === t && i !== !0)
            return "existing";
        try {
            return "string" == typeof e.data && (e.lastSaved = (new Date).getTime(),
            v.setItem("__counter", JSON.stringify({
                counter: f()
            }))),
            v.setItem(t, JSON.stringify(e)),
            null  !== o && "" !== o && o !== t && n && (console.log("going to remove old record with key:" + o),
            s(o)),
            "success"
        } catch (a) {
            return a && 22 === a.code ? "full (or browser is set to not allow storage)" : (console.log("error in store.setRecord:", a),
            r = a ? JSON.stringify(a) : "unknown",
            "error: " + r)
        }
    }
    function r(t) {
        var e;
        try {
            return e = JSON.parse(v.getItem(t))
        } catch (n) {
            return console.error("error with loading data from store: " + n.message),
            null 
        }
    }
    function s(e) {
        try {
            return v.removeItem(e),
            d(e) || t("form.or").trigger("delete", JSON.stringify(l())),
            !0
        } catch (n) {
            return console.log("error with removing data from store: " + n.message),
            !1
        }
    }
    function a(t) {
        return "undefined" == typeof t ? null  : r("__server_" + t)
    }
    function l() {
        var t = []
          , e = u(!1);
        return e.forEach(function(e) {
            t.push({
                key: e.key,
                draft: e.draft,
                lastSaved: e.lastSaved
            })
        }
        ),
        t.sort(function(t, e) {
            return t.lastSaved - e.lastSaved
        }
        ),
        t
    }
    function u(t, e) {
        var n, i, o = [], s = {};
        for (t = "undefined" != typeof t ? t : !1,
        e = e || null ,
        n = 0; n < v.length; n++)
            if (i = v.key(n),
            s = r(i),
            !d(i))
                try {
                    s.key = i,
                    i === e || t && s.draft || o.push(s)
                } catch (a) {
                    console.log("record found that was probably not in the expected JSON format (e.g. Firebug settings or corrupt record) (error: " + a.message + "), record was ignored")
                }
        return o
    }
    function c(t, e) {
        return t = "undefined" != typeof t ? t : !0,
        e = e || null ,
        u(t, e)
    }
    function h() {
        var t = "";
        return c(!1).forEach(function(e) {
            t += '<record name="' + e.key + '" lastSaved="' + e.lastSaved + '"' + (e.draft ? ' draft="true()"' : "") + ">" + e.data + "</record>"
        }
        ),
        t
    }
    function d(t) {
        var e;
        for (e = 0; e < g.length; e++)
            if (t === g[e])
                return !0;
        return !1
    }
    function p(t) {
        return v.getItem(t) ? !0 : !1
    }
    function f() {
        var t = r("__counter")
          , e = t && t.counter && m(t.counter) ? Number(t.counter) : 0
          , n = (e + 1).toString().pad(4);
        return n
    }
    function m(t) {
        return !isNaN(parseFloat(t)) && isFinite(t)
    }
    var g = ["__settings", "null", "__history", "Firebug", "undefined", "__bookmark", "__counter", "__current_server", "__loadLog", "__writetest", "__maxSize"]
      , v = {};
    return {
        isSupported: e,
        isWritable: n,
        getForbiddenKeys: i,
        getRecord: r,
        setRecord: o,
        removeRecord: s,
        getFormList: a,
        getRecordList: l,
        getExportStr: h,
        getSurveyRecords: u,
        getSurveyDataArr: c,
        getCounterValue: f
    }
}
),
define("connection", ["gui", "settings", "store", "jquery"], function(t, e, n, i) {
    "use strict";
    function o(t) {
        r(),
        t && h(),
        window.setInterval(function() {
            r()
        }
        , 15e3)
    }
    function r() {
        var t;
        L || i.ajax({
            type: "GET",
            url: D,
            cache: !1,
            dataType: "json",
            timeout: 3e3,
            complete: function(e) {
                t = "undefined" != typeof e.responseText && "connected" === e.responseText,
                s(t)
            }
        })
    }
    function s(t) {
        t !== P && (console.log("online status changed to: " + t + ", triggering window.onlinestatuschange"),
        i(window).trigger("onlinestatuschange", t)),
        P = t
    }
    function a() {
        L = null ,
        N = null ,
        y(),
        I = []
    }
    function l(t, e, n) {
        var o, r, s;
        return e = e || !1,
        n = n || null ,
        t.name && t.instanceID && t.formData && t.batches && "undefined" != typeof t.batchIndex ? (o = i.grep(I, function(e) {
            return t.instanceID === e.instanceID && t.batchIndex === e.batchIndex
        }
        ),
        r = i.grep(M.win, function(e) {
            return t.instanceID === e.instanceID && t.batchIndex === e.batchIndex
        }
        ),
        s = L === t.instanceID && N === t.batchIndex,
        0 !== o.length || 0 !== r.length || s ? o.forced = e : (t.forced = e,
        I.push(t),
        L || (y(),
        A = {},
        u(n))),
        !0) : (console.error("record name, instanceID, formData, batches and/or batchIndex was not defined!", t),
        !1)
    }
    function u(t) {
        var e, n, o;
        t = "undefined" != typeof t && t ? t : {
            complete: function(t, n) {
                i(document).trigger("submissioncomplete"),
                c(t.status, o = {
                    name: e.name,
                    instanceID: e.instanceID,
                    batches: e.batches,
                    batchIndex: e.batchIndex,
                    forced: e.forced
                }),
                u()
            },
            error: function(t, e) {
                "timeout" === e ? console.debug("submission request timed out") : console.error("error during submission, textStatus:", e)
            },
            success: function() {}
        },
        I.length > 0 && (e = I.shift(),
        k.update(e, "ongoing", ""),
        P === !1 ? c(0, e) : (L = e.instanceID,
        N = e.batchIndex,
        n = e.formData,
        n.append("Date", (new Date).toUTCString()),
        console.debug("prepared to send: ", n),
        s(null ),
        i(document).trigger("submissionstart"),
        i.ajax(S, {
            type: "POST",
            data: n,
            cache: !1,
            contentType: !1,
            processData: !1,
            timeout: 3e5,
            complete: function(e, n) {
                L = null ,
                N = null ,
                t.complete(e, n)
            },
            error: t.error,
            success: t.success
        })))
    }
    function c(n, o) {
        var r, l, u, c, h, d = !1, p = "", f = [], m = "error", g = "Contact " + e.supportEmail + " please.", v = "Contact the survey administrator please.", y = "Sorry, the data server for your form or the Enketo server is down. Please try again later or contact " + e.supportEmail + " please.", b = {
            0: {
                success: !1,
                msg: "undefined" != typeof jrDataStrToEdit ? "Failed (offline?). Please try again." : "Failed (offline?)."
            },
            200: {
                success: !1,
                msg: "Data server did not accept data. " + g
            },
            201: {
                success: !0,
                msg: "Done!"
            },
            202: {
                success: !0,
                msg: "Done! (duplicate)"
            },
            "2xx": {
                success: !1,
                msg: "Unknown error occurred when submitting data. " + g
            },
            400: {
                success: !1,
                msg: "Data server did not accept data. " + v
            },
            403: {
                success: !1,
                msg: "Not allowed to post data to this data server. " + v
            },
            404: {
                success: !1,
                msg: "Submission service on data server not found."
            },
            "4xx": {
                success: !1,
                msg: "Unknown submission problem on data server."
            },
            413: {
                success: !1,
                msg: "Data is too large. Please contact " + e.supportEmail + "."
            },
            500: {
                success: !1,
                msg: y
            },
            503: {
                success: !1,
                msg: y
            },
            "5xx": {
                success: !1,
                msg: y
            }
        };
        if (console.debug("submission results with status: " + n + " for ", o),
        h = o.batches > 1 ? " (batch #" + (o.batchIndex + 1) + " out of " + o.batches + ")" : "",
        o.batchText = h,
        "undefined" != typeof b[n])
            if (o.msg = b[n].msg,
            b[n].success === !0) {
                if (m = "success",
                o.batches > 1)
                    for ("undefined" == typeof A[o.instanceID] && (A[o.instanceID] = []),
                    A[o.instanceID].push(o.batchIndex),
                    r = 0; r < o.batches; r++)
                        -1 === i.inArray(r, A[o.instanceID]) && (d = !0);
                M.win.push(o)
            } else
                b[n].success === !1 && M.fail.push(o);
        else
            401 == n ? (o.msg = "Authentication Required.",
            a(),
            t.confirmLogin()) : n > 500 ? (console.error("Error during uploading, received unexpected statuscode: " + n),
            o.msg = b["5xx"].msg,
            M.fail.push(o)) : n > 400 ? (console.error("Error during uploading, received unexpected statuscode: " + n),
            o.msg = b["4xx"].msg,
            M.fail.push(o)) : n > 200 && (console.error("Error during uploading, received unexpected statuscode: " + n),
            o.msg = b["2xx"].msg,
            M.fail.push(o));
        if (k.update(o, m, o.msg),
        d || "success" !== m ? "success" === m && console.debug("not all batches for instanceID have been submitted, current queue:", I) : i(document).trigger("submissionsuccess", [o.name, o.instanceID]),
        !(I.length > 0)) {
            if (console.debug("online: " + P, M),
            M.win.length > 0) {
                for (r = 0; r < M.win.length; r++)
                    u = M.win[r].name,
                    -1 === i.inArray(u, f) && (f.push(u),
                    p = "undefined" != typeof M.win[r].msg ? p + M.win[r].msg + " " : "");
                l = f.length > 1 ? " were" : " was",
                c = f.join(", "),
                t.feedback(c.substring(0, c.length) + l + " successfully uploaded!"),
                s(!0)
            }
            if (M.fail.length > 0) {
                if (p = "",
                P !== !1) {
                    for (r = 0; r < M.fail.length; r++)
                        M.fail[r].forced && (p += M.fail[r].name + M.fail[r].batchText + ": " + M.fail[r].msg + "<br />");
                    p && t.alert(p, "Failed data submission")
                }
                0 === n && s(!1)
            }
        }
    }
    function h() {
        var t, e = n ? n.getRecord("__maxSize") : void 0, o = 5e6, r = 104857600;
        "undefined" == typeof E && (i.ajax("/data/max_size", {
            type: "GET",
            timeout: 5e3,
            success: function(e) {
                t = parseInt(e, 10) || defaultMax,
                isNaN(t) ? console.error("/data/max_size return a value that is not a number") : (E = t > r ? r : t,
                i(document).data({
                    maxSubmissionSize: E
                }),
                n && n.setRecord("__maxSize", E))
            },
            error: function(t) {
                console.error("/data/max_size returned an error", t)
            }
        }),
        E = e || o,
        i(document).data({
            maxSubmissionSize: E
        }))
    }
    function d() {
        return E
    }
    function p(t) {
        return /^(https?:\/\/)(([\da-z\.\-]+)\.([a-z\.]{2,6})(:[0-9]{2,4})?|(([0-9]{1,3}\.){3}[0-9]{1,3})(:[0-9]{2,4})?)([\/\w \.\-]*)*\/?[\/\w \.\-\=\&\?]*$/.test(t)
    }
    function f(t, e) {
        return e = x(e),
        p(t) ? void i.ajax("/forms/get_list", {
            type: "GET",
            data: {
                server_url: t
            },
            cache: !1,
            contentType: "json",
            timeout: 6e4,
            success: e.success,
            error: e.error,
            complete: e.complete
        }) : void e.error(null , "validationerror", "not a valid URL")
    }
    function m(t, e, n) {
        return n = x(n),
        t && p(t) ? e && 0 !== e.length ? void i.ajax({
            url: C,
            type: "POST",
            data: {
                server_url: t,
                form_id: e
            },
            cache: !1,
            timeout: 6e4,
            dataType: "json",
            success: n.success,
            error: n.error,
            complete: n.complete
        }) : void n.error(null , "validationerror", "not a valid formId") : void n.error(null , "validationerror", "not a valid server URL")
    }
    function g(t, e, n, o, r) {
        var s = new FormData;
        return r = x(r),
        t = t || null ,
        e = e || null ,
        o = o || null ,
        n = n || new Blob,
        0 !== n.size || t && e || o ? 0 !== n.size || p(t) || p(o) ? 0 !== n.size || o || e && 0 !== e.length ? (t && s.append("server_url", t),
        e && s.append("form_id", e),
        o && s.append("form_url", o),
        n && s.append("xml_file", n),
        console.debug("form file: ", n),
        void i.ajax("/transform/get_html_form", {
            type: "POST",
            cache: !1,
            contentType: !1,
            processData: !1,
            dataType: "xml",
            data: s,
            success: r.success,
            error: r.error,
            complete: r.complete
        })) : void r.error(null , "validationerror", "No form id provided") : void r.error(null , "validationerror", "Not a valid server or form url") : void r.error(null , "validationerror", "No form file or URLs provided")
    }
    function v(t, e) {
        var n = new FormData;
        e = x(e),
        n.append("level", "error"),
        n.append("content", t),
        i.ajax("/html5validate/", {
            type: "POST",
            data: n,
            contentType: !1,
            processData: !1,
            success: e.success,
            error: e.error,
            complete: e.complete
        })
    }
    function y() {
        M = {
            win: [],
            fail: []
        }
    }
    function b() {
        return M
    }
    function _() {
        return I
    }
    function w() {
        return L
    }
    function x(t) {
        return t = t || {},
        t.error = t.error || function(t, e, n) {
            console.error(e + " : " + n)
        }
        ,
        t.complete = t.complete || function() {}
        ,
        t.success = t.success || function() {
            console.log("success!")
        }
        ,
        t
    }
    var T, k, E, D = "/checkforconnection.php", S = "/data/submission", C = "/api_v1/survey", P = null , L = null , N = null , M = {
        win: [],
        fail: []
    }, A = {}, I = [];
    return k = {
        _getLi: function(t) {
            var e = i(".record-list").find('[name="' + t.name + '"]');
            return e
        },
        _reset: function(t) {
            var e = i(".record-list").find("li");
            e.first().attr("name") === t.name && e.removeClass("ongoing success error").filter(function() {
                return !i(this).hasClass("record")
            }
            ).remove()
        },
        _updateClass: function(t, e) {
            t.removeClass("ongoing error").addClass(e)
        },
        _updateProgressBar: function(t) {
            var e, n = I.length + M.win.length + M.fail.length, o = M.win.length + M.fail.length;
            n += "ongoing" == t ? 1 : 0,
            e = i(".upload-progress").attr({
                max: n,
                value: o
            }),
            o === n || 1 === n ? e.css("visibility", "hidden") : e.css("visibility", "visible")
        },
        _getMsg: function(t, e, n) {
            return t.batches > 1 && n ? "part " + (t.batchIndex + 1) + " of " + t.batches + ": " + n : "error" === e ? n : ""
        },
        update: function(t, e, n) {
            var o, r = this._getLi(t), s = this._getMsg(t, e, n);
            this._reset(t),
            s && (o = i('<li name="' + t.name + '" class="' + e + '">' + s + "</li>").insertAfter(r.last()),
            window.setTimeout(function() {
                o.hide(500)
            }
            , 3e3)),
            this._updateClass(r.first(), e),
            this._updateProgressBar(e),
            0 === I.length && "ongoing" !== e ? i("button.upload-records").removeAttr("disabled") : i("button.upload-records").attr("disabled", "disabled")
        }
    },
    T = {
        fragToServerURL: function(t, e) {
            var n, i = "";
            if (!e)
                return console.log("nothing to do"),
                null ;
            if (console.debug("frag: " + e),
            p(e))
                return e;
            switch (t) {
            case "http":
            case "https":
                n = /^http(|s):\/\//.test(e) ? "" : t + "://",
                i = n + e;
                break;
            case "formhub_uni":
            case "formhub":
                i = "https://formhub.org/" + e;
                break;
            case "appspot":
                i = "https://" + e + ".appspot.com"
            }
            return p(i) ? (console.log("server_url: " + i),
            i) : (console.error("not a valid url: " + i),
            null )
        }
    },
    {
        init: o,
        uploadRecords: l,
        getTransForm: g,
        getUploadQueue: _,
        getUploadOngoingID: w,
        validateHTML: v,
        getFormlist: f,
        isValidURL: p,
        getSurveyURL: m,
        getMaxSubmissionSize: d,
        oRosaHelper: T,
        _processOpenRosaResponse: c,
        _getUploadResult: b,
        _resetUploadResult: y,
        _setOnlineStatus: s
    }
}
),
define("cache", ["gui", "jquery", "connection"], function(t, e, n) {
    "use strict";
    function i() {
        return !!e("html").attr("manifest")
    }
    function o() {
        return f
    }
    function r() {
        var t;
        return d ? (t = window.applicationCache,
        console.log("starting appcache init:", t.status),
        t.status === t.UPDATEREADY && c(),
        t.status === t.OBSOLETE && a(),
        e(t).on("obsolete", function() {
            a()
        }
        ),
        e(t).on("cached", function() {
            l()
        }
        ),
        e(t).on("updateready", function() {
            t.status === t.UPDATEREADY && c()
        }
        ),
        e(t).on("error", function(t) {
            h(t)
        }
        ),
        e(t).on("noupdate", function() {
            u()
        }
        ),
        setInterval(function() {
            s()
        }
        , p),
        t.status === t.IDLE && s(),
        !0) : !1
    }
    function s() {
        window.applicationCache.update()
    }
    function a() {
        t.confirm({
            msg: "Refreshing the page may restore it.",
            heading: "Offline-disabled.",
            errorMsg: "Application/form is no longer able to launch offline. "
        }, {
            posButton: "Ok",
            negButton: "Refresh",
            posAction: function() {},
            negAction: function() {
                document.location.reload(!0)
            }
        }),
        t.updateStatus.offlineLaunch(!1)
    }
    function l() {
        t.updateStatus.offlineLaunch(!0)
    }
    function u() {
        t.updateStatus.offlineLaunch(!0)
    }
    function c() {
        applicationCache.swapCache(),
        t.updateStatus.offlineLaunch(!0),
        t.feedback("A new version of this application or form has been downloaded. <a href=" + document.location + ">Refresh</a> this page to load the updated version.", 20, "Updated!", {
            posButton: "Refresh",
            negButton: "Cancel",
            posAction: function() {
                document.location.reload(!0)
            }
        })
    }
    function h(e) {
        n.currentOnlineStatus === !0 && window.applicationCache.status !== window.applicationCache.IDLE && (console.error("HTML5 cache error event", e),
        t.updateStatus.offlineLaunch(!1),
        t.alert('There is a new version of this application or form available but an error occurs when trying to download it. Please try to refresh the page or send a bug report to <a href="mailto:' + settings.supportEmail + '">' + settings.supportEmail + "</a>."))
    }
    function d() {
        return window.applicationCache ? !0 : !1
    }
    var p = 36e5
      , f = r();
    return console.log("cache setup done"),
    {
        requested: i,
        activated: o
    }
}
),
function(t) {
    if ("function" == typeof bootstrap)
        bootstrap("promise", t);
    else if ("object" == typeof exports)
        module.exports = t();
    else if ("function" == typeof define && define.amd)
        define("q", t);
    else if ("undefined" != typeof ses) {
        if (!ses.ok())
            return;
        ses.makeQ = t
    } else
        Q = t()
}
(function() {
    "use strict";
    function t(t) {
        return function() {
            return Z.apply(t, arguments)
        }
    }
    function e(t) {
        return t === Object(t)
    }
    function n(t) {
        return "[object StopIteration]" === et(t) || t instanceof z
    }
    function i(t, e) {
        if (F && e.stack && "object" == typeof t && null  !== t && t.stack && -1 === t.stack.indexOf(nt)) {
            for (var n = [], i = e; i; i = i.source)
                i.stack && n.unshift(i.stack);
            n.unshift(t.stack);
            var r = n.join("\n" + nt + "\n");
            t.stack = o(r)
        }
    }
    function o(t) {
        for (var e = t.split("\n"), n = [], i = 0; i < e.length; ++i) {
            var o = e[i];
            a(o) || r(o) || !o || n.push(o)
        }
        return n.join("\n")
    }
    function r(t) {
        return -1 !== t.indexOf("(module.js:") || -1 !== t.indexOf("(node.js:")
    }
    function s(t) {
        var e = /at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);
        if (e)
            return [e[1], Number(e[2])];
        var n = /at ([^ ]+):(\d+):(?:\d+)$/.exec(t);
        if (n)
            return [n[1], Number(n[2])];
        var i = /.*@(.+):(\d+)$/.exec(t);
        return i ? [i[1], Number(i[2])] : void 0
    }
    function a(t) {
        var e = s(t);
        if (!e)
            return !1;
        var n = e[0]
          , i = e[1];
        return n === q && i >= V && st >= i
    }
    function l() {
        if (F)
            try {
                throw new Error
            } catch (t) {
                var e = t.stack.split("\n")
                  , n = e[0].indexOf("@") > 0 ? e[1] : e[2]
                  , i = s(n);
                if (!i)
                    return;
                return q = i[0],
                i[1]
            }
    }
    function u(t, e, n) {
        return function() {
            return "undefined" != typeof console && "function" == typeof console.warn && console.warn(e + " is deprecated, use " + n + " instead.", new Error("").stack),
            t.apply(t, arguments)
        }
    }
    function c(t) {
        return v(t) ? t : y(t) ? S(t) : D(t)
    }
    function h() {
        function t(t) {
            e = t,
            r.source = t,
            Y(n, function(e, n) {
                W(function() {
                    t.promiseDispatch.apply(t, n)
                }
                )
            }
            , void 0),
            n = void 0,
            i = void 0
        }
        var e, n = [], i = [], o = Q(h.prototype), r = Q(f.prototype);
        if (r.promiseDispatch = function(t, o, r) {
            var s = X(arguments);
            n ? (n.push(s),
            "when" === o && r[1] && i.push(r[1])) : W(function() {
                e.promiseDispatch.apply(e, s)
            }
            )
        }
        ,
        r.valueOf = function() {
            if (n)
                return r;
            var t = g(e);
            return v(t) && (e = t),
            t
        }
        ,
        r.inspect = function() {
            return e ? e.inspect() : {
                state: "pending"
            }
        }
        ,
        c.longStackSupport && F)
            try {
                throw new Error
            } catch (s) {
                r.stack = s.stack.substring(s.stack.indexOf("\n") + 1)
            }
        return o.promise = r,
        o.resolve = function(n) {
            e || t(c(n))
        }
        ,
        o.fulfill = function(n) {
            e || t(D(n))
        }
        ,
        o.reject = function(n) {
            e || t(E(n))
        }
        ,
        o.notify = function(t) {
            e || Y(i, function(e, n) {
                W(function() {
                    n(t)
                }
                )
            }
            , void 0)
        }
        ,
        o
    }
    function d(t) {
        if ("function" != typeof t)
            throw new TypeError("resolver must be a function.");
        var e = h();
        try {
            t(e.resolve, e.reject, e.notify)
        } catch (n) {
            e.reject(n)
        }
        return e.promise
    }
    function p(t) {
        return d(function(e, n) {
            for (var i = 0, o = t.length; o > i; i++)
                c(t[i]).then(e, n)
        }
        )
    }
    function f(t, e, n) {
        void 0 === e && (e = function(t) {
            return E(new Error("Promise does not support operation: " + t))
        }
        ),
        void 0 === n && (n = function() {
            return {
                state: "unknown"
            }
        }
        );
        var i = Q(f.prototype);
        if (i.promiseDispatch = function(n, o, r) {
            var s;
            try {
                s = t[o] ? t[o].apply(i, r) : e.call(i, o, r)
            } catch (a) {
                s = E(a)
            }
            n && n(s)
        }
        ,
        i.inspect = n,
        n) {
            var o = n();
            "rejected" === o.state && (i.exception = o.reason),
            i.valueOf = function() {
                var t = n();
                return "pending" === t.state || "rejected" === t.state ? i : t.value
            }
        }
        return i
    }
    function m(t, e, n, i) {
        return c(t).then(e, n, i)
    }
    function g(t) {
        if (v(t)) {
            var e = t.inspect();
            if ("fulfilled" === e.state)
                return e.value
        }
        return t
    }
    function v(t) {
        return e(t) && "function" == typeof t.promiseDispatch && "function" == typeof t.inspect
    }
    function y(t) {
        return e(t) && "function" == typeof t.then
    }
    function b(t) {
        return v(t) && "pending" === t.inspect().state
    }
    function _(t) {
        return !v(t) || "fulfilled" === t.inspect().state
    }
    function w(t) {
        return v(t) && "rejected" === t.inspect().state
    }
    function x() {
        it.length = 0,
        ot.length = 0,
        rt || (rt = !0)
    }
    function T(t, e) {
        rt && (ot.push(t),
        e && "undefined" != typeof e.stack ? it.push(e.stack) : it.push("(no stack) " + e))
    }
    function k(t) {
        if (rt) {
            var e = G(ot, t);
            -1 !== e && (ot.splice(e, 1),
            it.splice(e, 1))
        }
    }
    function E(t) {
        var e = f({
            when: function(e) {
                return e && k(this),
                e ? e(t) : this
            }
        }, function() {
            return this
        }
        , function() {
            return {
                state: "rejected",
                reason: t
            }
        }
        );
        return T(e, t),
        e
    }
    function D(t) {
        return f({
            when: function() {
                return t
            },
            get: function(e) {
                return t[e]
            },
            set: function(e, n) {
                t[e] = n
            },
            "delete": function(e) {
                delete t[e]
            },
            post: function(e, n) {
                return null  === e || void 0 === e ? t.apply(void 0, n) : t[e].apply(t, n)
            },
            apply: function(e, n) {
                return t.apply(e, n)
            },
            keys: function() {
                return tt(t)
            }
        }, void 0, function() {
            return {
                state: "fulfilled",
                value: t
            }
        }
        )
    }
    function S(t) {
        var e = h();
        return W(function() {
            try {
                t.then(e.resolve, e.reject, e.notify)
            } catch (n) {
                e.reject(n)
            }
        }
        ),
        e.promise
    }
    function C(t) {
        return f({
            isDef: function() {}
        }, function(e, n) {
            return I(t, e, n)
        }
        , function() {
            return c(t).inspect()
        }
        )
    }
    function P(t, e, n) {
        return c(t).spread(e, n)
    }
    function L(t) {
        return function() {
            function e(t, e) {
                var s;
                if ("undefined" == typeof StopIteration) {
                    try {
                        s = i[t](e)
                    } catch (a) {
                        return E(a)
                    }
                    return s.done ? s.value : m(s.value, o, r)
                }
                try {
                    s = i[t](e)
                } catch (a) {
                    return n(a) ? a.value : E(a)
                }
                return m(s, o, r)
            }
            var i = t.apply(this, arguments)
              , o = e.bind(e, "next")
              , r = e.bind(e, "throw");
            return o()
        }
    }
    function N(t) {
        c.done(c.async(t)())
    }
    function M(t) {
        throw new z(t)
    }
    function A(t) {
        return function() {
            return P([this, O(arguments)], function(e, n) {
                return t.apply(e, n)
            }
            )
        }
    }
    function I(t, e, n) {
        return c(t).dispatch(e, n)
    }
    function O(t) {
        return m(t, function(t) {
            var e = 0
              , n = h();
            return Y(t, function(i, o, r) {
                var s;
                v(o) && "fulfilled" === (s = o.inspect()).state ? t[r] = s.value : (++e,
                m(o, function(i) {
                    t[r] = i,
                    0 === --e && n.resolve(t)
                }
                , n.reject, function(t) {
                    n.notify({
                        index: r,
                        value: t
                    })
                }
                ))
            }
            , void 0),
            0 === e && n.resolve(t),
            n.promise
        }
        )
    }
    function R(t) {
        return m(t, function(t) {
            return t = J(t, c),
            m(O(J(t, function(t) {
                return m(t, H, H)
            }
            )), function() {
                return t
            }
            )
        }
        )
    }
    function U(t) {
        return c(t).allSettled()
    }
    function j(t, e) {
        return c(t).then(void 0, void 0, e)
    }
    function B(t, e) {
        return c(t).nodeify(e)
    }
    var F = !1;
    try {
        throw new Error
    } catch ($) {
        F = !!$.stack
    }
    var q, z, V = l(), H = function() {}
    , W = function() {
        function t() {
            for (; e.next; ) {
                e = e.next;
                var n = e.task;
                e.task = void 0;
                var o = e.domain;
                o && (e.domain = void 0,
                o.enter());
                try {
                    n()
                } catch (s) {
                    if (r)
                        throw o && o.exit(),
                        setTimeout(t, 0),
                        o && o.enter(),
                        s;
                    setTimeout(function() {
                        throw s
                    }
                    , 0)
                }
                o && o.exit()
            }
            i = !1
        }
        var e = {
            task: void 0,
            next: null 
        }
          , n = e
          , i = !1
          , o = void 0
          , r = !1;
        if (W = function(t) {
            n = n.next = {
                task: t,
                domain: r && process.domain,
                next: null 
            },
            i || (i = !0,
            o())
        }
        ,
        "undefined" != typeof process && process.nextTick)
            r = !0,
            o = function() {
                process.nextTick(t)
            }
            ;
        else if ("function" == typeof setImmediate)
            o = "undefined" != typeof window ? setImmediate.bind(window, t) : function() {
                setImmediate(t)
            }
            ;
        else if ("undefined" != typeof MessageChannel) {
            var s = new MessageChannel;
            s.port1.onmessage = function() {
                o = a,
                s.port1.onmessage = t,
                t()
            }
            ;
            var a = function() {
                s.port2.postMessage(0)
            }
            ;
            o = function() {
                setTimeout(t, 0),
                a()
            }
        } else
            o = function() {
                setTimeout(t, 0)
            }
            ;
        return W
    }
    (), Z = Function.call, X = t(Array.prototype.slice), Y = t(Array.prototype.reduce || function(t, e) {
        var n = 0
          , i = this.length;
        if (1 === arguments.length)
            for (; ; ) {
                if (n in this) {
                    e = this[n++];
                    break
                }
                if (++n >= i)
                    throw new TypeError
            }
        for (; i > n; n++)
            n in this && (e = t(e, this[n], n));
        return e
    }
    ), G = t(Array.prototype.indexOf || function(t) {
        for (var e = 0; e < this.length; e++)
            if (this[e] === t)
                return e;
        return -1
    }
    ), J = t(Array.prototype.map || function(t, e) {
        var n = this
          , i = [];
        return Y(n, function(o, r, s) {
            i.push(t.call(e, r, s, n))
        }
        , void 0),
        i
    }
    ), Q = Object.create || function(t) {
        function e() {}
        return e.prototype = t,
        new e
    }
    , K = t(Object.prototype.hasOwnProperty), tt = Object.keys || function(t) {
        var e = [];
        for (var n in t)
            K(t, n) && e.push(n);
        return e
    }
    , et = t(Object.prototype.toString);
    z = "undefined" != typeof ReturnValue ? ReturnValue : function(t) {
        this.value = t
    }
    ;
    var nt = "From previous event:";
    c.resolve = c,
    c.nextTick = W,
    c.longStackSupport = !1,
    c.defer = h,
    h.prototype.makeNodeResolver = function() {
        var t = this;
        return function(e, n) {
            e ? t.reject(e) : arguments.length > 2 ? t.resolve(X(arguments, 1)) : t.resolve(n)
        }
    }
    ,
    c.Promise = d,
    c.promise = d,
    d.race = p,
    d.all = O,
    d.reject = E,
    d.resolve = c,
    c.passByCopy = function(t) {
        return t
    }
    ,
    f.prototype.passByCopy = function() {
        return this
    }
    ,
    c.join = function(t, e) {
        return c(t).join(e)
    }
    ,
    f.prototype.join = function(t) {
        return c([this, t]).spread(function(t, e) {
            if (t === e)
                return t;
            throw new Error("Can't join: not the same: " + t + " " + e)
        }
        )
    }
    ,
    c.race = p,
    f.prototype.race = function() {
        return this.then(c.race)
    }
    ,
    c.makePromise = f,
    f.prototype.toString = function() {
        return "[object Promise]"
    }
    ,
    f.prototype.then = function(t, e, n) {
        function o(e) {
            try {
                return "function" == typeof t ? t(e) : e
            } catch (n) {
                return E(n)
            }
        }
        function r(t) {
            if ("function" == typeof e) {
                i(t, a);
                try {
                    return e(t)
                } catch (n) {
                    return E(n)
                }
            }
            return E(t)
        }
        function s(t) {
            return "function" == typeof n ? n(t) : t
        }
        var a = this
          , l = h()
          , u = !1;
        return W(function() {
            a.promiseDispatch(function(t) {
                u || (u = !0,
                l.resolve(o(t)))
            }
            , "when", [function(t) {
                u || (u = !0,
                l.resolve(r(t)))
            }
            ])
        }
        ),
        a.promiseDispatch(void 0, "when", [void 0, function(t) {
            var e, n = !1;
            try {
                e = s(t)
            } catch (i) {
                if (n = !0,
                !c.onerror)
                    throw i;
                c.onerror(i)
            }
            n || l.notify(e)
        }
        ]),
        l.promise
    }
    ,
    c.when = m,
    f.prototype.thenResolve = function(t) {
        return this.then(function() {
            return t
        }
        )
    }
    ,
    c.thenResolve = function(t, e) {
        return c(t).thenResolve(e)
    }
    ,
    f.prototype.thenReject = function(t) {
        return this.then(function() {
            throw t
        }
        )
    }
    ,
    c.thenReject = function(t, e) {
        return c(t).thenReject(e)
    }
    ,
    c.nearer = g,
    c.isPromise = v,
    c.isPromiseAlike = y,
    c.isPending = b,
    f.prototype.isPending = function() {
        return "pending" === this.inspect().state
    }
    ,
    c.isFulfilled = _,
    f.prototype.isFulfilled = function() {
        return "fulfilled" === this.inspect().state
    }
    ,
    c.isRejected = w,
    f.prototype.isRejected = function() {
        return "rejected" === this.inspect().state
    }
    ;
    var it = []
      , ot = []
      , rt = !0;
    c.resetUnhandledRejections = x,
    c.getUnhandledReasons = function() {
        return it.slice()
    }
    ,
    c.stopUnhandledRejectionTracking = function() {
        x(),
        rt = !1
    }
    ,
    x(),
    c.reject = E,
    c.fulfill = D,
    c.master = C,
    c.spread = P,
    f.prototype.spread = function(t, e) {
        return this.all().then(function(e) {
            return t.apply(void 0, e)
        }
        , e)
    }
    ,
    c.async = L,
    c.spawn = N,
    c["return"] = M,
    c.promised = A,
    c.dispatch = I,
    f.prototype.dispatch = function(t, e) {
        var n = this
          , i = h();
        return W(function() {
            n.promiseDispatch(i.resolve, t, e)
        }
        ),
        i.promise
    }
    ,
    c.get = function(t, e) {
        return c(t).dispatch("get", [e])
    }
    ,
    f.prototype.get = function(t) {
        return this.dispatch("get", [t])
    }
    ,
    c.set = function(t, e, n) {
        return c(t).dispatch("set", [e, n])
    }
    ,
    f.prototype.set = function(t, e) {
        return this.dispatch("set", [t, e])
    }
    ,
    c.del = c["delete"] = function(t, e) {
        return c(t).dispatch("delete", [e])
    }
    ,
    f.prototype.del = f.prototype["delete"] = function(t) {
        return this.dispatch("delete", [t])
    }
    ,
    c.mapply = c.post = function(t, e, n) {
        return c(t).dispatch("post", [e, n])
    }
    ,
    f.prototype.mapply = f.prototype.post = function(t, e) {
        return this.dispatch("post", [t, e])
    }
    ,
    c.send = c.mcall = c.invoke = function(t, e) {
        return c(t).dispatch("post", [e, X(arguments, 2)])
    }
    ,
    f.prototype.send = f.prototype.mcall = f.prototype.invoke = function(t) {
        return this.dispatch("post", [t, X(arguments, 1)])
    }
    ,
    c.fapply = function(t, e) {
        return c(t).dispatch("apply", [void 0, e])
    }
    ,
    f.prototype.fapply = function(t) {
        return this.dispatch("apply", [void 0, t])
    }
    ,
    c["try"] = c.fcall = function(t) {
        return c(t).dispatch("apply", [void 0, X(arguments, 1)])
    }
    ,
    f.prototype.fcall = function() {
        return this.dispatch("apply", [void 0, X(arguments)])
    }
    ,
    c.fbind = function(t) {
        var e = c(t)
          , n = X(arguments, 1);
        return function() {
            return e.dispatch("apply", [this, n.concat(X(arguments))])
        }
    }
    ,
    f.prototype.fbind = function() {
        var t = this
          , e = X(arguments);
        return function() {
            return t.dispatch("apply", [this, e.concat(X(arguments))])
        }
    }
    ,
    c.keys = function(t) {
        return c(t).dispatch("keys", [])
    }
    ,
    f.prototype.keys = function() {
        return this.dispatch("keys", [])
    }
    ,
    c.all = O,
    f.prototype.all = function() {
        return O(this)
    }
    ,
    c.allResolved = u(R, "allResolved", "allSettled"),
    f.prototype.allResolved = function() {
        return R(this)
    }
    ,
    c.allSettled = U,
    f.prototype.allSettled = function() {
        return this.then(function(t) {
            return O(J(t, function(t) {
                function e() {
                    return t.inspect()
                }
                return t = c(t),
                t.then(e, e)
            }
            ))
        }
        )
    }
    ,
    c.fail = c["catch"] = function(t, e) {
        return c(t).then(void 0, e)
    }
    ,
    f.prototype.fail = f.prototype["catch"] = function(t) {
        return this.then(void 0, t)
    }
    ,
    c.progress = j,
    f.prototype.progress = function(t) {
        return this.then(void 0, void 0, t)
    }
    ,
    c.fin = c["finally"] = function(t, e) {
        return c(t)["finally"](e)
    }
    ,
    f.prototype.fin = f.prototype["finally"] = function(t) {
        return t = c(t),
        this.then(function(e) {
            return t.fcall().then(function() {
                return e
            }
            )
        }
        , function(e) {
            return t.fcall().then(function() {
                throw e
            }
            )
        }
        )
    }
    ,
    c.done = function(t, e, n, i) {
        return c(t).done(e, n, i)
    }
    ,
    f.prototype.done = function(t, e, n) {
        var o = function(t) {
            W(function() {
                if (i(t, r),
                !c.onerror)
                    throw t;
                c.onerror(t)
            }
            )
        }
          , r = t || e || n ? this.then(t, e, n) : this;
        "object" == typeof process && process && process.domain && (o = process.domain.bind(o)),
        r.then(void 0, o)
    }
    ,
    c.timeout = function(t, e, n) {
        return c(t).timeout(e, n)
    }
    ,
    f.prototype.timeout = function(t, e) {
        var n = h()
          , i = setTimeout(function() {
            n.reject(new Error(e || "Timed out after " + t + " ms"))
        }
        , t);
        return this.then(function(t) {
            clearTimeout(i),
            n.resolve(t)
        }
        , function(t) {
            clearTimeout(i),
            n.reject(t)
        }
        , n.notify),
        n.promise
    }
    ,
    c.delay = function(t, e) {
        return void 0 === e && (e = t,
        t = void 0),
        c(t).delay(e)
    }
    ,
    f.prototype.delay = function(t) {
        return this.then(function(e) {
            var n = h();
            return setTimeout(function() {
                n.resolve(e)
            }
            , t),
            n.promise
        }
        )
    }
    ,
    c.nfapply = function(t, e) {
        return c(t).nfapply(e)
    }
    ,
    f.prototype.nfapply = function(t) {
        var e = h()
          , n = X(t);
        return n.push(e.makeNodeResolver()),
        this.fapply(n).fail(e.reject),
        e.promise
    }
    ,
    c.nfcall = function(t) {
        var e = X(arguments, 1);
        return c(t).nfapply(e)
    }
    ,
    f.prototype.nfcall = function() {
        var t = X(arguments)
          , e = h();
        return t.push(e.makeNodeResolver()),
        this.fapply(t).fail(e.reject),
        e.promise
    }
    ,
    c.nfbind = c.denodeify = function(t) {
        var e = X(arguments, 1);
        return function() {
            var n = e.concat(X(arguments))
              , i = h();
            return n.push(i.makeNodeResolver()),
            c(t).fapply(n).fail(i.reject),
            i.promise
        }
    }
    ,
    f.prototype.nfbind = f.prototype.denodeify = function() {
        var t = X(arguments);
        return t.unshift(this),
        c.denodeify.apply(void 0, t)
    }
    ,
    c.nbind = function(t, e) {
        var n = X(arguments, 2);
        return function() {
            function i() {
                return t.apply(e, arguments)
            }
            var o = n.concat(X(arguments))
              , r = h();
            return o.push(r.makeNodeResolver()),
            c(i).fapply(o).fail(r.reject),
            r.promise
        }
    }
    ,
    f.prototype.nbind = function() {
        var t = X(arguments, 0);
        return t.unshift(this),
        c.nbind.apply(void 0, t)
    }
    ,
    c.nmapply = c.npost = function(t, e, n) {
        return c(t).npost(e, n)
    }
    ,
    f.prototype.nmapply = f.prototype.npost = function(t, e) {
        var n = X(e || [])
          , i = h();
        return n.push(i.makeNodeResolver()),
        this.dispatch("post", [t, n]).fail(i.reject),
        i.promise
    }
    ,
    c.nsend = c.nmcall = c.ninvoke = function(t, e) {
        var n = X(arguments, 2)
          , i = h();
        return n.push(i.makeNodeResolver()),
        c(t).dispatch("post", [e, n]).fail(i.reject),
        i.promise
    }
    ,
    f.prototype.nsend = f.prototype.nmcall = f.prototype.ninvoke = function(t) {
        var e = X(arguments, 1)
          , n = h();
        return e.push(n.makeNodeResolver()),
        this.dispatch("post", [t, e]).fail(n.reject),
        n.promise
    }
    ,
    c.nodeify = B,
    f.prototype.nodeify = function(t) {
        return t ? void this.then(function(e) {
            W(function() {
                t(null , e)
            }
            )
        }
        , function(e) {
            W(function() {
                t(e)
            }
            )
        }
        ) : this
    }
    ;
    var st = l();
    return c
}
),
define("file-system", ["jquery"], function(t) {
    "use strict";
    var e, n, i, o, r, s, a, l, u, c, h, d, p, f, m, g, v, y, b, _, w, x, T, k, E, D, S = t.Deferred(), C = null , P = null , L = 104857600;
    return console.log("in file manager"),
    e = function() {
        return C
    }
    ,
    n = function() {
        return P
    }
    ,
    s = function() {
        return window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem,
        window.resolveLocalFileSystemURL = window.resolveLocalFileSystemURL || window.webkitResolveLocalFileSystemURL,
        i = "undefined" != typeof window.requestFileSystem && "undefined" != typeof window.resolveLocalFileSystemURL && "undefined" != typeof navigator.webkitPersistentStorage,
        console.log("supported: ", i),
        i ? (h(),
        D = E()) : (console.log("filesystem API not supported in this browser"),
        !1)
    }
    ,
    E = function() {
        return r ? S.resolve() : l(L, {
            success: function(t) {
                u(t, {
                    success: function(t) {
                        r = t,
                        S.resolve()
                    },
                    error: function(t) {
                        c(t)
                    }
                })
            },
            error: c
        }),
        S.promise()
    }
    ,
    a = function(t, e) {
        var n = e.success;
        return t && t.length > 0 ? (e.success = function(e) {
            w = t,
            n()
        }
        ,
        void D.done(function() {
            b(t, e)
        }
        )) : (console.error("directory name empty or missing"),
        !1)
    }
    ,
    o = function() {
        return i
    }
    ,
    T = function(t) {
        return t ? "/" + t + "/" : w ? "/" + w + "/" : "/"
    }
    ,
    l = function(e, n) {
        console.log("requesting persistent filesystem quota"),
        t(document).trigger("quotarequest", e),
        navigator.webkitPersistentStorage.requestQuota(e, n.success, n.error)
    }
    ,
    u = function(t, e) {
        console.log("quota for persistent storage granted in MegaBytes: " + t / 1048576),
        t > 0 ? (C = t,
        window.requestFileSystem(window.PERSISTENT, t, e.success, e.error)) : (console.error("User did not approve storage of local data using the File API"),
        e.error())
    }
    ,
    c = function(t) {
        var e = "";
        if ("undefined" != typeof t)
            switch (t.code) {
            case window.FileError.QUOTA_EXCEEDED_ERR:
                e = "QUOTA_EXCEEDED_ERR";
                break;
            case window.FileError.NOT_FOUND_ERR:
                e = "NOT_FOUND_ERR";
                break;
            case window.FileError.SECURITY_ERR:
                e = "SECURITY_ERR";
                break;
            case window.FileError.INVALID_MODIFICATION_ERR:
                e = "INVALID_MODIFICATION_ERR";
                break;
            case window.FileError.INVALID_STATE_ERR:
                e = "INVALID_STATE_ERR";
                break;
            default:
                e = "Unknown Error"
            }
        console.log("Error occurred: " + e),
        "undefined" != typeof console.trace && console.trace()
    }
    ,
    h = function() {
        "undefined" != typeof navigator.webkitPersistentStorage.queryUsageAndQuota ? navigator.webkitPersistentStorage.queryUsageAndQuota(function(t) {
            P = t
        }
        , c) : console.error("browser does not support queryUsageAndQuota")
    }
    ,
    p = function(t, e) {
        D.done(function() {
            console.log("saving file with url: ", T() + t.name),
            r.root.getFile(T() + t.name, {
                create: !0,
                exclusive: !1
            }, function(n) {
                n.createWriter(function(i) {
                    i.write(t),
                    i.onwriteend = function(t) {
                        t.total === t.loaded && (h(),
                        console.log("complete file stored, with persistent url:" + n.toURL()),
                        e.success(n.toURL()))
                    }
                    ,
                    i.onerror = function(n) {
                        var i, o = n.target.error;
                        o instanceof FileError && o.code === window.FileError.QUOTA_EXCEEDED_ERR ? (i = 5 * n.total < L ? C + L : C + 5 * n.total,
                        console.log("Required storage exceeding quota, going to request more, in bytes: " + i),
                        l(i, {
                            success: function(n) {
                                console.log("request for additional quota approved! (quota: " + n + " bytes)"),
                                C = n,
                                p(t, e)
                            },
                            error: e.error
                        })) : e.error(n)
                    }
                }
                , e.error)
            }
            , e.error)
        }
        )
    }
    ,
    f = function(t, e, n) {
        var i = T(t)
          , o = {
            success: function(t) {
                v(t, {
                    success: function(t) {
                        console.debug("retrieved file! ", t),
                        e.file = t,
                        n.success(e)
                    },
                    error: n.error
                })
            },
            error: n.error
        };
        g(i + e.fileName, {
            success: o.success,
            error: o.error
        })
    }
    ,
    m = function(t, e, n) {
        var i = T(t);
        g(i + e, {
            success: function(t) {
                n.success(t.toURL())
            },
            error: n.error
        })
    }
    ,
    g = function(t, e) {
        console.debug("retrieving fileEntry for: " + t),
        D.done(function() {
            r.root.getFile(t, {}, function(t) {
                console.log("fileEntry retrieved: ", t, "persistent URL: ", t.toURL()),
                e.success(t)
            }
            , function(n) {
                console.error("file with path: " + t + " not found", n),
                e.error(n)
            }
            )
        }
        )
    }
    ,
    v = function(t, e) {
        t.file(e.success, e.error)
    }
    ,
    y = function(t, e) {
        console.log("deleting file: " + t),
        e = e || {
            success: function() {},
            error: function() {}
        },
        D.done(function() {
            r.root.getFile(T() + t, {
                create: !1
            }, function(n) {
                n.remove(function() {
                    h(),
                    console.log(t + " removed from file system"),
                    e.success()
                }
                )
            }
            , function(t) {
                c(t),
                e.error()
            }
            )
        }
        )
    }
    ,
    b = function(t, e) {
        e = e || {
            success: function() {},
            error: function() {}
        },
        D.done(function() {
            r.root.getDirectory(t, {
                create: !0
            }, function(n) {
                h(),
                console.log("Directory: " + t + " created (or found)", n),
                e.success()
            }
            , function(n) {
                console.log("error during creation of directory", n);
                var i;
                n instanceof FileError && n.code === window.FileError.QUOTA_EXCEEDED_ERR ? (console.log("Required storage exceeding quota, going to request more."),
                i = 5 * n.total < L ? C + L : C + 5 * n.total,
                l(i, {
                    success: function(n) {
                        C = n,
                        b(t, e)
                    },
                    error: e.error
                })) : e.error(n)
            }
            )
        }
        )
    }
    ,
    _ = function(t, e) {
        e = e || {
            success: function() {},
            error: function() {}
        },
        console.log("going to delete filesystem directory: " + t),
        D.done(function() {
            console.log("fs is ready, going for it!"),
            r.root.getDirectory(t, {}, function(t) {
                t.removeRecursively(function() {
                    h(),
                    e.success()
                }
                , function(t) {
                    c(t),
                    e.error()
                }
                )
            }
            , c)
        }
        )
    }
    ,
    x = function(t) {
        t = t || function() {}
        ;
        var e = {
            entryFound: function(t) {
                t.isDirectory ? t.removeRecursively(function() {
                    h(),
                    console.log("Directory: " + t.name + " deleted")
                }
                , c) : t.remove(function() {
                    h(),
                    console.log("File: " + t.name + " deleted")
                }
                , c)
            },
            complete: t
        };
        D.done(function() {
            d(e)
        }
        )
    }
    ,
    k = function(t) {
        t = t || function() {}
        ;
        var e = []
          , n = {
            entryFound: function(t) {
                t.isDirectory ? e.push("folder: " + t.name) : e.push("file: " + t.name)
            },
            complete: function() {
                console.log("entries: ", e),
                t()
            }
        };
        d(n)
    }
    ,
    d = function(t) {
        var e, n = r.root.createReader(), i = function() {
            n.readEntries(function(n) {
                if (n.length) {
                    for (var o = 0; o < n.length; o++)
                        e = n[o],
                        t.entryFound(e);
                    i()
                } else
                    t.complete()
            }
            , c)
        }
        ;
        i()
    }
    ,
    s(),
    {
        init: s,
        isSupported: o,
        setDir: a,
        getCurrentQuota: e,
        getCurrentQuotaUsed: n,
        saveFile: p,
        retrieveFile: f,
        retrieveFileUrl: m,
        deleteFile: y,
        createDir: b,
        deleteDir: _,
        deleteAll: x,
        listAll: k
    }
}
),
define("file-manager", ["q", "file-system", "jquery"], function(t, e, n) {
    "use strict";
    function i() {
        var e = t.defer();
        return g ? m.then(function() {
            e.resolve(!0)
        }
        ) : e.reject(new Error("Filesystem API is not supported on this browser.")),
        e.promise
    }
    function o() {
        return g
    }
    function r() {
        return !0
    }
    function s(n) {
        var i, o, r = t.defer();
        return n ? "string" == typeof n ? e.retrieveFileUrl(d(), n, {
            success: r.resolve,
            error: r.reject
        }) : "object" == typeof n ? c(n) ? (i = new Error("File too large (max " + Math.round(100 * h() / 1048576) / 100 + " Mb)"),
        r.reject(i)) : (o = new FileReader,
        o.onload = function(t) {
            r.resolve(t.target.result)
        }
        ,
        o.onerror = function(t) {
            r.reject(i)
        }
        ,
        o.readAsDataURL(n)) : r.reject(new Error("Unknown error occurred")) : r.resolve(null ),
        r.promise
    }
    function a() {
        var e, i = (t.defer(),
        []);
        return n('form.or input[type="file"]').each(function() {
            e = this.files[0],
            e && i.push(e)
        }
        ),
        i
    }
    function l() {
        var n = t.defer()
          , i = 0
          , r = a();
        return 0 === r.length ? n.resolve(!0) : o() ? p(d()).then(function() {
            console.debug("going to save the files", r),
            r.forEach(function(t) {
                e.saveFile(t, {
                    success: function(t) {
                        return i++,
                        i === r.length ? n.resolve(t) : void 0
                    },
                    error: function(t) {
                        return i++,
                        i === r.length ? n.reject(t) : void 0
                    }
                })
            }
            )
        }
        ) : n.reject(new Error("Not supported.")),
        n.promise
    }
    function u(t) {
        t ? e.deleteDir(t) : e.deleteAll()
    }
    function c(t) {
        return t && t.size > h()
    }
    function h() {
        return f || (f = n(document).data("maxSubmissionSize") || 5242880),
        f
    }
    function d() {
        var t = n("form.or").data("instanceID");
        return t || console.error("Filemanager could not find instanceID. Files will not be saved correctly!"),
        t
    }
    function p(n) {
        var i = t.defer()
          , o = {
            success: function() {
                i.resolve(!0)
            },
            error: function() {
                i.reject(new Error("No permission given to store local data (or an error occurred)."))
            }
        };
        return e.setDir(n, o),
        i.promise
    }
    var f, m = e.init(), g = e.isSupported(), v = "Please use Chrome (all OS except iOS) or Puffin (iOS only).", y = e.retrieveFile;
    return {
        isSupported: o,
        notSupportedAdvisoryMsg: v,
        isWaitingForPermissions: r,
        init: i,
        getFileUrl: s,
        getCurrentFiles: a,
        getFile: y,
        saveCurrentFiles: l,
        flush: u
    }
}
),
XPathJS = function() {
    var t, e, n, i, o, r, s, a, l, u, c, h, d, p, f, m, g, y = [], b = "http://www.w3.org/XML/1998/namespace", _ = "http://www.w3.org/2000/xmlns/", x = "http://www.w3.org/1999/xhtml", T = function(t) {
        return t.ownerDocument
    }
    , k = function(t) {
        var e = []
          , n = function(t, e) {
            var n, i, o = [];
            for (i = 0; i < t.length; i++)
                n = t.item(i),
                !1 !== arrayIndexOf(n.nodeType, e) && o.push(n);
            return o
        }
        ;
        switch (t.nodeType) {
        case 1:
            e = n(t.childNodes, supportedChildNodeTypes = [1, 3, 4, 7, 8]);
            break;
        case 9:
            e = n(t.childNodes, supportedChildNodeTypes = [1, 7, 8]);
            break;
        case 2:
        case 3:
        case 4:
        case 7:
        case 8:
        case 13:
            break;
        default:
            throw new Error("Internal Error: nodeChildren - unsupported node type: " + t.nodeType)
        }
        return e
    }
    , E = function(t) {
        var e, n, i = [];
        for (e = k(t),
        n = 0; n < e.length; n++)
            i.push(e[n]),
            i.push.apply(i, E(e[n]));
        return i
    }
    , D = function(t) {
        var e;
        switch (t.nodeType) {
        case 1:
        case 3:
        case 4:
        case 7:
        case 8:
        case 9:
            return t.parentNode;
        case 2:
            return t.ownerElement ? t.ownerElement : e = nodeAttributeSearch(t.ownerDocument, !0, function(e, n) {
                return n === t ? !0 : void 0
            }
            );
        case 13:
            return t.ownerElement;
        default:
            throw new Error("Internal Error: nodeParent - node type not supported: " + t.type)
        }
    }
    , S = function(t) {
        for (var e, n = []; e = D(t); )
            n.push(e),
            t = e;
        return n
    }
    , C = function(t) {
        return L(t, "nextSibling")
    }
    , P = function(t) {
        return L(t, "previousSibling")
    }
    , L = function(t, e) {
        for (var n, i = []; n = t[e]; ) {
            switch (n.nodeType) {
            case 1:
            case 3:
            case 4:
            case 7:
            case 8:
            case 9:
                i.push(n)
            }
            t = n
        }
        return i
    }
    , N = function(t) {
        var e, n, i, o, r = [];
        for (e = S(t),
        e.unshift(t),
        n = 0; n < e.length; n++)
            for (i = C(e[n]),
            o = 0; o < i.length; o++)
                r.push(i[o]),
                r.push.apply(r, E(i[o]));
        return r
    }
    , M = function(t) {
        var e, n, i, o, r = [];
        for (e = S(t),
        e.unshift(t),
        n = 0; n < e.length; n++)
            for (i = P(e[n]),
            o = 0; o < i.length; o++)
                r.push.apply(r, E(i[o]).reverse()),
                r.push(i[o]);
        return r
    }
    , T = function(t) {
        switch (t.nodeType) {
        case 9:
            return t;
        default:
            return t.ownerDocument
        }
    }
    ;
    return nodeAttribute = function(t) {
        var e, n = [];
        if (1 === t.nodeType)
            for (e = 0; e < t.attributes.length; e++)
                t.attributes[e].specified && !1 === isNamespaceAttributeNode(t.attributes[e]) && n.push(t.attributes[e]);
        return n
    }
    ,
    nodeNamespace = function(t, e) {
        var n, i, o, r = e || [];
        if (1 === t.nodeType) {
            if (t.ownerDocument.documentElement === t && "object" == typeof t.ownerDocument.namespaces)
                for (n = t.ownerDocument.namespaces.length - 1; n >= 0; n--)
                    o = t.ownerDocument.namespaces.item(n),
                    insertNamespaceIfNotDeclared.call(this, r, o.name, o.urn, t);
            for (n = t.attributes.length - 1; n >= 0; n--)
                t.attributes[n].specified && !1 !== (i = isNamespaceAttributeNode(t.attributes[n])) && (1 !== i.length ? insertNamespaceIfNotDeclared.call(this, r, i[1], t.attributes[n].nodeValue, t) : insertNamespaceIfNotDeclared.call(this, r, "", t.attributes[n].nodeValue, t));
            if (nodeNamespace.call(this, t.parentNode, r),
            void 0 === e && (insertNamespaceIfNotDeclared.call(this, r, "xml", b, t),
            r[0] && "" === r[0].prefix && "" === r[0].namespaceURI && r.shift()),
            void 0 === e)
                for (n = 0; n < r.length; n++)
                    r[n].ownerElement !== t && (r[n] = createNamespaceNode(r[n].prefix, r[n].nodeValue, t))
        }
        return r
    }
    ,
    insertNamespaceIfNotDeclared = function(t, e, n, i) {
        var o, r;
        for (this.opts["case-sensitive"] || (e = e.toLowerCase()),
        o = 0; o < t.length; o++)
            if (t[o].prefix === e)
                return !1;
        return r = createNamespaceNode(e, n, i),
        "" === e && null  !== n ? t.unshift(r) : t.push(r),
        !0
    }
    ,
    isNamespaceAttributeNode = function(t) {
        var e = t.nodeName.split(":");
        return "xmlns" === e[0] ? e : !1
    }
    ,
    nodeIdAttribute = function(t, e) {
        var n, i, o, r, s, a;
        if (1 === t.nodeType)
            for (o = e ? [e] : nodeAttribute(t),
            r = nodeNamespace.call(this, t),
            n = 0; n < o.length; n++) {
                for (a = o[n].nodeName.split(":"),
                1 === a.length && (a[1] = a[0],
                a[0] = ""),
                s = null ,
                i = 0; i < r.length; i++)
                    if (r[i].prefix === a[0]) {
                        s = r[i].namespaceURI;
                        break
                    }
                if (null  === s && (s = ""),
                this.opts["unique-ids"][s] === a[1])
                    return o[n]
            }
        return null 
    }
    ,
    nodeAttributeSearch = function(t, e, n) {
        var i, o, r, s, a = [];
        for (r = t.getElementsByTagName("*"),
        i = 0; i < r.length; i++)
            if (s = r.item(i),
            1 == s.nodeType)
                for (o = 0; o < s.attributes.length; o++)
                    if (s.attributes[o].specified && n(s, s.attributes[o]) === !0) {
                        if (e)
                            return s;
                        a.push(s);
                        break
                    }
        return e ? null  : a
    }
    ,
    nodeExpandedName = function(t) {
        var e, n, i, o;
        switch (t.nodeType) {
        case 1:
            for ("undefined" != typeof t.scopeName ? o = {
                prefix: "HTML" == t.scopeName ? "" : t.scopeName,
                name: t.nodeName
            } : (e = t.nodeName.split(":"),
            o = 1 == e.length ? {
                prefix: "",
                name: e[0]
            } : {
                prefix: e[0],
                name: e[1]
            }),
            this.opts["case-sensitive"] || (o.prefix = o.prefix.toLowerCase(),
            o.name = o.name.toLowerCase()),
            n = nodeNamespace.call(this, t),
            i = 0; i < n.length; i++)
                if (n[i].prefix === o.prefix)
                    return o.ns = n[i].namespaceURI,
                    o;
            if ("" === o.prefix)
                return o.ns = null ,
                o;
            throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "' + o.prefix + '" on element: ' + t.nodeName);
        case 2:
            if (e = t.nodeName.split(":"),
            1 == e.length)
                return {
                    prefix: "",
                    ns: null ,
                    name: e[0]
                };
            for (o = {
                prefix: e[0],
                name: e[1]
            },
            this.opts["case-sensitive"] || (o.prefix = o.prefix.toLowerCase(),
            o.name = o.name.toLowerCase()),
            n = nodeNamespace.call(this, D(t)),
            i = 0; i < n.length; i++)
                if (n[i].prefix === o.prefix)
                    return o.ns = n[i].namespaceURI,
                    o;
            throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "' + o.prefix + '" on attribute: ' + t.nodeName);
        case 13:
            return {
                prefix: null ,
                ns: null ,
                name: this.opts["case-sensitive"] ? t.prefix.toLowerCase() : t.prefix
            };
        case 7:
            return {
                prefix: null ,
                ns: null ,
                name: this.opts["case-sensitive"] ? t.target.toLowerCase() : t.target
            };
        default:
            return !1
        }
    }
    ,
    nodeStringValue = function(t) {
        var e, n, i = "";
        switch (t.nodeType) {
        case 9:
        case 1:
            for (n = a(new c(t,1,1,{},{},{}), {
                type: "step",
                args: ["descendant", {
                    type: "nodeType",
                    args: ["text", []]
                }]
            }),
            n.sortDocumentOrder(),
            e = 0; e < n.value.length; e++)
                i += n.value[e].data;
            return i;
        case 2:
            return t.nodeValue;
        case 13:
            return t.namespaceURI;
        case 7:
        case 8:
        case 3:
        case 4:
            return t.data;
        default:
            throw new Error("Internal Error: nodeStringValue does not support node type: " + t.nodeType)
        }
    }
    ,
    createError = function(t, e, n) {
        var i = new Error(n);
        return i.name = e,
        i.code = t,
        i
    }
    ,
    arrayIndexOf = function(t, e) {
        for (var n = e.length; n--; )
            if (e[n] === t)
                return n;
        return !1
    }
    ,
    compareOperator = function(t, e, n, i) {
        var o, r, s, a, l;
        if (t instanceof m)
            if (e instanceof m) {
                for (a = e.stringValues(),
                s = t.stringValues(),
                o = 0; o < s.length; o++)
                    for (r = 0; r < a.length; r++)
                        if (l = compareOperator(s[o], a[r], n, i),
                        l.toBoolean())
                            return l
            } else if (e instanceof f) {
                for (s = t.stringValues(),
                o = 0; o < s.length; o++)
                    if (l = compareOperator(new f(s[o].toNumber()), e, n, i),
                    l.toBoolean())
                        return l
            } else if (e instanceof DateType || e instanceof p && e.isDateString()) {
                for (e instanceof p && (e = new DateType(e)),
                s = t.stringValues(),
                o = 0; o < s.length; o++)
                    if (l = compareOperator(new DateType(s[o].toDate()), e, n, i),
                    l.toBoolean())
                        return l
            } else {
                if (!(e instanceof p))
                    return compareOperator(new d(t.toBoolean()), e, n, i);
                for (s = t.stringValues(),
                o = 0; o < s.length; o++)
                    if (l = compareOperator(s[o], e, n, i),
                    l.toBoolean())
                        return l
            }
        else if (e instanceof m)
            if (t instanceof f) {
                for (a = e.stringValues(),
                o = 0; o < a.length; o++)
                    if (l = compareOperator(t, new f(a[o].toNumber()), n, i),
                    l.toBoolean())
                        return l
            } else if (t instanceof DateType || t instanceof p && t.isDateString()) {
                for (t instanceof p && (t = new DateType(t)),
                a = e.stringValues(),
                o = 0; o < a.length; o++)
                    if (l = compareOperator(t, new DateType(a[o].toDate()), n, i),
                    l.toBoolean())
                        return l
            } else {
                if (!(t instanceof p))
                    return compareOperator(t, new d(e.toBoolean()), n, i);
                for (a = e.stringValues(),
                o = 0; o < a.length; o++)
                    if (l = compareOperator(t, a[o], n, i),
                    l.toBoolean())
                        return l
            }
        else
            switch (n) {
            case "=":
            case "!=":
                return new d(t instanceof d || e instanceof d ? i(t.toBoolean(), e.toBoolean()) : t instanceof f || e instanceof f ? i(t.toNumber(), e.toNumber()) : i(t.toString(), e.toString()));
            default:
                return new d(i(t.toNumber(), e.toNumber()))
            }
        return new d(!1)
    }
    ,
    getComparableNode = function(t) {
        switch (t.nodeType) {
        case 2:
        case 3:
        case 4:
        case 7:
        case 8:
            return D(t);
        case 1:
        case 9:
            return t;
        case 13:
        default:
            throw new Error("Internal Error: getComparableNode - Node type not supported: " + t.nodeType)
        }
    }
    ,
    compareDocumentPosition = function(t, e) {
        var n, i, o;
        if (13 == t.nodeType && 13 == e.nodeType && t.ownerElement == e.ownerElement) {
            if (t === e)
                return 0;
            for (i = nodeNamespace.call(g, t.ownerElement),
            o = 0; o < i.length; o++) {
                if (i[o] === t) {
                    n = 4;
                    break
                }
                if (i[o] === e) {
                    n = 2;
                    break
                }
            }
        } else
            13 == t.nodeType && (t = t.ownerElement),
            13 == e.nodeType && (e = e.ownerElement),
            n = compareDocumentPositionNoNamespace(t, e);
        return n
    }
    ,
    compareDocumentPositionNoNamespace = function(t, e) {
        var n, i, o, r, s, a = function(t, e, n, i, o, r, s, a, l) {
            return 0 === o || (o & r) === r ? a + r : (o & s) === s ? l : o
        }
        ;
        if (t.compareDocumentPosition)
            return t.compareDocumentPosition(e);
        if (t === e)
            return 0;
        if (n = getComparableNode(t),
        i = getComparableNode(e),
        9 === n.nodeType)
            if (9 === i.nodeType) {
                if (n !== i)
                    return 1;
                o = 0
            } else {
                if (n !== i.ownerDocument)
                    return 1;
                o = 20
            }
        else if (9 === i.nodeType) {
            if (i !== n.ownerDocument)
                return 1;
            o = 10
        } else {
            if (n.ownerDocument !== i.ownerDocument)
                return 1;
            if (!n.contains || "undefined" == typeof n.sourceIndex || !i.contains || "undefined" == typeof i.sourceIndex)
                throw new Error('Cannot compare elements. Neither "compareDocumentPosition" nor "contains" available.');
            o = (n != i && n.contains(i) && 16) + (n != i && i.contains(n) && 8) + (n.sourceIndex >= 0 && i.sourceIndex >= 0 ? (n.sourceIndex < i.sourceIndex && 4) + (n.sourceIndex > i.sourceIndex && 2) : 1) + 0
        }
        if (t === n && e === i)
            return o;
        if (t === n)
            return a(t, n, e, i, o, 16, 8, 4, 2);
        if (e === i)
            return a(e, i, t, n, o, 8, 16, 2, 4);
        if (16 === (16 & o))
            return 4;
        if (8 === (8 & o))
            return 2;
        if (0 === o) {
            for (r = 0; r < n.attributes.length; r++)
                if (s = n.attributes[r],
                s.specified) {
                    if (s === e)
                        return 2;
                    if (s === t)
                        return 4
                }
            throw new Error("Internal Error: compareDocumentPosition failed to sort attributes.")
        }
        return o
    }
    ,
    nodeSupported = function(t) {
        if (!t)
            throw createError(9, "NOT_SUPPORTED_ERR", "Context node was not supplied.");
        if (9 != t.nodeType && 1 != t.nodeType && 2 != t.nodeType && 3 != t.nodeType && 4 != t.nodeType && 8 != t.nodeType && 7 != t.nodeType && 13 != t.nodeType)
            throw createError(9, "NOT_SUPPORTED_ERR", "The supplied node type is not supported. (nodeType: " + t.nodeType + ")");
        if (2 == t.nodeType && !t.specified)
            throw createError(9, "NOT_SUPPORTED_ERR", "The supplied node is a non-specified attribute node. Only specified attribute nodes are supported.")
    }
    ,
    createNamespaceNode = function(t, e, n) {
        var i, o;
        for (i = 0; i < y.length; i++)
            if (o = y[i],
            o.prefix === t && o.nodeValue === e && o.ownerElement === n)
                return o;
        return o = new r(t,e,n),
        y.push(o),
        o
    }
    ,
    h = function(t, e, n) {
        this.value = t,
        this.type = e,
        this.supports = n
    }
    ,
    h.prototype = {
        value: null ,
        type: null ,
        supports: [],
        toBoolean: function() {
            throw new Error('Unable to convert "' + this.type + '" to "boolean".')
        },
        toString: function() {
            throw new Error('Unable to convert "' + this.type + '" to "string".')
        },
        toNumber: function() {
            throw new Error('Unable to convert "' + this.type + '" to "number".')
        },
        toNodeSet: function() {
            throw new Error('Unable to convert "' + this.type + '" to "node-set".')
        },
        toDate: function() {
            throw new Error('Unable to convert "' + this.type + '" to "date".')
        },
        canConvertTo: function(t) {
            return !1 !== arrayIndexOf(t, this.supports)
        }
    },
    d = function(t) {
        h.call(this, t, "boolean", ["boolean", "string", "number", "date"])
    }
    ,
    d.prototype = new h,
    d.constructor = d,
    d.prototype.toBoolean = function() {
        return this.value
    }
    ,
    d.prototype.toString = function() {
        return this.value === !0 ? "true" : "false"
    }
    ,
    d.prototype.toNumber = function() {
        return this.value ? 1 : 0
    }
    ,
    d.prototype.toDate = function() {
        return null 
    }
    ,
    m = function(t, e) {
        h.call(this, t, "node-set", ["boolean", "string", "number", "node-set", "date"]),
        this.docOrder = e || "unsorted"
    }
    ,
    m.prototype = new h,
    m.constructor = m,
    m.prototype.toBoolean = function() {
        return this.value.length > 0 ? !0 : !1
    }
    ,
    m.prototype.toString = function() {
        return this.value.length < 1 ? "" : (this.sortDocumentOrder(),
        nodeStringValue(this.value[0]))
    }
    ,
    m.prototype.toNumber = function() {
        return new p(this.toString()).toNumber()
    }
    ,
    m.prototype.toNodeSet = function() {
        return this.value
    }
    ,
    m.prototype.toDate = function() {
        return new p(this.toString()).toDate()
    }
    ,
    m.prototype.sortDocumentOrder = function() {
        switch (this.docOrder) {
        case "document-order":
            break;
        case "reverse-document-order":
            this.value.reverse();
            break;
        default:
            this.value.sort(function(t, e) {
                var n = compareDocumentPosition(t, e);
                if (4 == (4 & n))
                    return -1;
                if (2 == (2 & n))
                    return 1;
                throw new Error("NodeSetType.sortDocumentOrder - unexpected compare result: " + n)
            }
            )
        }
        this.docOrder = "document-order"
    }
    ,
    m.prototype.sortReverseDocumentOrder = function() {
        switch (this.docOrder) {
        case "document-order":
            this.value.reverse();
            break;
        case "reverse-document-order":
            break;
        default:
            this.sortDocumentOrder(),
            this.value.reverse()
        }
        this.docOrder = "reverse-document-order"
    }
    ,
    m.prototype.append = function(t) {
        var e, n = 0, i = 0;
        if (!t instanceof m)
            throw new Error("NodeSetType can be passed into NodeSetType.append method");
        for (this.sortDocumentOrder(),
        t.sortDocumentOrder(); n < this.value.length && i < t.value.length; )
            if (e = compareDocumentPosition(this.value[n], t.value[i]),
            0 == e)
                i++;
            else if (4 == (4 & e))
                n++;
            else {
                if (2 != (2 & e))
                    throw new Error("Internal Error: NodeSetType.append - unable to sort nodes. (result: " + e + ")");
                this.value.splice(n, 0, t.value[i]),
                n++,
                i++
            }
        for (; i < t.value.length; i++)
            this.value.push(t.value[i]);
        this.docOrder = "document-order"
    }
    ,
    m.prototype.stringValues = function() {
        var t, e, n = [];
        for (t = 0; t < this.value.length; t++)
            e = new p(nodeStringValue(this.value[t])),
            e.isDateString() && (e = new DateType(e.value)),
            n.push(e);
        return n
    }
    ,
    p = function(t) {
        h.call(this, t, "string", ["boolean", "string", "number", "date"])
    }
    ,
    p.prototype = new h,
    p.constructor = p,
    p.prototype.toBoolean = function() {
        return this.value.length > 0 ? !0 : !1
    }
    ,
    p.prototype.toString = function() {
        return this.value
    }
    ,
    p.prototype.toNumber = function() {
        var t;
        return this.isDateString(this.value) ? new DateType(this.value).toNumber() : (t = this.value.match(/^[ \t\r\n]*(-?[0-9]+(?:[.][0-9]*)?)[ \t\r\n]*$/),
        null  !== t ? parseFloat(t[1]) : (t = this.value.match(/^[ \t\r\n]*(-?[.][0-9]+)[ \t\r\n]*$/),
        null  !== t ? parseFloat(t[1]) : Number.NaN))
    }
    ,
    p.prototype.toDate = function() {
        return new Date(this.value)
    }
    ,
    p.prototype.isDateString = function() {
        return isNaN(this.value) ? isNaN(Date.parse(this.value)) ? !1 : /('|")?[0-9]{4}(-|\/)[0-9]{2}(-|\/)[0-9]{2}('|")?/.test(this.value) ? (console.debug("found string value that passes check for datestringiness: " + this.value),
        !0) : !1 : !1
    }
    ,
    f = function(t) {
        h.call(this, t, "number", ["boolean", "string", "number", "date"])
    }
    ,
    f.prototype = new h,
    f.constructor = f,
    f.prototype.toBoolean = function() {
        return 0 === this.value || isNaN(this.value) ? !1 : !0
    }
    ,
    f.prototype.toString = function() {
        return this.value.toString()
    }
    ,
    f.prototype.toNumber = function() {
        return this.value
    }
    ,
    f.prototype.toDate = function() {
        return new Date(864e5 * this.value)
    }
    ,
    DateType = function(t) {
        h.call(this, t, "date", ["date", "string", "number", "boolean"])
    }
    ,
    DateType.prototype = new h,
    DateType.constructor = DateType,
    DateType.prototype.toDate = function() {
        return new Date(this.value)
    }
    ,
    DateType.prototype.toString = function() {
        return new Date(this.value).toUTCString()
    }
    ,
    DateType.prototype.toNumber = function() {
        return new Date(this.value).getTime() / 864e5
    }
    ,
    DateType.prototype.toBoolean = function() {
        return !isNaN(new Date(this.value).getTime())
    }
    ,
    t = function(e, n) {
        var i;
        switch (this.code = e,
        this.code) {
        case t.INVALID_EXPRESSION_ERR:
            this.name = "INVALID_EXPRESSION_ERR";
            break;
        case t.TYPE_ERR:
            this.name = "TYPE_ERR";
            break;
        default:
            throw i = new Error("Unsupported XPathException code: " + this.code),
            i.name = "XPathExceptionInternalError",
            i
        }
        this.message = n || ""
    }
    ,
    t.prototype.toString = function() {
        return 'XPathException: "' + this.message + '", code: "' + this.code + '", name: "' + this.name + '"'
    }
    ,
    t.INVALID_EXPRESSION_ERR = 51,
    t.TYPE_ERR = 52,
    e = function(t) {
        var e, n, i;
        for (e in t) {
            i = !1;
            for (n in this.opts)
                if (e === n) {
                    this.opts[e] = t[e],
                    i = !0;
                    break
                }
            if (!i)
                throw new Error("Unsupported option: " + e)
        }
        this.opts["unique-ids"][b] = "id",
        this.opts["unique-ids"][x] = "id"
    }
    ,
    e.prototype = {
        opts: {
            "unique-ids": {},
            "case-sensitive": !1
        },
        createExpression: function(e, i) {
            var o, r, s, a, l = {};
            try {
                o = XPathJS._parser.parse(e)
            } catch (u) {
                throw r = "The expression is not a legal expression.",
                r += u instanceof XPathJS._parser.SyntaxError ? " (line: " + u.line + ", character: " + u.column + ")" : " (" + u.message + ")",
                new t(t.INVALID_EXPRESSION_ERR,r)
            }
            if (o.nsPrefixes.length > 0) {
                if ("object" != typeof i || "undefined" == typeof i.lookupNamespaceURI)
                    throw new t(t.INVALID_EXPRESSION_ERR,"No namespace resolver provided or lookupNamespaceURI function not supported.");
                for (s = 0; s < o.nsPrefixes.length; s++)
                    if (a = o.nsPrefixes[s],
                    l[a] = i.lookupNamespaceURI(a),
                    null  === l[a])
                        throw createError(14, "NAMESPACE_ERR", 'Undefined namespace prefix "' + a + '" in the context of the given resolver.')
            }
            return new n(o,l,this.opts)
        },
        createNSResolver: function(t) {
            return new i(t)
        },
        evaluate: function(t, e, n, i, o) {
            var t = this.createExpression(t, n);
            return t.evaluate(e, i, o)
        }
    },
    n = function(t, e, n) {
        this.parsedExpression = t,
        this.namespaceMapping = e,
        this.opts = n || {}
    }
    ,
    n.prototype = {
        parsedExpression: null ,
        namespaceMapping: null ,
        opts: {},
        evaluate: function(t, e, n) {
            var i;
            return g = this,
            nodeSupported(t),
            i = new c(t,1,1,{},u,this.namespaceMapping,this.opts),
            o.factory(i, e, a(i, this.parsedExpression.tree))
        }
    },
    c = function(t, e, n, i, o, r, s) {
        this.node = t,
        this.pos = e,
        this.size = n,
        this.vars = i,
        this.fns = o,
        this.nsMap = r,
        this.opts = s || {}
    }
    ,
    c.prototype = {
        node: null ,
        pos: null ,
        size: null ,
        vars: null ,
        fns: null ,
        nsMap: null ,
        opts: null ,
        clone: function(t, e, n) {
            return new c(t || this.node,"undefined" != typeof e ? e : this.pos,"undefined" != typeof n ? n : this.size,this.vars,this.fns,this.nsMap,this.opts)
        }
    },
    i = function(t) {
        nodeSupported(t),
        this.node = t
    }
    ,
    i.prototype = {
        node: null ,
        lookupNamespaceURI: function(t) {
            var e, n, i, o = this.node;
            switch (t) {
            case "xml":
                return b;
            case "xmlns":
                return _;
            default:
                switch (this.node.nodeType) {
                case 9:
                    o = o.documentElement;
                    break;
                case 1:
                    break;
                default:
                    o = D(o)
                }
                if (null  != o && 1 == o.nodeType) {
                    if ("" == t) {
                        if (n = o.getAttribute("xmlns"),
                        null  !== n)
                            return n
                    } else if (o.ownerDocument.documentElement === o && "object" == typeof o.ownerDocument.namespaces) {
                        for (e = 0; e < o.ownerDocument.namespaces.length; e++)
                            if (n = o.ownerDocument.namespaces.item(e),
                            n.name == t)
                                return n.urn
                    } else
                        for (e = 0; e < o.attributes.length; e++)
                            if (o.attributes[e].specified && "xmlns:" + t == o.attributes[e].nodeName)
                                return o.attributes[e].nodeValue;
                    if (o.ownerDocument.documentElement !== o && o.parentNode)
                        return i = this.node,
                        this.node = o.parentNode,
                        n = this.lookupNamespaceURI(t),
                        this.node = i,
                        n
                }
                return null 
            }
        }
    },
    l = {
        "/": function(t, e) {
            var n, i, o, r, s;
            if (null  === t)
                i = new m([T(this.node)],"document-order");
            else if (i = a(this, t),
            !i instanceof m)
                throw new Error("Left side of path separator (/) must be of node-set type. (type: " + i.type + ")");
            if (null  === e)
                r = i;
            else
                for (r = new m([],"document-order"),
                n = 0; n < i.value.length; n++) {
                    if (s = this.clone(i.value[n]),
                    o = a(s, e),
                    !o instanceof m)
                        throw new Error("Right side of path separator (/) must be of node-set type. (type: " + o.type + ")");
                    r.append(o)
                }
            return r
        },
        step: function(t, e) {
            var n, i, o, r, s, l, u;
            switch (t) {
            case "child":
                n = new m(k(this.node),"document-order");
                break;
            case "descendant":
                n = new m(E(this.node),"document-order");
                break;
            case "parent":
                o = D(this.node),
                n = new m(o ? [o] : [],"document-order");
                break;
            case "ancestor":
                n = new m(S(this.node),"reverse-document-order");
                break;
            case "following-sibling":
                n = new m(C(this.node),"document-order");
                break;
            case "preceding-sibling":
                n = new m(P(this.node),"reverse-document-order");
                break;
            case "following":
                n = new m(N(this.node),"document-order");
                break;
            case "preceding":
                n = new m(M(this.node),"reverse-document-order");
                break;
            case "attribute":
                n = new m(nodeAttribute(this.node),"document-order");
                break;
            case "namespace":
                n = new m(nodeNamespace.call(this, this.node),"document-order");
                break;
            case "self":
                n = new m([this.node],"document-order");
                break;
            case "descendant-or-self":
                r = E(this.node),
                r.unshift(this.node),
                n = new m(r,"document-order");
                break;
            case "ancestor-or-self":
                r = S(this.node),
                r.unshift(this.node),
                n = new m(r,"reverse-document-order");
                break;
            default:
                throw new Error("Axis type not supported: " + t)
            }
            switch (e.type) {
            case "nodeType":
                if ("node" == e.args[0])
                    break;
                for (i = n.value.length - 1; i >= 0; i--)
                    switch (e.args[0]) {
                    case "text":
                        3 != n.value[i].nodeType && 4 != n.value[i].nodeType && n.value.splice(i, 1);
                        break;
                    case "comment":
                        8 != n.value[i].nodeType && n.value.splice(i, 1);
                        break;
                    case "processing-instruction":
                        (7 != n.value[i].nodeType || e.args[1].length > 0 && a(this, e.args[1][0]) != n.value[i].nodeName) && n.value.splice(i, 1)
                    }
                break;
            case "name":
                switch (s = a(this, e),
                t) {
                case "attribute":
                    l = 2;
                    break;
                case "namespace":
                    l = 13;
                    break;
                default:
                    l = 1
                }
                for (i = n.value.length - 1; i >= 0; i--)
                    n.value[i].nodeType == l ? (null  !== s.ns || null  !== s.name) && (u = nodeExpandedName.call(this, n.value[i]),
                    u !== !1 && u.ns === s.ns ? null  !== s.name && u.name.toLowerCase() != s.name.toLowerCase() && n.value.splice(i, 1) : n.value.splice(i, 1)) : n.value.splice(i, 1);
                break;
            default:
                throw new Error("NodeTest type not supported in step: " + e.type)
            }
            return n
        },
        predicate: function(t, e, n) {
            var i, o, r, s, l, u;
            if (i = a(this, e),
            !i instanceof m)
                throw new Error('Expected "node-set", got: ' + i.type);
            switch (t) {
            case "ancestor":
            case "ancestor-or-self":
            case "preceding":
            case "preceding-sibling":
                i.sortReverseDocumentOrder();
                break;
            default:
                i.sortDocumentOrder()
            }
            for (s = 0; s < n.length; s++)
                for (o = 0,
                l = 1,
                u = i.value.length; o < i.value.length; l++) {
                    if (r = a(this.clone(i.value[o], l, u), n[s]),
                    r instanceof f) {
                        if (r.value != l) {
                            i.value.splice(o, 1);
                            continue
                        }
                    } else if (!r.toBoolean()) {
                        i.value.splice(o, 1);
                        continue
                    }
                    o++
                }
            return i
        },
        "function": function(t, e) {
            var n, i, o, r, s = [], l = function(t) {
                return (null  !== t.ns ? "{" + t.ns + "}" : "{}") + t.name
            }
            , u = function(t) {
                var e, n, i = [];
                for (e = 0; e < t.length; e++)
                    n = void 0 === t[e].t ? "object" : t[e].t,
                    t[e].r !== !1 ? t[e].rep === !0 && (n += "+") : n += t[e].rep === !0 ? "*" : "?",
                    i.push(n);
                return "(" + i.join(", ") + ")"
            }
            , c = 0, d = [];
            if (n = a(this, t),
            null  === n.ns && (n.ns = ""),
            !this.fns[n.ns] || !this.fns[n.ns][n.name])
                throw new Error('Function "' + l(n) + '" does not exist.');
            for (i = this.fns[n.ns][n.name],
            i.args || (i.args = []),
            o = 0,
            c = 0; o < i.args.length; c++,
            o++) {
                if (void 0 === e[c]) {
                    if (i.args[o].r !== !1)
                        throw new Error('Function "' + l(n) + '" expects ' + u(i.args) + ".")
                } else
                    d.push(void 0 === i.args[o].t ? "object" : i.args[o].t);
                if (i.args[o].rep === !0) {
                    for (; c < e.length; c++)
                        d.push(void 0 === i.args[o].t ? "object" : i.args[o].t);
                    break
                }
            }
            if (d.length < e.length)
                throw new Error('Function "' + l(n) + '" expects ' + u(i.args) + ".");
            for (o = 0; o < e.length; o++) {
                if (r = a(this, e[o]),
                "object" !== d[o] && !r.canConvertTo(d[o]))
                    throw new Error('Function "' + l(n) + '" expects ' + u(i.args) + '.Cannot convert "' + r.type + '" to "' + d[o] + '".');
                s.push(r)
            }
            if (result = i.fn.apply(this, s),
            !result instanceof h)
                throw new Error('Function "' + l(n) + '" did not return a value that inherits from BaseType.');
            if ("object" !== i.ret && !result.canConvertTo(i.ret))
                throw new Error('Function "' + l(n) + '" return "' + result.type + '" type that cannot be converted to "' + i.ret + '".');
            return result
        },
        "|": function(t, e) {
            if (t = a(this, t),
            e = a(this, e),
            "undefined" == typeof t || "undefined" == typeof e || !t instanceof m || !e instanceof m)
                throw new Error('Unable to perform union on non-"node-set" types.');
            return t.append(e),
            t
        },
        or: function(t, e) {
            return new d(a(this, t).toBoolean() ? !0 : a(this, e).toBoolean())
        },
        and: function(t, e) {
            return new d(a(this, t).toBoolean() ? a(this, e).toBoolean() : !1)
        },
        "=": function(t, e) {
            return compareOperator.call(this, a(this, t), a(this, e), "=", function(t, e) {
                return t == e
            }
            )
        },
        "!=": function(t, e) {
            return compareOperator.call(this, a(this, t), a(this, e), "!=", function(t, e) {
                return t != e
            }
            )
        },
        "<=": function(t, e) {
            return compareOperator.call(this, a(this, t), a(this, e), "<=", function(t, e) {
                return e >= t
            }
            )
        },
        "<": function(t, e) {
            return compareOperator.call(this, a(this, t), a(this, e), "<", function(t, e) {
                return e > t
            }
            )
        },
        ">=": function(t, e) {
            return compareOperator.call(this, a(this, t), a(this, e), ">=", function(t, e) {
                return t >= e
            }
            )
        },
        ">": function(t, e) {
            return compareOperator.call(this, a(this, t), a(this, e), ">", function(t, e) {
                return t > e
            }
            )
        },
        "+": function(t, e) {
            return new f(a(this, t).toNumber() + a(this, e).toNumber())
        },
        "-": function(t, e) {
            return new f(a(this, t).toNumber() - a(this, e).toNumber())
        },
        div: function(t, e) {
            return new f(a(this, t).toNumber() / a(this, e).toNumber())
        },
        mod: function(t, e) {
            return new f(a(this, t).toNumber() % a(this, e).toNumber())
        },
        "*": function(t, e) {
            return new f(a(this, t).toNumber() * a(this, e).toNumber())
        },
        string: function(t) {
            return new p(t)
        },
        number: function(t) {
            return new f(t)
        },
        $: function(t) {
            throw new Error("TODO: Not implemented.16")
        },
        name: function(t, e) {
            var n = null ;
            if (null  !== t && (n = this.nsMap[t],
            !n))
                throw new Error('Namespace prefix "' + t + '" is not mapped to a namespace.');
            return {
                ns: n,
                name: e
            }
        }
    },
    u = {
        "": {
            last: {
                fn: function() {
                    return new f(this.size)
                },
                ret: "number"
            },
            count: {
                fn: function(t) {
                    return new f(t.toNodeSet().length)
                },
                args: [{
                    t: "node-set"
                }],
                ret: "number"
            },
            id: {
                fn: function(t) {
                    var e, n, i, o = this, r = [], s = [], a = function(t) {
                        var e, n = t.split(/[\u0020\u0009\u000D\u000A]+/);
                        for (e = n.length - 1; e >= 0; e--)
                            0 == n[e].length && n.splice(e, 1);
                        return n
                    }
                    ;
                    if (t instanceof m)
                        for (e = 0; e < t.value.length; e++)
                            r.push.apply(r, a(nodeStringValue(t.value[e])));
                    else
                        t = t.toString(),
                        r = a(t);
                    for (e = r.length - 1; e >= 0; e--)
                        for (n = e - 1; n >= 0; n--)
                            if (r[e] == r[n] && e != n) {
                                r.splice(e, 1);
                                break
                            }
                    for (e = 0; e < r.length; e++)
                        i = T(this.node).getElementById(r[e]),
                        i && nodeIdAttribute.call(this, i) ? s.push(i) : nodeAttributeSearch(T(this.node), !0, function(t, n) {
                            var i = nodeIdAttribute.call(o, t, n);
                            return i && i.nodeValue == r[e] ? (s.push(t),
                            !0) : void 0
                        }
                        );
                    return new m(s)
                },
                args: [{}],
                ret: "node-set"
            },
            "local-name": {
                fn: function(t) {
                    var e, n = "";
                    return 0 == arguments.length && (t = new m([this.node])),
                    t.toNodeSet().length > 0 && (t.sortDocumentOrder(),
                    e = nodeExpandedName.call(this, t.value[0]),
                    e !== !1 && (n = e.name)),
                    new p(n)
                },
                args: [{
                    t: "node-set",
                    r: !1
                }],
                ret: "string"
            },
            "namespace-uri": {
                fn: function(t) {
                    var e, n = "";
                    return 0 == arguments.length && (t = new m([this.node])),
                    t.toNodeSet().length > 0 && (t.sortDocumentOrder(),
                    e = nodeExpandedName.call(this, t.value[0]),
                    e !== !1 && null  !== e.ns && (n = e.ns)),
                    new p(n)
                },
                args: [{
                    t: "node-set",
                    r: !1
                }],
                ret: "string"
            },
            name: {
                fn: function(t) {
                    var e, n = "";
                    return 0 == arguments.length && (t = new m([this.node])),
                    t.toNodeSet().length > 0 && (t.sortDocumentOrder(),
                    e = nodeExpandedName.call(this, t.value[0]),
                    e !== !1 && (n = e.prefix && e.prefix.length > 0 ? e.prefix + ":" + e.name : e.name)),
                    new p(n)
                },
                args: [{
                    t: "node-set",
                    r: !1
                }],
                ret: "string"
            },
            string: {
                fn: function(t) {
                    return 0 == arguments.length && (t = new m([this.node],"document-order")),
                    new p(t.toString())
                },
                args: [{
                    t: "object",
                    r: !1
                }],
                ret: "string"
            },
            "starts-with": {
                fn: function(t, e) {
                    return new d(t.toString().substr(0, (e = e.toString()).length) == e)
                },
                args: [{
                    t: "string"
                }, {
                    t: "string"
                }],
                ret: "string"
            },
            contains: {
                fn: function(t, e) {
                    return new d(-1 != t.toString().indexOf(e = e.toString()))
                },
                args: [{
                    t: "string"
                }, {
                    t: "string"
                }],
                ret: "string"
            },
            "substring-before": {
                fn: function(t, e) {
                    return t = t.toString(),
                    e = t.indexOf(e.toString()),
                    new p(-1 == e ? "" : t.substr(0, e))
                },
                args: [{
                    t: "string"
                }, {
                    t: "string"
                }],
                ret: "string"
            },
            "substring-after": {
                fn: function(t, e) {
                    var n;
                    return t = t.toString(),
                    e = e.toString(),
                    n = t.indexOf(e),
                    new p(-1 == n ? "" : t.substr(n + e.length))
                },
                args: [{
                    t: "string"
                }, {
                    t: "string"
                }],
                ret: "string"
            },
            substring: {
                fn: function(t, e, n) {
                    return t = t.toString(),
                    e = Math.round(e.toNumber()) - 1,
                    new p(isNaN(e) ? "" : 2 == arguments.length ? t.substring(0 > e ? 0 : e) : t.substring(0 > e ? 0 : e, e + Math.round(n.toNumber())))
                },
                args: [{
                    t: "string"
                }, {
                    t: "number"
                }, {
                    t: "number",
                    r: !1
                }],
                ret: "string"
            },
            "string-length": {
                fn: function(t) {
                    return t = 0 == arguments.length ? nodeStringValue(this.node) : t.toString(),
                    new f(t.length)
                },
                args: [{
                    t: "string",
                    r: !1
                }],
                ret: "number"
            },
            "normalize-space": {
                fn: function(t) {
                    return t = 0 == arguments.length ? nodeStringValue(this.node) : t.toString(),
                    new p(t.replace(/^[\u0020\u0009\u000D\u000A]+/, "").replace(/[\u0020\u0009\u000D\u000A]+$/, "").replace(/[\u0020\u0009\u000D\u000A]+/g, " "))
                },
                args: [{
                    t: "string",
                    r: !1
                }],
                ret: "string"
            },
            translate: {
                fn: function(t, e, n) {
                    var i, o, r, s = "";
                    for (t = t.toString(),
                    e = e.toString(),
                    n = n.toString(),
                    i = 0; i < t.length; i++)
                        (-1 == (o = e.indexOf(r = t.charAt(i))) || (r = n.charAt(o))) && (s += r);
                    return new p(s)
                },
                args: [{
                    t: "string"
                }, {
                    t: "string"
                }, {
                    t: "string"
                }],
                ret: "string"
            },
            "boolean": {
                fn: function(t) {
                    return new d(t.toBoolean())
                },
                args: [{
                    r: !0
                }],
                ret: "boolean"
            },
            not: {
                fn: function(t) {
                    return new d(!t.toBoolean())
                },
                args: [{
                    t: "boolean"
                }],
                ret: "boolean"
            },
            "true": {
                fn: function() {
                    return new d(!0)
                },
                ret: "boolean"
            },
            "false": {
                fn: function() {
                    return new d(!1)
                },
                ret: "boolean"
            },
            lang: {
                fn: function(t) {
                    for (var e, n, i, o, r, s, a, l = this.node, u = t.toString().toLowerCase().split("-"); 9 != l.nodeType; l = D(l))
                        for (e = nodeAttribute(l),
                        r = 0; r < e.length; r++)
                            if (n = e[r].nodeName.split(":"),
                            1 === n.length && (n[1] = n[0],
                            n[0] = ""),
                            "lang" == n[1]) {
                                if (i = e[r].nodeValue.toLowerCase().split("-"),
                                i.length < u.length)
                                    continue;for (a = !0,
                                s = 0; s < u.length; s++)
                                    if (u[s] != i[s]) {
                                        a = !1;
                                        break
                                    }
                                if (a)
                                    for (o = nodeNamespace.call(this, l),
                                    s = 0; s < o.length; s++)
                                        if (o[s].prefix == n[0] && o[s].nodeValue == b)
                                            return new d(!0)
                            }
                    return new d(!1)
                },
                args: [{
                    t: "string"
                }],
                ret: "boolean"
            },
            number: {
                fn: function(t) {
                    return 0 == arguments.length && (t = new m([this.node],"document-order")),
                    new f(t.toNumber())
                },
                args: [{
                    t: "object",
                    r: !1
                }],
                ret: "number"
            },
            sum: {
                fn: function(t) {
                    var e, n = 0;
                    for (t = t.toNodeSet(),
                    e = 0; e < t.length; e++)
                        n += new p(nodeStringValue(t[e])).toNumber();
                    return new f(n)
                },
                args: [{
                    t: "node-set"
                }],
                ret: "number"
            },
            floor: {
                fn: function(t) {
                    return new f(Math.floor(t))
                },
                args: [{
                    t: "number"
                }],
                ret: "number"
            },
            ceiling: {
                fn: function(t) {
                    return new f(Math.ceil(t))
                },
                args: [{
                    t: "number"
                }],
                ret: "number"
            },
            sum_jr: {
                fn: function(t) {
                    var e, n;
                    for (sum = 0,
                    t = t.toNodeSet(),
                    e = 0; e < t.length; e++)
                        n = "" == nodeStringValue(t[e]) ? "0" : nodeStringValue(t[e]),
                        sum += new p(n).toNumber();
                    return new f(sum)
                },
                args: [{
                    t: "node-set"
                }],
                ret: "number"
            },
            position: {
                fn: function(t) {
                    if (t) {
                        var e, n, i;
                        if (t = t.toNodeSet(),
                        1 === t.length) {
                            for (e = t[0],
                            i = 1,
                            n = e.tagName; e.previousElementSibling && e.previousElementSibling.tagName === n; )
                                e = e.previousElementSibling,
                                i++;
                            return new f(i)
                        }
                        throw new Error("nodeset provided to position() contained multiple nodes")
                    }
                    return new f(this.pos)
                },
                args: [{
                    t: "node-set",
                    r: !1
                }],
                ret: "number"
            },
            concat: {
                fn: function(t) {
                    var e, n, i = "";
                    for (e = 0; e < arguments.length; e++)
                        n = arguments[e] instanceof m ? arguments[e].stringValues().join("") : arguments[e].toString(),
                        i += n;
                    return new p(i)
                },
                args: [{
                    t: "object",
                    r: !1,
                    rep: !0
                }],
                ret: "string"
            },
            round: {
                fn: function(t, e) {
                    return e = Math.round(e) || 0,
                    new f(Math.round(t * Math.pow(10, e)) / Math.pow(10, e))
                },
                args: [{
                    t: "number"
                }, {
                    t: "number",
                    r: !1
                }],
                ret: "number"
            },
            selected: {
                fn: function(t, e) {
                    var n;
                    return e = e.toString().trim(),
                    n = t.toString(),
                    new d(-1 != (" " + n + " ").indexOf(" " + e + " "))
                },
                args: [{
                    t: "object"
                }, {
                    t: "string"
                }],
                ret: "boolean"
            },
            "selected-at": {
                fn: function(t, e) {
                    var n, i, o;
                    return e = Math.round(e.toNumber()),
                    n = t.toString(),
                    i = n.split(" "),
                    o = e >= 0 && e < i.length ? i[e] : "",
                    new p(o)
                },
                args: [{
                    t: "object"
                }, {
                    t: "number"
                }],
                ret: "string"
            },
            "count-selected": {
                fn: function(t) {
                    var e = [];
                    return t = t.toNodeSet(),
                    t.length > 0 ? (e = nodeStringValue(t[0]).trim().split(" "),
                    new f(1 == e.length && "" === e[0] ? 0 : e.length)) : new f(0)
                },
                args: [{
                    t: "node-set"
                }],
                ret: "number"
            },
            checklist: {
                fn: function(t, e, n) {
                    var i, o, r = 0;
                    for (t = t.toNumber(),
                    e = e.toNumber(),
                    i = 2; i < arguments.length; i++)
                        if (arguments[i] instanceof m)
                            for (o = 0; o < arguments[i].stringValues().length; o++)
                                arguments[i].stringValues()[o].toBoolean() === !0 && r++;
                        else
                            arguments[i].toBoolean() === !0 && r++;
                    return new d((0 > t || r >= t) && (0 > e || e >= r))
                },
                args: [{
                    t: "number"
                }, {
                    t: "number"
                }, {
                    t: "object"
                }, {
                    t: "object",
                    r: !1,
                    rep: !0
                }],
                ret: "boolean"
            },
            "weighted-checklist": {
                fn: function(t, e, n, i) {
                    var o, r = [], s = [], a = 0;
                    for (t = t.toNumber(),
                    e = e.toNumber(),
                    o = 2; o < arguments.length; o += 2)
                        v = arguments[o],
                        w = arguments[o + 1],
                        v && w && (v instanceof m ? r = r.concat(v.stringValues()) : r.push(v),
                        w instanceof m ? s = s.concat(w.stringValues()) : s.push(w));
                    for (o = 0; o < r.length; o++)
                        r[o].toBoolean() === !0 && (a += s[o].toNumber());
                    return new d((0 > t || a >= t) && (0 > e || e >= a))
                },
                args: [{
                    t: "number"
                }, {
                    t: "number"
                }, {
                    t: "object"
                }, {
                    t: "object"
                }, {
                    t: "object",
                    r: !1,
                    rep: !0
                }],
                ret: "boolean"
            },
            "boolean-from-string": {
                fn: function(t) {
                    return new d("true" === t.toString().toLowerCase() || "1" === String(t))
                },
                args: [{
                    t: "string"
                }],
                ret: "boolean"
            },
            "if": {
                fn: function(t, e, n) {
                    return t.toBoolean() ? e : n
                },
                args: [{
                    t: "object"
                }, {
                    t: "object"
                }, {
                    t: "object"
                }],
                ret: "object"
            },
            date: {
                fn: function(t) {
                    return new DateType(t.toDate())
                },
                args: [{
                    t: "object"
                }],
                ret: "string"
            },
            "date-time": {
                fn: function(t) {
                    return new DateType(t.toDate())
                },
                args: [{
                    t: "object"
                }],
                ret: "string"
            },
            "decimal-date-time": {
                fn: function(t) {
                    return new DateType(t.toDate())
                },
                args: [{
                    t: "object"
                }],
                ret: "string"
            },
            today: {
                fn: function() {
                    var t = new Date;
                    return new DateType(new Date(t.getFullYear(),t.getMonth(),t.getDate()))
                },
                ret: "string"
            },
            now: {
                fn: function() {
                    return new DateType(new Date)
                },
                ret: "string"
            },
            regex: {
                fn: function(t, e) {
                    var n, i;
                    return n = t.toString(),
                    i = new RegExp(e),
                    new d(i.test(n))
                },
                args: [{
                    t: "object"
                }, {
                    t: "string"
                }],
                ret: "boolean"
            },
            uuid: {
                fn: function() {
                    var t = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t) {
                        var e = 16 * Math.random() | 0
                          , n = "x" == t ? e : 3 & e | 8;
                        return n.toString(16)
                    }
                    );
                    return new p(t)
                },
                ret: "string"
            },
            "int": {
                fn: function(t) {
                    return new f(parseInt(t))
                },
                args: [{
                    t: "number"
                }],
                ret: "number"
            },
            substr: {
                fn: function(t, e, n) {
                    return t = t.toString(),
                    length = t.length,
                    e = Math.round(e.toNumber()),
                    n = n ? Math.round(n.toNumber()) : length,
                    new p(isNaN(e) ? "" : t.substring(0 > e ? length + e : e, 0 > n ? length + n : n))
                },
                args: [{
                    t: "string"
                }, {
                    t: "number"
                }, {
                    t: "number",
                    r: !1
                }],
                ret: "string"
            },
            random: {
                fn: function() {
                    return new f(Math.random().toFixed(15))
                },
                ret: "number"
            },
            min: {
                fn: function(t, e) {
                    var n, i, o, r;
                    for (console.log("min args", arguments),
                    n = 0; n < arguments.length; n++)
                        if (arguments[n] instanceof m)
                            for (r = arguments[n].toNodeSet(),
                            n = 0; n < r.length; n++)
                                o = new p(nodeStringValue(r[n])),
                                o && "" !== o.toString() && (i = i ? Math.min(i, o.toNumber()) : o.toNumber());
                        else
                            o = new p(arguments[n].toString()),
                            o && "" !== o.toString() && (i = i ? Math.min(i, o.toNumber()) : o.toNumber());
                    return new f(i)
                },
                args: [{
                    t: "object"
                }, {
                    t: "object",
                    r: !1,
                    rep: !0
                }],
                ret: "number"
            },
            max: {
                fn: function(t, e) {
                    var n, i, o, r;
                    for (n = 0; n < arguments.length; n++)
                        if (arguments[n] instanceof m)
                            for (r = arguments[n].toNodeSet(),
                            n = 0; n < r.length; n++)
                                o = new p(nodeStringValue(r[n])),
                                o && "" !== o.toString() && (i = i ? Math.max(i, o.toNumber()) : o.toNumber());
                        else
                            o = new p(arguments[n].toString()),
                            o && "" !== o.toString() && (i = i ? Math.max(i, o.toNumber()) : o.toNumber());
                    return new f(i)
                },
                args: [{
                    t: "object"
                }, {
                    t: "object",
                    r: !1,
                    rep: !0
                }],
                ret: "number"
            },
            join: {
                fn: function(t, e) {
                    var n, i = [];
                    for (n = 1; n < arguments.length; n++)
                        arguments[n] instanceof m ? i = i.concat(arguments[n].stringValues()) : i.push(arguments[n].toString());
                    for (value = i[0] || "",
                    n = 1; n < i.length; n++)
                        value += t.toString() + i[n];
                    return new p(value)
                },
                args: [{
                    t: "string"
                }, {
                    t: "object",
                    r: !1,
                    rep: !0
                }],
                ret: "string"
            },
            coalesce: {
                fn: function(t, e) {
                    return t.toString().length > 0 ? t : e
                },
                args: [{
                    t: "object"
                }, {
                    t: "object"
                }],
                ret: "string"
            },
            "format-date": {
                fn: function(t, e) {
                    var n, t = new DateType(t), i = t.toDate(), o = e.toString(), r = function(t, e) {
                        var i = t.toString()
                          , o = e - i.length;
                        for (n = 0; o > n; n++)
                            i = "0" + i;
                        return i
                    }
                    ;
                    if (!t.toBoolean())
                        return new p(i.toString());
                    props = {
                        Y: i.getFullYear(),
                        y: i.getFullYear().toString().substring(2, 4),
                        m: r(i.getMonth() + 1, 2),
                        n: i.getMonth() + 1,
                        b: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"][i.getMonth()],
                        d: r(i.getDate(), 2),
                        e: i.getDate(),
                        H: r(i.getHours(), 2),
                        h: i.getHours(),
                        M: r(i.getMinutes(), 2),
                        S: r(i.getSeconds(), 2),
                        3: r(i.getMilliseconds(), 3),
                        a: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][i.getDay()]
                    };
                    for (prop in props)
                        o = o.replace("%" + prop, props[prop]);
                    return new p(o)
                },
                args: [{
                    t: "date"
                }, {
                    t: "string"
                }],
                ret: "string"
            },
            "format-date-time": {
                fn: function(t, e) {
                    var n, t = new DateType(t), i = t.toDate(), o = e.toString(), r = function(t, e) {
                        var i = t.toString()
                          , o = e - i.length;
                        for (n = 0; o > n; n++)
                            i = "0" + i;
                        return i
                    }
                    ;
                    if (!t.toBoolean())
                        return new p(i.toString());
                    props = {
                        Y: i.getFullYear(),
                        y: i.getFullYear().toString().substring(2, 4),
                        m: r(i.getMonth() + 1, 2),
                        n: i.getMonth() + 1,
                        b: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"][i.getMonth()],
                        d: r(i.getDate(), 2),
                        e: i.getDate(),
                        H: r(i.getHours(), 2),
                        h: i.getHours(),
                        M: r(i.getMinutes(), 2),
                        S: r(i.getSeconds(), 2),
                        3: r(i.getMilliseconds(), 3),
                        a: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][i.getDay()]
                    };
                    for (prop in props)
                        o = o.replace("%" + prop, props[prop]);
                    return new p(o)
                },
                args: [{
                    t: "date"
                }, {
                    t: "string"
                }],
                ret: "string"
            },
            pow: {
                fn: function(t, e) {
                    return new f(Math.pow(t, e))
                },
                args: [{
                    t: "number"
                }, {
                    t: "number"
                }],
                ret: "number"
            },
            version: {
                fn: function() {
                    var t = "#document" === this.node.nodeName ? this.node.documentElement : this.node.ownerDocument.documentElement
                      , e = t.attributes.version;
                    return new p(e ? e.textContent : "")
                },
                args: [],
                ret: "string"
            },
            once: {
                fn: function(t) {
                    var e = nodeStringValue(this.node)
                      , n = t.toString();
                    return n = "NaN" === n ? "" : n,
                    new p("" !== e ? e : n)
                },
                args: [{
                    t: "string"
                }],
                ret: "string"
            },
            area: {
                fn: function(t) {
                    var e, n, i = [], o = [];
                    if (t instanceof m && t.value.length > 1 ? t.value.forEach(function(t) {
                        i.push(nodeStringValue(t))
                    }
                    ) : t instanceof m ? i = nodeStringValue(t.value[0]).split(";") : t instanceof p && (i = t.value.split(";")),
                    o = i.map(function(t) {
                        return t.trim().split(" ")
                    }
                    ),
                    n = o.every(function(t) {
                        return "" !== t[0] && t[0] >= -90 && t[0] <= 90 && "" !== t[1] && t[1] >= -180 && t[1] <= 180 && ("undefined" == typeof t[2] || !isNaN(t[2])) && ("undefined" == typeof t[3] || !isNaN(t[3]) && t[3] >= 0)
                    }
                    )) {
                        var r, s, a = 6378100, l = o.length, u = Math.PI / 180;
                        if (e = 0,
                        l > 2) {
                            for (var c = 0; l > c; c++)
                                r = {
                                    lat: o[c][0],
                                    lng: o[c][1]
                                },
                                s = {
                                    lat: o[(c + 1) % l][0],
                                    lng: o[(c + 1) % l][1]
                                },
                                e += (s.lng - r.lng) * u * (2 + Math.sin(r.lat * u) + Math.sin(s.lat * u));
                            e = e * a * a / 2
                        }
                        e = Math.abs(Math.round(100 * e)) / 100
                    } else
                        e = Number.NaN;
                    return new f(e)
                },
                args: [{
                    t: "string"
                }],
                ret: "number"
            }
        }
    },
    a = function(t, e) {
        if ("function" != typeof l[e.type])
            throw new Error("Internal Error: Expression type does not exist: " + e.type);
        return l[e.type].apply(t, e.args)
    }
    ,
    o = function(e, n, i) {
        switch (n) {
        case o.NUMBER_TYPE:
            this.resultType = o.NUMBER_TYPE,
            this.numberValue = i.toNumber();
            break;
        case o.STRING_TYPE:
            this.resultType = o.STRING_TYPE,
            this.stringValue = i.toString();
            break;
        case o.BOOLEAN_TYPE:
            this.resultType = o.BOOLEAN_TYPE,
            this.booleanValue = i.toBoolean();
            break;
        case o.UNORDERED_NODE_ITERATOR_TYPE:
        case o.ORDERED_NODE_ITERATOR_TYPE:
        case o.UNORDERED_NODE_SNAPSHOT_TYPE:
        case o.ORDERED_NODE_SNAPSHOT_TYPE:
        case o.ANY_UNORDERED_NODE_TYPE:
        case o.FIRST_ORDERED_NODE_TYPE:
            if (!i instanceof m)
                throw new Error('Expected result of type "node-set", got: "' + i.type + '"');
            switch (this.resultType = n,
            n) {
            case o.UNORDERED_NODE_ITERATOR_TYPE:
            case o.UNORDERED_NODE_SNAPSHOT_TYPE:
                this._value = i.toNodeSet(),
                this.snapshotLength = this._value.length;
                break;
            case o.ORDERED_NODE_ITERATOR_TYPE:
            case o.ORDERED_NODE_SNAPSHOT_TYPE:
                i.sortDocumentOrder(),
                this._value = i.toNodeSet(),
                this.snapshotLength = this._value.length;
                break;
            case o.ANY_UNORDERED_NODE_TYPE:
                i = i.toNodeSet(),
                this.singleNodeValue = i.length ? i[0] : null ;
                break;
            case o.FIRST_ORDERED_NODE_TYPE:
                i.sortDocumentOrder(),
                i = i.toNodeSet(),
                this.singleNodeValue = i.length ? i[0] : null ;
                break;
            default:
                throw new t(t.TYPE_ERR,"XPath result type not supported. (type: " + n + ")")
            }
            break;
        default:
            throw new t(t.TYPE_ERR,"XPath result type not supported. (type: " + n + ")")
        }
    }
    ,
    o.factory = function(e, n, i) {
        var r;
        if (n !== o.ANY_TYPE)
            return new o(e,n,i);
        if (i instanceof m)
            r = new o(e,o.UNORDERED_NODE_ITERATOR_TYPE,i);
        else if (i instanceof f)
            r = new o(e,o.NUMBER_TYPE,i);
        else if (i instanceof d)
            r = new o(e,o.BOOLEAN_TYPE,i);
        else {
            if (!(i instanceof p))
                throw new t(t.TYPE_ERR,"Internal Error: Unsupported value type: " + typeof i);
            r = new o(e,o.STRING_TYPE,i)
        }
        return r
    }
    ,
    o.prototype = {
        resultType: null ,
        numberValue: null ,
        stringValue: null ,
        booleanValue: null ,
        singleNodeValue: null ,
        invalidIteratorState: null ,
        snapshotLength: null ,
        _iteratorIndex: 0,
        iterateNext: function() {
            if (this.resultType != o.UNORDERED_NODE_ITERATOR_TYPE && this.resultType != o.ORDERED_NODE_ITERATOR_TYPE)
                throw new t(t.TYPE_ERR,"iterateNext() method may only be used with results of type UNORDERED_NODE_ITERATOR_TYPE or ORDERED_NODE_ITERATOR_TYPE");
            return this._iteratorIndex < this._value.length ? this._value[this._iteratorIndex++] : null 
        },
        snapshotItem: function(e) {
            if (this.resultType != o.UNORDERED_NODE_SNAPSHOT_TYPE && this.resultType != o.ORDERED_NODE_SNAPSHOT_TYPE)
                throw new t(t.TYPE_ERR,"snapshotItem() method may only be used with results of type UNORDERED_NODE_SNAPSHOT_TYPE or ORDERED_NODE_SNAPSHOT_TYPE");
            return this._value[e]
        }
    },
    o.ANY_TYPE = 0,
    o.NUMBER_TYPE = 1,
    o.STRING_TYPE = 2,
    o.BOOLEAN_TYPE = 3,
    o.UNORDERED_NODE_ITERATOR_TYPE = 4,
    o.ORDERED_NODE_ITERATOR_TYPE = 5,
    o.UNORDERED_NODE_SNAPSHOT_TYPE = 6,
    o.ORDERED_NODE_SNAPSHOT_TYPE = 7,
    o.ANY_UNORDERED_NODE_TYPE = 8,
    o.FIRST_ORDERED_NODE_TYPE = 9,
    r = function(t, e, n) {
        if (1 != n.nodeType)
            throw new Error("Internal Error: XPathNamespace owner element must be an Element node.");
        this.ownerElement = n,
        this.ownerDocument = n.ownerDocument,
        this.nodeName = "#namespace",
        this.prefix = t,
        this.localName = t,
        this.nodeType = r.XPATH_NAMESPACE_NODE,
        this.namespaceURI = e,
        this.nodeValue = e
    }
    ,
    r.XPATH_NAMESPACE_NODE = 13,
    s = {
        XPathException: t,
        XPathEvaluator: e,
        XPathNSResolver: i,
        XPathExpression: n,
        XPathResult: o,
        XPathNamespace: r,
        getCurrentDomLevel3XPathBindings: function() {
            return {
                window: {
                    XPathException: window.XPathException,
                    XPathExpression: window.XPathExpression,
                    XPathNSResolver: window.XPathNSResolver,
                    XPathResult: window.XPathResult,
                    XPathNamespace: window.XPathNamespace
                },
                document: {
                    createExpression: document.createExpression,
                    createNSResolver: document.createNSResolver,
                    evaluate: document.evaluate
                }
            }
        },
        createDomLevel3XPathBindings: function(s) {
            var a = new e(s);
            return {
                window: {
                    XPathException: t,
                    XPathExpression: n,
                    XPathNSResolver: i,
                    XPathResult: o,
                    XPathNamespace: r
                },
                document: {
                    createExpression: function() {
                        return a.createExpression.apply(a, arguments)
                    },
                    createNSResolver: function() {
                        return a.createNSResolver.apply(a, arguments)
                    },
                    evaluate: function() {
                        return a.evaluate.apply(a, arguments)
                    }
                }
            }
        },
        bindDomLevel3XPath: function(t, e) {
            var n, i = e || s.createDomLevel3XPathBindings(), o = s.getCurrentDomLevel3XPathBindings(), t = t || document;
            for (n in i.window)
                window[n] = i.window[n];
            for (n in i.document)
                t[n] = i.document[n];
            return o
        }
    }
}
(),
XPathJS._parser = function() {
    function t(t, e) {
        function n() {
            this.constructor = t
        }
        n.prototype = e.prototype,
        t.prototype = new n
    }
    function e(t, e, n, i, o, r) {
        this.message = t,
        this.expected = e,
        this.found = n,
        this.offset = i,
        this.line = o,
        this.column = r,
        this.name = "SyntaxError"
    }
    function n(t) {
        function n(e) {
            function n(e, n, i) {
                var o, r;
                for (o = n; i > o; o++)
                    r = t.charAt(o),
                    "\n" === r ? (e.seenCR || e.line++,
                    e.column = 1,
                    e.seenCR = !1) : "\r" === r || "\u2028" === r || "\u2029" === r ? (e.line++,
                    e.column = 1,
                    e.seenCR = !0) : (e.column++,
                    e.seenCR = !1)
            }
            return pi !== e && (pi > e && (pi = 0,
            fi = {
                line: 1,
                column: 1,
                seenCR: !1
            }),
            n(fi, pi, e),
            pi = e),
            fi
        }
        function o(t) {
            mi > hi || (hi > mi && (mi = hi,
            gi = []),
            gi.push(t))
        }
        function r(i, o, r) {
            function s(t) {
                var e = 1;
                for (t.sort(function(t, e) {
                    return t.description < e.description ? -1 : t.description > e.description ? 1 : 0
                }
                ); e < t.length; )
                    t[e - 1] === t[e] ? t.splice(e, 1) : e++
            }
            function a(t, e) {
                function n(t) {
                    function e(t) {
                        return t.charCodeAt(0).toString(16).toUpperCase()
                    }
                    return t.replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\x08/g, "\\b").replace(/\t/g, "\\t").replace(/\n/g, "\\n").replace(/\f/g, "\\f").replace(/\r/g, "\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g, function(t) {
                        return "\\x0" + e(t)
                    }
                    ).replace(/[\x10-\x1F\x80-\xFF]/g, function(t) {
                        return "\\x" + e(t)
                    }
                    ).replace(/[\u0180-\u0FFF]/g, function(t) {
                        return "\\u0" + e(t)
                    }
                    ).replace(/[\u1080-\uFFFF]/g, function(t) {
                        return "\\u" + e(t)
                    }
                    )
                }
                var i, o, r, s = new Array(t.length);
                for (r = 0; r < t.length; r++)
                    s[r] = t[r].description;
                return i = t.length > 1 ? s.slice(0, -1).join(", ") + " or " + s[t.length - 1] : s[0],
                o = e ? '"' + n(e) + '"' : "end of input",
                "Expected " + i + " but " + o + " found."
            }
            var l = n(r)
              , u = r < t.length ? t.charAt(r) : null ;
            return null  !== o && s(o),
            new e(null  !== i ? i : a(o, u),o,u,r,l.line,l.column)
        }
        function s() {
            var t, e, n, i;
            return t = hi,
            e = F(),
            e !== G ? (n = y(),
            n !== G ? (i = F(),
            i !== G ? (di = t,
            e = tt(n),
            t = e) : (hi = t,
            t = K)) : (hi = t,
            t = K)) : (hi = t,
            t = K),
            t
        }
        function a() {
            var t;
            return t = u(),
            t === G && (t = l()),
            t
        }
        function l() {
            var e, n, i, r, s;
            return e = m(),
            e === G && (e = hi,
            47 === t.charCodeAt(hi) ? (n = et,
            hi++) : (n = G,
            0 === vi && o(nt)),
            n !== G ? (i = hi,
            r = F(),
            r !== G ? (s = u(),
            s !== G ? (r = [r, s],
            i = r) : (hi = i,
            i = K)) : (hi = i,
            i = K),
            i === G && (i = it),
            i !== G ? (di = e,
            n = ot(i),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K)),
            e
        }
        function u() {
            var e, n, i, r, s, a, l, u;
            if (e = hi,
            n = c(),
            n !== G) {
                for (i = [],
                r = hi,
                s = F(),
                s !== G ? (t.substr(hi, 2) === rt ? (a = rt,
                hi += 2) : (a = G,
                0 === vi && o(st)),
                a === G && (47 === t.charCodeAt(hi) ? (a = et,
                hi++) : (a = G,
                0 === vi && o(nt))),
                a !== G ? (l = F(),
                l !== G ? (u = c(),
                u !== G ? (s = [s, a, l, u],
                r = s) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K); r !== G; )
                    i.push(r),
                    r = hi,
                    s = F(),
                    s !== G ? (t.substr(hi, 2) === rt ? (a = rt,
                    hi += 2) : (a = G,
                    0 === vi && o(st)),
                    a === G && (47 === t.charCodeAt(hi) ? (a = et,
                    hi++) : (a = G,
                    0 === vi && o(nt))),
                    a !== G ? (l = F(),
                    l !== G ? (u = c(),
                    u !== G ? (s = [s, a, l, u],
                    r = s) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K);
                i !== G ? (di = e,
                n = at(n, i),
                e = n) : (hi = e,
                e = K)
            } else
                hi = e,
                e = K;
            return e
        }
        function c() {
            var t, e, n, i, o, r, s, a;
            if (t = hi,
            e = h(),
            e !== G)
                if (n = F(),
                n !== G)
                    if (i = p(),
                    i !== G) {
                        for (o = [],
                        r = hi,
                        s = F(),
                        s !== G ? (a = f(),
                        a !== G ? (s = [s, a],
                        r = s) : (hi = r,
                        r = K)) : (hi = r,
                        r = K); r !== G; )
                            o.push(r),
                            r = hi,
                            s = F(),
                            s !== G ? (a = f(),
                            a !== G ? (s = [s, a],
                            r = s) : (hi = r,
                            r = K)) : (hi = r,
                            r = K);
                        o !== G ? (di = t,
                        e = lt(e, i, o),
                        t = e) : (hi = t,
                        t = K)
                    } else
                        hi = t,
                        t = K;
                else
                    hi = t,
                    t = K;
            else
                hi = t,
                t = K;
            return t === G && (t = g()),
            t
        }
        function h() {
            var e, n, i, r;
            return e = hi,
            n = d(),
            n !== G ? (i = F(),
            i !== G ? (t.substr(hi, 2) === ut ? (r = ut,
            hi += 2) : (r = G,
            0 === vi && o(ct)),
            r !== G ? (di = e,
            n = ht(n),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K),
            e === G && (e = hi,
            n = v(),
            n !== G && (di = e,
            n = dt(n)),
            e = n),
            e
        }
        function d() {
            var e;
            return t.substr(hi, 16) === pt ? (e = pt,
            hi += 16) : (e = G,
            0 === vi && o(ft)),
            e === G && (t.substr(hi, 8) === mt ? (e = mt,
            hi += 8) : (e = G,
            0 === vi && o(gt)),
            e === G && (t.substr(hi, 9) === vt ? (e = vt,
            hi += 9) : (e = G,
            0 === vi && o(yt)),
            e === G && (t.substr(hi, 5) === bt ? (e = bt,
            hi += 5) : (e = G,
            0 === vi && o(_t)),
            e === G && (t.substr(hi, 18) === wt ? (e = wt,
            hi += 18) : (e = G,
            0 === vi && o(xt)),
            e === G && (t.substr(hi, 10) === Tt ? (e = Tt,
            hi += 10) : (e = G,
            0 === vi && o(kt)),
            e === G && (t.substr(hi, 17) === Et ? (e = Et,
            hi += 17) : (e = G,
            0 === vi && o(Dt)),
            e === G && (t.substr(hi, 9) === St ? (e = St,
            hi += 9) : (e = G,
            0 === vi && o(Ct)),
            e === G && (t.substr(hi, 9) === Pt ? (e = Pt,
            hi += 9) : (e = G,
            0 === vi && o(Lt)),
            e === G && (t.substr(hi, 6) === Nt ? (e = Nt,
            hi += 6) : (e = G,
            0 === vi && o(Mt)),
            e === G && (t.substr(hi, 17) === At ? (e = At,
            hi += 17) : (e = G,
            0 === vi && o(It)),
            e === G && (t.substr(hi, 9) === Ot ? (e = Ot,
            hi += 9) : (e = G,
            0 === vi && o(Rt)),
            e === G && (t.substr(hi, 4) === Ut ? (e = Ut,
            hi += 4) : (e = G,
            0 === vi && o(jt)))))))))))))),
            e
        }
        function p() {
            var e, n, i, r, s, a, l, u;
            return e = hi,
            n = j(),
            n !== G ? (i = F(),
            i !== G ? (40 === t.charCodeAt(hi) ? (r = Bt,
            hi++) : (r = G,
            0 === vi && o(Ft)),
            r !== G ? (s = F(),
            s !== G ? (41 === t.charCodeAt(hi) ? (a = $t,
            hi++) : (a = G,
            0 === vi && o(qt)),
            a !== G ? (di = e,
            n = zt(n),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K),
            e === G && (e = hi,
            t.substr(hi, 22) === Vt ? (n = Vt,
            hi += 22) : (n = G,
            0 === vi && o(Ht)),
            n !== G ? (i = F(),
            i !== G ? (40 === t.charCodeAt(hi) ? (r = Bt,
            hi++) : (r = G,
            0 === vi && o(Ft)),
            r !== G ? (s = F(),
            s !== G ? (a = N(),
            a !== G ? (l = F(),
            l !== G ? (41 === t.charCodeAt(hi) ? (u = $t,
            hi++) : (u = G,
            0 === vi && o(qt)),
            u !== G ? (di = e,
            n = Wt(n, a),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K),
            e === G && (e = hi,
            n = U(),
            n !== G && (di = e,
            n = Zt(n)),
            e = n)),
            e
        }
        function f() {
            var e, n, i, r, s, a;
            return e = hi,
            91 === t.charCodeAt(hi) ? (n = Xt,
            hi++) : (n = G,
            0 === vi && o(Yt)),
            n !== G ? (i = F(),
            i !== G ? (r = y(),
            r !== G ? (s = F(),
            s !== G ? (93 === t.charCodeAt(hi) ? (a = Gt,
            hi++) : (a = G,
            0 === vi && o(Jt)),
            a !== G ? (di = e,
            n = Qt(r),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K),
            e
        }
        function m() {
            var e, n, i, r;
            return e = hi,
            t.substr(hi, 2) === rt ? (n = rt,
            hi += 2) : (n = G,
            0 === vi && o(st)),
            n !== G ? (i = F(),
            i !== G ? (r = u(),
            r !== G ? (di = e,
            n = Kt(r),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K),
            e
        }
        function g() {
            var e, n;
            return e = hi,
            t.substr(hi, 2) === te ? (n = te,
            hi += 2) : (n = G,
            0 === vi && o(ee)),
            n === G && (46 === t.charCodeAt(hi) ? (n = ne,
            hi++) : (n = G,
            0 === vi && o(ie))),
            n !== G && (di = e,
            n = oe(n)),
            e = n
        }
        function v() {
            var e, n;
            return e = hi,
            64 === t.charCodeAt(hi) ? (n = re,
            hi++) : (n = G,
            0 === vi && o(se)),
            n === G && (n = it),
            n !== G && (di = e,
            n = ae(n)),
            e = n
        }
        function y() {
            var t, e;
            return t = hi,
            e = k(),
            e !== G && (di = t,
            e = Qt(e)),
            t = e
        }
        function b() {
            var e, n, i, r, s, a;
            return e = hi,
            n = R(),
            n !== G && (di = e,
            n = le(n)),
            e = n,
            e === G && (e = hi,
            40 === t.charCodeAt(hi) ? (n = Bt,
            hi++) : (n = G,
            0 === vi && o(Ft)),
            n !== G ? (i = F(),
            i !== G ? (r = y(),
            r !== G ? (s = F(),
            s !== G ? (41 === t.charCodeAt(hi) ? (a = $t,
            hi++) : (a = G,
            0 === vi && o(qt)),
            a !== G ? (di = e,
            n = Qt(r),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K),
            e === G && (e = hi,
            n = N(),
            n !== G && (di = e,
            n = ue(n)),
            e = n,
            e === G && (e = hi,
            n = M(),
            n !== G && (di = e,
            n = ce(n)),
            e = n,
            e === G && (e = _())))),
            e
        }
        function _() {
            var e, n, i, r, s, a, l, u, c, h, d, p, f;
            if (e = hi,
            n = O(),
            n !== G)
                if (i = F(),
                i !== G)
                    if (40 === t.charCodeAt(hi) ? (r = Bt,
                    hi++) : (r = G,
                    0 === vi && o(Ft)),
                    r !== G) {
                        if (s = hi,
                        a = F(),
                        a !== G)
                            if (l = y(),
                            l !== G) {
                                for (u = [],
                                c = hi,
                                h = F(),
                                h !== G ? (44 === t.charCodeAt(hi) ? (d = he,
                                hi++) : (d = G,
                                0 === vi && o(de)),
                                d !== G ? (p = F(),
                                p !== G ? (f = y(),
                                f !== G ? (h = [h, d, p, f],
                                c = h) : (hi = c,
                                c = K)) : (hi = c,
                                c = K)) : (hi = c,
                                c = K)) : (hi = c,
                                c = K); c !== G; )
                                    u.push(c),
                                    c = hi,
                                    h = F(),
                                    h !== G ? (44 === t.charCodeAt(hi) ? (d = he,
                                    hi++) : (d = G,
                                    0 === vi && o(de)),
                                    d !== G ? (p = F(),
                                    p !== G ? (f = y(),
                                    f !== G ? (h = [h, d, p, f],
                                    c = h) : (hi = c,
                                    c = K)) : (hi = c,
                                    c = K)) : (hi = c,
                                    c = K)) : (hi = c,
                                    c = K);
                                u !== G ? (a = [a, l, u],
                                s = a) : (hi = s,
                                s = K)
                            } else
                                hi = s,
                                s = K;
                        else
                            hi = s,
                            s = K;
                        s === G && (s = it),
                        s !== G ? (a = F(),
                        a !== G ? (41 === t.charCodeAt(hi) ? (l = $t,
                        hi++) : (l = G,
                        0 === vi && o(qt)),
                        l !== G ? (di = e,
                        n = pe(n, s),
                        e = n) : (hi = e,
                        e = K)) : (hi = e,
                        e = K)) : (hi = e,
                        e = K)
                    } else
                        hi = e,
                        e = K;
                else
                    hi = e,
                    e = K;
            else
                hi = e,
                e = K;
            return e
        }
        function w() {
            var e, n, i, r, s, a, l, u;
            if (e = hi,
            n = x(),
            n !== G) {
                for (i = [],
                r = hi,
                s = F(),
                s !== G ? (124 === t.charCodeAt(hi) ? (a = fe,
                hi++) : (a = G,
                0 === vi && o(me)),
                a !== G ? (l = F(),
                l !== G ? (u = x(),
                u !== G ? (s = [s, a, l, u],
                r = s) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K); r !== G; )
                    i.push(r),
                    r = hi,
                    s = F(),
                    s !== G ? (124 === t.charCodeAt(hi) ? (a = fe,
                    hi++) : (a = G,
                    0 === vi && o(me)),
                    a !== G ? (l = F(),
                    l !== G ? (u = x(),
                    u !== G ? (s = [s, a, l, u],
                    r = s) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K);
                i !== G ? (di = e,
                n = ge(n, i),
                e = n) : (hi = e,
                e = K)
            } else
                hi = e,
                e = K;
            return e
        }
        function x() {
            var e, n, i, r, s, l, c;
            return e = hi,
            n = T(),
            n !== G ? (i = hi,
            r = F(),
            r !== G ? (t.substr(hi, 2) === rt ? (s = rt,
            hi += 2) : (s = G,
            0 === vi && o(st)),
            s === G && (47 === t.charCodeAt(hi) ? (s = et,
            hi++) : (s = G,
            0 === vi && o(nt))),
            s !== G ? (l = F(),
            l !== G ? (c = u(),
            c !== G ? (r = [r, s, l, c],
            i = r) : (hi = i,
            i = K)) : (hi = i,
            i = K)) : (hi = i,
            i = K)) : (hi = i,
            i = K),
            i === G && (i = it),
            i !== G ? (di = e,
            n = ve(n, i),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K),
            e === G && (e = hi,
            n = a(),
            n !== G && (di = e,
            n = ye(n)),
            e = n),
            e
        }
        function T() {
            var t, e, n, i, o, r;
            if (t = hi,
            e = b(),
            e !== G) {
                for (n = [],
                i = hi,
                o = F(),
                o !== G ? (r = f(),
                r !== G ? (o = [o, r],
                i = o) : (hi = i,
                i = K)) : (hi = i,
                i = K); i !== G; )
                    n.push(i),
                    i = hi,
                    o = F(),
                    o !== G ? (r = f(),
                    r !== G ? (o = [o, r],
                    i = o) : (hi = i,
                    i = K)) : (hi = i,
                    i = K);
                n !== G ? (di = t,
                e = be(e, n),
                t = e) : (hi = t,
                t = K)
            } else
                hi = t,
                t = K;
            return t
        }
        function k() {
            var e, n, i, r, s, a, l, u;
            if (e = hi,
            n = E(),
            n !== G) {
                for (i = [],
                r = hi,
                s = F(),
                s !== G ? (t.substr(hi, 2) === _e ? (a = _e,
                hi += 2) : (a = G,
                0 === vi && o(we)),
                a !== G ? (l = F(),
                l !== G ? (u = E(),
                u !== G ? (s = [s, a, l, u],
                r = s) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K); r !== G; )
                    i.push(r),
                    r = hi,
                    s = F(),
                    s !== G ? (t.substr(hi, 2) === _e ? (a = _e,
                    hi += 2) : (a = G,
                    0 === vi && o(we)),
                    a !== G ? (l = F(),
                    l !== G ? (u = E(),
                    u !== G ? (s = [s, a, l, u],
                    r = s) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K);
                i !== G ? (di = e,
                n = ge(n, i),
                e = n) : (hi = e,
                e = K)
            } else
                hi = e,
                e = K;
            return e
        }
        function E() {
            var e, n, i, r, s, a, l, u;
            if (e = hi,
            n = D(),
            n !== G) {
                for (i = [],
                r = hi,
                s = F(),
                s !== G ? (t.substr(hi, 3) === xe ? (a = xe,
                hi += 3) : (a = G,
                0 === vi && o(Te)),
                a !== G ? (l = F(),
                l !== G ? (u = D(),
                u !== G ? (s = [s, a, l, u],
                r = s) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K); r !== G; )
                    i.push(r),
                    r = hi,
                    s = F(),
                    s !== G ? (t.substr(hi, 3) === xe ? (a = xe,
                    hi += 3) : (a = G,
                    0 === vi && o(Te)),
                    a !== G ? (l = F(),
                    l !== G ? (u = D(),
                    u !== G ? (s = [s, a, l, u],
                    r = s) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K);
                i !== G ? (di = e,
                n = ge(n, i),
                e = n) : (hi = e,
                e = K)
            } else
                hi = e,
                e = K;
            return e
        }
        function D() {
            var e, n, i, r, s, a, l, u;
            if (e = hi,
            n = S(),
            n !== G) {
                for (i = [],
                r = hi,
                s = F(),
                s !== G ? (61 === t.charCodeAt(hi) ? (a = ke,
                hi++) : (a = G,
                0 === vi && o(Ee)),
                a === G && (t.substr(hi, 2) === De ? (a = De,
                hi += 2) : (a = G,
                0 === vi && o(Se))),
                a !== G ? (l = F(),
                l !== G ? (u = S(),
                u !== G ? (s = [s, a, l, u],
                r = s) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K); r !== G; )
                    i.push(r),
                    r = hi,
                    s = F(),
                    s !== G ? (61 === t.charCodeAt(hi) ? (a = ke,
                    hi++) : (a = G,
                    0 === vi && o(Ee)),
                    a === G && (t.substr(hi, 2) === De ? (a = De,
                    hi += 2) : (a = G,
                    0 === vi && o(Se))),
                    a !== G ? (l = F(),
                    l !== G ? (u = S(),
                    u !== G ? (s = [s, a, l, u],
                    r = s) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K);
                i !== G ? (di = e,
                n = ge(n, i),
                e = n) : (hi = e,
                e = K)
            } else
                hi = e,
                e = K;
            return e
        }
        function S() {
            var e, n, i, r, s, a, l, u;
            if (e = hi,
            n = C(),
            n !== G) {
                for (i = [],
                r = hi,
                s = F(),
                s !== G ? (t.substr(hi, 2) === Ce ? (a = Ce,
                hi += 2) : (a = G,
                0 === vi && o(Pe)),
                a === G && (60 === t.charCodeAt(hi) ? (a = Le,
                hi++) : (a = G,
                0 === vi && o(Ne)),
                a === G && (t.substr(hi, 2) === Me ? (a = Me,
                hi += 2) : (a = G,
                0 === vi && o(Ae)),
                a === G && (62 === t.charCodeAt(hi) ? (a = Ie,
                hi++) : (a = G,
                0 === vi && o(Oe))))),
                a !== G ? (l = F(),
                l !== G ? (u = C(),
                u !== G ? (s = [s, a, l, u],
                r = s) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K); r !== G; )
                    i.push(r),
                    r = hi,
                    s = F(),
                    s !== G ? (t.substr(hi, 2) === Ce ? (a = Ce,
                    hi += 2) : (a = G,
                    0 === vi && o(Pe)),
                    a === G && (60 === t.charCodeAt(hi) ? (a = Le,
                    hi++) : (a = G,
                    0 === vi && o(Ne)),
                    a === G && (t.substr(hi, 2) === Me ? (a = Me,
                    hi += 2) : (a = G,
                    0 === vi && o(Ae)),
                    a === G && (62 === t.charCodeAt(hi) ? (a = Ie,
                    hi++) : (a = G,
                    0 === vi && o(Oe))))),
                    a !== G ? (l = F(),
                    l !== G ? (u = C(),
                    u !== G ? (s = [s, a, l, u],
                    r = s) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K);
                i !== G ? (di = e,
                n = ge(n, i),
                e = n) : (hi = e,
                e = K)
            } else
                hi = e,
                e = K;
            return e
        }
        function C() {
            var e, n, i, r, s, a, l, u;
            if (e = hi,
            n = P(),
            n !== G) {
                for (i = [],
                r = hi,
                s = F(),
                s !== G ? (43 === t.charCodeAt(hi) ? (a = Re,
                hi++) : (a = G,
                0 === vi && o(Ue)),
                a === G && (45 === t.charCodeAt(hi) ? (a = je,
                hi++) : (a = G,
                0 === vi && o(Be))),
                a !== G ? (l = F(),
                l !== G ? (u = P(),
                u !== G ? (s = [s, a, l, u],
                r = s) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K); r !== G; )
                    i.push(r),
                    r = hi,
                    s = F(),
                    s !== G ? (43 === t.charCodeAt(hi) ? (a = Re,
                    hi++) : (a = G,
                    0 === vi && o(Ue)),
                    a === G && (45 === t.charCodeAt(hi) ? (a = je,
                    hi++) : (a = G,
                    0 === vi && o(Be))),
                    a !== G ? (l = F(),
                    l !== G ? (u = P(),
                    u !== G ? (s = [s, a, l, u],
                    r = s) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K);
                i !== G ? (di = e,
                n = ge(n, i),
                e = n) : (hi = e,
                e = K)
            } else
                hi = e,
                e = K;
            return e
        }
        function P() {
            var e, n, i, r, s, a, l, u;
            if (e = hi,
            n = L(),
            n !== G) {
                for (i = [],
                r = hi,
                s = F(),
                s !== G ? (a = I(),
                a === G && (t.substr(hi, 3) === Fe ? (a = Fe,
                hi += 3) : (a = G,
                0 === vi && o($e)),
                a === G && (t.substr(hi, 3) === qe ? (a = qe,
                hi += 3) : (a = G,
                0 === vi && o(ze)))),
                a !== G ? (l = F(),
                l !== G ? (u = L(),
                u !== G ? (s = [s, a, l, u],
                r = s) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K)) : (hi = r,
                r = K); r !== G; )
                    i.push(r),
                    r = hi,
                    s = F(),
                    s !== G ? (a = I(),
                    a === G && (t.substr(hi, 3) === Fe ? (a = Fe,
                    hi += 3) : (a = G,
                    0 === vi && o($e)),
                    a === G && (t.substr(hi, 3) === qe ? (a = qe,
                    hi += 3) : (a = G,
                    0 === vi && o(ze)))),
                    a !== G ? (l = F(),
                    l !== G ? (u = L(),
                    u !== G ? (s = [s, a, l, u],
                    r = s) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K)) : (hi = r,
                    r = K);
                i !== G ? (di = e,
                n = ge(n, i),
                e = n) : (hi = e,
                e = K)
            } else
                hi = e,
                e = K;
            return e
        }
        function L() {
            var e, n, i, r;
            return e = hi,
            n = w(),
            n !== G && (di = e,
            n = Qt(n)),
            e = n,
            e === G && (e = hi,
            45 === t.charCodeAt(hi) ? (n = je,
            hi++) : (n = G,
            0 === vi && o(Be)),
            n !== G ? (i = F(),
            i !== G ? (r = L(),
            r !== G ? (di = e,
            n = Ve(r),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K)),
            e
        }
        function N() {
            var e, n, i, r;
            if (e = hi,
            34 === t.charCodeAt(hi) ? (n = He,
            hi++) : (n = G,
            0 === vi && o(We)),
            n !== G) {
                for (i = [],
                Ze.test(t.charAt(hi)) ? (r = t.charAt(hi),
                hi++) : (r = G,
                0 === vi && o(Xe)); r !== G; )
                    i.push(r),
                    Ze.test(t.charAt(hi)) ? (r = t.charAt(hi),
                    hi++) : (r = G,
                    0 === vi && o(Xe));
                i !== G ? (34 === t.charCodeAt(hi) ? (r = He,
                hi++) : (r = G,
                0 === vi && o(We)),
                r !== G ? (di = e,
                n = Ye(i),
                e = n) : (hi = e,
                e = K)) : (hi = e,
                e = K)
            } else
                hi = e,
                e = K;
            if (e === G)
                if (e = hi,
                39 === t.charCodeAt(hi) ? (n = Ge,
                hi++) : (n = G,
                0 === vi && o(Je)),
                n !== G) {
                    for (i = [],
                    Qe.test(t.charAt(hi)) ? (r = t.charAt(hi),
                    hi++) : (r = G,
                    0 === vi && o(Ke)); r !== G; )
                        i.push(r),
                        Qe.test(t.charAt(hi)) ? (r = t.charAt(hi),
                        hi++) : (r = G,
                        0 === vi && o(Ke));
                    i !== G ? (39 === t.charCodeAt(hi) ? (r = Ge,
                    hi++) : (r = G,
                    0 === vi && o(Je)),
                    r !== G ? (di = e,
                    n = Ye(i),
                    e = n) : (hi = e,
                    e = K)) : (hi = e,
                    e = K)
                } else
                    hi = e,
                    e = K;
            return e
        }
        function M() {
            var e, n, i, r, s;
            return e = hi,
            n = A(),
            n !== G ? (i = hi,
            46 === t.charCodeAt(hi) ? (r = ne,
            hi++) : (r = G,
            0 === vi && o(ie)),
            r !== G ? (s = A(),
            s === G && (s = it),
            s !== G ? (r = [r, s],
            i = r) : (hi = i,
            i = K)) : (hi = i,
            i = K),
            i === G && (i = it),
            i !== G ? (di = e,
            n = tn(n, i),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K),
            e === G && (e = hi,
            46 === t.charCodeAt(hi) ? (n = ne,
            hi++) : (n = G,
            0 === vi && o(ie)),
            n !== G ? (i = A(),
            i !== G ? (di = e,
            n = en(i),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K)),
            e
        }
        function A() {
            var e, n, i;
            if (e = hi,
            n = [],
            nn.test(t.charAt(hi)) ? (i = t.charAt(hi),
            hi++) : (i = G,
            0 === vi && o(on)),
            i !== G)
                for (; i !== G; )
                    n.push(i),
                    nn.test(t.charAt(hi)) ? (i = t.charAt(hi),
                    hi++) : (i = G,
                    0 === vi && o(on));
            else
                n = K;
            return n !== G && (di = e,
            n = rn(n)),
            e = n
        }
        function I() {
            var e;
            return 42 === t.charCodeAt(hi) ? (e = sn,
            hi++) : (e = G,
            0 === vi && o(an)),
            e
        }
        function O() {
            var t, e, n;
            return t = hi,
            e = $(),
            e !== G ? (di = hi,
            n = ln(e),
            n = n ? un : K,
            n !== G ? (di = t,
            e = cn(e),
            t = e) : (hi = t,
            t = K)) : (hi = t,
            t = K),
            t
        }
        function R() {
            var e, n, i;
            return e = hi,
            36 === t.charCodeAt(hi) ? (n = hn,
            hi++) : (n = G,
            0 === vi && o(dn)),
            n !== G ? (i = $(),
            i !== G ? (di = e,
            n = pn(i),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K),
            e
        }
        function U() {
            var e, n, i, r;
            return e = hi,
            42 === t.charCodeAt(hi) ? (n = sn,
            hi++) : (n = G,
            0 === vi && o(an)),
            n !== G && (di = e,
            n = fn()),
            e = n,
            e === G && (e = hi,
            n = V(),
            n !== G ? (58 === t.charCodeAt(hi) ? (i = mn,
            hi++) : (i = G,
            0 === vi && o(gn)),
            i !== G ? (42 === t.charCodeAt(hi) ? (r = sn,
            hi++) : (r = G,
            0 === vi && o(an)),
            r !== G ? (di = e,
            n = vn(n),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K),
            e === G && (e = hi,
            n = $(),
            n !== G && (di = e,
            n = yn(n)),
            e = n)),
            e
        }
        function j() {
            var e;
            return t.substr(hi, 7) === bn ? (e = bn,
            hi += 7) : (e = G,
            0 === vi && o(_n)),
            e === G && (t.substr(hi, 4) === wn ? (e = wn,
            hi += 4) : (e = G,
            0 === vi && o(xn)),
            e === G && (t.substr(hi, 22) === Vt ? (e = Vt,
            hi += 22) : (e = G,
            0 === vi && o(Ht)),
            e === G && (t.substr(hi, 4) === Tn ? (e = Tn,
            hi += 4) : (e = G,
            0 === vi && o(kn))))),
            e
        }
        function B() {
            var e, n;
            if (e = [],
            En.test(t.charAt(hi)) ? (n = t.charAt(hi),
            hi++) : (n = G,
            0 === vi && o(Dn)),
            n !== G)
                for (; n !== G; )
                    e.push(n),
                    En.test(t.charAt(hi)) ? (n = t.charAt(hi),
                    hi++) : (n = G,
                    0 === vi && o(Dn));
            else
                e = K;
            return e
        }
        function F() {
            var t;
            return t = B(),
            t === G && (t = it),
            t
        }
        function $() {
            var t, e;
            return t = hi,
            e = q(),
            e === G && (e = z()),
            e !== G && (di = t,
            e = Sn(e)),
            t = e
        }
        function q() {
            var e, n, i, r;
            return e = hi,
            n = V(),
            n !== G ? (58 === t.charCodeAt(hi) ? (i = mn,
            hi++) : (i = G,
            0 === vi && o(gn)),
            i !== G ? (r = V(),
            r !== G ? (di = e,
            n = Cn(n, r),
            e = n) : (hi = e,
            e = K)) : (hi = e,
            e = K)) : (hi = e,
            e = K),
            e
        }
        function z() {
            var t, e;
            return t = hi,
            e = V(),
            e !== G && (di = t,
            e = Pn(e)),
            t = e
        }
        function V() {
            var t;
            return t = Z()
        }
        function H() {
            var e;
            return Ln.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(Nn)),
            e === G && (95 === t.charCodeAt(hi) ? (e = Mn,
            hi++) : (e = G,
            0 === vi && o(An)),
            e === G && (In.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(On)),
            e === G && (Rn.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(Un)),
            e === G && (jn.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(Bn)),
            e === G && (Fn.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o($n)),
            e === G && (qn.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(zn)),
            e === G && (Vn.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(Hn)),
            e === G && (Wn.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(Zn)),
            e === G && (Xn.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(Yn)),
            e === G && (Gn.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(Jn)),
            e === G && (Qn.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(Kn)),
            e === G && (ti.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(ei)),
            e === G && (ni.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(ii))))))))))))))),
            e
        }
        function W() {
            var e;
            return e = H(),
            e === G && (45 === t.charCodeAt(hi) ? (e = je,
            hi++) : (e = G,
            0 === vi && o(Be)),
            e === G && (46 === t.charCodeAt(hi) ? (e = ne,
            hi++) : (e = G,
            0 === vi && o(ie)),
            e === G && (nn.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(on)),
            e === G && (oi.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(ri)),
            e === G && (si.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(ai)),
            e === G && (li.test(t.charAt(hi)) ? (e = t.charAt(hi),
            hi++) : (e = G,
            0 === vi && o(ui)))))))),
            e
        }
        function Z() {
            var t, e, n, i;
            if (t = hi,
            e = H(),
            e !== G) {
                for (n = [],
                i = W(); i !== G; )
                    n.push(i),
                    i = W();
                n !== G ? (di = t,
                e = ci(e, n),
                t = e) : (hi = t,
                t = K)
            } else
                hi = t,
                t = K;
            return t
        }
        var X, Y = arguments.length > 1 ? arguments[1] : {}, G = {}, J = {
            XPath: s
        }, Q = s, K = G, tt = function(t) {
            return {
                tree: t,
                nsPrefixes: wi
            }
        }
        , et = "/", nt = {
            type: "literal",
            value: "/",
            description: '"/"'
        }, it = null , ot = function(t) {
            return {
                type: "/",
                args: [null , t ? t[1] : null ]
            }
        }
        , rt = "//", st = {
            type: "literal",
            value: "//",
            description: '"//"'
        }, at = function(t, e) {
            var n;
            for (n = 0; n < e.length; n++)
                t = ki(e[n][1], t, e[n][3]);
            return t
        }
        , lt = function(t, e, n) {
            return _i({
                type: "step",
                args: [t, e]
            }, t, n, 1)
        }
        , ut = "::", ct = {
            type: "literal",
            value: "::",
            description: '"::"'
        }, ht = function(t) {
            return t
        }
        , dt = function(t) {
            return t.length ? t : "child"
        }
        , pt = "ancestor-or-self", ft = {
            type: "literal",
            value: "ancestor-or-self",
            description: '"ancestor-or-self"'
        }, mt = "ancestor", gt = {
            type: "literal",
            value: "ancestor",
            description: '"ancestor"'
        }, vt = "attribute", yt = {
            type: "literal",
            value: "attribute",
            description: '"attribute"'
        }, bt = "child", _t = {
            type: "literal",
            value: "child",
            description: '"child"'
        }, wt = "descendant-or-self", xt = {
            type: "literal",
            value: "descendant-or-self",
            description: '"descendant-or-self"'
        }, Tt = "descendant", kt = {
            type: "literal",
            value: "descendant",
            description: '"descendant"'
        }, Et = "following-sibling", Dt = {
            type: "literal",
            value: "following-sibling",
            description: '"following-sibling"'
        }, St = "following", Ct = {
            type: "literal",
            value: "following",
            description: '"following"'
        }, Pt = "namespace", Lt = {
            type: "literal",
            value: "namespace",
            description: '"namespace"'
        }, Nt = "parent", Mt = {
            type: "literal",
            value: "parent",
            description: '"parent"'
        }, At = "preceding-sibling", It = {
            type: "literal",
            value: "preceding-sibling",
            description: '"preceding-sibling"'
        }, Ot = "preceding", Rt = {
            type: "literal",
            value: "preceding",
            description: '"preceding"'
        }, Ut = "self", jt = {
            type: "literal",
            value: "self",
            description: '"self"'
        }, Bt = "(", Ft = {
            type: "literal",
            value: "(",
            description: '"("'
        }, $t = ")", qt = {
            type: "literal",
            value: ")",
            description: '")"'
        }, zt = function(t) {
            return {
                type: "nodeType",
                args: [t, []]
            }
        }
        , Vt = "processing-instruction", Ht = {
            type: "literal",
            value: "processing-instruction",
            description: '"processing-instruction"'
        }, Wt = function(t, e) {
            return {
                type: "nodeType",
                args: [t, [e]]
            }
        }
        , Zt = function(t) {
            return t
        }
        , Xt = "[", Yt = {
            type: "literal",
            value: "[",
            description: '"["'
        }, Gt = "]", Jt = {
            type: "literal",
            value: "]",
            description: '"]"'
        }, Qt = function(t) {
            return t
        }
        , Kt = function(t) {
            return ki("//", null , t)
        }
        , te = "..", ee = {
            type: "literal",
            value: "..",
            description: '".."'
        }, ne = ".", ie = {
            type: "literal",
            value: ".",
            description: '"."'
        }, oe = function(t) {
            var e = {
                type: "step",
                args: ["self", {
                    type: "nodeType",
                    args: ["node", []]
                }]
            };
            return ".." == t && (e.args[0] = "parent"),
            e
        }
        , re = "@", se = {
            type: "literal",
            value: "@",
            description: '"@"'
        }, ae = function(t) {
            return t ? "attribute" : ""
        }
        , le = function(t) {
            return t
        }
        , ue = function(t) {
            return t
        }
        , ce = function(t) {
            return t
        }
        , he = ",", de = {
            type: "literal",
            value: ",",
            description: '","'
        }, pe = function(t, e) {
            var n, i = [];
            if (e)
                for (i.push(e[1]),
                n = 0; n < e[2].length; n++)
                    i.push(e[2][n][3]);
            return {
                type: "function",
                args: [t, i]
            }
        }
        , fe = "|", me = {
            type: "literal",
            value: "|",
            description: '"|"'
        }, ge = function(t, e) {
            return bi(t, e, 1, 3)
        }
        , ve = function(t, e) {
            return e ? ki(e[1], t, e[3]) : t
        }
        , ye = function(t) {
            return t
        }
        , be = function(t, e) {
            return _i(t, "child", e, 1)
        }
        , _e = "or", we = {
            type: "literal",
            value: "or",
            description: '"or"'
        }, xe = "and", Te = {
            type: "literal",
            value: "and",
            description: '"and"'
        }, ke = "=", Ee = {
            type: "literal",
            value: "=",
            description: '"="'
        }, De = "!=", Se = {
            type: "literal",
            value: "!=",
            description: '"!="'
        }, Ce = "<=", Pe = {
            type: "literal",
            value: "<=",
            description: '"<="'
        }, Le = "<", Ne = {
            type: "literal",
            value: "<",
            description: '"<"'
        }, Me = ">=", Ae = {
            type: "literal",
            value: ">=",
            description: '">="'
        }, Ie = ">", Oe = {
            type: "literal",
            value: ">",
            description: '">"'
        }, Re = "+", Ue = {
            type: "literal",
            value: "+",
            description: '"+"'
        }, je = "-", Be = {
            type: "literal",
            value: "-",
            description: '"-"'
        }, Fe = "div", $e = {
            type: "literal",
            value: "div",
            description: '"div"'
        }, qe = "mod", ze = {
            type: "literal",
            value: "mod",
            description: '"mod"'
        }, Ve = function(t) {
            return {
                type: "*",
                args: [{
                    type: "number",
                    args: [-1]
                }, t]
            }
        }
        , He = '"', We = {
            type: "literal",
            value: '"',
            description: '"\\""'
        }, Ze = /^[^"]/, Xe = {
            type: "class",
            value: '[^"]',
            description: '[^"]'
        }, Ye = function(t) {
            return {
                type: "string",
                args: [t.join("")]
            }
        }
        , Ge = "'", Je = {
            type: "literal",
            value: "'",
            description: '"\'"'
        }, Qe = /^[^']/, Ke = {
            type: "class",
            value: "[^']",
            description: "[^']"
        }, tn = function(t, e) {
            return {
                type: "number",
                args: [e ? parseFloat(t + "." + e[1]) : parseInt(t)]
            }
        }
        , en = function(t) {
            return {
                type: "number",
                args: [parseFloat("." + t)]
            }
        }
        , nn = /^[0-9]/, on = {
            type: "class",
            value: "[0-9]",
            description: "[0-9]"
        }, rn = function(t) {
            return t.join("")
        }
        , sn = "*", an = {
            type: "literal",
            value: "*",
            description: '"*"'
        }, ln = function(t) {
            var e;
            if (null  === yi.args[0])
                for (e = 0; e < Ti.length; e++)
                    if (yi.args[1] == Ti[e])
                        return !1;
            return !0
        }
        , un = void 0, cn = function(t) {
            return "" === t.args[0] ? t = {
                type: t.type,
                args: [null , t.args[1]]
            } : xi(t.args[0]),
            t
        }
        , hn = "$", dn = {
            type: "literal",
            value: "$",
            description: '"$"'
        }, pn = function(t) {
            return xi(t.args[0]),
            {
                type: "$",
                args: [t]
            }
        }
        , fn = function() {
            return {
                type: "name",
                args: [null , null ]
            }
        }
        , mn = ":", gn = {
            type: "literal",
            value: ":",
            description: '":"'
        }, vn = function(t) {
            return xi(t),
            {
                type: "name",
                args: [t, null ]
            }
        }
        , yn = function(t) {
            return xi(t.args[0]),
            t
        }
        , bn = "comment", _n = {
            type: "literal",
            value: "comment",
            description: '"comment"'
        }, wn = "text", xn = {
            type: "literal",
            value: "text",
            description: '"text"'
        }, Tn = "node", kn = {
            type: "literal",
            value: "node",
            description: '"node"'
        }, En = /^[ \t\r\n]/, Dn = {
            type: "class",
            value: "[ \\t\\r\\n]",
            description: "[ \\t\\r\\n]"
        }, Sn = function(t) {
            return yi = t,
            t
        }
        , Cn = function(t, e) {
            return {
                type: "name",
                args: [t, e]
            }
        }
        , Pn = function(t) {
            return {
                type: "name",
                args: [null , t]
            }
        }
        , Ln = /^[A-Z]/, Nn = {
            type: "class",
            value: "[A-Z]",
            description: "[A-Z]"
        }, Mn = "_", An = {
            type: "literal",
            value: "_",
            description: '"_"'
        }, In = /^[a-z]/, On = {
            type: "class",
            value: "[a-z]",
            description: "[a-z]"
        }, Rn = /^[\xC0-\xD6]/, Un = {
            type: "class",
            value: "[\\xC0-\\xD6]",
            description: "[\\xC0-\\xD6]"
        }, jn = /^[\xD8-\xF6]/, Bn = {
            type: "class",
            value: "[\\xD8-\\xF6]",
            description: "[\\xD8-\\xF6]"
        }, Fn = /^[\xF8-\u02FF]/, $n = {
            type: "class",
            value: "[\\xF8-\\u02FF]",
            description: "[\\xF8-\\u02FF]"
        }, qn = /^[\u0370-\u037D]/, zn = {
            type: "class",
            value: "[\\u0370-\\u037D]",
            description: "[\\u0370-\\u037D]"
        }, Vn = /^[\u037F-\u1FFF]/, Hn = {
            type: "class",
            value: "[\\u037F-\\u1FFF]",
            description: "[\\u037F-\\u1FFF]"
        }, Wn = /^[\u200C-\u200D]/, Zn = {
            type: "class",
            value: "[\\u200C-\\u200D]",
            description: "[\\u200C-\\u200D]"
        }, Xn = /^[\u2070-\u218F]/, Yn = {
            type: "class",
            value: "[\\u2070-\\u218F]",
            description: "[\\u2070-\\u218F]"
        }, Gn = /^[\u2C00-\u2FEF]/, Jn = {
            type: "class",
            value: "[\\u2C00-\\u2FEF]",
            description: "[\\u2C00-\\u2FEF]"
        }, Qn = /^[\u3001-\uD7FF]/, Kn = {
            type: "class",
            value: "[\\u3001-\\uD7FF]",
            description: "[\\u3001-\\uD7FF]"
        }, ti = /^[\uF900-\uFDCF]/, ei = {
            type: "class",
            value: "[\\uF900-\\uFDCF]",
            description: "[\\uF900-\\uFDCF]"
        }, ni = /^[\uFDF0-\uFFFD]/, ii = {
            type: "class",
            value: "[\\uFDF0-\\uFFFD]",
            description: "[\\uFDF0-\\uFFFD]"
        }, oi = /^[\xB7]/, ri = {
            type: "class",
            value: "[\\xB7]",
            description: "[\\xB7]"
        }, si = /^[\u0300-\u036F]/, ai = {
            type: "class",
            value: "[\\u0300-\\u036F]",
            description: "[\\u0300-\\u036F]"
        }, li = /^[\u203F-\u2040]/, ui = {
            type: "class",
            value: "[\\u203F-\\u2040]",
            description: "[\\u203F-\\u2040]"
        }, ci = function(t, e) {
            return t + e.join("")
        }
        , hi = 0, di = 0, pi = 0, fi = {
            line: 1,
            column: 1,
            seenCR: !1
        }, mi = 0, gi = [], vi = 0;
        if ("startRule" in Y) {
            if (!(Y.startRule in J))
                throw new Error("Can't start parsing from rule \"" + Y.startRule + '".');
            Q = J[Y.startRule]
        }
        var yi, bi = function(t, e, n, i) {
            var o, r, s = {
                type: "",
                args: []
            };
            for (s.args.push(t),
            o = 0; o < e.length; o++) {
                switch (typeof n) {
                case "string":
                    s.type = n;
                    break;
                case "object":
                    for (s.type = e[o][n[0]],
                    r = 1; r < n.length; r++)
                        s.type = s.type[n[r]];
                    break;
                default:
                    s.type = e[o][n]
                }
                s.args.push("undefined" == typeof i ? e[o] : e[o][i]),
                s = {
                    type: "",
                    args: [s]
                }
            }
            return s.args[0]
        }
        , _i = function(t, e, n, o) {
            var r = [];
            if (n.length < 1)
                return t;
            for (i = 0; i < n.length; i++)
                r.push(n[i][o]);
            return {
                type: "predicate",
                args: [e, t, r]
            }
        }
        , wi = [], xi = function(t) {
            var e, n = !1;
            if (null  !== t) {
                for (e = 0; e < wi.length; e++)
                    if (wi[e] === t) {
                        n = !0;
                        break
                    }
                n || wi.push(t)
            }
        }
        , Ti = ["comment", "text", "processing-instruction", "node"], ki = function(t, e, n) {
            return "/" == t ? {
                type: "/",
                args: [e, n]
            } : {
                type: "/",
                args: [{
                    type: "/",
                    args: [e, {
                        type: "step",
                        args: ["descendant-or-self", {
                            type: "nodeType",
                            args: ["node", []]
                        }]
                    }]
                }, n]
            }
        }
        ;
        if (X = Q(),
        X !== G && hi === t.length)
            return X;
        throw X !== G && hi < t.length && o({
            type: "end",
            description: "end of input"
        }),
        r(null , gi, mi)
    }
    return t(e, Error),
    {
        SyntaxError: e,
        parse: n
    }
}
(),
define("xpath", function(t) {
    return function() {
        var e;
        return e || t.XPathJS
    }
}
(this)),
function(t, e) {
    "use strict";
    "function" == typeof define && define.amd ? define("merge-xml", [], e) : "object" == typeof exports ? module.exports = e() : t.MergeXML = e()
}
(this, function() {
    return function(t) {
        var e, n, i, o, r, s, a, l, u, c = "_", h = 1, d = 3, p = 8, f = 7, m = this;
        m.Init = function() {
            return m.dom = null ,
            m.nsp = {},
            m.count = 0,
            l[1] = !1,
            e > 0 && (m.error = {
                code: "",
                text: ""
            }),
            e > 0
        }
        ,
        m.AddFile = function(t) {
            var e;
            return e = t && t.target ? t.target.result ? m.AddSource(t.target.result) : E("emf") : E("nof")
        }
        ,
        m.AddSource = function(t) {
            var n, i;
            if ("object" == typeof t)
                i = m.Get(1, t) ? t : !1,
                i && (1 === e && !window.DOMParser || 2 === e && !i.selectSingleNode("/")) && (i = null );
            else
                try {
                    i = g(t)
                } catch (o) {
                    i = !1
                }
            if (null  === i)
                n = E("nos");
            else if (i === !1)
                n = E("inv");
            else if (i === !0)
                m.nsp = w(m.dom.documentElement),
                m.count = 1,
                n = m.dom;
            else if (y(i)) {
                if (b(i, "/"),
                l[1] === !0) {
                    var r = m.dom.createTextNode("\r\n");
                    m.dom.documentElement.appendChild(r)
                }
                m.count++,
                n = m.dom
            } else
                n = !1;
            return n
        }
        ;
        var g = function(t) {
            var o, r;
            return 1 === e ? m.dom ? (r = i.parseFromString(t, "text/xml"),
            o = v(r) ? r : !1) : (m.dom = i.parseFromString(t, "text/xml"),
            o = v(m.dom) ? !0 : !1) : m.dom ? (r = new ActiveXObject(n),
            r.async = !1,
            o = r.loadXML(t) ? r : !1) : (m.dom = new ActiveXObject(n),
            m.dom.async = !1,
            m.dom.setProperty("SelectionLanguage", "XPath"),
            o = m.dom.loadXML(t) ? !0 : !1),
            o
        }
          , v = function(t) {
            return 0 === t.getElementsByTagNameNS(o, "parsererror").length;
        }
          , y = function(t) {
            var n = !0;
            if (t.inputEncoding !== m.dom.inputEncoding || t.xmlEncoding !== m.dom.xmlEncoding)
                n = E("enc");
            else if (t.documentElement.namespaceURI !== m.dom.documentElement.namespaceURI)
                n = E("nse");
            else if (t.documentElement.nodeName !== m.dom.documentElement.nodeName)
                if (l[0]) {
                    if (!l[1]) {
                        var i = m.dom.inputEncoding ? m.dom.inputEncoding : m.dom.xmlEncoding ? m.dom.xmlEncoding : "utf-8"
                          , o = m.dom.xmlVersion ? m.dom.xmlVersion : "1.0"
                          , r = '<?xml version="' + o + '" encoding="' + i + '"?>\r\n<' + l[0] + ">\r\n</" + l[0] + ">"
                          , a = g(r);
                        if (a) {
                            var c = m.dom.documentElement.cloneNode(!0);
                            a.documentElement.appendChild(c),
                            c = a.createTextNode("\r\n"),
                            a.documentElement.appendChild(c),
                            m.dom = a,
                            l[1] = !0
                        } else
                            n = E("jne"),
                            l[1] = null 
                    }
                } else
                    n = E("dif");
            if (n) {
                var h = w(t.documentElement);
                for (var d in h)
                    m.nsp[d] || (m.dom.documentElement.setAttribute("xmlns:" + d, h[d]),
                    m.nsp[d] = h[d]);
                u ? 1 === e ? s = x : T() : s = null 
            }
            return n
        }
          , b = function(t, e) {
            for (var n = 0; n < t.childNodes.length; n++) {
                var i, o = t.childNodes[n], r = _(t.childNodes, o, e, n), s = m.Query(r);
                if (o.nodeType === h) {
                    var l = !0;
                    if (null  === s || s.namespaceURI !== o.namespaceURI)
                        i = o.cloneNode(!0),
                        s = m.Query(e),
                        s.appendChild(i);
                    else if (k(s.getAttribute("stay"), a) !== !1 && (l = !1),
                    l)
                        try {
                            for (var u = 0; u < o.attributes.length; u++)
                                s.setAttribute(o.attributes[u].nodeName, o.attributes[u].nodeValue)
                        } catch (c) {}
                    o.hasChildNodes() && l && b(o, r)
                } else
                    (o.nodeType === d || o.nodeType === p) && (null  === s || s.nodeType !== o.nodeType ? (s = m.Query(e),
                    i = o.nodeType === d ? m.dom.createTextNode(o.nodeValue) : m.dom.createComment(o.nodeValue),
                    s.appendChild(i)) : s.nodeValue = o.nodeValue)
            }
        }
          , _ = function(t, n, i, o) {
            var r, s, a = 0;
            if (n.nodeType === h) {
                for (s = 0; o >= s; s++)
                    (u && t[s].nodeType === n.nodeType && t[s].nodeName === n.nodeName || !u && t[s].nodeType !== f) && a++;
                if (u) {
                    var l = !1
                      , g = w(n);
                    for (var v in g)
                        v !== c && (m.nsp[v] = g[v],
                        l = 2 === e);
                    l && T(),
                    r = n.prefix ? n.prefix + ":" : m.nsp[c] ? c + ":" : "",
                    r += n.localName ? n.localName : n.baseName
                } else
                    r = "node()"
            } else if (n.nodeType === d || n.nodeType === p) {
                for (s = 0; o >= s; s++)
                    t[s].nodeType === n.nodeType && a++;
                r = n.nodeType === d ? "text()" : "comment()"
            } else
                r = i;
            return a && (r = i + ("/" === i.slice(-1) ? "" : "/") + r + "[" + a + "]"),
            r
        }
          , w = function(t) {
            for (var e = {}, n = t.attributes, i = 0; i < n.length; ++i) {
                var o = n[i].name.split(":");
                if ("xmlns" === o[0]) {
                    var r = o[1] ? o[1] : c;
                    e[r] = n[i].value
                }
            }
            return e
        }
        ;
        m.Query = function(t) {
            var n;
            l[1] && (t = "/" + m.dom.documentElement.nodeName + ("/" === t ? "" : t));
            try {
                1 === e ? (n = r.evaluate(t, m.dom, s, XPathResult.FIRST_ORDERED_NODE_TYPE, null ),
                n = n.singleNodeValue) : n = m.dom.selectSingleNode(t)
            } catch (i) {
                n = null 
            }
            return n
        }
        ;
        var x = function(t) {
            return m.nsp[t] || null 
        }
          , T = function() {
            var t = "";
            for (var e in m.nsp)
                t += " xmlns:" + e + "='" + m.nsp[e] + "'";
            t && m.dom.setProperty("SelectionNamespaces", t.substr(1))
        }
          , k = function(t, e) {
            var n = !1;
            for (var i in t)
                if (t[i] === e) {
                    n = i;
                    break
                }
            return n
        }
        ;
        m.Get = function(t, e) {
            var n;
            if (t && !e && (e = m.dom),
            t)
                if (e)
                    if (e.xml)
                        n = e.xml;
                    else
                        try {
                            n = (new XMLSerializer).serializeToString(e)
                        } catch (i) {
                            n = null 
                        }
                else
                    n = "";
            else
                n = m.dom;
            if (n && 2 === t) {
                if (l[1]) {
                    var o = n.indexOf("<" + l[0]);
                    n = n.substr(0, o) + "\r\n" + n.substr(o)
                }
                n = n.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/ |\t/g, "&nbsp;"),
                n = n.replace(/(\r\n|\n|\r)/g, "<br>")
            }
            return n
        }
        ;
        var E = function(t) {
            var e = {
                nod: "XML DOM is not supported in this browser",
                nox: "xPath is not supported in this browser",
                nos: "Incompatible source object",
                nof: "File not found",
                emf: "File is empty",
                inv: "Invalid XML source",
                enc: "Different encoding",
                dif: "Different root nodes",
                jne: "Invalid join parameter",
                nse: "Namespace incompatibility",
                und: "Undefined error"
            };
            return m.error.code = e[t] ? t : "und",
            m.error.text = e[m.error.code],
            !1
        }
          , D = function() {
            for (var t, e = !1, s = ["MSXML2.DOMDocument.6.0", "MSXML2.DOMDocument.3.0", "MSXML2.DOMDocument", "Microsoft.XmlDom"], a = s.length, l = 0; a > l; l++)
                try {
                    var u = new ActiveXObject(s[l]);
                    if (u.async = !1,
                    e = !0,
                    u.loadXML("<x></x>") && u.selectSingleNode("/"))
                        break
                } catch (c) {}
            if (e)
                a > l ? (n = s[l],
                t = 2) : t = "nox";
            else if (window.DOMParser)
                if (window.XPathEvaluator) {
                    i = new DOMParser;
                    var c = i.parseFromString("Invalid", "text/xml");
                    o = c.getElementsByTagName("parsererror")[0].namespaceURI,
                    r = new XPathEvaluator,
                    t = 1
                } else
                    t = "nox";
            else
                t = "nod";
            return t
        }
        ;
        "object" != typeof t && (t = {}),
        a = "undefined" == typeof t.stay ? ["all"] : t.stay ? "object" == typeof t.stay && t.stay instanceof Array ? t.stay : [t.stay] : [],
        l = "undefined" == typeof t.join ? ["root"] : [t.join ? String(t.join) : !1],
        u = "undefined" == typeof t.updn ? !0 : t.updn,
        e = D(),
        "string" == typeof e && (m.error = {},
        E(e),
        e = 0),
        m.Init()
    }
}
),
define("enketo-js/utils", [], function() {
    function t(t, e) {
        var n, i, o, r, s = new RegExp(e + "\\s*\\(","g"), a = [];
        if (!t || !e)
            return a;
        for (; null  !== (i = s.exec(t)); ) {
            for (o = 1,
            r = i.index,
            n = s.lastIndex; 0 !== o; )
                n++,
                "(" === t[n] ? o++ : ")" === t[n] && o--;
            a.push([t.substring(r, n + 1), t.substring(s.lastIndex, n).trim()])
        }
        return a
    }
    return {
        parseFunctionFromExpression: t
    }
}
),
define("enketo-js/plugins", ["jquery"], function(t) {
    t.fn.clearInputs = function(e) {
        return e = e || "edit",
        this.each(function() {
            t(this).find(".file-preview").remove(),
            t(this).find("input, select, textarea").not(".ignore").each(function() {
                var n = t(this)
                  , i = n.attr("type");
                switch ("SELECT" === n.prop("nodeName").toUpperCase() && (i = "select"),
                "TEXTAREA" === n.prop("nodeName").toUpperCase() && (i = "textarea"),
                i) {
                case "date":
                case "datetime":
                case "time":
                case "number":
                case "search":
                case "color":
                case "range":
                case "url":
                case "email":
                case "password":
                case "text":
                case "file":
                    n.removeAttr("data-previous-file-name data-loaded-file-name");
                case "hidden":
                case "textarea":
                    "" !== n.val() && n.val("").trigger(e);
                    break;
                case "radio":
                case "checkbox":
                    n.prop("checked") && (n.prop("checked", !1),
                    n.trigger(e));
                    break;
                case "select":
                    n[0].selectedIndex >= 0 && (n[0].selectedIndex = -1,
                    n.trigger(e));
                    break;
                default:
                    console.error("Unrecognized input type found when trying to reset", this)
                }
            }
            )
        }
        )
    }
    ,
    t.fn.markdownToHtml = function() {
        return this.each(function() {
            var e, n = t("<div/>");
            t(this).children(":not(input, select, textarea)").each(function(e) {
                var i = "$$$" + e;
                t(this).clone().markdownToHtml().appendTo(n),
                t(this).replaceWith(i)
            }
            ),
            e = t(this).html(),
            e = e.replace(/__([^\s][^_]*[^\s])__/gm, "<strong>$1</strong>"),
            e = e.replace(/\*\*([^\s][^\*]*[^\s])\*\*/gm, "<strong>$1</strong>"),
            e = e.replace(/_([^\s][^_]*[^\s])_/gm, "<em>$1</em>"),
            e = e.replace(/\*([^\s][^\*]*[^\s])\*/gm, "<em>$1</em>"),
            e = e.replace(/\[([^\]]*)\]\(([^\)]+)\)/gm, '<a href="$2" target="_blank">$1</a>'),
            e = e.replace(/\n/gm, "<br />"),
            n.children().each(function(n) {
                var i = new RegExp("\\$\\$\\$" + n);
                e = e.replace(i, t(this)[0].outerHTML)
            }
            ),
            t(this).text("").append(e)
        }
        )
    }
    ,
    t.fn.reverse = [].reverse
}
),
function(t) {
    "function" == typeof define && define.amd ? define("jquery.xpath", ["jquery"], t) : t(jQuery)
}
(function(t) {
    t.fn.getXPath = function(t, e) {
        var n, i = [], o = "", r = this.first(), s = r.prop("nodeName"), a = r.parent(), l = a.prop("nodeName");
        for (t = t || "#document",
        e = e || !1,
        e && (n = r.siblings(s).addBack(),
        o = n.length > 1 ? "[" + (n.index(r) + 1) + "]" : ""),
        i.push(s + o); 1 == a.length && l !== t && "#document" !== l; )
            e && (n = a.siblings(l).addBack(),
            o = n.length > 1 ? "[" + (n.index(a) + 1) + "]" : ""),
            i.push(l + o),
            a = a.parent(),
            l = a.prop("nodeName");
        return "/" + i.reverse().join("/")
    }
    ,
    t.fn.xfind = function(t) {
        var e, n, i;
        if (t = t.replace(/\/\//g, " "),
        t = t.replace(/^\//, ""),
        t = t.replace(/\/\.$/, ""),
        t = t.replace(/\//g, ">"),
        t = t.replace(/\[([^@].*?)\]/g, function(t, e) {
            return ":has(" + e + ")"
        }
        ),
        t.indexOf(">..") >= 0) {
            for (e = t.split(/>\.\.>?/g),
            n = jQuery(e[0], this),
            i = 1; i < e.length; i++)
                n = n.parent(e[i]);
            return n.get()
        }
        return t = t.replace(/\./gi, "\\."),
        this.find(t)
    }
}
),
define("enketo-js/FormModel", ["xpath", "merge-xml", "enketo-js/utils", "jquery", "enketo-js/plugins", "enketo-js/extend", "jquery.xpath"], function(t, e, n, i) {
    "use strict";
    var o, r, s;
    return o = function(t, e) {
        "string" == typeof t && (t = {
            modelStr: t
        }),
        t.external = t.external || [],
        t.submitted = "undefined" != typeof t.submitted ? t.submitted : !0,
        e = e || {},
        e.full = "undefined" != typeof e.full ? e.full : !0,
        this.convertedExpressions = {},
        this.templates = {},
        this.loadErrors = [],
        this.INSTANCE = /instance\([\'|\"]([^\/:\s]+)[\'|\"]\)/g,
        this.OPENROSA = /(decimal-date-time\(|pow\(|indexed-repeat\(|format-date\(|coalesce\(|join\(|max\(|min\(|random\(|substr\(|int\(|uuid\(|regex\(|now\(|today\(|date\(|if\(|boolean-from-string\(|checklist\(|selected\(|selected-at\(|round\(|area\(|position\([^\)])/,
        this.data = t,
        this.options = e
    }
    ,
    o.prototype.init = function() {
        var t, e, n, o = this;
        this.data.modelStr = this.data.modelStr.replace(/\s(xmlns\=("|')[^\s\>]+("|'))/g, " data-$1"),
        this.options.full || (this.data.modelStr = this.data.modelStr.replace(/^(<model\s*><instance((?!<instance).)+<\/instance\s*>\s*)(<instance.+<\/instance\s*>)*/, "$1"));
        try {
            t = "model",
            this.xml = i.parseXML(this.data.modelStr),
            this.data.external.forEach(function(r) {
                t = 'instance "' + r.id + '"' || "instance unknown",
                e = o.xml.getElementById(r.id),
                n = e.querySelector("root"),
                n && e.removeChild(n),
                e.appendChild(i.parseXML(r.xmlStr).firstChild)
            }
            )
        } catch (r) {
            console.error(r),
            this.loadErrors.push("Error trying to parse XML " + t + ". " + r.message)
        }
        if (this.xml) {
            this.$ = i(this.xml),
            this.hasInstance = !!this.xml.querySelector("model > instance") || !1,
            this.rootElement = this.xml.querySelector("instance > *") || this.xml.documentElement,
            this.$.find("model > instance[src]:empty").each(function(t, e) {
                o.loadErrors.push('External instance "' + i(e).attr("id") + '" is empty.')
            }
            ),
            this.trimValues(),
            this.cloneAllTemplates(),
            this.extractTemplates();
            try {
                t = "record",
                this.data.instanceStr && (this.mergeXml(this.data.instanceStr),
                this.data.submitted && this.deprecateId())
            } catch (r) {
                console.error(r),
                this.loadErrors.push("Error trying to parse XML " + t + ". " + r.message)
            }
        }
        return this.loadErrors
    }
    ,
    o.prototype.node = function(t, e, n) {
        return new r(t,e,n,this)
    }
    ,
    o.prototype.mergeXml = function(t) {
        var n, o, r, s, a = this;
        if (t) {
            if (r = this.xml.querySelector("instance"),
            s = this.xml.querySelector("instance > *"),
            !s)
                throw new Error("Model is corrupt. It does not contain a childnode of instance");
            if (i(i.parseXML(t)).find("*").each(function() {
                var t, e = i(this), n = e.prop("nodeName");
                try {
                    var o = e.siblings(n);
                    o.length > 0 && 0 === e.prev(n).length && (t = e.getXPath("instance"),
                    o.each(function(e) {
                        a.cloneRepeat(t, e, !0)
                    }
                    ))
                } catch (r) {
                    console.error("Ignored error:", r)
                }
            }
            ),
            o = new e({
                join: !1
            }),
            n = (new XMLSerializer).serializeToString(s),
            o.AddSource(n),
            o.AddSource(t),
            o.error.code)
                throw new Error(o.error.text);
            this.xml.querySelector("instance").removeChild(s),
            s = this.xml.adoptNode(o.Get(0).documentElement, !0),
            r.appendChild(s),
            this.rootElement = s
        }
    }
    ,
    o.prototype.trimValues = function() {
        this.node(null , null , {
            noEmpty: !0
        }).get().each(function() {
            this.textContent = this.textContent.trim()
        }
        )
    }
    ,
    o.prototype.deprecateId = function() {
        var t, e, n, o, r;
        if (t = this.xml.querySelectorAll("* > meta > instanceID"),
        1 !== t.length)
            throw new Error("Invalid primary instance. Found " + t.length + " instanceID nodes but expected 1.");
        if (e = t[0],
        n = this.xml.querySelectorAll("* > meta > deprecatedID"),
        n.length > 1)
            throw new Error("Invalid primary instance. Found " + n.length + " deprecatedID nodes but expected 1.");
        o = n[0],
        o || (o = i.parseXML("<deprecatedID/>").documentElement,
        this.xml.adoptNode(o),
        r = this.xml.querySelector("* > meta"),
        r.appendChild(o)),
        o.textContent = e.textContent,
        e.textContent = ""
    }
    ,
    o.prototype.bindJsEvaluator = function() {
        var e = new t.XPathEvaluator;
        t.bindDomLevel3XPath(this.xml, {
            window: {
                JsXPathException: !0,
                JsXPathExpression: !0,
                JsXPathNSResolver: !0,
                JsXPathResult: !0,
                JsXPathNamespace: !0
            },
            document: {
                jsCreateExpression: function() {
                    return e.createExpression.apply(e, arguments)
                },
                jsCreateNSResolver: function() {
                    return e.createNSResolver.apply(e, arguments)
                },
                jsEvaluate: function() {
                    return e.evaluate.apply(e, arguments)
                }
            }
        })
    }
    ,
    o.prototype.getInstanceID = function() {
        return this.node("/*/meta/instanceID").getVal()[0]
    }
    ,
    o.prototype.getInstanceName = function() {
        return this.node("/*/meta/instanceName").getVal()[0]
    }
    ,
    o.prototype.cloneRepeat = function(t, e, n) {
        var o, r, s, a, l = this.templates[t] || this.node(t, 0).get(), u = this;
        r = l.prop("nodeName"),
        o = this.node(t, e).get(),
        l[0] && 1 === o.length && 0 === o.nextAll(r).length ? (a = l.clone().insertAfter(o),
        n ? a.find("*").text("") : (s = [l.prop("nodeName")],
        l.find("*").each(function() {
            s.push(i(this).prop("nodeName"))
        }
        ),
        this.$.trigger("dataupdate", {
            nodes: s,
            repeatPath: t,
            repeatIndex: u.node(t, e).determineIndex(a)
        }))) : 0 === o.nextAll(r).length && console.error("Could not find template node and/or node to insert the clone after")
    }
    ,
    o.prototype.extractTemplates = function() {
        var t = this;
        this.evaluate("/model/instance[1]/*//*[@template] | /model/instance[1]/*//*[@jr:template]", "nodes", null , null , !0).reverse().forEach(function(e) {
            var n = i(e);
            t.templates[n.getXPath("instance")] = n.removeAttr("template").removeAttr("jr:template").remove()
        }
        )
    }
    ,
    o.prototype.getTemplatePath = function(t) {
        var e, n = this;
        return t.split("/").some(function(t, i, o) {
            return e = o.slice(0, o.length - i).join("/"),
            n.templates[e]
        }
        ),
        e || void 0
    }
    ,
    o.prototype.cloneAllTemplates = function() {
        var t = this;
        this.evaluate("/model/instance[1]/*//*[@template] | /model/instance[1]/*//*[@jr:template]", "nodes", null , null , !0).forEach(function(e) {
            var n = e.nodeName
              , o = i(e).getXPath("instance")
              , r = t.evaluate("ancestor::" + n + "[@template] | ancestor::" + n + "[@jr:template]", "nodes", o, 0, !0);
            0 === r.length && 0 === i(e).siblings(n).length && i(e).clone().insertAfter(i(e)).find("*").addBack().removeAttr("template").removeAttr("jr:template")
        }
        )
    }
    ,
    o.prototype.get = function() {
        return this.$ || null 
    }
    ,
    o.prototype.getXML = function() {
        return this.xml || null 
    }
    ,
    o.prototype.getStr = function() {
        var t = (new XMLSerializer).serializeToString(this.xml.querySelector("instance > *") || this.xml.documentElement, "text/xml");
        return t = t.replace(/\t/g, ""),
        t = t.replace(/\s(data-)(xmlns\=("|')[^\s\>]+("|'))/g, " $2")
    }
    ,
    o.prototype.makeBugCompliant = function(t, e, n) {
        var i, o, r, s, a, l, u, c;
        for (s = this.node(e, n).get(),
        c = s.parents().add(s),
        i = c.length - 1; i >= 0; i--)
            a = c.eq(i),
            l = a.prop("nodeName").replace(/\./g, "\\."),
            u = a.siblings(l).not("[template]"),
            "instance" !== l.toLowerCase() && "model" !== l.toLowerCase() && u.length > 0 && (o = a.getXPath("instance"),
            r = u.add(a).index(a),
            new RegExp(o + "\\[").test(t) || (t = t.replace(new RegExp(o,"g"), o + "[" + (r + 1) + "]")));
        return t
    }
    ,
    o.prototype.nsResolver = {
        lookupNamespaceURI: function(t) {
            var e = {
                jr: "http://openrosa.org/javarosa",
                xsd: "http://www.w3.org/2001/XMLSchema",
                orx: "http://openrosa.org/xforms/",
                cc: "http://commcarehq.org/xforms"
            };
            return e[t] || null 
        }
    },
    o.prototype.shiftRoot = function(t) {
        return this.hasInstance && (t = t.replace(/^(\/(?!model\/)[^\/][^\/\s]*\/)/g, "/model/instance[1]$1"),
        t = t.replace(/([^a-zA-Z0-9\.\]\)\/\*_-])(\/(?!model\/)[^\/][^\/\s]*\/)/g, "$1/model/instance[1]$2")),
        t
    }
    ,
    o.prototype.replaceInstanceFn = function(t) {
        return t.replace(this.INSTANCE, function(t, e) {
            return '/model/instance[@id="' + e + '"]'
        }
        )
    }
    ,
    o.prototype.replaceCurrentFn = function(t) {
        return t = t.replace(/current\(\)\/\./g, "."),
        t = t.replace(/current\(\)/g, "")
    }
    ,
    o.prototype.replaceIndexedRepeatFn = function(t, e, i) {
        var o = this
          , r = n.parseFunctionFromExpression(t, "indexed-repeat");
        return r.length ? (r.forEach(function(n) {
            var r, s, a, l = n[1].split(",");
            if (l.length % 2 !== 1)
                return console.error("indexed repeat with incorrect number of parameters found", n[0]),
                '"Error with indexed-repeat parameters"';
            for (l = l.map(function(t) {
                return t.trim()
            }
            ),
            s = l[0],
            r = l.length - 1; r > 1; r -= 2)
                a = isNaN(l[r]) ? o.evaluate(l[r], "number", e, i, !0) : l[r],
                s = s.replace(l[r - 1], l[r - 1] + "[position() = " + a + "]");
            t = t.replace(n[0], s)
        }
        ),
        t) : t
    }
    ,
    o.prototype.evaluate = function(t, e, n, o, r) {
        var s, a, l, u, c, h, d, p, f, m, g, v, y;
        v = t,
        r = r || !1,
        e = e || "any",
        o = o || 0,
        u = this.xml,
        m = null ,
        n ? (p = this.node(n).get(),
        m = p.length,
        l = p.eq(o)[0]) : l = this.rootElement,
        g = [t, n, o, m].join("|"),
        t = this.replaceIndexedRepeatFn(t, n, o),
        y = v === t,
        this.convertedExpressions[g] ? t = this.convertedExpressions[g] : (t = t,
        t = t.trim(),
        t = this.shiftRoot(t),
        t = this.replaceInstanceFn(t),
        t = this.replaceCurrentFn(t),
        m && m > 1 && (t = this.makeBugCompliant(t, n, o)),
        t = t.replace(/&lt;/g, "<"),
        t = t.replace(/&gt;/g, ">"),
        t = t.replace(/&quot;/g, '"'),
        y && (this.convertedExpressions[g] = t)),
        h = {
            0: ["any", "ANY_TYPE"],
            1: ["number", "NUMBER_TYPE", "numberValue"],
            2: ["string", "STRING_TYPE", "stringValue"],
            3: ["boolean", "BOOLEAN_TYPE", "booleanValue"],
            7: ["nodes", "ORDERED_NODE_SNAPSHOT_TYPE"],
            9: ["node", "FIRST_ORDERED_NODE_TYPE", "singleNodeValue"]
        };
        for (c in h)
            if (h.hasOwnProperty(c)) {
                if (c = Number(c),
                h[c][0] === e)
                    break;
                c = 0
            }
        if (r && "undefined" != typeof u.evaluate && !this.OPENROSA.test(t))
            try {
                d = u.evaluate(t, l, this.nsResolver, c, null )
            } catch (b) {
                console.log("%cWell native XPath evaluation did not work... No worries, worth a shot, the expression probably contained unknown OpenRosa functions or errors:", "color:orange", t)
            }
        if (!d)
            try {
                "undefined" == typeof u.jsEvaluate && this.bindJsEvaluator(),
                d = u.jsEvaluate(t, l, this.nsResolver, c, null )
            } catch (b) {
                return a = "Error occurred trying to evaluate: " + t + ", message: " + b.message,
                console.error(a),
                i(document).trigger("xpatherror", a),
                this.loadErrors.push(a),
                null 
            }
        if (d) {
            if (0 === c) {
                for (c in h)
                    if (h.hasOwnProperty(c) && (c = Number(c),
                    c === Number(d.resultType) && c > 0 && 4 > c)) {
                        f = d[h[c][2]];
                        break
                    }
                console.error("Expression: " + t + " did not return any boolean, string or number value as expected")
            } else if (7 === c)
                for (f = [],
                s = 0; s < d.snapshotLength; s++)
                    f.push(d.snapshotItem(s));
            else
                f = d[h[c][2]];
            return f
        }
    }
    ,
    r = function(t, e, n, i) {
        var o = i.hasInstance ? "/model/instance[1]//*" : "//*";
        this.model = i,
        this.originalSelector = t,
        this.selector = "string" == typeof t && t.length > 0 ? t : o,
        n = "undefined" != typeof n && null  !== n ? n : {},
        this.filter = n,
        this.filter.onlyLeaf = "undefined" != typeof n.onlyLeaf ? n.onlyLeaf : !1,
        this.filter.noEmpty = "undefined" != typeof n.noEmpty ? n.noEmpty : !1,
        this.index = e
    }
    ,
    r.prototype.get = function() {
        var t, e;
        return this.nodes || (this.nodes = this.model.evaluate(this.selector, "nodes", null , null , !0)),
        t = this.filter.noEmpty === !0 ? i(this.nodes).filter(function() {
            var t = i(this);
            return e = t.text(),
            0 === t.children().length && e.trim().length > 0
        }
        ) : this.filter.onlyLeaf === !0 ? i(this.nodes).filter(function() {
            return 0 === i(this).children().length
        }
        ) : i(this.nodes),
        "undefined" != typeof this.index && null  !== this.index ? t.eq(this.index) : t
    }
    ,
    r.prototype.setIndex = function(t) {
        this.index = t
    }
    ,
    r.prototype.setVal = function(t, e, n) {
        var o, r, s, a, l;
        return r = this.getVal()[0],
        s = "undefined" != typeof t && null  !== t ? i.isArray(t) ? t.join(" ") : t.toString() : "",
        s = this.convert(s, n),
        o = this.get(),
        1 === o.length && i.trim(s.toString()) !== i.trim(r.toString()) ? (o.text(s),
        a = this.validate(e, n),
        l = this.getClosestRepeat(),
        l.nodes = [o.prop("nodeName")],
        this.model.$.trigger("dataupdate", l),
        "binary" === n && (s.length > 0 ? o.attr("type", "file") : o.removeAttr("type")),
        a) : o.length > 1 ? (console.error("nodeset.setVal expected nodeset with one node, but received multiple"),
        null ) : 0 === o.length ? (console.error("Data node: " + this.selector + " with null-based index: " + this.index + " not found. Ignored."),
        null ) : null 
    }
    ,
    r.prototype.getVal = function() {
        var t = [];
        return this.get().each(function() {
            t.push(i(this).text())
        }
        ),
        t
    }
    ,
    r.prototype.determineIndex = function(t) {
        var e, n, o;
        return t = t || this.get(),
        1 === t.length ? (e = t.prop("nodeName"),
        n = t.getXPath("instance"),
        o = this.model.$.find(e).filter(function() {
            return n === i(this).getXPath("instance")
        }
        ),
        1 === o.length ? null  : o.index(t)) : (console.error("no node, or multiple nodes, provided to nodeset.determineIndex"),
        -1)
    }
    ,
    r.prototype.getClosestRepeat = function() {
        for (var t = this.get(), e = t.prop("nodeName"); 0 === t.siblings(e).length && "instance" !== e; )
            t = t.parent(),
            e = t.prop("nodeName");
        return "instance" === e ? {} : {
            repeatPath: t.getXPath("instance"),
            repeatIndex: this.determineIndex(t)
        }
    }
    ,
    r.prototype.remove = function() {
        var t, e, n, o, r;
        t = this.get(),
        t.length > 0 ? (e = [t.prop("nodeName")],
        t.find("*").each(function() {
            n = i(this),
            e.push(n.prop("nodeName"))
        }
        ),
        o = t.getXPath("instance"),
        r = this.determineIndex(t),
        t.remove(),
        this.nodes = null ,
        this.model.$.trigger("dataupdate", {
            updatedNodes: e,
            repeatPath: o,
            repeatIndex: r
        })) : console.error("could not find node " + this.selector + " with index " + this.index + " to remove ")
    }
    ,
    r.prototype.convert = function(t, e) {
        return "" === t.toString() ? t : "undefined" != typeof e && null  !== e && "undefined" != typeof s[e.toLowerCase()] && "undefined" != typeof s[e.toLowerCase()].convert ? s[e.toLowerCase()].convert(t) : t
    }
    ,
    r.prototype.validate = function(t, e) {
        var n, i, o;
        return e && "undefined" != typeof s[e.toLowerCase()] || (e = "string"),
        t || "string" !== e && "select" !== e && "select1" !== e && "binary" !== e ? (o = this.getVal()[0],
        "" === o.toString() ? !0 : (n = s[e.toLowerCase()].validate(o),
        i = "undefined" != typeof t && null  !== t && t.length > 0 ? this.model.evaluate(t, "boolean", this.originalSelector, this.index) : !0,
        n && i)) : !0
    }
    ,
    s = {
        string: {
            validate: function() {
                return !0
            }
        },
        select: {
            validate: function() {
                return !0
            }
        },
        select1: {
            validate: function() {
                return !0
            }
        },
        decimal: {
            validate: function(t) {
                return isNaN(t - 0) || null  === t ? !1 : !0
            },
            convert: function(t) {
                return "NaN" === t ? "" : t
            }
        },
        "int": {
            validate: function(t) {
                return isNaN(t - 0) || null  === t || Math.round(t).toString() !== t.toString() ? !1 : !0
            },
            convert: function(t) {
                return "NaN" === t ? "" : t
            }
        },
        date: {
            validate: function(t) {
                var e = /([0-9]{4})([\-]|[\/])([0-9]{2})([\-]|[\/])([0-9]{2})/
                  , n = e.exec(t);
                return n && 6 === n.length ? "Invalid Date" !== new Date(Number(n[1]),Number(n[3]) - 1,Number(n[5])).toString() : !1
            },
            convert: function(t) {
                var e = /([0-9]{4})([\-]|[\/])([0-9]{2})([\-]|[\/])([0-9]{2})/
                  , n = e.exec(t)
                  , i = new Date(t);
                return "Invalid Date" === new Date(t).toString() && n && Number(n[1]) > 0 && Number(n[3]) >= 0 && Number(n[3]) < 12 && Number(n[5]) < 32 && (i = new Date(Number(n[1]),Number(n[3]) - 1,Number(n[5]))),
                i.getUTCFullYear().toString().pad(4) + "-" + (i.getUTCMonth() + 1).toString().pad(2) + "-" + i.getUTCDate().toString().pad(2)
            }
        },
        datetime: {
            validate: function(t) {
                return "Invalid Date" !== new Date(t.toString()).toString() || "Invalid Date" !== new Date(this.convert(t.toString())).toString()
            },
            convert: function(t) {
                var e, n = /([0-9]{4}\-[0-9]{2}\-[0-9]{2})([T]|[\s])([0-9]){2}:([0-9]){2}([0-9:.]*)(\+|\-)([0-9]{2}):([0-9]{2})$/, i = /([0-9]{4}\-[0-9]{2}\-[0-9]{2})([T]|[\s])([0-9]){2}:([0-9]){2}([0-9:.]*)(\+|\-)([0-9]{2})$/;
                return "Invalid Date" !== new Date(t).toString() && n.test(t) ? t : "Invalid Date" === new Date(t).toString() && i.test(t) ? t + ":00" : (e = new Date(t),
                "Invalid Date" !== e.toString() ? e.toISOLocalString() : e.toString())
            }
        },
        time: {
            validate: function(t) {
                var e = new Date
                  , n = t.toString().split(":");
                return n.length < 2 ? !1 : (n[2] = n[2] ? Number(n[2].toString().split(".")[0]) : 0,
                n[0] < 24 && n[0] >= 0 && n[1] < 60 && n[1] >= 0 && n[2] < 60 && n[2] >= 0 && "Invalid Date" !== e.toString())
            },
            convert: function(t) {
                var e = t.toString().split(":");
                return i.each(e, function(t, n) {
                    e[t] = n.toString().pad(2)
                }
                ),
                e.join(":")
            }
        },
        barcode: {
            validate: function() {
                return !0
            }
        },
        geopoint: {
            validate: function(t) {
                var e = t.toString().trim().split(" ");
                return "" !== e[0] && e[0] >= -90 && e[0] <= 90 && "" !== e[1] && e[1] >= -180 && e[1] <= 180 && ("undefined" == typeof e[2] || !isNaN(e[2])) && ("undefined" == typeof e[3] || !isNaN(e[3]) && e[3] >= 0)
            },
            convert: function(t) {
                return i.trim(t.toString())
            }
        },
        geotrace: {
            validate: function(t) {
                var e = t.toString().split(";");
                return e.length >= 2 && e.every(function(t) {
                    return s.geopoint.validate(t)
                }
                )
            },
            convert: function(t) {
                return t.toString().trim()
            }
        },
        geoshape: {
            validate: function(t) {
                console.debug("validating geoshape, this: ", this);
                var e = t.toString().split(";");
                return e.length >= 4 && e[0] === e[e.length - 1] && e.every(function(t) {
                    return s.geopoint.validate(t)
                }
                )
            },
            convert: function(t) {
                return t.toString().trim()
            }
        },
        binary: {
            validate: function() {
                return !0
            }
        }
    },
    o
}
),
define("text", ["module"], function(t) {
    "use strict";
    var e, n, i, o, r, s = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP", "Msxml2.XMLHTTP.4.0"], a = /^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im, l = /<body[^>]*>\s*([\s\S]+)\s*<\/body>/im, u = "undefined" != typeof location && location.href, c = u && location.protocol && location.protocol.replace(/\:/, ""), h = u && location.hostname, d = u && (location.port || void 0), p = {}, f = t.config && t.config() || {};
    return e = {
        version: "2.0.10",
        strip: function(t) {
            if (t) {
                t = t.replace(a, "");
                var e = t.match(l);
                e && (t = e[1])
            } else
                t = "";
            return t
        },
        jsEscape: function(t) {
            return t.replace(/(['\\])/g, "\\$1").replace(/[\f]/g, "\\f").replace(/[\b]/g, "\\b").replace(/[\n]/g, "\\n").replace(/[\t]/g, "\\t").replace(/[\r]/g, "\\r").replace(/[\u2028]/g, "\\u2028").replace(/[\u2029]/g, "\\u2029")
        },
        createXhr: f.createXhr || function() {
            var t, e, n;
            if ("undefined" != typeof XMLHttpRequest)
                return new XMLHttpRequest;
            if ("undefined" != typeof ActiveXObject)
                for (e = 0; 3 > e; e += 1) {
                    n = s[e];
                    try {
                        t = new ActiveXObject(n)
                    } catch (i) {}
                    if (t) {
                        s = [n];
                        break
                    }
                }
            return t
        }
        ,
        parseName: function(t) {
            var e, n, i, o = !1, r = t.indexOf("."), s = 0 === t.indexOf("./") || 0 === t.indexOf("../");
            return -1 !== r && (!s || r > 1) ? (e = t.substring(0, r),
            n = t.substring(r + 1, t.length)) : e = t,
            i = n || e,
            r = i.indexOf("!"),
            -1 !== r && (o = "strip" === i.substring(r + 1),
            i = i.substring(0, r),
            n ? n = i : e = i),
            {
                moduleName: e,
                ext: n,
                strip: o
            }
        },
        xdRegExp: /^((\w+)\:)?\/\/([^\/\\]+)/,
        useXhr: function(t, n, i, o) {
            var r, s, a, l = e.xdRegExp.exec(t);
            return l ? (r = l[2],
            s = l[3],
            s = s.split(":"),
            a = s[1],
            s = s[0],
            !(r && r !== n || s && s.toLowerCase() !== i.toLowerCase() || (a || s) && a !== o)) : !0
        },
        finishLoad: function(t, n, i, o) {
            i = n ? e.strip(i) : i,
            f.isBuild && (p[t] = i),
            o(i)
        },
        load: function(t, n, i, o) {
            if (o.isBuild && !o.inlineText)
                return void i();
            f.isBuild = o.isBuild;
            var r = e.parseName(t)
              , s = r.moduleName + (r.ext ? "." + r.ext : "")
              , a = n.toUrl(s)
              , l = f.useXhr || e.useXhr;
            return 0 === a.indexOf("empty:") ? void i() : void (!u || l(a, c, h, d) ? e.get(a, function(n) {
                e.finishLoad(t, r.strip, n, i)
            }
            , function(t) {
                i.error && i.error(t)
            }
            ) : n([s], function(t) {
                e.finishLoad(r.moduleName + "." + r.ext, r.strip, t, i)
            }
            ))
        },
        write: function(t, n, i, o) {
            if (p.hasOwnProperty(n)) {
                var r = e.jsEscape(p[n]);
                i.asModule(t + "!" + n, "define(function () { return '" + r + "';});\n")
            }
        },
        writeFile: function(t, n, i, o, r) {
            var s = e.parseName(n)
              , a = s.ext ? "." + s.ext : ""
              , l = s.moduleName + a
              , u = i.toUrl(s.moduleName + a) + ".js";
            e.load(l, i, function(n) {
                var i = function(t) {
                    return o(u, t)
                }
                ;
                i.asModule = function(t, e) {
                    return o.asModule(t, u, e)
                }
                ,
                e.write(t, l, i, r)
            }
            , r)
        }
    },
    "node" === f.env || !f.env && "undefined" != typeof process && process.versions && process.versions.node && !process.versions["node-webkit"] ? (n = require.nodeRequire("fs"),
    e.get = function(t, e, i) {
        try {
            var o = n.readFileSync(t, "utf8");
            0 === o.indexOf("\ufeff") && (o = o.substring(1)),
            e(o)
        } catch (r) {
            i(r)
        }
    }
    ) : "xhr" === f.env || !f.env && e.createXhr() ? e.get = function(t, n, i, o) {
        var r, s = e.createXhr();
        if (s.open("GET", t, !0),
        o)
            for (r in o)
                o.hasOwnProperty(r) && s.setRequestHeader(r.toLowerCase(), o[r]);
        f.onXhr && f.onXhr(s, t),
        s.onreadystatechange = function(e) {
            var o, r;
            4 === s.readyState && (o = s.status,
            o > 399 && 600 > o ? (r = new Error(t + " HTTP status: " + o),
            r.xhr = s,
            i(r)) : n(s.responseText),
            f.onXhrComplete && f.onXhrComplete(s, t))
        }
        ,
        s.send(null )
    }
     : "rhino" === f.env || !f.env && "undefined" != typeof Packages && "undefined" != typeof java ? e.get = function(t, e) {
        var n, i, o = "utf-8", r = new java.io.File(t), s = java.lang.System.getProperty("line.separator"), a = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),o)), l = "";
        try {
            for (n = new java.lang.StringBuffer,
            i = a.readLine(),
            i && i.length() && 65279 === i.charAt(0) && (i = i.substring(1)),
            null  !== i && n.append(i); null  !== (i = a.readLine()); )
                n.append(s),
                n.append(i);
            l = String(n.toString())
        } finally {
            a.close()
        }
        e(l)
    }
     : ("xpconnect" === f.env || !f.env && "undefined" != typeof Components && Components.classes && Components.interfaces) && (i = Components.classes,
    o = Components.interfaces,
    Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),
    r = "@mozilla.org/windows-registry-key;1" in i,
    e.get = function(t, e) {
        var n, s, a, l = {};
        r && (t = t.replace(/\//g, "\\")),
        a = new FileUtils.File(t);
        try {
            n = i["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),
            n.init(a, 1, 0, !1),
            s = i["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),
            s.init(n, "utf-8", n.available(), o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),
            s.readString(n.available(), l),
            s.close(),
            n.close(),
            e(l.value)
        } catch (u) {
            throw new Error((a && a.path || "") + ": " + u)
        }
    }
    ),
    e
}
),
define("text!enketo-config", [], function() {
    return '{\n    "widgets": [\n        "enketo-widget/note/notewidget",\n        "enketo-widget/select-desktop-bootstrap/selectpicker",\n        "enketo-widget/select-mobile/selectpicker",\n        "enketo-widget/geo/geopicker",\n        "enketo-widget/table/tablewidget",\n        "enketo-widget/radio/radiopicker",\n        "enketo-widget/time/timepicker-extended",\n        "enketo-widget/date/datepicker-extended",\n        "enketo-widget/datetime/datetimepicker-extended",\n        "enketo-widget/mediagrid/mediagridpicker",\n        "enketo-widget/file/filepicker",\n        "enketo-widget/select-likert/likertitem",\n        "enketo-widget/distress/distresspicker",\n        "enketo-widget/horizontal-choices/horizontalchoices"\n    ],\n"maps": [{\n        "attribution": "<a href=\'https://www.mapbox.com/about/maps/\' target=\'_blank\'>&copy; Mapbox &copy; OpenStreetMap</a> <a class=\'mapbox-improve-map\' href=\'https://www.mapbox.com/map-feedback/\' target=\'_blank\'>Improve this map</a>",\n        "id": "enketo.ikehf0m5",\n        "maxzoom": 21,\n        "minzoom": 0,\n        "name": "streets",\n        "tiles": ["https://a.tiles.mapbox.com/v3/enketo.ikehf0m5/{z}/{x}/{y}.png", "https://b.tiles.mapbox.com/v3/enketo.ikehf0m5/{z}/{x}/{y}.png"]\n    }, {\n        "attribution": "<a href=\'https://www.mapbox.com/about/maps/\' target=\'_blank\'>&copy; Mapbox &copy; OpenStreetMap</a> <a class=\'mapbox-improve-map\' href=\'https://www.mapbox.com/map-feedback/\' target=\'_blank\'>Improve this map</a>",\n        "id": "enketo.ikehkono",\n        "maxzoom": 21,\n        "minzoom": 0,\n        "name": "terrain",\n        "tiles": ["https://a.tiles.mapbox.com/v3/enketo.ikehkono/{z}/{x}/{y}.png", "https://b.tiles.mapbox.com/v3/enketo.ikehkono/{z}/{x}/{y}.png"]\n    }, {\n        "attribution": "<a href=\'https://www.mapbox.com/about/maps/\' target=\'_blank\'>&copy; Mapbox &copy; OpenStreetMap</a> <a class=\'mapbox-improve-map\' href=\'https://www.mapbox.com/map-feedback/\' target=\'_blank\'>Improve this map</a>",\n        "id": "enketo.ikfgfgil",\n        "maxzoom": 19,\n        "minzoom": 0,\n        "name": "satellite",\n        "tiles": ["https://a.tiles.mapbox.com/v3/enketo.ikfgfgil/{z}/{x}/{y}.png", "https://b.tiles.mapbox.com/v3/enketo.ikfgfgil/{z}/{x}/{y}.png"]\n    }],\n    "google_api_key": "AIzaSyCRTjhuvcIcki5V3D8O4EhV4VdCqqqvD4w"\n}\n'
}
),
define("enketo-js/widgets", ["text!enketo-config", "enketo-js/support", "q", "jquery"], function(t, e, n, i) {
    "use strict";
    var o, r, s, a, l, u, c, h, d, p, f, m = [];
    return r = function(e) {
        o = i("form.or"),
        e = e || o,
        u(JSON.parse(t)).then(function(t) {
            h(e)
        }
        )
    }
    ,
    s = function(t) {
        for (var e, n, i = 0; i < m.length; i++)
            e = m[i],
            e.name && (n = c(t, e.selector),
            n[e.name]("enable"))
    }
    ,
    a = function(t) {
        for (var e, n, i = 0; i < m.length; i++)
            e = m[i],
            e.name && (n = c(t, e.selector),
            n[e.name]("disable"))
    }
    ,
    l = function(t) {
        for (var e, n, i = 0; i < m.length; i++)
            e = m[i],
            e.name && (n = c(t, e.selector),
            n[e.name]("destroy"))
    }
    ,
    u = function(t) {
        for (var e, i, o = n.defer(), r = [], s = 0; s < t.widgets.length; s++)
            e = "text!" + t.widgets[s].substr(0, t.widgets[s].lastIndexOf("/") + 1) + "config.json",
            r.push(e);
        return require(r, function() {
            for (var e = 0; e < arguments.length; e++)
                i = JSON.parse(arguments[e]),
                i.path = t.widgets[e],
                m.push(i);
            o.resolve(m)
        }
        ),
        o.promise
    }
    ,
    c = function(t, e) {
        return e ? "form" === e ? o : t.find(e) : i()
    }
    ,
    h = function(t) {
        m.forEach(function(n) {
            var i;
            return n.options = n.options || {},
            n.options.touch = e.touch,
            n.selector || null  === n.selector ? (i = c(t, n.selector),
            void (i.length && (n.load || (n.load = d(n)),
            n.load.then(function(t) {
                t.name && (i[t.name](t.options),
                p(t, i),
                f(t, i))
            }
            )))) : console.error("widget configuration has no acceptable selector property", n)
        }
        )
    }
    ,
    d = function(t) {
        var e = n.defer();
        return require([t.path], function(n) {
            t.name = n,
            e.resolve(t)
        }
        ),
        e.promise
    }
    ,
    p = function(t, e) {
        e.length > 0 && o.on("changelanguage", function() {
            e[t.name]("update")
        }
        )
    }
    ,
    f = function(t, e) {
        e.length > 0 && "select" === e.prop("nodeName").toLowerCase() && o.on("changeoption", "select", function() {
            i(this)[t.name]("update")
        }
        )
    }
    ,
    {
        init: r,
        enable: s,
        disable: a,
        destroy: l
    }
}
),
function(t) {
    "function" == typeof define && define.amd && define.amd.jQuery ? define("jquery.touchswipe", ["jquery"], t) : t(jQuery)
}
(function(t) {
    "use strict";
    function e(e) {
        return !e || void 0 !== e.allowPageScroll || void 0 === e.swipe && void 0 === e.swipeStatus || (e.allowPageScroll = c),
        void 0 !== e.click && void 0 === e.tap && (e.tap = e.click),
        e || (e = {}),
        e = t.extend({}, t.fn.swipe.defaults, e),
        this.each(function() {
            var i = t(this)
              , o = i.data(C);
            o || (o = new n(this,e),
            i.data(C, o))
        }
        )
    }
    function n(e, n) {
        function i(e) {
            if (!(ut() || t(e.target).closest(n.excludedElements, Vt).length > 0)) {
                var i, o = e.originalEvent ? e.originalEvent : e, r = o.touches, s = r ? r[0] : o;
                return Ht = w,
                r ? Wt = r.length : e.preventDefault(),
                Ot = 0,
                Rt = null ,
                qt = null ,
                Ut = 0,
                jt = 0,
                Bt = 0,
                Ft = 1,
                $t = 0,
                Zt = ft(),
                zt = vt(),
                at(),
                !r || Wt === n.fingers || n.fingers === b || z() ? (ht(0, s),
                Xt = Dt(),
                2 == Wt && (ht(1, r[1]),
                jt = Bt = _t(Zt[0].start, Zt[1].start)),
                (n.swipeStatus || n.pinchStatus) && (i = O(o, Ht))) : i = !1,
                i === !1 ? (Ht = k,
                O(o, Ht),
                i) : (n.hold && (te = setTimeout(t.proxy(function() {
                    Vt.trigger("hold", [o.target]),
                    n.hold && (i = n.hold.call(Vt, o, o.target))
                }
                , this), n.longTapThreshold)),
                ct(!0),
                null )
            }
        }
        function P(t) {
            var e = t.originalEvent ? t.originalEvent : t;
            if (Ht !== T && Ht !== k && !lt()) {
                var i, o = e.touches, r = o ? o[0] : e, s = dt(r);
                if (Yt = Dt(),
                o && (Wt = o.length),
                n.hold && clearTimeout(te),
                Ht = x,
                2 == Wt && (0 == jt ? (ht(1, o[1]),
                jt = Bt = _t(Zt[0].start, Zt[1].start)) : (dt(o[1]),
                Bt = _t(Zt[0].end, Zt[1].end),
                qt = xt(Zt[0].end, Zt[1].end)),
                Ft = wt(jt, Bt),
                $t = Math.abs(jt - Bt)),
                Wt === n.fingers || n.fingers === b || !o || z()) {
                    if (Rt = Et(s.start, s.end),
                    $(t, Rt),
                    Ot = Tt(s.start, s.end),
                    Ut = bt(),
                    mt(Rt, Ot),
                    (n.swipeStatus || n.pinchStatus) && (i = O(e, Ht)),
                    !n.triggerOnTouchEnd || n.triggerOnTouchLeave) {
                        var a = !0;
                        if (n.triggerOnTouchLeave) {
                            var l = St(this);
                            a = Ct(s.end, l)
                        }
                        !n.triggerOnTouchEnd && a ? Ht = I(x) : n.triggerOnTouchLeave && !a && (Ht = I(T)),
                        (Ht == k || Ht == T) && O(e, Ht)
                    }
                } else
                    Ht = k,
                    O(e, Ht);
                i === !1 && (Ht = k,
                O(e, Ht))
            }
        }
        function L(t) {
            var e = t.originalEvent ? t.originalEvent : t
              , i = e.touches;
            return i && i.length ? (st(),
            !0) : (lt() && (Wt = Jt),
            Yt = Dt(),
            Ut = bt(),
            j() || !U() ? (Ht = k,
            O(e, Ht)) : n.triggerOnTouchEnd || 0 == n.triggerOnTouchEnd && Ht === x ? (t.preventDefault(),
            Ht = T,
            O(e, Ht)) : !n.triggerOnTouchEnd && G() ? (Ht = T,
            R(e, Ht, f)) : Ht === x && (Ht = k,
            O(e, Ht)),
            ct(!1),
            null )
        }
        function N() {
            Wt = 0,
            Yt = 0,
            Xt = 0,
            jt = 0,
            Bt = 0,
            Ft = 1,
            at(),
            ct(!1)
        }
        function M(t) {
            var e = t.originalEvent ? t.originalEvent : t;
            n.triggerOnTouchLeave && (Ht = I(T),
            O(e, Ht))
        }
        function A() {
            Vt.unbind(Lt, i),
            Vt.unbind(It, N),
            Vt.unbind(Nt, P),
            Vt.unbind(Mt, L),
            At && Vt.unbind(At, M),
            ct(!1)
        }
        function I(t) {
            var e = t
              , i = F()
              , o = U()
              , r = j();
            return !i || r ? e = k : !o || t != x || n.triggerOnTouchEnd && !n.triggerOnTouchLeave ? !o && t == T && n.triggerOnTouchLeave && (e = k) : e = T,
            e
        }
        function O(t, e) {
            var n, i = t.touches;
            return Z() || W() || V() || z() ? ((Z() || W()) && (n = R(t, e, d)),
            (V() || z()) && n !== !1 && (n = R(t, e, p))) : ot() && n !== !1 ? n = R(t, e, m) : rt() && n !== !1 ? n = R(t, e, g) : it() && n !== !1 && (n = R(t, e, f)),
            e === k && N(t),
            e === T && (i ? i.length || N(t) : N(t)),
            n
        }
        function R(e, i, c) {
            var h;
            if (c == d) {
                if (Vt.trigger("swipeStatus", [i, Rt || null , Ot || 0, Ut || 0, Wt, Zt]),
                n.swipeStatus && (h = n.swipeStatus.call(Vt, e, i, Rt || null , Ot || 0, Ut || 0, Wt, Zt),
                h === !1))
                    return !1;
                if (i == T && H()) {
                    if (Vt.trigger("swipe", [Rt, Ot, Ut, Wt, Zt]),
                    n.swipe && (h = n.swipe.call(Vt, e, Rt, Ot, Ut, Wt, Zt),
                    h === !1))
                        return !1;
                    switch (Rt) {
                    case o:
                        Vt.trigger("swipeLeft", [Rt, Ot, Ut, Wt, Zt]),
                        n.swipeLeft && (h = n.swipeLeft.call(Vt, e, Rt, Ot, Ut, Wt, Zt));
                        break;
                    case r:
                        Vt.trigger("swipeRight", [Rt, Ot, Ut, Wt, Zt]),
                        n.swipeRight && (h = n.swipeRight.call(Vt, e, Rt, Ot, Ut, Wt, Zt));
                        break;
                    case s:
                        Vt.trigger("swipeUp", [Rt, Ot, Ut, Wt, Zt]),
                        n.swipeUp && (h = n.swipeUp.call(Vt, e, Rt, Ot, Ut, Wt, Zt));
                        break;
                    case a:
                        Vt.trigger("swipeDown", [Rt, Ot, Ut, Wt, Zt]),
                        n.swipeDown && (h = n.swipeDown.call(Vt, e, Rt, Ot, Ut, Wt, Zt))
                    }
                }
            }
            if (c == p) {
                if (Vt.trigger("pinchStatus", [i, qt || null , $t || 0, Ut || 0, Wt, Ft, Zt]),
                n.pinchStatus && (h = n.pinchStatus.call(Vt, e, i, qt || null , $t || 0, Ut || 0, Wt, Ft, Zt),
                h === !1))
                    return !1;
                if (i == T && q())
                    switch (qt) {
                    case l:
                        Vt.trigger("pinchIn", [qt || null , $t || 0, Ut || 0, Wt, Ft, Zt]),
                        n.pinchIn && (h = n.pinchIn.call(Vt, e, qt || null , $t || 0, Ut || 0, Wt, Ft, Zt));
                        break;
                    case u:
                        Vt.trigger("pinchOut", [qt || null , $t || 0, Ut || 0, Wt, Ft, Zt]),
                        n.pinchOut && (h = n.pinchOut.call(Vt, e, qt || null , $t || 0, Ut || 0, Wt, Ft, Zt))
                    }
            }
            return c == f ? (i === k || i === T) && (clearTimeout(Kt),
            clearTimeout(te),
            J() && !tt() ? (Qt = Dt(),
            Kt = setTimeout(t.proxy(function() {
                Qt = null ,
                Vt.trigger("tap", [e.target]),
                n.tap && (h = n.tap.call(Vt, e, e.target))
            }
            , this), n.doubleTapThreshold)) : (Qt = null ,
            Vt.trigger("tap", [e.target]),
            n.tap && (h = n.tap.call(Vt, e, e.target)))) : c == m ? (i === k || i === T) && (clearTimeout(Kt),
            Qt = null ,
            Vt.trigger("doubletap", [e.target]),
            n.doubleTap && (h = n.doubleTap.call(Vt, e, e.target))) : c == g && (i === k || i === T) && (clearTimeout(Kt),
            Qt = null ,
            Vt.trigger("longtap", [e.target]),
            n.longTap && (h = n.longTap.call(Vt, e, e.target))),
            h
        }
        function U() {
            var t = !0;
            return null  !== n.threshold && (t = Ot >= n.threshold),
            t
        }
        function j() {
            var t = !1;
            return null  !== n.cancelThreshold && null  !== Rt && (t = gt(Rt) - Ot >= n.cancelThreshold),
            t
        }
        function B() {
            return null  !== n.pinchThreshold ? $t >= n.pinchThreshold : !0
        }
        function F() {
            var t;
            return t = n.maxTimeThreshold && Ut >= n.maxTimeThreshold ? !1 : !0
        }
        function $(t, e) {
            if (n.preventDefaultEvents !== !1)
                if (n.allowPageScroll === c)
                    t.preventDefault();
                else {
                    var i = n.allowPageScroll === h;
                    switch (e) {
                    case o:
                        (n.swipeLeft && i || !i && n.allowPageScroll != v) && t.preventDefault();
                        break;
                    case r:
                        (n.swipeRight && i || !i && n.allowPageScroll != v) && t.preventDefault();
                        break;
                    case s:
                        (n.swipeUp && i || !i && n.allowPageScroll != y) && t.preventDefault();
                        break;
                    case a:
                        (n.swipeDown && i || !i && n.allowPageScroll != y) && t.preventDefault()
                    }
                }
        }
        function q() {
            var t = X()
              , e = Y()
              , n = B();
            return t && e && n
        }
        function z() {
            return !!(n.pinchStatus || n.pinchIn || n.pinchOut)
        }
        function V() {
            return !(!q() || !z())
        }
        function H() {
            var t = F()
              , e = U()
              , n = X()
              , i = Y()
              , o = j()
              , r = !o && i && n && e && t;
            return r
        }
        function W() {
            return !!(n.swipe || n.swipeStatus || n.swipeLeft || n.swipeRight || n.swipeUp || n.swipeDown)
        }
        function Z() {
            return !(!H() || !W())
        }
        function X() {
            return Wt === n.fingers || n.fingers === b || !E
        }
        function Y() {
            return 0 !== Zt[0].end.x
        }
        function G() {
            return !!n.tap
        }
        function J() {
            return !!n.doubleTap
        }
        function Q() {
            return !!n.longTap
        }
        function K() {
            if (null  == Qt)
                return !1;
            var t = Dt();
            return J() && t - Qt <= n.doubleTapThreshold
        }
        function tt() {
            return K()
        }
        function et() {
            return (1 === Wt || !E) && (isNaN(Ot) || Ot < n.threshold)
        }
        function nt() {
            return Ut > n.longTapThreshold && _ > Ot
        }
        function it() {
            return !(!et() || !G())
        }
        function ot() {
            return !(!K() || !J())
        }
        function rt() {
            return !(!nt() || !Q())
        }
        function st() {
            Gt = Dt(),
            Jt = event.touches.length + 1
        }
        function at() {
            Gt = 0,
            Jt = 0
        }
        function lt() {
            var t = !1;
            if (Gt) {
                var e = Dt() - Gt;
                e <= n.fingerReleaseThreshold && (t = !0)
            }
            return t
        }
        function ut() {
            return !(Vt.data(C + "_intouch") !== !0)
        }
        function ct(t) {
            t === !0 ? (Vt.bind(Nt, P),
            Vt.bind(Mt, L),
            At && Vt.bind(At, M)) : (Vt.unbind(Nt, P, !1),
            Vt.unbind(Mt, L, !1),
            At && Vt.unbind(At, M, !1)),
            Vt.data(C + "_intouch", t === !0)
        }
        function ht(t, e) {
            var n = void 0 !== e.identifier ? e.identifier : 0;
            return Zt[t].identifier = n,
            Zt[t].start.x = Zt[t].end.x = e.pageX || e.clientX,
            Zt[t].start.y = Zt[t].end.y = e.pageY || e.clientY,
            Zt[t]
        }
        function dt(t) {
            var e = void 0 !== t.identifier ? t.identifier : 0
              , n = pt(e);
            return n.end.x = t.pageX || t.clientX,
            n.end.y = t.pageY || t.clientY,
            n
        }
        function pt(t) {
            for (var e = 0; e < Zt.length; e++)
                if (Zt[e].identifier == t)
                    return Zt[e]
        }
        function ft() {
            for (var t = [], e = 0; 5 >= e; e++)
                t.push({
                    start: {
                        x: 0,
                        y: 0
                    },
                    end: {
                        x: 0,
                        y: 0
                    },
                    identifier: 0
                });
            return t
        }
        function mt(t, e) {
            e = Math.max(e, gt(t)),
            zt[t].distance = e
        }
        function gt(t) {
            return zt[t] ? zt[t].distance : void 0
        }
        function vt() {
            var t = {};
            return t[o] = yt(o),
            t[r] = yt(r),
            t[s] = yt(s),
            t[a] = yt(a),
            t
        }
        function yt(t) {
            return {
                direction: t,
                distance: 0
            }
        }
        function bt() {
            return Yt - Xt
        }
        function _t(t, e) {
            var n = Math.abs(t.x - e.x)
              , i = Math.abs(t.y - e.y);
            return Math.round(Math.sqrt(n * n + i * i))
        }
        function wt(t, e) {
            var n = e / t * 1;
            return n.toFixed(2)
        }
        function xt() {
            return 1 > Ft ? u : l
        }
        function Tt(t, e) {
            return Math.round(Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2)))
        }
        function kt(t, e) {
            var n = t.x - e.x
              , i = e.y - t.y
              , o = Math.atan2(i, n)
              , r = Math.round(180 * o / Math.PI);
            return 0 > r && (r = 360 - Math.abs(r)),
            r
        }
        function Et(t, e) {
            var n = kt(t, e);
            return 45 >= n && n >= 0 ? o : 360 >= n && n >= 315 ? o : n >= 135 && 225 >= n ? r : n > 45 && 135 > n ? a : s
        }
        function Dt() {
            var t = new Date;
            return t.getTime()
        }
        function St(e) {
            e = t(e);
            var n = e.offset()
              , i = {
                left: n.left,
                right: n.left + e.outerWidth(),
                top: n.top,
                bottom: n.top + e.outerHeight()
            };
            return i
        }
        function Ct(t, e) {
            return t.x > e.left && t.x < e.right && t.y > e.top && t.y < e.bottom
        }
        var Pt = E || S || !n.fallbackToMouseEvents
          , Lt = Pt ? S ? D ? "MSPointerDown" : "pointerdown" : "touchstart" : "mousedown"
          , Nt = Pt ? S ? D ? "MSPointerMove" : "pointermove" : "touchmove" : "mousemove"
          , Mt = Pt ? S ? D ? "MSPointerUp" : "pointerup" : "touchend" : "mouseup"
          , At = Pt ? null  : "mouseleave"
          , It = S ? D ? "MSPointerCancel" : "pointercancel" : "touchcancel"
          , Ot = 0
          , Rt = null 
          , Ut = 0
          , jt = 0
          , Bt = 0
          , Ft = 1
          , $t = 0
          , qt = 0
          , zt = null 
          , Vt = t(e)
          , Ht = "start"
          , Wt = 0
          , Zt = null 
          , Xt = 0
          , Yt = 0
          , Gt = 0
          , Jt = 0
          , Qt = 0
          , Kt = null 
          , te = null ;
        try {
            Vt.bind(Lt, i),
            Vt.bind(It, N)
        } catch (ee) {
            t.error("events not supported " + Lt + "," + It + " on jQuery.swipe")
        }
        this.enable = function() {
            return Vt.bind(Lt, i),
            Vt.bind(It, N),
            Vt
        }
        ,
        this.disable = function() {
            return A(),
            Vt
        }
        ,
        this.destroy = function() {
            A(),
            Vt.data(C, null ),
            Vt = null 
        }
        ,
        this.option = function(e, i) {
            if (void 0 !== n[e]) {
                if (void 0 === i)
                    return n[e];
                n[e] = i
            } else
                t.error("Option " + e + " does not exist on jQuery.swipe.options");
            return null 
        }
    }
    var i = "1.6.9"
      , o = "left"
      , r = "right"
      , s = "up"
      , a = "down"
      , l = "in"
      , u = "out"
      , c = "none"
      , h = "auto"
      , d = "swipe"
      , p = "pinch"
      , f = "tap"
      , m = "doubletap"
      , g = "longtap"
      , v = "horizontal"
      , y = "vertical"
      , b = "all"
      , _ = 10
      , w = "start"
      , x = "move"
      , T = "end"
      , k = "cancel"
      , E = "ontouchstart" in window
      , D = window.navigator.msPointerEnabled && !window.navigator.pointerEnabled
      , S = window.navigator.pointerEnabled || window.navigator.msPointerEnabled
      , C = "TouchSwipe"
      , P = {
        fingers: 1,
        threshold: 75,
        cancelThreshold: null ,
        pinchThreshold: 20,
        maxTimeThreshold: null ,
        fingerReleaseThreshold: 250,
        longTapThreshold: 500,
        doubleTapThreshold: 200,
        swipe: null ,
        swipeLeft: null ,
        swipeRight: null ,
        swipeUp: null ,
        swipeDown: null ,
        swipeStatus: null ,
        pinchIn: null ,
        pinchOut: null ,
        pinchStatus: null ,
        click: null ,
        tap: null ,
        doubleTap: null ,
        longTap: null ,
        hold: null ,
        triggerOnTouchEnd: !0,
        triggerOnTouchLeave: !1,
        allowPageScroll: "auto",
        fallbackToMouseEvents: !0,
        excludedElements: "label, button, input, select, textarea, a, .noSwipe",
        preventDefaultEvents: !0
    };
    t.fn.swipe = function(n) {
        var i = t(this)
          , o = i.data(C);
        if (o && "string" == typeof n) {
            if (o[n])
                return o[n].apply(this, Array.prototype.slice.call(arguments, 1));
            t.error("Method " + n + " does not exist on jQuery.swipe")
        } else if (!(o || "object" != typeof n && n))
            return e.apply(this, arguments);
        return i
    }
    ,
    t.fn.swipe.version = i,
    t.fn.swipe.defaults = P,
    t.fn.swipe.phases = {
        PHASE_START: w,
        PHASE_MOVE: x,
        PHASE_END: T,
        PHASE_CANCEL: k
    },
    t.fn.swipe.directions = {
        LEFT: o,
        RIGHT: r,
        UP: s,
        DOWN: a,
        IN: l,
        OUT: u
    },
    t.fn.swipe.pageScroll = {
        NONE: c,
        HORIZONTAL: v,
        VERTICAL: y,
        AUTO: h
    },
    t.fn.swipe.fingers = {
        ONE: 1,
        TWO: 2,
        THREE: 3,
        ALL: b
    }
}
),
define("enketo-js/Form", ["enketo-js/FormModel", "enketo-js/widgets", "jquery", "enketo-js/plugins", "enketo-js/extend", "jquery.touchswipe"], function(t, e, n) {
    "use strict";
    function i(i, o) {
        function r(t) {
            u = n(t),
            this.$ = u,
            this.$nonRepeats = {}
        }
        var s, a, l, u, c, h, d, p = [];
        this.init = function() {
            return c = n(i).clone().appendTo("<original></original>"),
            s = new t(o),
            p = p.concat(s.init()),
            l = new r(i),
            h = n(i).find(".or-repeat").length > 0,
            l.init(),
            window.scrollTo && window.scrollTo(0, 0),
            p
        }
        ,
        this.ex = function(t, e, n, i, o) {
            return s.evaluate(t, e, n, i, o)
        }
        ,
        this.getModel = function() {
            return s
        }
        ,
        this.getInstanceID = function() {
            return s.getInstanceID()
        }
        ,
        this.getInstanceName = function() {
            return s.getInstanceName()
        }
        ,
        this.getView = function() {
            return l
        }
        ,
        this.getEncryptionKey = function() {
            return l.$.data("base64rsapublickey")
        }
        ,
        this.getDataStr = function() {
            return s.getStr()
        }
        ,
        this.getRecordName = function() {
            return l.recordName.get()
        }
        ,
        this.setRecordName = function(t) {
            return l.recordName.set(t)
        }
        ,
        this.setEditStatus = function(t) {
            return l.editStatus.set(t)
        }
        ,
        this.getEditStatus = function() {
            return l.editStatus.get()
        }
        ,
        this.getSurveyName = function() {
            return u.find("#form-title").text()
        }
        ,
        this.resetView = function() {
            n("#form-languages").remove(),
            u.replaceWith(c)
        }
        ,
        this.resetHTML = this.resetView,
        this.validate = function() {
            return l.validateAll()
        }
        ,
        this.isValid = function() {
            return l.isValid()
        }
        ,
        d = function(t, e, i, o, r) {
            var a, l, c, h = "", d = t.match(/jr:choice-name\(([^,]+),\s?'(.*?)'\)/);
            return d ? (a = s.evaluate(d[1], e, i, o, r),
            l = d[2].trim(),
            c = u.find('[name="' + l + '"]'),
            c.length > 0 && "select" === c.prop("nodeName").toLowerCase() ? h = c.find('[value="' + a + '"]').text() : c.length > 0 && "input" === c.prop("nodeName").toLowerCase() && (h = c.filter(function() {
                return n(this).attr("value") === a
            }
            ).siblings(".option-label.active").text()),
            t.replace(d[0], '"' + h + '"')) : t
        }
        ,
        r.prototype.init = function() {
            var n = this;
            return "undefined" != typeof s && s instanceof t ? (this.preloads.init(this),
            this.grosslyViolateStandardComplianceByIgnoringCertainCalcs(),
            this.calcUpdate(),
            this.langs.init(),
            this.repeat.init(this),
            this.itemsetUpdate(),
            this.setAllVals(),
            e.init(),
            this.branchUpdate(),
            this.pages.init(),
            this.outputUpdate(),
            this.setEventHandlers(),
            this.editStatus.set(!1),
            void setTimeout(function() {
                n.progress.update()
            }
            , 0)) : console.error("variable data needs to be defined as instance of FormModel")
        }
        ,
        r.prototype.pages = {
            active: !1,
            $current: [],
            $activePages: n(),
            init: function() {
                if (u.hasClass("pages")) {
                    var t = u.find(".note, .question, .trigger, .or-appearance-field-list").filter(function() {
                        return 0 === n(this).parent().closest(".or-appearance-field-list").length
                    }
                    ).attr("role", "page");
                    (t.length > 1 || t.eq(0).hasClass("or-repeat")) && (this.$formFooter = n(".form-footer"),
                    this.$btnFirst = this.$formFooter.find(".first-page"),
                    this.$btnPrev = this.$formFooter.find(".previous-page"),
                    this.$btnNext = this.$formFooter.find(".next-page"),
                    this.$btnLast = this.$formFooter.find(".last-page"),
                    this.updateAllActive(t),
                    this.toggleButtons(0),
                    this.setButtonHandlers(),
                    this.setRepeatHandlers(),
                    this.setBranchHandlers(),
                    this.setSwipeHandlers(),
                    this.active = !0),
                    this.flipToFirst(),
                    u.show()
                }
            },
            setButtonHandlers: function() {
                var t = this;
                this.$btnFirst.off(".pagemode").on("click.pagemode", function() {
                    return t.flipToFirst(),
                    !1
                }
                ),
                this.$btnPrev.off(".pagemode").on("click.pagemode", function() {
                    return t.prev(),
                    !1
                }
                ),
                this.$btnNext.off(".pagemode").on("click.pagemode", function() {
                    return t.next(),
                    !1
                }
                ),
                this.$btnLast.off(".pagemode").on("click.pagemode", function() {
                    return t.flipToLast(),
                    !1
                }
                )
            },
            setSwipeHandlers: function() {
                var t = this
                  , e = n(".main");
                e.swipe("destroy"),
                e.swipe({
                    allowPageScroll: "vertical",
                    threshold: 150,
                    swipeLeft: function() {
                        t.next()
                    },
                    swipeRight: function() {
                        t.prev()
                    }
                })
            },
            setRepeatHandlers: function() {
                var t = this;
                u.off("addrepeat.pagemode").on("addrepeat.pagemode", function(e) {
                    t.updateAllActive(),
                    n(e.target).removeClass("current contains-current").find(".current").removeClass("current"),
                    t.flipToPageContaining(n(e.target))
                }
                ).off("removerepeat.pagemode").on("removerepeat.pagemode", function(e) {
                    0 === t.$current.closest("html").length && (t.updateAllActive(),
                    t.flipToPageContaining(n(e.target)))
                }
                )
            },
            setBranchHandlers: function() {
                var t = this;
                u.off("changebranch.pagemode").on("changebranch.pagemode", function() {
                    t.updateAllActive(),
                    t.toggleButtons()
                }
                )
            },
            getCurrent: function() {
                return this.$current
            },
            updateAllActive: function(t) {
                t = t || n('.or [role="page"]'),
                this.$activePages = t.filter(function() {
                    return 0 === n(this).closest(".disabled").length
                }
                )
            },
            getAllActive: function() {
                return this.$activePages
            },
            getPrev: function(t) {
                return this.$activePages[t - 1]
            },
            getNext: function(t) {
                return this.$activePages[t + 1]
            },
            getCurrentIndex: function() {
                return this.$activePages.index(this.$current)
            },
            next: function() {
                var t, e;
                this.updateAllActive(),
                e = this.getCurrentIndex(),
                t = this.getNext(e),
                t && this.flipTo(t, e + 1)
            },
            prev: function() {
                var t, e;
                this.updateAllActive(),
                e = this.getCurrentIndex(),
                t = this.getPrev(e),
                t && this.flipTo(t, e - 1)
            },
            setToCurrent: function(t) {
                var e = n(t);
                e.addClass("current hidden"),
                this.$current = e.removeClass("hidden").parentsUntil(".or", ".or-group, .or-group-data, .or-repeat").addClass("contains-current").end()
            },
            flipTo: function(t, e) {
                this.$current.length > 0 && 1 === this.$current.closest("html").length ? this.$current[0] !== t && (this.$current.removeClass("current fade-out").parentsUntil(".or", ".or-group, .or-group-data, .or-repeat").removeClass("contains-current"),
                this.setToCurrent(t),
                this.focusOnFirstQuestion(t),
                this.toggleButtons(e)) : (this.setToCurrent(t),
                this.focusOnFirstQuestion(t),
                this.toggleButtons(e)),
                window.scrollTo && window.scrollTo(0, 0),
                n(t).trigger("pageflip.enketo")
            },
            flipToFirst: function() {
                this.updateAllActive(),
                this.flipTo(this.$activePages[0])
            },
            flipToLast: function() {
                this.updateAllActive(),
                this.flipTo(this.$activePages.last()[0])
            },
            flipToPageContaining: function(t) {
                var e;
                e = t.closest('[role="page"]'),
                e = 0 === e.length ? t.find('[role="page"]') : e,
                this.flipTo(e[0])
            },
            focusOnFirstQuestion: function(t) {
                n(t).find(".question:not(.disabled)").filter(function() {
                    return 0 === n(this).parentsUntil(".or", ".disabled").length
                }
                ).eq(0).find("input, select, textarea").eq(0).trigger("fakefocus")
            },
            toggleButtons: function(t) {
                var e = t || this.getCurrentIndex()
                  , n = this.getNext(e)
                  , i = this.getPrev(e);
                this.$btnNext.add(this.$btnLast).toggleClass("disabled", !n),
                this.$btnPrev.add(this.$btnFirst).toggleClass("disabled", !i),
                this.$formFooter.toggleClass("end", !n)
            }
        },
        r.prototype.input = {
            getWrapNodes: function(t) {
                var e = this.getInputType(t.eq(0));
                return "fieldset" === e ? t : t.closest(".question, .note")
            },
            getProps: function(t) {
                return 1 !== t.length ? console.error("getProps(): no input node provided or multiple") : {
                    path: this.getName(t),
                    ind: this.getIndex(t),
                    inputType: this.getInputType(t),
                    xmlType: this.getXmlType(t),
                    constraint: this.getConstraint(t),
                    calculation: this.getCalculation(t),
                    relevant: this.getRelevant(t),
                    val: this.getVal(t),
                    required: this.isRequired(t),
                    enabled: this.isEnabled(t),
                    multiple: this.isMultiple(t)
                }
            },
            getInputType: function(t) {
                var e;
                return 1 !== t.length ? "" : (e = t.prop("nodeName").toLowerCase(),
                "input" === e ? t.attr("type").length > 0 ? t.attr("type").toLowerCase() : console.error("<input> node has no type") : "select" === e ? "select" : "textarea" === e ? "textarea" : "fieldset" === e || "section" === e ? "fieldset" : console.error("unexpected input node type provided"))
            },
            getConstraint: function(t) {
                return t.attr("data-constraint")
            },
            getRelevant: function(t) {
                return t.attr("data-relevant")
            },
            getCalculation: function(t) {
                return t.attr("data-calculate")
            },
            getXmlType: function(t) {
                return 1 !== t.length ? console.error("getXMLType(): no input node provided or multiple") : t.attr("data-type-xml")
            },
            getName: function(t) {
                var e;
                return 1 !== t.length ? console.error("getName(): no input node provided or multiple") : (e = t.attr("data-name") || t.attr("name"),
                e || console.error("input node has no name"))
            },
            getIndex: function(t) {
                var e, n, i, o;
                return 1 !== t.length ? console.error("getIndex(): no input node provided or multiple") : (e = this.getInputType(t),
                n = this.getName(t),
                i = this.getWrapNodes(t),
                o = "radio" === e && n !== t.attr("name") ? this.getWrapNodes(u.find('[data-name="' + n + '"]')) : "fieldset" === e && t.hasClass("or-repeat") ? this.getWrapNodes(u.find('.or-repeat[name="' + n + '"]')) : "fieldset" === e && t.hasClass("or-group") ? this.getWrapNodes(u.find('.or-group[name="' + n + '"]')) : this.getWrapNodes(u.find('[name="' + n + '"]')),
                o.index(i))
            },
            isMultiple: function(t) {
                return "checkbox" === this.getInputType(t) || void 0 !== t.attr("multiple") ? !0 : !1
            },
            isEnabled: function(t) {
                return !(t.prop("disabled") || t.parentsUntil(".or", ".disabled").length > 0)
            },
            isRequired: function(t) {
                return void 0 !== t.attr("required") && 0 === t.parentsUntil(".or", ".or-appearance-label").length
            },
            getVal: function(t) {
                var e, i, o = [];
                return 1 !== t.length ? console.error("getVal(): no inputNode provided or multiple") : (e = this.getInputType(t),
                i = this.getName(t),
                "radio" === e ? this.getWrapNodes(t).find("input:checked").val() || "" : "checkbox" === e ? (this.getWrapNodes(t).find('input[name="' + i + '"]:checked').each(function() {
                    o.push(n(this).val())
                }
                ),
                o) : t.val() ? n.isArray(t.val()) ? t.val().join(" ").trim() : t.val().trim() : "")
            },
            setVal: function(t, e, n) {
                var i, o;
                if (e = e || 0,
                "radio" === this.getInputType(u.find('[data-name="' + t + '"]').eq(0)))
                    o = "radio",
                    i = this.getWrapNodes(u.find('[data-name="' + t + '"]')).eq(e).find('[data-name="' + t + '"]');
                else {
                    if (i = this.getWrapNodes(u.find('[name="' + t + '"]')).eq(e).find('[name="' + t + '"]'),
                    o = this.getInputType(i.eq(0)),
                    "file" === o)
                        return i.eq(0).attr("data-loaded-file-name", n),
                        !1;
                    ("date" === o || "datetime" === o) && (n = s.node(t, e).convert(n, o))
                }
                this.isMultiple(i.eq(0)) === !0 ? n = n.split(" ") : "radio" === o && (n = [n]),
                i.is("[readonly]") && i.toggleClass("has-value", !!n),
                i.val(n)
            }
        },
        r.prototype.setAllVals = function(t, e) {
            var i, o, r, a = this, l = t && t.attr("name") ? t.attr("name") : null ;
            e = "undefined" != typeof e ? e : null ,
            s.node(l, e).get().find("*").filter(function() {
                var t = n(this);
                return 0 === t.children().length && t.text()
            }
            ).each(function() {
                var t = n(this);
                try {
                    r = t.text(),
                    o = t.getXPath("instance"),
                    i = s.node(o).get().index(this),
                    a.input.setVal(o, i, r)
                } catch (e) {
                    console.error(e),
                    p.push("Could not load input field value with name: " + o + " and value: " + r)
                }
            }
            )
        }
        ,
        r.prototype.langs = {
            init: function() {
                var t, e = this, i = u.find("#form-languages"), o = n(".form-language-selector"), r = i.attr("data-default-lang") || i.find("option").eq(0).attr("value"), s = i.find('[value="' + r + '"]').attr("data-dir") || "ltr";
                i.detach().appendTo(o).val(r),
                u.attr("dir", s),
                i.find("option").length < 2 || (o.removeClass("hide"),
                i.change(function(i) {
                    i.preventDefault(),
                    t = n(this).val(),
                    e.setAll(t)
                }
                ))
            },
            setAll: function(t) {
                var e = this
                  , i = n("#form-languages").find('[value="' + t + '"]').attr("data-dir") || "ltr";
                u.attr("dir", i).find("[lang]").removeClass("active").filter('[lang="' + t + '"], [lang=""]').filter(function() {
                    var t = n(this);
                    return !t.hasClass("or-form-short") || t.hasClass("or-form-short") && 0 === t.siblings(".or-form-long").length
                }
                ).addClass("active"),
                u.find("select").each(function() {
                    e.setSelect(n(this))
                }
                ),
                u.trigger("changelanguage")
            },
            setSelect: function(t) {
                var e, i, o;
                t.children("option").not('[value=""]').each(function() {
                    var t = n(this);
                    i = t.text(),
                    e = t.attr("value"),
                    o = t.parent("select").siblings(".or-option-translations").children('.active[data-option-value="' + e + '"]').text().trim(),
                    o = "undefined" != typeof o && o.length > 0 ? o : i,
                    t.text(o)
                }
                )
            }
        },
        r.prototype.editStatus = {
            set: function(t) {
                t && t !== u.data("edited") && u.trigger("edited.enketo"),
                u.data("edited", t)
            },
            get: function() {
                return !!u.data("edited")
            }
        },
        r.prototype.recordName = {
            set: function(t) {
                u.attr("name", t)
            },
            get: function() {
                return u.attr("name")
            }
        },
        r.prototype.getNodesToUpdate = function(t, e, i) {
            var o, r = null , s = [], a = this;
            return i = i || {},
            e = e || "",
            this.$nonRepeats[t] || (this.$nonRepeats[t] = u.find(e + "[" + t + "]").parentsUntil(".or", ".calculation, .question, .note, .trigger").filter(function() {
                return 0 === n(this).closest(".or-repeat").length
            }
            )),
            "undefined" != typeof i.repeatPath && i.repeatIndex >= 0 && (r = u.find('.or-repeat[name="' + i.repeatPath + '"]').eq(i.repeatIndex)),
            o = r ? this.$nonRepeats[t].add(r) : u,
            i.nodes && 0 !== i.nodes.length ? (i.nodes.forEach(function(n) {
                s = s.concat(a.getQuerySelectorsForLogic(e, t, n))
            }
            ),
            s = s.concat(a.getQuerySelectorsForLogic(e, t, "*"))) : s = s.concat([e + "[" + t + "]"]),
            o.find(s.join())
        }
        ,
        r.prototype.getQuerySelectorsForLogic = function(t, e, n) {
            return [t + "[" + e + '*="/' + n + ' "]', t + "[" + e + '*="/' + n + ')"]', t + "[" + e + '*="/' + n + ',"]', t + "[" + e + '$="/' + n + '"]', t + "[" + e + '*="/' + n + ']"]']
        }
        ,
        r.prototype.branchUpdate = function(t) {
            function i(t, e, n) {
                var i = s.evaluate(t, "boolean", e, n);
                return i
            }
            function o(t, e) {
                e === !0 ? a(t) : l(t)
            }
            function r(t) {
                return !t.hasClass("disabled") && !t.hasClass("pre-init")
            }
            function a(t) {
                var n;
                r(t) || (w = !0,
                t.removeClass("disabled pre-init"),
                e.enable(t),
                n = t.prop("nodeName").toLowerCase(),
                "label" === n ? t.children("input, select, textarea").prop("disabled", !1) : "fieldset" === n ? (t.prop("disabled", !1),
                t.find('*:not(.or-branch) input[type="file"]:not([data-relevant])').prop("disabled", !0).prop("disabled", !1)) : t.find("fieldset, input, select, textarea").prop("disabled", !1))
            }
            function l(t) {
                var i = t.prop("nodeName").toLowerCase()
                  , o = t.hasClass("pre-init");
                (o || r(t)) && (w = !0,
                t.addClass("disabled"),
                o ? t.removeClass("pre-init") : (t.clearInputs("change"),
                e.disable(t),
                t.find(".invalid-required, .invalid-constraint").find("input, select, textarea").each(function() {
                    x.setValid(n(this))
                }
                )),
                "label" === i ? t.children("input, select, textarea").prop("disabled", !0) : "fieldset" === i ? t.prop("disabled", !0) : t.find("fieldset, input, select, textarea").prop("disabled", !0))
            }
            var c, d, p, f, m, g, v, y, b = {}, _ = [], w = !1, x = this;
            v = this.getNodesToUpdate("data-relevant", "", t),
            y = h && u.find(".or-repeat.clone").length > 0 ? !0 : !1,
            v.each(function() {
                var t = n(this);
                if (-1 === n.inArray(t.attr("name"), _)) {
                    if (d = t.closest(".or-branch"),
                    c = {},
                    g = null ,
                    c.relevant = x.input.getRelevant(t),
                    c.path = x.input.getName(t),
                    1 !== d.length)
                        return void (0 === t.parentsUntil(".or", "#or-calculated-items").length && console.error("could not find branch node for ", n(this)));
                    f = y && d.parentsUntil(".or", ".or-repeat").length > 0 ? !0 : !1,
                    m = y && d.parentsUntil(".or", ".or-repeat.clone").length > 0 ? !0 : !1,
                    c.ind = m ? x.input.getIndex(t) : 0,
                    -1 === c.relevant.indexOf("..") && (g = f ? c.relevant + "__" + c.path.substring(0, c.path.lastIndexOf("/")) + "__" + c.ind : c.relevant),
                    g && "undefined" != typeof b[g] ? p = b[g] : (p = i(c.relevant, c.path, c.ind),
                    b[g] = p),
                    f || _.push(n(this).attr("name")),
                    o(d, p)
                }
            }
            ),
            w && this.$.trigger("changebranch")
        }
        ,
        r.prototype.itemsetUpdate = function(t) {
            var e, i, o, r, a = this, l = {};
            r = this.getNodesToUpdate("data-items-path", ".itemset-template", t),
            e = h && u.find(".or-repeat.clone").length > 0 ? !0 : !1,
            r.each(function() {
                var t, r, u, c, h, d, p, f, m, g, v, y, b, _, w, x, T;
                if (f = n(this),
                !f.parentsUntil(".or", ".or-branch").parentsUntil(".or", ".disabled").length) {
                    if (m = {},
                    g = f.data(),
                    v = f.prop("nodeName").toLowerCase(),
                    y = "label" === v ? f.children("input").eq(0) : f.parent("select"),
                    b = f.closest("label, select").siblings(".itemset-labels"),
                    _ = f.attr("data-items-path"),
                    w = b.attr("data-label-type"),
                    x = b.attr("data-label-ref"),
                    T = b.attr("data-value-ref"),
                    d = a.input.getName(y),
                    i = e && y.parentsUntil(".or", ".or-repeat").length > 0 ? !0 : !1,
                    o = e && y.parentsUntil(".or", ".or-repeat.clone").length > 0 ? !0 : !1,
                    h = o ? a.input.getIndex(y) : 0,
                    "undefined" != typeof l[_])
                        c = l[_];
                    else {
                        var k = !0;
                        c = n(s.evaluate(_, "nodes", d, h, k)),
                        i || (l[_] = c)
                    }
                    m.length = c.length,
                    m.text = c.text(),
                    (m.length !== g.length || m.text !== g.text) && (f.data(m),
                    f.closest(".question").clearInputs("change").find(v).not(f).remove(),
                    f.parent("select").siblings(".or-option-translations").empty(),
                    c.each(function() {
                        var e = n(this);
                        p = e.children(x).text(),
                        t = n("<root/>"),
                        f.clone().appendTo(t).removeClass("itemset-template").addClass("itemset").removeAttr("data-items-path"),
                        r = "itext" === w && b.find('[data-itext-id="' + p + '"]').length > 0 ? b.find('[data-itext-id="' + p + '"]').clone() : n('<span class="option-label active" lang="">' + p + "</span>"),
                        u = e.children(T).text(),
                        t.find("[value]").attr("value", u),
                        "label" === v ? (t.find("input").after(r),
                        b.before(t.find(":first"))) : "option" === v && (1 === r.length && t.find("option").text(r.text()),
                        r.attr("data-option-value", u).attr("data-itext-id", "").appendTo(b.siblings(".or-option-translations")),
                        f.siblings().addBack().last().after(t.find(":first")))
                    }
                    ),
                    "select" === y.prop("nodeName").toLowerCase() && (a.langs.setSelect(y),
                    y.trigger("changeoption")))
                }
            }
            )
        }
        ,
        r.prototype.outputUpdate = function(t) {
            var e, i, o, r, a, l, c, d, p, f = {}, m = "", g = this;
            p = this.getNodesToUpdate("data-value", ".or-output", t),
            i = h && u.find(".or-repeat.clone").length > 0,
            p.each(function() {
                l = n(this),
                l.closest(".or-branch").parent().closest(".disabled").length || (e = l.attr("data-value"),
                a = l.closest(".question, .note, .or-group").find("[name]").eq(0),
                c = a.length ? g.input.getName(a) : void 0,
                o = i && l.parentsUntil(".or", ".or-repeat").length > 0,
                r = o && l.parentsUntil(".or", ".or-repeat.clone").length > 0,
                d = r ? g.input.getIndex(a) : 0,
                "undefined" != typeof f[e] ? m = f[e] : (m = s.evaluate(e, "string", c, d, !0),
                o || (f[e] = m)),
                l.text !== m && l.text(m))
            }
            )
        }
        ,
        r.prototype.grosslyViolateStandardComplianceByIgnoringCertainCalcs = function() {
            var t = u.find('[name$="/meta/instanceID"][data-calculate]');
            t.length > 0 && t.removeAttr("data-calculate")
        }
        ,
        r.prototype.calcUpdate = function(t) {
            var e, i = this;
            t = t || {},
            e = this.getNodesToUpdate("data-calculate", "", t),
            e = e.add(this.getNodesToUpdate("data-relevant", "[data-calculate]", t)),
            e.each(function() {
                function e(t) {
                    f = d(f, "string", h, t),
                    o = y && f ? s.evaluate(f, "string", h, t) : "",
                    a.setIndex(t),
                    r = a.setVal(o, g, m),
                    i.input.setVal(h, t, o)
                }
                var o, r, a, l, u, c, h, p, f, m, g, v, y, b;
                b = n(this),
                h = i.input.getName(b),
                p = -1 !== h.lastIndexOf("/") ? h.substring(h.lastIndexOf("/") + 1) : h,
                f = i.input.getCalculation(b),
                m = i.input.getXmlType(b),
                g = i.input.getConstraint(b),
                v = i.input.getRelevant(b),
                y = v ? s.evaluate(v, "boolean", h) : !0,
                a = s.node(h),
                l = a.get(),
                l.length > 1 && t.repeatPath && -1 !== h.indexOf(t.repeatPath) ? (u = s.node(t.repeatPath, t.repeatIndex).get().find(p),
                c = n(l).index(u),
                e(c)) : 1 === l.length ? (c = 0,
                e(c)) : l.each(function(t) {
                    e(t)
                }
                )
            }
            )
        }
        ,
        r.prototype.preloads = {
            init: function(t) {
                var e, i, o, r, a, l, c, h, d, p, f = this;
                u.find("#or-preload-items input").each(function() {
                    p = n(this),
                    h = t.input.getProps(p),
                    e = p.attr("data-preload").toLowerCase(),
                    i = p.attr("data-preload-params").toLowerCase(),
                    "undefined" != typeof f[e] ? (c = s.node(h.path, h.index),
                    r = c.getVal()[0],
                    a = f[e]({
                        param: i,
                        curVal: r,
                        dataNode: c
                    }),
                    c.setVal(a, null , h.xmlType)) : console.log('Preload "' + e + '" not supported. May or may not be a big deal.')
                }
                ),
                l = s.node("/*/meta/*"),
                l.get().each(function() {
                    if (e = null ,
                    o = n(this).prop("nodeName"),
                    c = s.node("/*/meta/" + o),
                    r = c.getVal()[0],
                    0 === u.find('#or-preload-items input[name$="/meta/' + o + '"][data-preload]').length)
                        switch (o) {
                        case "instanceID":
                            e = "instance",
                            d = "string",
                            i = "";
                            break;
                        case "timeStart":
                            e = "timestamp",
                            d = "datetime",
                            i = "start";
                            break;
                        case "timeEnd":
                            e = "timestamp",
                            d = "datetime",
                            i = "end";
                            break;
                        case "deviceID":
                            e = "property",
                            d = "string",
                            i = "deviceid";
                            break;
                        case "userID":
                            e = "property",
                            d = "string",
                            i = "username"
                        }
                    e && c.setVal(f[e]({
                        param: i,
                        curVal: r,
                        dataNode: c
                    }), null , d)
                }
                )
            },
            timestamp: function(t) {
                var e;
                return "start" === t.param ? t.curVal.length > 0 ? t.curVal : s.evaluate("now()", "string") : "end" === t.param ? (u.on("beforesave", function() {
                    e = s.evaluate("now()", "string"),
                    t.dataNode.setVal(e, null , "datetime")
                }
                ),
                s.evaluate("now()", "string")) : "error - unknown timestamp parameter"
            },
            date: function(t) {
                var e, n, i, o;
                return 0 === t.curVal.length ? (e = new Date(s.evaluate("today()", "string")),
                n = e.getFullYear().toString().pad(4),
                i = (e.getMonth() + 1).toString().pad(2),
                o = e.getDate().toString().pad(2),
                n + "-" + i + "-" + o) : t.curVal
            },
            property: function(t) {
                var e, n, i;
                if (e = function(t, e, n, i) {
                    if (a)
                        return a[t];
                    for (e = {},
                    a = {},
                    i = e.length - 1; i >= 0; i--)
                        n = e[i].split("="),
                        n[1] = decodeURIComponent(n[1]),
                        "s:" === n[1].substr(0, 2) && (n[1] = n[1].slice(2),
                        n[1] = n[1].slice(0, n[1].lastIndexOf("."))),
                        a[n[0]] = decodeURIComponent(n[1]);
                    return a[t]
                }
                ,
                0 === t.curVal.length) {
                    switch (n = "no " + t.param + " property in enketo",
                    t.param) {
                    case "deviceid":
                        i = e("__enketo_meta_deviceid") || "Error: could not determine deviceID";
                        break;
                    case "username":
                        i = e("__enketo_meta_uid");
                        break;
                    default:
                        i = n
                    }
                    return i
                }
                return t.curVal
            },
            context: function(t) {
                return 0 === t.curVal.length ? "application" === t.param ? "enketo" : t.param + " not supported in enketo" : t.curVal
            },
            patient: function(t) {
                return 0 === t.curVal.length ? "patient preload not supported in enketo" : t.curVal
            },
            user: function(t) {
                return 0 === t.curVal.length ? "user preload item not supported in enketo yet" : t.curVal
            },
            uid: function(t) {
                return 0 === t.curVal.length ? "no uid yet in enketo" : t.curVal
            },
            instance: function(t) {
                var e = t.curVal.length > 0 ? t.curVal : s.evaluate('concat("uuid:", uuid())', "string");
                return u.data({
                    instanceID: e
                }),
                e
            }
        },
        r.prototype.repeat = {
            init: function(t) {
                var e, i, o, r, a, l, c, h = this;
                this.formO = t,
                u.find(".or-repeat").prepend('<span class="repeat-number"></span>'),
                u.find(".or-repeat:not([data-repeat-fixed])").append('<div class="repeat-buttons"><button type="button" class="btn btn-default repeat"><i class="icon icon-plus"> </i></button><button type="button" disabled class="btn btn-default remove"><i class="icon icon-minus"> </i></button></div>'),
                u.on("click", "button.repeat:enabled", function() {
                    return h.clone(n(this).closest(".or-repeat")),
                    !1
                }
                ),
                u.on("click", "button.remove:enabled", function() {
                    return h.remove(n(this).closest(".or-repeat.clone")),
                    !1
                }
                ),
                a = function(t, d) {
                    i = t.attr("data-repeat-count") || "",
                    e = i.length > 0 ? parseInt(s.node(i).getVal()[0], 10) : 0,
                    c = u.find('.or-repeat[name="' + t.attr("name") + '"]').index(t),
                    l = s.node(t.attr("name"), c).get(),
                    o = l.siblings(l.prop("nodeName")).addBack().length,
                    r = e > o ? e : o,
                    r > 1 && h.clone(t.siblings().addBack().last(), r - 1, !0),
                    t.siblings(".or-repeat").addBack().find(".or-repeat").filter(function() {
                        return n(this).parentsUntil(".or", ".or-repeat").length === d
                    }
                    ).each(function() {
                        a(n(this), d + 1)
                    }
                    )
                }
                ,
                u.find(".or-repeat").filter(function() {
                    return 0 === n(this).parentsUntil(".or", ".or-repeat").length
                }
                ).each(function() {
                    a(n(this), 1)
                }
                )
            },
            clone: function(t, i, o) {
                var r, a, l, c, h, d, p, f, m = this;
                if (i = i || 1,
                1 !== t.length)
                    return console.error("Nothing to clone"),
                    !1;
                for (r = t.siblings(".or-repeat"),
                a = t.hasClass("clone") ? r.not(".clone").eq(0) : t,
                l = a.clone(!0, !0),
                f = a.attr("name"),
                l.addClass("clone").find(".clone").remove(),
                l.find(".invalid-required, .invalid-constraint").find("input, select, textarea").each(function() {
                    m.formO.setValid(n(this))
                }
                ),
                d = u.find('.or-repeat[name="' + f + '"]').index(t),
                l.clearInputs(""),
                p = i + d; p > d; d++)
                    l.find(".option-wrapper").each(this.fixRadioNames),
                    o || e.destroy(l),
                    l.insertAfter(t),
                    f.length > 0 && d >= 0 && s.cloneRepeat(f, d),
                    l.trigger("addrepeat", d + 1),
                    h = l.find('[type="radio"],[type="checkbox"]'),
                    h.parent("label").removeAttr("data-checked"),
                    h.filter(":checked").parent("label").attr("data-checked", "true"),
                    o ? m.formO.calcUpdate({
                        repeatPath: f,
                        repeatIndex: d + 1
                    }) : e.init(l),
                    r = r.add(l),
                    l = l.clone();
                return c = r.add(t).add(r.find(".or-repeat")),
                this.numberRepeats(c),
                this.toggleButtons(c),
                !0
            },
            remove: function(t) {
                var e = 600
                  , n = this
                  , i = t.prev(".or-repeat")
                  , o = t.attr("name")
                  , r = u.find('.or-repeat[name="' + o + '"]').index(t)
                  , a = t.siblings(".or-repeat");
                t.hide(e, function() {
                    t.remove(),
                    n.numberRepeats(a),
                    n.toggleButtons(a),
                    i.trigger("removerepeat"),
                    s.node(o, r).remove()
                }
                )
            },
            fixRadioNames: function(t, e) {
                n(e).find('input[type="radio"]').attr("name", Math.floor(1e7 * Math.random() + 1))
            },
            toggleButtons: function(t) {
                var e, i;
                t = t && 0 !== t.length ? t : u,
                t.each(function() {
                    e = n(this),
                    i = e.siblings(".or-repeat").addBack(),
                    i.children(".repeat-buttons").find("button.repeat, button.remove").prop("disabled", !0),
                    i.last().children(".repeat-buttons").find("button.repeat").prop("disabled", !1),
                    i.children(".repeat-buttons").find("button.remove").not(":first").prop("disabled", !1);
                }
                )
            },
            numberRepeats: function(t) {
                t.each(function() {
                    var t, e, i, o = n(this);
                    0 === o.prev(".or-repeat").length && (t = n(this).siblings(".or-repeat"),
                    e = t.length + 1,
                    e > 1 ? (o.find(".repeat-number").text("1"),
                    i = 2,
                    t.each(function() {
                        n(this).find(".repeat-number").eq(0).text(i),
                        i++
                    }
                    )) : o.find(".repeat-number").eq(0).empty())
                }
                )
            }
        },
        r.prototype.setEventHandlers = function() {
            var t = this;
            u.attr("onsubmit", "return false;"),
            u.on("blur", 'input:not([type="text"], [type="radio"], [type="checkbox"])', function() {
                var t = n(this);
                "undefined" != typeof t.prop("validity").badInput && t.prop("validity").badInput && t.val("")
            }
            ),
            u.on("change.file validate", "input:not(.ignore), select:not(.ignore), textarea:not(.ignore)", function(e) {
                var i, o, r, a = n(this), l = {
                    path: t.input.getName(a),
                    inputType: t.input.getInputType(a),
                    xmlType: t.input.getXmlType(a),
                    enabled: t.input.isEnabled(a),
                    constraint: t.input.getConstraint(a),
                    val: t.input.getVal(a),
                    required: t.input.isRequired(a)
                }, c = function() {
                    return r || (l.ind = t.input.getIndex(a),
                    r = s.node(l.path, l.ind)),
                    r
                }
                ;
                l.val.length > 0 && "file" === l.inputType && a[0].files[0] && a[0].files[0].size > 0 && (l.val = a[0].files[0].name),
                "validate" === e.type ? i = l.enabled && "hidden" !== l.inputType && (l.constraint || "string" !== l.xmlType && "select" !== l.xmlType && "select1" !== l.xmlType && "binary" !== l.xmlType) ? c().validate(l.constraint, l.xmlType) : !0 : (i = c().setVal(l.val, l.constraint, l.xmlType),
                i = i !== !1 || "geotrace" !== l.xmlType && "geoshape" !== l.xmlType ? i : null ),
                o = !(l.enabled && "hidden" !== l.inputType && l.required && 0 === c().getVal()[0].length),
                o === !1 ? (t.setValid(a, "constraint"),
                "validate" === e.type && t.setInvalid(a, "required")) : (t.setValid(a, "required"),
                "undefined" != typeof i && i === !1 ? t.setInvalid(a, "constraint") : null  !== i && t.setValid(a, "constraint")),
                "change" === e.type && u.trigger("valuechange.enketo")
            }
            ),
            u.on("focus fakefocus", "input:not(.ignore), select:not(.ignore), textarea:not(.ignore)", function(e) {
                t.progress.update(e.target)
            }
            ),
            u.on("focus blur fakefocus fakeblur", "input:not(.ignore), select:not(.ignore), textarea:not(.ignore)", function(e) {
                var i = n(this)
                  , o = t.input.getProps(i)
                  , r = i.closest(".question")
                  , s = r.find("legend").eq(0)
                  , a = r.hasClass("invalid-required") || r.hasClass("invalid-constraint")
                  , l = i.parentsUntil(".or", ".or-appearance-list-nolabel").length > 0
                  , u = r.find(".required-subtle")
                  , c = n('<span class="required-subtle" style="color: transparent;">Required</span>');
                "focusin" === e.type || "fakefocus" === e.type ? (r.addClass("focus"),
                o.required && 0 === u.length && !l && (u = n(c),
                s.length > 0 ? s.append(u) : u.insertBefore(this),
                a || u.show(function() {
                    n(this).removeAttr("style")
                }
                ))) : ("focusout" === e.type || "fakeblur" === e.type) && (r.removeClass("focus"),
                o.required && o.val.length > 0 ? u.remove() : a || u.removeAttr("style"))
            }
            ),
            s.$.on("dataupdate", function(e, n) {
                t.calcUpdate(n),
                t.branchUpdate(n),
                t.outputUpdate(n),
                t.itemsetUpdate(n),
                t.editStatus.set(!0)
            }
            ),
            u.on("addrepeat", function(e, i) {
                var o = n(e.target);
                t.setAllVals(o, i),
                t.calcUpdate({
                    repeatPath: o.attr("name"),
                    repeatIndex: i
                }),
                t.progress.update()
            }
            ),
            u.on("removerepeat", function() {
                t.progress.update()
            }
            ),
            u.on("changelanguage", function() {
                t.outputUpdate()
            }
            )
        }
        ,
        r.prototype.setValid = function(t, e) {
            var n = e ? "invalid-" + e : "invalid-constraint invalid-required";
            this.input.getWrapNodes(t).removeClass(n)
        }
        ,
        r.prototype.setInvalid = function(t, e) {
            e = e || "constraint",
            this.input.getWrapNodes(t).addClass("invalid-" + e).find(".required-subtle").attr("style", "color: transparent;")
        }
        ,
        r.prototype.validateAll = function() {
            var t, e = this;
            return u.find("fieldset:disabled input, fieldset:disabled select, fieldset:disabled textarea, input:disabled, select:disabled, textarea:disabled").each(function() {
                e.setValid(n(this))
            }
            ),
            u.find(".question").each(function() {
                n(this).find("input:not(.ignore):not(:disabled), select:not(.ignore):not(:disabled), textarea:not(.ignore):not(:disabled)").eq(0).trigger("validate")
            }
            ),
            t = u.find(".invalid-required, .invalid-constraint").eq(0),
            t.length > 0 && window.scrollTo && (this.pages.active && this.pages.flipToPageContaining(t),
            window.scrollTo(0, t.offset().top - 50)),
            0 === t.length
        }
        ,
        r.prototype.progress = {
            status: 0,
            lastChanged: null ,
            $all: null ,
            updateTotal: function() {
                this.$all = u.find(".question").not(".disabled").filter(function() {
                    return 0 === n(this).parentsUntil(".or", ".disabled").length
                }
                )
            },
            update: function(t) {
                var e;
                this.$all && t || this.updateTotal(),
                this.lastChanged = t || this.lastChanged,
                e = Math.round(100 * (this.$all.index(n(this.lastChanged).closest(".question")) + 1) / this.$all.length),
                e > 0 && e !== this.status && (this.status = e,
                u.trigger("progressupdate.enketo", e))
            },
            get: function() {
                return this.status
            }
        },
        r.prototype.isValid = function() {
            return u.find(".invalid-required, .invalid-constraint").length > 0 ? !1 : !0
        }
        ,
        r.prototype.addPageBreaks = function() {}
    }
    return i
}
);
var saveAs = saveAs || function(t) {
    "use strict";
    if ("undefined" == typeof navigator || !/MSIE [1-9]\./.test(navigator.userAgent)) {
        var e = t.document
          , n = function() {
            return t.URL || t.webkitURL || t
        }
          , i = e.createElementNS("http://www.w3.org/1999/xhtml", "a")
          , o = "download" in i
          , r = function(t) {
            var e = new MouseEvent("click");
            t.dispatchEvent(e)
        }
          , s = t.webkitRequestFileSystem
          , a = t.requestFileSystem || s || t.mozRequestFileSystem
          , l = function(e) {
            (t.setImmediate || t.setTimeout)(function() {
                throw e
            }
            , 0)
        }
          , u = "application/octet-stream"
          , c = 0
          , h = 500
          , d = function(e) {
            var i = function() {
                "string" == typeof e ? n().revokeObjectURL(e) : e.remove()
            }
            ;
            t.chrome ? i() : setTimeout(i, h)
        }
          , p = function(t, e, n) {
            e = [].concat(e);
            for (var i = e.length; i--; ) {
                var o = t["on" + e[i]];
                if ("function" == typeof o)
                    try {
                        o.call(t, n || t)
                    } catch (r) {
                        l(r)
                    }
            }
        }
          , f = function(t) {
            return /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type) ? new Blob(["\ufeff", t],{
                type: t.type
            }) : t
        }
          , m = function(e, l, h) {
            h || (e = f(e));
            var m, g, v, y = this, b = e.type, _ = !1, w = function() {
                p(y, "writestart progress write writeend".split(" "))
            }
            , x = function() {
                if ((_ || !m) && (m = n().createObjectURL(e)),
                g)
                    g.location.href = m;
                else {
                    var i = t.open(m, "_blank");
                    void 0 == i && "undefined" != typeof safari && (t.location.href = m)
                }
                y.readyState = y.DONE,
                w(),
                d(m)
            }
            , T = function(t) {
                return function() {
                    return y.readyState !== y.DONE ? t.apply(this, arguments) : void 0
                }
            }
            , k = {
                create: !0,
                exclusive: !1
            };
            return y.readyState = y.INIT,
            l || (l = "download"),
            o ? (m = n().createObjectURL(e),
            i.href = m,
            i.download = l,
            void setTimeout(function() {
                r(i),
                w(),
                d(m),
                y.readyState = y.DONE
            }
            )) : (t.chrome && b && b !== u && (v = e.slice || e.webkitSlice,
            e = v.call(e, 0, e.size, u),
            _ = !0),
            s && "download" !== l && (l += ".download"),
            (b === u || s) && (g = t),
            a ? (c += e.size,
            void a(t.TEMPORARY, c, T(function(t) {
                t.root.getDirectory("saved", k, T(function(t) {
                    var n = function() {
                        t.getFile(l, k, T(function(t) {
                            t.createWriter(T(function(n) {
                                n.onwriteend = function(e) {
                                    g.location.href = t.toURL(),
                                    y.readyState = y.DONE,
                                    p(y, "writeend", e),
                                    d(t)
                                }
                                ,
                                n.onerror = function() {
                                    var t = n.error;
                                    t.code !== t.ABORT_ERR && x()
                                }
                                ,
                                "writestart progress write abort".split(" ").forEach(function(t) {
                                    n["on" + t] = y["on" + t]
                                }
                                ),
                                n.write(e),
                                y.abort = function() {
                                    n.abort(),
                                    y.readyState = y.DONE
                                }
                                ,
                                y.readyState = y.WRITING
                            }
                            ), x)
                        }
                        ), x)
                    }
                    ;
                    t.getFile(l, {
                        create: !1
                    }, T(function(t) {
                        t.remove(),
                        n()
                    }
                    ), T(function(t) {
                        t.code === t.NOT_FOUND_ERR ? n() : x()
                    }
                    ))
                }
                ), x)
            }
            ), x)) : void x())
        }
          , g = m.prototype
          , v = function(t, e, n) {
            return new m(t,e,n)
        }
        ;
        return "undefined" != typeof navigator && navigator.msSaveOrOpenBlob ? function(t, e, n) {
            return n || (t = f(t)),
            navigator.msSaveOrOpenBlob(t, e || "download")
        }
         : (g.abort = function() {
            var t = this;
            t.readyState = t.DONE,
            p(t, "abort")
        }
        ,
        g.readyState = g.INIT = 0,
        g.WRITING = 1,
        g.DONE = 2,
        g.error = g.onwritestart = g.onprogress = g.onwrite = g.onabort = g.onerror = g.onwriteend = null ,
        v)
    }
}
("undefined" != typeof self && self || "undefined" != typeof window && window || this.content);
"undefined" != typeof module && module.exports ? module.exports.saveAs = saveAs : "undefined" != typeof define && null  !== define && null  != define.amd && define("file-saver", [], function() {
    return saveAs
}
),
function(t) {
    "use strict";
    if (t.URL = t.URL || t.webkitURL,
    t.Blob && t.URL)
        try {
            return void new Blob
        } catch (e) {}
    var n = t.BlobBuilder || t.WebKitBlobBuilder || t.MozBlobBuilder || function(t) {
        var e = function(t) {
            return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]
        }
          , n = function() {
            this.data = []
        }
          , i = function(t, e, n) {
            this.data = t,
            this.size = t.length,
            this.type = e,
            this.encoding = n
        }
          , o = n.prototype
          , r = i.prototype
          , s = t.FileReaderSync
          , a = function(t) {
            this.code = this[this.name = t]
        }
          , l = "NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" ")
          , u = l.length
          , c = t.URL || t.webkitURL || t
          , h = c.createObjectURL
          , d = c.revokeObjectURL
          , p = c
          , f = t.btoa
          , m = t.atob
          , g = t.ArrayBuffer
          , v = t.Uint8Array
          , y = /^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;
        for (i.fake = r.fake = !0; u--; )
            a.prototype[l[u]] = u + 1;
        return c.createObjectURL || (p = t.URL = function(t) {
            var e, n = document.createElementNS("http://www.w3.org/1999/xhtml", "a");
            return n.href = t,
            "origin" in n || ("data:" === n.protocol.toLowerCase() ? n.origin = null  : (e = t.match(y),
            n.origin = e && e[1])),
            n
        }
        ),
        p.createObjectURL = function(t) {
            var e, n = t.type;
            return null  === n && (n = "application/octet-stream"),
            t instanceof i ? (e = "data:" + n,
            "base64" === t.encoding ? e + ";base64," + t.data : "URI" === t.encoding ? e + "," + decodeURIComponent(t.data) : f ? e + ";base64," + f(t.data) : e + "," + encodeURIComponent(t.data)) : h ? h.call(c, t) : void 0
        }
        ,
        p.revokeObjectURL = function(t) {
            "data:" !== t.substring(0, 5) && d && d.call(c, t)
        }
        ,
        o.append = function(t) {
            var n = this.data;
            if (v && (t instanceof g || t instanceof v)) {
                for (var o = "", r = new v(t), l = 0, u = r.length; u > l; l++)
                    o += String.fromCharCode(r[l]);
                n.push(o)
            } else if ("Blob" === e(t) || "File" === e(t)) {
                if (!s)
                    throw new a("NOT_READABLE_ERR");
                var c = new s;
                n.push(c.readAsBinaryString(t))
            } else
                t instanceof i ? "base64" === t.encoding && m ? n.push(m(t.data)) : "URI" === t.encoding ? n.push(decodeURIComponent(t.data)) : "raw" === t.encoding && n.push(t.data) : ("string" != typeof t && (t += ""),
                n.push(unescape(encodeURIComponent(t))))
        }
        ,
        o.getBlob = function(t) {
            return arguments.length || (t = null ),
            new i(this.data.join(""),t,"raw")
        }
        ,
        o.toString = function() {
            return "[object BlobBuilder]"
        }
        ,
        r.slice = function(t, e, n) {
            var o = arguments.length;
            return 3 > o && (n = null ),
            new i(this.data.slice(t, o > 1 ? e : this.data.length),n,this.encoding)
        }
        ,
        r.toString = function() {
            return "[object Blob]"
        }
        ,
        r.close = function() {
            this.size = 0,
            delete this.data
        }
        ,
        n
    }
    (t);
    t.Blob = function(t, e) {
        var i = e ? e.type || "" : ""
          , o = new n;
        if (t)
            for (var r = 0, s = t.length; s > r; r++)
                Uint8Array && t[r] instanceof Uint8Array ? o.append(t[r].buffer) : o.append(t[r]);
        var a = o.getBlob(i);
        return !a.slice && a.webkitSlice && (a.slice = a.webkitSlice),
        a
    }
    ;
    var i = Object.getPrototypeOf || function(t) {
        return t.__proto__
    }
    ;
    t.Blob.prototype = i(new t.Blob)
}
("undefined" != typeof self && self || "undefined" != typeof window && window || this.content || this),
define("Blob", function(t) {
    return function() {
        var e;
        return e || t.Blob
    }
}
(this)),
function() {
    function t(t) {
        var e = "    ";
        if (isNaN(parseInt(t)))
            e = t;
        else
            switch (t) {
            case 1:
                e = " ";
                break;
            case 2:
                e = "  ";
                break;
            case 3:
                e = "   ";
                break;
            case 4:
                e = "    ";
                break;
            case 5:
                e = "     ";
                break;
            case 6:
                e = "      ";
                break;
            case 7:
                e = "       ";
                break;
            case 8:
                e = "        ";
                break;
            case 9:
                e = "         ";
                break;
            case 10:
                e = "          ";
                break;
            case 11:
                e = "           ";
                break;
            case 12:
                e = "            "
            }
        var n = ["\n"];
        for (ix = 0; ix < 100; ix++)
            n.push(n[ix] + e);
        return n
    }
    function e() {
        this.step = "    ",
        this.shift = t(this.step)
    }
    function n(t, e) {
        return e - (t.replace(/\(/g, "").length - t.replace(/\)/g, "").length)
    }
    function i(t, e) {
        return t.replace(/\s{1,}/g, " ").replace(/ AND /gi, "~::~" + e + e + "AND ").replace(/ BETWEEN /gi, "~::~" + e + "BETWEEN ").replace(/ CASE /gi, "~::~" + e + "CASE ").replace(/ ELSE /gi, "~::~" + e + "ELSE ").replace(/ END /gi, "~::~" + e + "END ").replace(/ FROM /gi, "~::~FROM ").replace(/ GROUP\s{1,}BY/gi, "~::~GROUP BY ").replace(/ HAVING /gi, "~::~HAVING ").replace(/ IN /gi, " IN ").replace(/ JOIN /gi, "~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi, "~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi, "~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi, "~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi, "~::~RIGHT JOIN ").replace(/ ON /gi, "~::~" + e + "ON ").replace(/ OR /gi, "~::~" + e + e + "OR ").replace(/ ORDER\s{1,}BY/gi, "~::~ORDER BY ").replace(/ OVER /gi, "~::~" + e + "OVER ").replace(/\(\s{0,}SELECT /gi, "~::~(SELECT ").replace(/\)\s{0,}SELECT /gi, ")~::~SELECT ").replace(/ THEN /gi, " THEN~::~" + e).replace(/ UNION /gi, "~::~UNION~::~").replace(/ USING /gi, "~::~USING ").replace(/ WHEN /gi, "~::~" + e + "WHEN ").replace(/ WHERE /gi, "~::~WHERE ").replace(/ WITH /gi, "~::~WITH ").replace(/ ALL /gi, " ALL ").replace(/ AS /gi, " AS ").replace(/ ASC /gi, " ASC ").replace(/ DESC /gi, " DESC ").replace(/ DISTINCT /gi, " DISTINCT ").replace(/ EXISTS /gi, " EXISTS ").replace(/ NOT /gi, " NOT ").replace(/ NULL /gi, " NULL ").replace(/ LIKE /gi, " LIKE ").replace(/\s{0,}SELECT /gi, "SELECT ").replace(/\s{0,}UPDATE /gi, "UPDATE ").replace(/ SET /gi, " SET ").replace(/~::~{1,}/g, "~::~").split("~::~")
    }
    e.prototype.xml = function(e, n) {
        var i = e.replace(/>\s{0,}</g, "><").replace(/</g, "~::~<").replace(/\s*xmlns\:/g, "~::~xmlns:").replace(/\s*xmlns\=/g, "~::~xmlns=").split("~::~")
          , o = i.length
          , r = !1
          , s = 0
          , a = ""
          , l = 0
          , u = n ? t(n) : this.shift;
        for (l = 0; o > l; l++)
            i[l].search(/<!/) > -1 ? (a += u[s] + i[l],
            r = !0,
            (i[l].search(/-->/) > -1 || i[l].search(/\]>/) > -1 || i[l].search(/!DOCTYPE/) > -1) && (r = !1)) : i[l].search(/-->/) > -1 || i[l].search(/\]>/) > -1 ? (a += i[l],
            r = !1) : /^<\w/.exec(i[l - 1]) && /^<\/\w/.exec(i[l]) && /^<[\w:\-\.\,]+/.exec(i[l - 1]) == /^<\/[\w:\-\.\,]+/.exec(i[l])[0].replace("/", "") ? (a += i[l],
            r || s--) : i[l].search(/<\w/) > -1 && -1 == i[l].search(/<\//) && -1 == i[l].search(/\/>/) ? a = a += r ? i[l] : u[s++] + i[l] : i[l].search(/<\w/) > -1 && i[l].search(/<\//) > -1 ? a = a += r ? i[l] : u[s] + i[l] : i[l].search(/<\//) > -1 ? a = a += r ? i[l] : u[--s] + i[l] : i[l].search(/\/>/) > -1 ? a = a += r ? i[l] : u[s] + i[l] : a += i[l].search(/<\?/) > -1 ? u[s] + i[l] : i[l].search(/xmlns\:/) > -1 || i[l].search(/xmlns\=/) > -1 ? u[s] + i[l] : i[l];
        return "\n" == a[0] ? a.slice(1) : a
    }
    ,
    e.prototype.json = function(t, e) {
        var e = e ? e : this.step;
        return "undefined" == typeof JSON ? t : "string" == typeof t ? JSON.stringify(JSON.parse(t), null , e) : "object" == typeof t ? JSON.stringify(t, null , e) : t
    }
    ,
    e.prototype.css = function(e, n) {
        var i = e.replace(/\s{1,}/g, " ").replace(/\{/g, "{~::~").replace(/\}/g, "~::~}~::~").replace(/\;/g, ";~::~").replace(/\/\*/g, "~::~/*").replace(/\*\//g, "*/~::~").replace(/~::~\s{0,}~::~/g, "~::~").split("~::~")
          , o = i.length
          , r = 0
          , s = ""
          , a = 0
          , l = n ? t(n) : this.shift;
        for (a = 0; o > a; a++)
            s += /\{/.exec(i[a]) ? l[r++] + i[a] : /\}/.exec(i[a]) ? l[--r] + i[a] : /\*\\/.exec(i[a]) ? l[r] + i[a] : l[r] + i[a];
        return s.replace(/^\n{1,}/, "")
    }
    ,
    e.prototype.sql = function(e, o) {
        var r = e.replace(/\s{1,}/g, " ").replace(/\'/gi, "~::~'").split("~::~")
          , s = r.length
          , a = []
          , l = 0
          , u = this.step
          , c = 0
          , h = ""
          , d = 0
          , p = o ? t(o) : this.shift;
        for (d = 0; s > d; d++)
            a = d % 2 ? a.concat(r[d]) : a.concat(i(r[d], u));
        for (s = a.length,
        d = 0; s > d; d++) {
            c = n(a[d], c),
            /\s{0,}\s{0,}SELECT\s{0,}/.exec(a[d]) && (a[d] = a[d].replace(/\,/g, ",\n" + u + u)),
            /\s{0,}\s{0,}SET\s{0,}/.exec(a[d]) && (a[d] = a[d].replace(/\,/g, ",\n" + u + u)),
            /\s{0,}\(\s{0,}SELECT\s{0,}/.exec(a[d]) ? (l++,
            h += p[l] + a[d]) : /\'/.exec(a[d]) ? (1 > c && l && l--,
            h += a[d]) : (h += p[l] + a[d],
            1 > c && l && l--)
        }
        return h = h.replace(/^\n{1,}/, "").replace(/\n{1,}/g, "\n")
    }
    ,
    e.prototype.xmlmin = function(t, e) {
        var n = e ? t : t.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g, "").replace(/[ \r\n\t]{1,}xmlns/g, " xmlns");
        return n.replace(/>\s{0,}</g, "><")
    }
    ,
    e.prototype.jsonmin = function(t) {
        return "undefined" == typeof JSON ? t : JSON.stringify(JSON.parse(t), null , 0)
    }
    ,
    e.prototype.cssmin = function(t, e) {
        var n = e ? t : t.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g, "");
        return n.replace(/\s{1,}/g, " ").replace(/\{\s{1,}/g, "{").replace(/\}\s{1,}/g, "}").replace(/\;\s{1,}/g, ";").replace(/\/\*\s{1,}/g, "/*").replace(/\*\/\s{1,}/g, "*/")
    }
    ,
    e.prototype.sqlmin = function(t) {
        return t.replace(/\s{1,}/g, " ").replace(/\s{1,}\(/, "(").replace(/\s{1,}\)/, ")")
    }
    ,
    window.vkbeautify = new e
}
(),
define("vkbeautify", function(t) {
    return function() {
        var e;
        return e || t.vkbeautify
    }
}
(this)),
define("controller-webform", ["gui", "connection", "settings", "enketo-js/Form", "enketo-js/FormModel", "file-saver", "Blob", "vkbeautify", "jquery"], function(t, e, n, i, o, r, s, a, l) {
    "use strict";
    function u(n, o, r, s) {
        var a, u;
        S = n,
        C = o,
        s = s || {},
        r = r || null ,
        P = s.recordStore || null ,
        L = s.fileStore,
        e.init(!0),
        L && L.isSupported() && L.flush && (!P || 0 === P.getRecordList().length) && L.flush(),
        k = new i(S,{
            modelStr: C,
            instanceStr: r,
            submitted: s.submitted
        }),
        a = k.init(),
        k.getEncryptionKey() && (console.error("This form requires encryption of local records but this is not supported yet in Enketo.", a),
        a.unshift("<strong>This form requires local encryption of records. Unfortunately this is currently not supported. You should use ODK Collect for data collection with this form.</strong>")),
        a.length > 0 && (console.error("load errors:", a),
        u = r ? "to edit data" : "for data entry",
        t.showLoadErrors(a, "It is recommended <strong>not to use this form</strong> " + u + " until this is resolved.")),
        E = k.getView().$,
        D = l(".form-progress"),
        y(),
        P && (l(".side-slider").append('<h3>Queue</h3><p>Records are stored inside your browser until they have been uploaded (even if you turn off your computer or go offline).</p><progress class="upload-progress"></progress><ul class="record-list"></ul><div class="button-bar"><button class="btn btn-default export-records">Export</button><button class="btn btn-primary pull-right upload-records">Upload</button></div><p>Queued records, except those marked as <em>draft</em> ( <span class="glyphicon glyphicon-pencil"></span> ), are uploaded <strong>automatically</strong>, in the background, every 5 minutes when the web page is open and an Internet connection is available. To force an upload in between automatic attempts, click Upload.</p>'),
        E.trigger("save", JSON.stringify(P.getRecordList()))),
        s.submitInterval && (window.setInterval(function() {
            m()
        }
        , s.submitInterval),
        window.setTimeout(function() {
            m()
        }
        , 5e3)),
        console.log("controls initialized for form", k)
    }
    function c(e) {
        var n, o;
        console.debug("editstatus: " + k.getEditStatus()),
        !e && k.getEditStatus() ? (n = "There are unsaved changes, would you like to continue <strong>without</strong> saving those?",
        o = {
            posAction: function() {
                c(!0)
            }
        },
        t.confirm(n, o)) : (w(!1),
        _(null ),
        k.resetView(),
        k = new i("form.or:eq(0)",{
            modelStr: C
        }),
        window.form = k,
        k.init(),
        E = k.getView().$,
        D = l(".form-progress"),
        l("button#delete-form").button("disable"))
    }
    function h(e, n) {
        var o, r, s, a;
        !n && k.getEditStatus() ? (r = {
            msg: "The current form has unsaved changes. Would you like to load a record <strong>without saving changes</strong> to the form you were working on?",
            heading: "Unsaved edits"
        },
        s = {
            posButton: "Proceed without saving",
            posAction: function() {
                h(e, !0)
            }
        },
        t.confirm(r, s)) : (o = P.getRecord(e),
        o && o.data ? (k.resetView(),
        k = new i(S,{
            modelStr: C,
            instanceStr: o.data,
            submitted: !1
        }),
        a = k.init(),
        a.length > 0 && (console.error("load errors:", a),
        t.showLoadErrors(a, "It is recommended <strong>not to edit this record</strong> until this is resolved.")),
        _(e),
        w(o.draft),
        k.setRecordName(e),
        l(".side-slider-toggle.handle.close").click(),
        l("button#delete-form").button("enable"),
        t.feedback('"' + e + '" has been loaded', 2)) : t.alert("Record could not be retrieved or contained no data."))
    }

    loadDraft = function(passedDataStr){
        var o, r, s, a;
        k.resetView();
        k = new i(S,{
            modelStr: C,
            instanceStr: passedDataStr,
            submitted: !1
        }),
        a = k.init(),
        a.length > 0 && (console.error("load errors:", a),
        t.showLoadErrors(a, "It is recommended <strong>not to edit this record</strong> until this is resolved.")),
        _(e),
        //w(o.draft),
        k.setRecordName(e)
    }

    savePartialData = function(){
        Android.savePartialFormData(k.getDataStr(!0, !0));
    }

    function d(e, n, i) {
        var o, r, s, a, l, u = x();
        return console.log("saveRecord called with recordname:", e, "confirmed:", n, "error:", i, "draft:", u),
        E.trigger("beforesave"),
        n = "undefined" != typeof n ? n : !1,
        (e = e || k.getRecordName() || k.getSurveyName() + " - " + P.getCounterValue()) ? u || k.validate() ? !u || n ? (s = {
            draft: u,
            data: k.getDataStr(!0, !0)
        },
        l = k.getRecordName() === e,
        a = P.setRecord(e, s, !0, l, k.getRecordName()),
        console.log("saveResult", s.data),
        "success" === a ? L.saveCurrentFiles().fin(function() {
            c(!0),
            u ? t.alert("Record stored as draft.") : (t.alert("Record queued for submission." + s.data),
            f(e, s))
        }
        ) : "require" === a || "existing" === a || "forbidden" === a ? d(void 0, !1, 'Record name "' + e + '" already exists (or is not allowed). The record was not saved.') : t.alert("Error trying to save data locally (message: " + a + ")"),
        a) : (o = {
            dialog: "save",
            msg: "",
            heading: "Save as a Draft",
            errorMsg: i
        },
        r = {
            posButton: "Save & Close",
            negButton: "Cancel",
            posAction: function(e) {
                k.getRecordName() && k.getRecordName() !== e["record-name"] ? t.confirm({
                    msg: 'Are you sure you want to rename "' + k.getRecordName() + '"" to "' + e["record-name"] + '"?'
                }, {
                    posAction: function() {
                        d(e["record-name"], !0)
                    }
                }) : d(e["record-name"], !0)
            },
            negAction: function() {
                return !1
            }
        },
        t.confirm(o, r, {
            "record-name": e
        }),
        void 0) : void t.alert("Form contains errors <br/>(please see fields marked in red)") : console.error("No record name could be created.")
    }
    function p() {
        var i, o, r, s;
        return E.trigger("beforesave"),
        k.isValid() ? (o = "undefined" != typeof n && "undefined" != typeof n.returnURL && n.returnURL ? !0 : !1,
        r = o ? "You will be automatically redirected after submission. " : "",
        t.alert(r + '<br /><progress style="text-align: center;"/>', "Submitting...", "info"),
        i = {
            key: "iframe_record",
            data: k.getDataStr()
        },
        s = {
            error: function() {
                t.alert("Please try submitting again.", "Submission Failed")
            },
            success: function() {
                o ? (t.alert("You will now be redirected.", "Submission Successful!", "success"),
                setTimeout(function() {
                    location.href = n.returnURL
                }
                , 1500)) : (t.alert("Your data was submitted!", "Submission Successful!", "success"),
                c(!0))
            },
            complete: function() {}
        },
        void L.saveCurrentFiles().done(function() {
            
        }
        )) : void t.alert("Form contains errors <br/>(please see fields marked in red) 2222")
    }
    function f(n, i) {
        i.draft || g({
            key: n,
            data: i.data
        }, {
            success: function(t) {
                e.uploadRecords(t, !0)
            },
            error: function() {
                t.alert("Something went wrong while trying to prepare the record(s) for uploading.", "Record Error")
            }
        })
    }
    function m() {
        var t, n = P.getSurveyDataArr(!0), i = function(t) {
            e.uploadRecords(t)
        }
        , o = function() {
            console.error("Something went wrong while trying to prepare the record(s) for uploading.")
        }
        ;
        if (!e.getUploadOngoingID() && 0 === e.getUploadQueue().length)
            for (t = 0; t < n.length; t++)
                g(n[t], {
                    success: i,
                    error: o
                })
    }
    function g(i, r) {
        function s(t, e) {
            return f = new FormData,
            f.append("xml_submission_data", p),
            {
                name: i.key,
                instanceID: g,
                formData: f,
                batches: t,
                batchIndex: e
            }
        }
        function a() {
            v.each(function() {
                b = {
                    newName: l(this).prop("nodeName"),
                    fileName: l(this).text()
                },
                L.getFile(g, b, {
                    success: function(t) {
                        w++,
                        E.push(t),
                        x.push(t.file.size),
                        w == v.length && u()
                    },
                    error: function(t) {
                        w++,
                        k.push(b.fileName),
                        console.error("Error occured when trying to retrieve " + b.fileName + " from local filesystem", t),
                        w == v.length && u()
                    }
                })
            }
            )
        }
        function u() {
            var t = e.getMaxSubmissionSize();
            if (E.length > 0)
                for (D = T(x, t),
                console.debug("splitting record into " + D.length + " batches to reduce submission size ", D),
                h = 0; h < D.length; h++) {
                    for (_ = s(D.length, h),
                    d = 0; d < D[h].length; d++)
                        y = D[h][d],
                        _.formData.append(E[y].newName + "[]", E[y].file);
                    r.success(_)
                }
            else
                _ = s(1, 0),
                r.success(_);
            c()
        }
        function c() {
            k.length > 0 && t.alert("<p>The following media files could not be retrieved: " + k.join(", ") + ". The submission will go ahead and show the missing filenames in the data, but without the actual file(s).</p><p>Thanks for helping test this experimental feature. If you find out how you can reproduce this issue, please contact " + n.supportEmail + ".</p>", "Experimental feature failed")
        }
        var h, d, p, f, m, g, v, y, b, _, w = 0, x = [], k = [], E = [], D = [];
        m = new o("<model><instance>" + i.data + "</instance></model>"),
        m.init(),
        g = m.getInstanceID(),
        v = L ? m.$.find('[type="file"]').removeAttr("type") : [],
        p = m.getStr(!1, !0),
        L && 0 !== v.length ? a() : u()
    }
    function v(t, e) {
        var n;
        n = new s([e],{
            type: "text/plain; charset=utf-8"
        }),
        r(n, t)
    }
    function y() {
        l("button#reset-form").click(function() {
            c()
        }
        ),
        l("button#submit-form").click(function() {
			var val;
            var t = l(this);
			
			if(k.validate()){
				//the form input is valid
				Android.processFormSubmission(k.getDataStr(!0, !0));
				//k.init();
			} else {
			    Android.showFormErrorToast();
				//alert("Form contains errors (please see fields marked in red)");
			}
        }
        ),
        l("button#submit-form-single").click(function() {
            var t = l(this);
            t.btnBusyState(!0),
            setTimeout(function() {
                return k.validate(),
                p(),
                t.btnBusyState(!1),
                !1
            }
            , 100)
        }
        ),
        l('.form-footer [name="draft"]').on("change", function() {
            var t = l(this).prop("checked") ? "Save Draft" : "Submit";
            l("#submit-form").text(t)
        }
        ),
        l(document).on("click", "button#validate-form:not(.disabled)", function() {
            if ("undefined" != typeof k) {
                var e = l(this);
                e.btnBusyState(!0),
                setTimeout(function() {
                    return k.validate(),
                    e.btnBusyState(!1),
                    k.isValid() ? void 0 : void t.alert("Form contains errors <br/>(please see fields marked in red) 3333")
                }
                , 100)
            }
        }
        ),
        l(document).on("click", ".export-records", function() {
            var e, i, o, r = k.getSurveyName() + "_data_backup.xml";
            o = P.getExportStr(),
            o ? (e = n.serverURL || "",
            i = a.xml('<export date="' + new Date + '" server="' + e + '">' + o + "</export>"),
            v(r, i)) : t.alert("No records in queue. The records may have been successfully submitted already.")
        }
        ),
        l(document).on("click", ".upload-records:not(:disabled)", function() {
            m()
        }
        ),
        l(document).on("click", ".record.error", function() {
            var t = l(this).attr("name")
              , e = l(this).siblings('[name="' + t + '"]');
            e.is(":visible") ? e.hide(500) : e.show(500)
        }
        ),
        l(document).on("click", '.record-list [data-draft="true"]', function() {
            h(l(this).closest(".record").attr("name"), !1)
        }
        ),
        l(document).on("save delete", "form.or", function(t, e) {
            b(JSON.parse(e))
        }
        ),
        l(document).on("submissionsuccess", function(t, e, n) {
            L && L.isSupported() && L.flush(n),
            P && P.removeRecord(e),
            console.log("After submission success, attempted to remove record with key:", e, "and files in folder:", n)
        }
        ),
        l(document).on("progressupdate", "form.or", function(t, e) {
            D.length > 0 && D.css("width", e + "%")
        }
        )
    }
    function b(t, e) {
        var n, i, o, r = l(".side-slider .upload-records, .side-slider .export-records"), s = l(".side-slider .record-list");
        console.log("updating record list"),
        t = t || [],
        l(".queue-length").text(t.length),
        s.find(".record").each(function() {
            n = l(this).attr("name"),
            0 === l.grep(t, function(t) {
                return t.key == n
            }
            ).length && l(this).siblings('[name="' + n + '"]').addBack().hide(2e3, function() {
                l(this).remove()
            }
            )
        }
        ),
        r.attr("disabled", "disabled"),
        t.length > 0 ? (s.find(".no-records").remove(),
        l(".side-slider .export-records").removeAttr("disabled"),
        t.forEach(function(t) {
            n = t.key,
            i = t.draft,
            i || r.removeAttr("disabled"),
            o = s.find('[name="' + n + '"]'),
            0 === o.length && (o = l('<li class="record"></li'),
            o.text(n),
            o.attr("name", n),
            s.append(o)),
            o.attr("data-draft", i)
        }
        )) : 0 === s.find(".no-records").length && s.append('<li class="no-records">no records queued</li>')
    }
    function _(t) {
        var e = l(".side-slider .record-list");
        e.find("li").removeClass("active"),
        t && e.find('li[name="' + t + '"]').addClass("active")
    }
    function w(t) {
        t = t || !1,
        l('.form-footer [name="draft"]').prop("checked", t).trigger("change")
    }
    function x() {
        return l('.form-footer [name="draft"]').prop("checked")
    }
    function T(t, e) {
        var n, i, o, r, s = [], a = [];
        for (n = 0; n < t.length; n++)
            s.push({
                index: n,
                size: t[n]
            });
        for (; s.length > 0; ) {
            if (o = [s[0].index],
            r = s[0].size,
            s[0].size < e)
                for (n = 1; n < s.length; n++)
                    r + s[n].size < e && (o.push(s[n].index),
                    r += s[n].size);
            for (a.push(o),
            n = 0; n < s.length; n++)
                for (i = 0; i < o.length; i++)
                    s[n].index === o[i] && s.splice(n, 1)
        }
        return a
    }
    var k, E, D, S, C, P, L;
    return {
        init: u,
        submitQueue: m,
        divideIntoBatches: T
    }
}
),
require(["require-config"], function(t) {
    console.time && console.time("client loading time"),
    require(["performance", "gui", "cache", "store", "file-manager", "controller-webform", "jquery"], function(t, e, n, i, o, r, s) {
        i.isSupported() && i.isWritable() ? n.requested() && !n.activated() ? e.showCacheUnsupported() : n.requested() && s(document).trigger("browsersupport", "offline-launch") : window.location = settings.modernBrowsersURL,
        s(document).ready(function() {
            r.init("form.or:eq(0)", modelStr, null , {
                recordStore: i,
                fileStore: o,
                submitInterval: 3e5,
                submitted: !1
            }),
            console.timeEnd && console.timeEnd("client loading time")
        }
        )
    }
    )
}
),
define("../main-webform", function() {}
),
define("enketo-js/Widget", ["jquery"], function(t) {
    var e = function(t, e, n) {
        this.element = t,
        this.options = e || {},
        this.namespace = this.namespace || "somewidget",
        this.options.touch = "undefined" != typeof this.options.touch ? this.options.touch : !1,
        this.event = n || null 
    }
    ;
    return e.prototype = {
        destroy: function(e) {
            t(e).removeData(this.namespace).off("." + this.namespace).show().next(".widget").remove()
        },
        disable: function() {},
        enable: function() {},
        update: function() {}
    },
    e
}
),
define("enketo-widget/note/notewidget", ["enketo-js/Widget", "jquery", "enketo-js/plugins"], function(t, e) {
    "use strict";
    function n(e, n) {
        this.namespace = i,
        t.call(this, e, n),
        this._init()
    }
    var i = "notewidget";
    return n.prototype = Object.create(t.prototype),
    n.prototype.constructor = n,
    n.prototype._init = function() {
        var t = e(this.element);
        t.find(".question-label").markdownToHtml().end().find("[readonly]").addClass("ignore"),
        t.is(".note") && !t.next().is(".note") && t.addClass("last-of-class")
    }
    ,
    n.prototype.destroy = function(t) {}
    ,
    e.fn[i] = function(t, o) {
        return this.each(function() {
            var r = e(this)
              , s = r.data(i);
            t = t || {},
            s || "object" != typeof t ? s && "string" == typeof t && s[t](this) : r.data(i, s = new n(this,t,o))
        }
        )
    }
    ,
    i
}
),
define("enketo-widget/select-desktop-bootstrap/selectpicker", ["enketo-js/Widget", "jquery", "bootstrap"], function(t, e) {
    "use strict";
    function n(n, o, r) {
        this.namespace = i,
        t.call(this, n, o),
        r && (r.stopPropagation(),
        r.preventDefault()),
        this.$picker = null ,
        this.noneSelectedText = o.noneSelectedText || "none selected",
        this.lengthmax = o.maxlength || 15,
        this.multiple = "undefined" != typeof e(n).attr("multiple") && e(n).attr("multiple") !== !1,
        this._init()
    }
    var i = "desktopSelectpicker";
    return n.prototype = Object.create(t.prototype),
    n.prototype.constructor = n,
    n.prototype._init = function() {
        var t = this._getTemplate()
          , n = e(this.element);
        n.css("display", "none"),
        t = this._createLi(t),
        this.$picker = t.insertAfter(n),
        this.$picker.find("> a").addClass(this.selectClass),
        this._clickListener(),
        this._focusListener()
    }
    ,
    n.prototype._getTemplate = function() {
        var t = '<div class="btn-group bootstrap-select widget clearfix"><button type="button" class="btn btn-default dropdown-toggle clearfix" data-toggle="dropdown"><span class="selected">__SELECTED_OPTIONS</span><span class="caret"></span></button><ul class="dropdown-menu" role="menu">__ADD_LI</ul></div>';
        return t
    }
    ,
    n.prototype._createLi = function(t) {
        var n, i, o = [], r = "", s = this.multiple ? 'type="checkbox"' : 'type="radio" name="' + 1e5 * Math.random() + '"', a = this;
        if (e(this.element).find("option").each(function() {
            o.push({
                label: e(this).text(),
                selected: e(this).is(":selected"),
                value: e(this).attr("value")
            })
        }
        ),
        o.length > 0) {
            t = t.replace("__SELECTED_OPTIONS", this._createSelectedStr());
            for (var l = 0; l < o.length; l++)
                o[l].value && (n = o[l].selected ? ' checked="checked"' : "",
                i = o[l].selected && !a.multiple ? 'class="active"' : "",
                r += "<li " + i + '><a class="option-wrapper" tabindex="-1" href="#"><label><input class="ignore" ' + s + n + 'value="' + o[l].value + '" /><span class="option-label">' + o[l].label + "</span></label></a></li>")
        }
        return t = t.replace("__ADD_LI", r),
        e(t)
    }
    ,
    n.prototype._createSelectedStr = function() {
        var t, n = [], i = e(this.element);
        return i.find("option:selected").each(function() {
            e(this).attr("value").length > 0 && n.push(e(this).text())
        }
        ),
        0 === n.length ? this.noneSelectedText : (t = n.join(", "),
        t.length > this.lengthmax ? n.length + " selected" : t)
    }
    ,
    n.prototype._clickListener = function() {
        var t = this;
        this.$picker.on("click", "li:not(.disabled)", function(n) {
            n.preventDefault();
            var i = e(this)
              , o = i.find("input")
              , r = e(t.element)
              , s = r.find('option[value="' + o.val() + '"]')
              , a = s.is(":selected");
            t.multiple ? n.stopPropagation() : (t.$picker.find("li").removeClass("active"),
            s.siblings("option").prop("selected", !1),
            t.$picker.find("input").prop("checked", !1)),
            a ? (i.removeClass("active"),
            o.prop("checked", !1),
            s.prop("selected", !1)) : (t.multiple || i.addClass("active"),
            o.prop("checked", !0),
            s.prop("selected", !0)),
            t.$picker.find(".selected").html(t._createSelectedStr()),
            r.trigger("change")
        }
        )
    }
    ,
    n.prototype._focusListener = function() {
        var t = this;
        this.$picker.on("shown.bs.dropdown", function() {
            return e(t.element).trigger("fakefocus"),
            !0
        }
        ).on("hidden.bs.dropdown", function() {
            return e(t.element).trigger("fakeblur"),
            !0
        }
        )
    }
    ,
    n.prototype.disable = function() {
        this.$picker.find("li").addClass("disabled")
    }
    ,
    n.prototype.enable = function() {
        this.$picker.find("li").removeClass("disabled")
    }
    ,
    n.prototype.update = function() {
        this.$picker.remove(),
        this._init()
    }
    ,
    e.fn[i] = function(t, o) {
        return t = t || {},
        this.each(function() {
            var r = e(this)
              , s = r.data(i);
            s || "object" != typeof t || t.touch ? s && "string" == typeof t && s[t](this) : r.data(i, s = new n(this,t,o))
        }
        )
    }
    ,
    i
}
),
define("enketo-widget/select-mobile/selectpicker", ["jquery", "enketo-js/Widget"], function(t, e) {
    "use strict";
    function n(t, n, o) {
        this.namespace = i,
        e.call(this, t, n),
        this._init()
    }
    var i = "mobileSelectpicker";
    return n.prototype = Object.create(e.prototype),
    n.prototype.constructor = n,
    n.prototype._init = function() {
        var e = this;
        t(this.element).on("change." + i, function() {
            return e._showSelectedValues(),
            !0
        }
        ),
        this._showSelectedValues()
    }
    ,
    n.prototype._showSelectedValues = function() {
        var e, n = [], i = '<span class="widget mobileselect"></span>', o = t(this.element), r = o.next(".widget").length > 0 ? o.next(".widget") : t(i).insertAfter(o), s = t.isArray(o.val()) ? o.val() : [o.val()];
        for (e = 0; e < s.length; e++)
            n.push(t(this).find('option[value="' + s[e] + '"]').text());
        r.text(s.join(", "))
    }
    ,
    t.fn[i] = function(e, o) {
        return e = e || {},
        this.each(function() {
            var r = t(this)
              , s = r.data(i);
            !s && "object" == typeof e && e.touch && r.data(i, s = new n(this,e,o)),
            s && "string" == typeof e && s[e](this)
        }
        )
    }
    ,
    i
}
),
!function(t, e, n) {
    var i = t.L
      , o = {};
    o.version = "0.7.3",
    "object" == typeof module && "object" == typeof module.exports ? module.exports = o : "function" == typeof define && define.amd && define("leaflet", o),
    o.noConflict = function() {
        return t.L = i,
        this
    }
    ,
    t.L = o,
    o.Util = {
        extend: function(t) {
            var e, n, i, o, r = Array.prototype.slice.call(arguments, 1);
            for (n = 0,
            i = r.length; i > n; n++) {
                o = r[n] || {};
                for (e in o)
                    o.hasOwnProperty(e) && (t[e] = o[e])
            }
            return t
        },
        bind: function(t, e) {
            var n = arguments.length > 2 ? Array.prototype.slice.call(arguments, 2) : null ;
            return function() {
                return t.apply(e, n || arguments)
            }
        },
        stamp: function() {
            var t = 0
              , e = "_leaflet_id";
            return function(n) {
                return n[e] = n[e] || ++t,
                n[e]
            }
        }
        (),
        invokeEach: function(t, e, n) {
            var i, o;
            if ("object" == typeof t) {
                o = Array.prototype.slice.call(arguments, 3);
                for (i in t)
                    e.apply(n, [i, t[i]].concat(o));
                return !0
            }
            return !1
        },
        limitExecByInterval: function(t, e, n) {
            var i, o;
            return function r() {
                var s = arguments;
                return i ? void (o = !0) : (i = !0,
                setTimeout(function() {
                    i = !1,
                    o && (r.apply(n, s),
                    o = !1)
                }
                , e),
                void t.apply(n, s))
            }
        },
        falseFn: function() {
            return !1
        },
        formatNum: function(t, e) {
            var n = Math.pow(10, e || 5);
            return Math.round(t * n) / n
        },
        trim: function(t) {
            return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "")
        },
        splitWords: function(t) {
            return o.Util.trim(t).split(/\s+/)
        },
        setOptions: function(t, e) {
            return t.options = o.extend({}, t.options, e),
            t.options
        },
        getParamString: function(t, e, n) {
            var i = [];
            for (var o in t)
                i.push(encodeURIComponent(n ? o.toUpperCase() : o) + "=" + encodeURIComponent(t[o]));
            return (e && -1 !== e.indexOf("?") ? "&" : "?") + i.join("&")
        },
        template: function(t, e) {
            return t.replace(/\{ *([\w_]+) *\}/g, function(t, i) {
                var o = e[i];
                if (o === n)
                    throw new Error("No value provided for variable " + t);
                return "function" == typeof o && (o = o(e)),
                o
            }
            )
        },
        isArray: Array.isArray || function(t) {
            return "[object Array]" === Object.prototype.toString.call(t)
        }
        ,
        emptyImageUrl: "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
    },
    function() {
        function e(e) {
            var n, i, o = ["webkit", "moz", "o", "ms"];
            for (n = 0; n < o.length && !i; n++)
                i = t[o[n] + e];
            return i
        }
        function n(e) {
            var n = +new Date
              , o = Math.max(0, 16 - (n - i));
            return i = n + o,
            t.setTimeout(e, o)
        }
        var i = 0
          , r = t.requestAnimationFrame || e("RequestAnimationFrame") || n
          , s = t.cancelAnimationFrame || e("CancelAnimationFrame") || e("CancelRequestAnimationFrame") || function(e) {
            t.clearTimeout(e)
        }
        ;
        o.Util.requestAnimFrame = function(e, i, s, a) {
            return e = o.bind(e, i),
            s && r === n ? void e() : r.call(t, e, a)
        }
        ,
        o.Util.cancelAnimFrame = function(e) {
            e && s.call(t, e)
        }
    }
    (),
    o.extend = o.Util.extend,
    o.bind = o.Util.bind,
    o.stamp = o.Util.stamp,
    o.setOptions = o.Util.setOptions,
    o.Class = function() {}
    ,
    o.Class.extend = function(t) {
        var e = function() {
            this.initialize && this.initialize.apply(this, arguments),
            this._initHooks && this.callInitHooks()
        }
          , n = function() {}
        ;
        n.prototype = this.prototype;
        var i = new n;
        i.constructor = e,
        e.prototype = i;
        for (var r in this)
            this.hasOwnProperty(r) && "prototype" !== r && (e[r] = this[r]);
        t.statics && (o.extend(e, t.statics),
        delete t.statics),
        t.includes && (o.Util.extend.apply(null , [i].concat(t.includes)),
        delete t.includes),
        t.options && i.options && (t.options = o.extend({}, i.options, t.options)),
        o.extend(i, t),
        i._initHooks = [];
        var s = this;
        return e.__super__ = s.prototype,
        i.callInitHooks = function() {
            if (!this._initHooksCalled) {
                s.prototype.callInitHooks && s.prototype.callInitHooks.call(this),
                this._initHooksCalled = !0;
                for (var t = 0, e = i._initHooks.length; e > t; t++)
                    i._initHooks[t].call(this)
            }
        }
        ,
        e
    }
    ,
    o.Class.include = function(t) {
        o.extend(this.prototype, t)
    }
    ,
    o.Class.mergeOptions = function(t) {
        o.extend(this.prototype.options, t)
    }
    ,
    o.Class.addInitHook = function(t) {
        var e = Array.prototype.slice.call(arguments, 1)
          , n = "function" == typeof t ? t : function() {
            this[t].apply(this, e)
        }
        ;
        this.prototype._initHooks = this.prototype._initHooks || [],
        this.prototype._initHooks.push(n)
    }
    ;
    var r = "_leaflet_events";
    o.Mixin = {},
    o.Mixin.Events = {
        addEventListener: function(t, e, n) {
            if (o.Util.invokeEach(t, this.addEventListener, this, e, n))
                return this;
            var i, s, a, l, u, c, h, d = this[r] = this[r] || {}, p = n && n !== this && o.stamp(n);
            for (t = o.Util.splitWords(t),
            i = 0,
            s = t.length; s > i; i++)
                a = {
                    action: e,
                    context: n || this
                },
                l = t[i],
                p ? (u = l + "_idx",
                c = u + "_len",
                h = d[u] = d[u] || {},
                h[p] || (h[p] = [],
                d[c] = (d[c] || 0) + 1),
                h[p].push(a)) : (d[l] = d[l] || [],
                d[l].push(a));
            return this
        },
        hasEventListeners: function(t) {
            var e = this[r];
            return !!e && (t in e && e[t].length > 0 || t + "_idx" in e && e[t + "_idx_len"] > 0)
        },
        removeEventListener: function(t, e, n) {
            if (!this[r])
                return this;
            if (!t)
                return this.clearAllEventListeners();
            if (o.Util.invokeEach(t, this.removeEventListener, this, e, n))
                return this;
            var i, s, a, l, u, c, h, d, p, f = this[r], m = n && n !== this && o.stamp(n);
            for (t = o.Util.splitWords(t),
            i = 0,
            s = t.length; s > i; i++)
                if (a = t[i],
                c = a + "_idx",
                h = c + "_len",
                d = f[c],
                e) {
                    if (l = m && d ? d[m] : f[a]) {
                        for (u = l.length - 1; u >= 0; u--)
                            l[u].action !== e || n && l[u].context !== n || (p = l.splice(u, 1),
                            p[0].action = o.Util.falseFn);
                        n && d && 0 === l.length && (delete d[m],
                        f[h]--)
                    }
                } else
                    delete f[a],
                    delete f[c],
                    delete f[h];
            return this
        },
        clearAllEventListeners: function() {
            return delete this[r],
            this
        },
        fireEvent: function(t, e) {
            if (!this.hasEventListeners(t))
                return this;
            var n, i, s, a, l, u = o.Util.extend({}, e, {
                type: t,
                target: this
            }), c = this[r];
            if (c[t])
                for (n = c[t].slice(),
                i = 0,
                s = n.length; s > i; i++)
                    n[i].action.call(n[i].context, u);
            a = c[t + "_idx"];
            for (l in a)
                if (n = a[l].slice())
                    for (i = 0,
                    s = n.length; s > i; i++)
                        n[i].action.call(n[i].context, u);
            return this
        },
        addOneTimeEventListener: function(t, e, n) {
            if (o.Util.invokeEach(t, this.addOneTimeEventListener, this, e, n))
                return this;
            var i = o.bind(function() {
                this.removeEventListener(t, e, n).removeEventListener(t, i, n)
            }
            , this);
            return this.addEventListener(t, e, n).addEventListener(t, i, n)
        }
    },
    o.Mixin.Events.on = o.Mixin.Events.addEventListener,
    o.Mixin.Events.off = o.Mixin.Events.removeEventListener,
    o.Mixin.Events.once = o.Mixin.Events.addOneTimeEventListener,
    o.Mixin.Events.fire = o.Mixin.Events.fireEvent,
    function() {
        var i = "ActiveXObject" in t
          , r = i && !e.addEventListener
          , s = navigator.userAgent.toLowerCase()
          , a = -1 !== s.indexOf("webkit")
          , l = -1 !== s.indexOf("chrome")
          , u = -1 !== s.indexOf("phantom")
          , c = -1 !== s.indexOf("android")
          , h = -1 !== s.search("android [23]")
          , d = -1 !== s.indexOf("gecko")
          , p = typeof orientation != n + ""
          , f = t.navigator && t.navigator.msPointerEnabled && t.navigator.msMaxTouchPoints && !t.PointerEvent
          , m = t.PointerEvent && t.navigator.pointerEnabled && t.navigator.maxTouchPoints || f
          , g = "devicePixelRatio" in t && t.devicePixelRatio > 1 || "matchMedia" in t && t.matchMedia("(min-resolution:144dpi)") && t.matchMedia("(min-resolution:144dpi)").matches
          , v = e.documentElement
          , y = i && "transition" in v.style
          , b = "WebKitCSSMatrix" in t && "m11" in new t.WebKitCSSMatrix && !h
          , _ = "MozPerspective" in v.style
          , w = "OTransition" in v.style
          , x = !t.L_DISABLE_3D && (y || b || _ || w) && !u
          , T = !t.L_NO_TOUCH && !u && function() {
            var t = "ontouchstart";
            if (m || t in v)
                return !0;
            var n = e.createElement("div")
              , i = !1;
            return n.setAttribute ? (n.setAttribute(t, "return;"),
            "function" == typeof n[t] && (i = !0),
            n.removeAttribute(t),
            n = null ,
            i) : !1
        }
        ();
        o.Browser = {
            ie: i,
            ielt9: r,
            webkit: a,
            gecko: d && !a && !t.opera && !i,
            android: c,
            android23: h,
            chrome: l,
            ie3d: y,
            webkit3d: b,
            gecko3d: _,
            opera3d: w,
            any3d: x,
            mobile: p,
            mobileWebkit: p && a,
            mobileWebkit3d: p && b,
            mobileOpera: p && t.opera,
            touch: T,
            msPointer: f,
            pointer: m,
            retina: g
        }
    }
    (),
    o.Point = function(t, e, n) {
        this.x = n ? Math.round(t) : t,
        this.y = n ? Math.round(e) : e
    }
    ,
    o.Point.prototype = {
        clone: function() {
            return new o.Point(this.x,this.y)
        },
        add: function(t) {
            return this.clone()._add(o.point(t))
        },
        _add: function(t) {
            return this.x += t.x,
            this.y += t.y,
            this
        },
        subtract: function(t) {
            return this.clone()._subtract(o.point(t))
        },
        _subtract: function(t) {
            return this.x -= t.x,
            this.y -= t.y,
            this
        },
        divideBy: function(t) {
            return this.clone()._divideBy(t)
        },
        _divideBy: function(t) {
            return this.x /= t,
            this.y /= t,
            this
        },
        multiplyBy: function(t) {
            return this.clone()._multiplyBy(t)
        },
        _multiplyBy: function(t) {
            return this.x *= t,
            this.y *= t,
            this
        },
        round: function() {
            return this.clone()._round()
        },
        _round: function() {
            return this.x = Math.round(this.x),
            this.y = Math.round(this.y),
            this
        },
        floor: function() {
            return this.clone()._floor()
        },
        _floor: function() {
            return this.x = Math.floor(this.x),
            this.y = Math.floor(this.y),
            this
        },
        distanceTo: function(t) {
            t = o.point(t);
            var e = t.x - this.x
              , n = t.y - this.y;
            return Math.sqrt(e * e + n * n)
        },
        equals: function(t) {
            return t = o.point(t),
            t.x === this.x && t.y === this.y
        },
        contains: function(t) {
            return t = o.point(t),
            Math.abs(t.x) <= Math.abs(this.x) && Math.abs(t.y) <= Math.abs(this.y)
        },
        toString: function() {
            return "Point(" + o.Util.formatNum(this.x) + ", " + o.Util.formatNum(this.y) + ")"
        }
    },
    o.point = function(t, e, i) {
        return t instanceof o.Point ? t : o.Util.isArray(t) ? new o.Point(t[0],t[1]) : t === n || null  === t ? t : new o.Point(t,e,i)
    }
    ,
    o.Bounds = function(t, e) {
        if (t)
            for (var n = e ? [t, e] : t, i = 0, o = n.length; o > i; i++)
                this.extend(n[i])
    }
    ,
    o.Bounds.prototype = {
        extend: function(t) {
            return t = o.point(t),
            this.min || this.max ? (this.min.x = Math.min(t.x, this.min.x),
            this.max.x = Math.max(t.x, this.max.x),
            this.min.y = Math.min(t.y, this.min.y),
            this.max.y = Math.max(t.y, this.max.y)) : (this.min = t.clone(),
            this.max = t.clone()),
            this
        },
        getCenter: function(t) {
            return new o.Point((this.min.x + this.max.x) / 2,(this.min.y + this.max.y) / 2,t)
        },
        getBottomLeft: function() {
            return new o.Point(this.min.x,this.max.y)
        },
        getTopRight: function() {
            return new o.Point(this.max.x,this.min.y)
        },
        getSize: function() {
            return this.max.subtract(this.min)
        },
        contains: function(t) {
            var e, n;
            return t = "number" == typeof t[0] || t instanceof o.Point ? o.point(t) : o.bounds(t),
            t instanceof o.Bounds ? (e = t.min,
            n = t.max) : e = n = t,
            e.x >= this.min.x && n.x <= this.max.x && e.y >= this.min.y && n.y <= this.max.y
        },
        intersects: function(t) {
            t = o.bounds(t);
            var e = this.min
              , n = this.max
              , i = t.min
              , r = t.max
              , s = r.x >= e.x && i.x <= n.x
              , a = r.y >= e.y && i.y <= n.y;
            return s && a
        },
        isValid: function() {
            return !(!this.min || !this.max)
        }
    },
    o.bounds = function(t, e) {
        return !t || t instanceof o.Bounds ? t : new o.Bounds(t,e)
    }
    ,
    o.Transformation = function(t, e, n, i) {
        this._a = t,
        this._b = e,
        this._c = n,
        this._d = i
    }
    ,
    o.Transformation.prototype = {
        transform: function(t, e) {
            return this._transform(t.clone(), e)
        },
        _transform: function(t, e) {
            return e = e || 1,
            t.x = e * (this._a * t.x + this._b),
            t.y = e * (this._c * t.y + this._d),
            t
        },
        untransform: function(t, e) {
            return e = e || 1,
            new o.Point((t.x / e - this._b) / this._a,(t.y / e - this._d) / this._c)
        }
    },
    o.DomUtil = {
        get: function(t) {
            return "string" == typeof t ? e.getElementById(t) : t
        },
        getStyle: function(t, n) {
            var i = t.style[n];
            if (!i && t.currentStyle && (i = t.currentStyle[n]),
            (!i || "auto" === i) && e.defaultView) {
                var o = e.defaultView.getComputedStyle(t, null );
                i = o ? o[n] : null 
            }
            return "auto" === i ? null  : i
        },
        getViewportOffset: function(t) {
            var n, i = 0, r = 0, s = t, a = e.body, l = e.documentElement;
            do {
                if (i += s.offsetTop || 0,
                r += s.offsetLeft || 0,
                i += parseInt(o.DomUtil.getStyle(s, "borderTopWidth"), 10) || 0,
                r += parseInt(o.DomUtil.getStyle(s, "borderLeftWidth"), 10) || 0,
                n = o.DomUtil.getStyle(s, "position"),
                s.offsetParent === a && "absolute" === n)
                    break;
                if ("fixed" === n) {
                    i += a.scrollTop || l.scrollTop || 0,
                    r += a.scrollLeft || l.scrollLeft || 0;
                    break
                }
                if ("relative" === n && !s.offsetLeft) {
                    var u = o.DomUtil.getStyle(s, "width")
                      , c = o.DomUtil.getStyle(s, "max-width")
                      , h = s.getBoundingClientRect();
                    ("none" !== u || "none" !== c) && (r += h.left + s.clientLeft),
                    i += h.top + (a.scrollTop || l.scrollTop || 0);
                    break
                }
                s = s.offsetParent
            } while (s);s = t;
            do {
                if (s === a)
                    break;
                i -= s.scrollTop || 0,
                r -= s.scrollLeft || 0,
                s = s.parentNode
            } while (s);return new o.Point(r,i)
        },
        documentIsLtr: function() {
            return o.DomUtil._docIsLtrCached || (o.DomUtil._docIsLtrCached = !0,
            o.DomUtil._docIsLtr = "ltr" === o.DomUtil.getStyle(e.body, "direction")),
            o.DomUtil._docIsLtr
        },
        create: function(t, n, i) {
            var o = e.createElement(t);
            return o.className = n,
            i && i.appendChild(o),
            o
        },
        hasClass: function(t, e) {
            if (t.classList !== n)
                return t.classList.contains(e);
            var i = o.DomUtil._getClass(t);
            return i.length > 0 && new RegExp("(^|\\s)" + e + "(\\s|$)").test(i)
        },
        addClass: function(t, e) {
            if (t.classList !== n)
                for (var i = o.Util.splitWords(e), r = 0, s = i.length; s > r; r++)
                    t.classList.add(i[r]);
            else if (!o.DomUtil.hasClass(t, e)) {
                var a = o.DomUtil._getClass(t);
                o.DomUtil._setClass(t, (a ? a + " " : "") + e)
            }
        },
        removeClass: function(t, e) {
            t.classList !== n ? t.classList.remove(e) : o.DomUtil._setClass(t, o.Util.trim((" " + o.DomUtil._getClass(t) + " ").replace(" " + e + " ", " ")))
        },
        _setClass: function(t, e) {
            t.className.baseVal === n ? t.className = e : t.className.baseVal = e
        },
        _getClass: function(t) {
            return t.className.baseVal === n ? t.className : t.className.baseVal
        },
        setOpacity: function(t, e) {
            if ("opacity" in t.style)
                t.style.opacity = e;
            else if ("filter" in t.style) {
                var n = !1
                  , i = "DXImageTransform.Microsoft.Alpha";
                try {
                    n = t.filters.item(i)
                } catch (o) {
                    if (1 === e)
                        return
                }
                e = Math.round(100 * e),
                n ? (n.Enabled = 100 !== e,
                n.Opacity = e) : t.style.filter += " progid:" + i + "(opacity=" + e + ")"
            }
        },
        testProp: function(t) {
            for (var n = e.documentElement.style, i = 0; i < t.length; i++)
                if (t[i] in n)
                    return t[i];
            return !1
        },
        getTranslateString: function(t) {
            var e = o.Browser.webkit3d
              , n = "translate" + (e ? "3d" : "") + "("
              , i = (e ? ",0" : "") + ")";
            return n + t.x + "px," + t.y + "px" + i
        },
        getScaleString: function(t, e) {
            var n = o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1 * t)))
              , i = " scale(" + t + ") ";
            return n + i
        },
        setPosition: function(t, e, n) {
            t._leaflet_pos = e,
            !n && o.Browser.any3d ? t.style[o.DomUtil.TRANSFORM] = o.DomUtil.getTranslateString(e) : (t.style.left = e.x + "px",
            t.style.top = e.y + "px")
        },
        getPosition: function(t) {
            return t._leaflet_pos
        }
    },
    o.DomUtil.TRANSFORM = o.DomUtil.testProp(["transform", "WebkitTransform", "OTransform", "MozTransform", "msTransform"]),
    o.DomUtil.TRANSITION = o.DomUtil.testProp(["webkitTransition", "transition", "OTransition", "MozTransition", "msTransition"]),
    o.DomUtil.TRANSITION_END = "webkitTransition" === o.DomUtil.TRANSITION || "OTransition" === o.DomUtil.TRANSITION ? o.DomUtil.TRANSITION + "End" : "transitionend",
    function() {
        if ("onselectstart" in e)
            o.extend(o.DomUtil, {
                disableTextSelection: function() {
                    o.DomEvent.on(t, "selectstart", o.DomEvent.preventDefault)
                },
                enableTextSelection: function() {
                    o.DomEvent.off(t, "selectstart", o.DomEvent.preventDefault)
                }
            });
        else {
            var n = o.DomUtil.testProp(["userSelect", "WebkitUserSelect", "OUserSelect", "MozUserSelect", "msUserSelect"]);
            o.extend(o.DomUtil, {
                disableTextSelection: function() {
                    if (n) {
                        var t = e.documentElement.style;
                        this._userSelect = t[n],
                        t[n] = "none"
                    }
                },
                enableTextSelection: function() {
                    n && (e.documentElement.style[n] = this._userSelect,
                    delete this._userSelect)
                }
            })
        }
        o.extend(o.DomUtil, {
            disableImageDrag: function() {
                o.DomEvent.on(t, "dragstart", o.DomEvent.preventDefault)
            },
            enableImageDrag: function() {
                o.DomEvent.off(t, "dragstart", o.DomEvent.preventDefault)
            }
        })
    }
    (),
    o.LatLng = function(t, e, i) {
        if (t = parseFloat(t),
        e = parseFloat(e),
        isNaN(t) || isNaN(e))
            throw new Error("Invalid LatLng object: (" + t + ", " + e + ")");
        this.lat = t,
        this.lng = e,
        i !== n && (this.alt = parseFloat(i))
    }
    ,
    o.extend(o.LatLng, {
        DEG_TO_RAD: Math.PI / 180,
        RAD_TO_DEG: 180 / Math.PI,
        MAX_MARGIN: 1e-9
    }),
    o.LatLng.prototype = {
        equals: function(t) {
            if (!t)
                return !1;
            t = o.latLng(t);
            var e = Math.max(Math.abs(this.lat - t.lat), Math.abs(this.lng - t.lng));
            return e <= o.LatLng.MAX_MARGIN
        },
        toString: function(t) {
            return "LatLng(" + o.Util.formatNum(this.lat, t) + ", " + o.Util.formatNum(this.lng, t) + ")"
        },
        distanceTo: function(t) {
            t = o.latLng(t);
            var e = 6378137
              , n = o.LatLng.DEG_TO_RAD
              , i = (t.lat - this.lat) * n
              , r = (t.lng - this.lng) * n
              , s = this.lat * n
              , a = t.lat * n
              , l = Math.sin(i / 2)
              , u = Math.sin(r / 2)
              , c = l * l + u * u * Math.cos(s) * Math.cos(a);
            return 2 * e * Math.atan2(Math.sqrt(c), Math.sqrt(1 - c))
        },
        wrap: function(t, e) {
            var n = this.lng;
            return t = t || -180,
            e = e || 180,
            n = (n + e) % (e - t) + (t > n || n === e ? e : t),
            new o.LatLng(this.lat,n)
        }
    },
    o.latLng = function(t, e) {
        return t instanceof o.LatLng ? t : o.Util.isArray(t) ? "number" == typeof t[0] || "string" == typeof t[0] ? new o.LatLng(t[0],t[1],t[2]) : null  : t === n || null  === t ? t : "object" == typeof t && "lat" in t ? new o.LatLng(t.lat,"lng" in t ? t.lng : t.lon) : e === n ? null  : new o.LatLng(t,e)
    }
    ,
    o.LatLngBounds = function(t, e) {
        if (t)
            for (var n = e ? [t, e] : t, i = 0, o = n.length; o > i; i++)
                this.extend(n[i])
    }
    ,
    o.LatLngBounds.prototype = {
        extend: function(t) {
            if (!t)
                return this;
            var e = o.latLng(t);
            return t = null  !== e ? e : o.latLngBounds(t),
            t instanceof o.LatLng ? this._southWest || this._northEast ? (this._southWest.lat = Math.min(t.lat, this._southWest.lat),
            this._southWest.lng = Math.min(t.lng, this._southWest.lng),
            this._northEast.lat = Math.max(t.lat, this._northEast.lat),
            this._northEast.lng = Math.max(t.lng, this._northEast.lng)) : (this._southWest = new o.LatLng(t.lat,t.lng),
            this._northEast = new o.LatLng(t.lat,t.lng)) : t instanceof o.LatLngBounds && (this.extend(t._southWest),
            this.extend(t._northEast)),
            this
        },
        pad: function(t) {
            var e = this._southWest
              , n = this._northEast
              , i = Math.abs(e.lat - n.lat) * t
              , r = Math.abs(e.lng - n.lng) * t;
            return new o.LatLngBounds(new o.LatLng(e.lat - i,e.lng - r),new o.LatLng(n.lat + i,n.lng + r))
        },
        getCenter: function() {
            return new o.LatLng((this._southWest.lat + this._northEast.lat) / 2,(this._southWest.lng + this._northEast.lng) / 2)
        },
        getSouthWest: function() {
            return this._southWest
        },
        getNorthEast: function() {
            return this._northEast
        },
        getNorthWest: function() {
            return new o.LatLng(this.getNorth(),this.getWest())
        },
        getSouthEast: function() {
            return new o.LatLng(this.getSouth(),this.getEast())
        },
        getWest: function() {
            return this._southWest.lng
        },
        getSouth: function() {
            return this._southWest.lat
        },
        getEast: function() {
            return this._northEast.lng
        },
        getNorth: function() {
            return this._northEast.lat
        },
        contains: function(t) {
            t = "number" == typeof t[0] || t instanceof o.LatLng ? o.latLng(t) : o.latLngBounds(t);
            var e, n, i = this._southWest, r = this._northEast;
            return t instanceof o.LatLngBounds ? (e = t.getSouthWest(),
            n = t.getNorthEast()) : e = n = t,
            e.lat >= i.lat && n.lat <= r.lat && e.lng >= i.lng && n.lng <= r.lng
        },
        intersects: function(t) {
            t = o.latLngBounds(t);
            var e = this._southWest
              , n = this._northEast
              , i = t.getSouthWest()
              , r = t.getNorthEast()
              , s = r.lat >= e.lat && i.lat <= n.lat
              , a = r.lng >= e.lng && i.lng <= n.lng;
            return s && a
        },
        toBBoxString: function() {
            return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(",")
        },
        equals: function(t) {
            return t ? (t = o.latLngBounds(t),
            this._southWest.equals(t.getSouthWest()) && this._northEast.equals(t.getNorthEast())) : !1
        },
        isValid: function() {
            return !(!this._southWest || !this._northEast)
        }
    },
    o.latLngBounds = function(t, e) {
        return !t || t instanceof o.LatLngBounds ? t : new o.LatLngBounds(t,e)
    }
    ,
    o.Projection = {},
    o.Projection.SphericalMercator = {
        MAX_LATITUDE: 85.0511287798,
        project: function(t) {
            var e = o.LatLng.DEG_TO_RAD
              , n = this.MAX_LATITUDE
              , i = Math.max(Math.min(n, t.lat), -n)
              , r = t.lng * e
              , s = i * e;
            return s = Math.log(Math.tan(Math.PI / 4 + s / 2)),
            new o.Point(r,s)
        },
        unproject: function(t) {
            var e = o.LatLng.RAD_TO_DEG
              , n = t.x * e
              , i = (2 * Math.atan(Math.exp(t.y)) - Math.PI / 2) * e;
            return new o.LatLng(i,n)
        }
    },
    o.Projection.LonLat = {
        project: function(t) {
            return new o.Point(t.lng,t.lat)
        },
        unproject: function(t) {
            return new o.LatLng(t.y,t.x)
        }
    },
    o.CRS = {
        latLngToPoint: function(t, e) {
            var n = this.projection.project(t)
              , i = this.scale(e);
            return this.transformation._transform(n, i)
        },
        pointToLatLng: function(t, e) {
            var n = this.scale(e)
              , i = this.transformation.untransform(t, n);
            return this.projection.unproject(i)
        },
        project: function(t) {
            return this.projection.project(t)
        },
        scale: function(t) {
            return 256 * Math.pow(2, t)
        },
        getSize: function(t) {
            var e = this.scale(t);
            return o.point(e, e)
        }
    },
    o.CRS.Simple = o.extend({}, o.CRS, {
        projection: o.Projection.LonLat,
        transformation: new o.Transformation(1,0,-1,0),
        scale: function(t) {
            return Math.pow(2, t)
        }
    }),
    o.CRS.EPSG3857 = o.extend({}, o.CRS, {
        code: "EPSG:3857",
        projection: o.Projection.SphericalMercator,
        transformation: new o.Transformation(.5 / Math.PI,.5,-.5 / Math.PI,.5),
        project: function(t) {
            var e = this.projection.project(t)
              , n = 6378137;
            return e.multiplyBy(n)
        }
    }),
    o.CRS.EPSG900913 = o.extend({}, o.CRS.EPSG3857, {
        code: "EPSG:900913"
    }),
    o.CRS.EPSG4326 = o.extend({}, o.CRS, {
        code: "EPSG:4326",
        projection: o.Projection.LonLat,
        transformation: new o.Transformation(1 / 360,.5,-1 / 360,.5)
    }),
    o.Map = o.Class.extend({
        includes: o.Mixin.Events,
        options: {
            crs: o.CRS.EPSG3857,
            fadeAnimation: o.DomUtil.TRANSITION && !o.Browser.android23,
            trackResize: !0,
            markerZoomAnimation: o.DomUtil.TRANSITION && o.Browser.any3d
        },
        initialize: function(t, e) {
            e = o.setOptions(this, e),
            this._initContainer(t),
            this._initLayout(),
            this._onResize = o.bind(this._onResize, this),
            this._initEvents(),
            e.maxBounds && this.setMaxBounds(e.maxBounds),
            e.center && e.zoom !== n && this.setView(o.latLng(e.center), e.zoom, {
                reset: !0
            }),
            this._handlers = [],
            this._layers = {},
            this._zoomBoundLayers = {},
            this._tileLayersNum = 0,
            this.callInitHooks(),
            this._addLayers(e.layers)
        },
        setView: function(t, e) {
            return e = e === n ? this.getZoom() : e,
            this._resetView(o.latLng(t), this._limitZoom(e)),
            this
        },
        setZoom: function(t, e) {
            return this._loaded ? this.setView(this.getCenter(), t, {
                zoom: e
            }) : (this._zoom = this._limitZoom(t),
            this)
        },
        zoomIn: function(t, e) {
            return this.setZoom(this._zoom + (t || 1), e)
        },
        zoomOut: function(t, e) {
            return this.setZoom(this._zoom - (t || 1), e)
        },
        setZoomAround: function(t, e, n) {
            var i = this.getZoomScale(e)
              , r = this.getSize().divideBy(2)
              , s = t instanceof o.Point ? t : this.latLngToContainerPoint(t)
              , a = s.subtract(r).multiplyBy(1 - 1 / i)
              , l = this.containerPointToLatLng(r.add(a));
            return this.setView(l, e, {
                zoom: n
            })
        },
        fitBounds: function(t, e) {
            e = e || {},
            t = t.getBounds ? t.getBounds() : o.latLngBounds(t);
            var n = o.point(e.paddingTopLeft || e.padding || [0, 0])
              , i = o.point(e.paddingBottomRight || e.padding || [0, 0])
              , r = this.getBoundsZoom(t, !1, n.add(i))
              , s = i.subtract(n).divideBy(2)
              , a = this.project(t.getSouthWest(), r)
              , l = this.project(t.getNorthEast(), r)
              , u = this.unproject(a.add(l).divideBy(2).add(s), r);
            return r = e && e.maxZoom ? Math.min(e.maxZoom, r) : r,
            this.setView(u, r, e)
        },
        fitWorld: function(t) {
            return this.fitBounds([[-90, -180], [90, 180]], t)
        },
        panTo: function(t, e) {
            return this.setView(t, this._zoom, {
                pan: e
            })
        },
        panBy: function(t) {
            return this.fire("movestart"),
            this._rawPanBy(o.point(t)),
            this.fire("move"),
            this.fire("moveend")
        },
        setMaxBounds: function(t) {
            return t = o.latLngBounds(t),
            this.options.maxBounds = t,
            t ? (this._loaded && this._panInsideMaxBounds(),
            this.on("moveend", this._panInsideMaxBounds, this)) : this.off("moveend", this._panInsideMaxBounds, this)
        },
        panInsideBounds: function(t, e) {
            var n = this.getCenter()
              , i = this._limitCenter(n, this._zoom, t);
            return n.equals(i) ? this : this.panTo(i, e)
        },
        addLayer: function(t) {
            var e = o.stamp(t);
            return this._layers[e] ? this : (this._layers[e] = t,
            !t.options || isNaN(t.options.maxZoom) && isNaN(t.options.minZoom) || (this._zoomBoundLayers[e] = t,
            this._updateZoomLevels()),
            this.options.zoomAnimation && o.TileLayer && t instanceof o.TileLayer && (this._tileLayersNum++,
            this._tileLayersToLoad++,
            t.on("load", this._onTileLayerLoad, this)),
            this._loaded && this._layerAdd(t),
            this)
        },
        removeLayer: function(t) {
            var e = o.stamp(t);
            return this._layers[e] ? (this._loaded && t.onRemove(this),
            delete this._layers[e],
            this._loaded && this.fire("layerremove", {
                layer: t
            }),
            this._zoomBoundLayers[e] && (delete this._zoomBoundLayers[e],
            this._updateZoomLevels()),
            this.options.zoomAnimation && o.TileLayer && t instanceof o.TileLayer && (this._tileLayersNum--,
            this._tileLayersToLoad--,
            t.off("load", this._onTileLayerLoad, this)),
            this) : this
        },
        hasLayer: function(t) {
            return t ? o.stamp(t) in this._layers : !1
        },
        eachLayer: function(t, e) {
            for (var n in this._layers)
                t.call(e, this._layers[n]);
            return this
        },
        invalidateSize: function(t) {
            if (!this._loaded)
                return this;
            t = o.extend({
                animate: !1,
                pan: !0
            }, t === !0 ? {
                animate: !0
            } : t);
            var e = this.getSize();
            this._sizeChanged = !0,
            this._initialCenter = null ;
            var n = this.getSize()
              , i = e.divideBy(2).round()
              , r = n.divideBy(2).round()
              , s = i.subtract(r);
            return s.x || s.y ? (t.animate && t.pan ? this.panBy(s) : (t.pan && this._rawPanBy(s),
            this.fire("move"),
            t.debounceMoveend ? (clearTimeout(this._sizeTimer),
            this._sizeTimer = setTimeout(o.bind(this.fire, this, "moveend"), 200)) : this.fire("moveend")),
            this.fire("resize", {
                oldSize: e,
                newSize: n
            })) : this
        },
        addHandler: function(t, e) {
            if (!e)
                return this;
            var n = this[t] = new e(this);
            return this._handlers.push(n),
            this.options[t] && n.enable(),
            this
        },
        remove: function() {
            this._loaded && this.fire("unload"),
            this._initEvents("off");
            try {
                delete this._container._leaflet
            } catch (t) {
                this._container._leaflet = n
            }
            return this._clearPanes(),
            this._clearControlPos && this._clearControlPos(),
            this._clearHandlers(),
            this
        },
        getCenter: function() {
            return this._checkIfLoaded(),
            this._initialCenter && !this._moved() ? this._initialCenter : this.layerPointToLatLng(this._getCenterLayerPoint())
        },
        getZoom: function() {
            return this._zoom
        },
        getBounds: function() {
            var t = this.getPixelBounds()
              , e = this.unproject(t.getBottomLeft())
              , n = this.unproject(t.getTopRight());
            return new o.LatLngBounds(e,n)
        },
        getMinZoom: function() {
            return this.options.minZoom === n ? this._layersMinZoom === n ? 0 : this._layersMinZoom : this.options.minZoom
        },
        getMaxZoom: function() {
            return this.options.maxZoom === n ? this._layersMaxZoom === n ? 1 / 0 : this._layersMaxZoom : this.options.maxZoom
        },
        getBoundsZoom: function(t, e, n) {
            t = o.latLngBounds(t);
            var i, r = this.getMinZoom() - (e ? 1 : 0), s = this.getMaxZoom(), a = this.getSize(), l = t.getNorthWest(), u = t.getSouthEast(), c = !0;
            n = o.point(n || [0, 0]);
            do
                r++,
                i = this.project(u, r).subtract(this.project(l, r)).add(n),
                c = e ? i.x < a.x || i.y < a.y : a.contains(i);
            while (c && s >= r);return c && e ? null  : e ? r : r - 1
        },
        getSize: function() {
            return (!this._size || this._sizeChanged) && (this._size = new o.Point(this._container.clientWidth,this._container.clientHeight),
            this._sizeChanged = !1),
            this._size.clone()
        },
        getPixelBounds: function() {
            var t = this._getTopLeftPoint();
            return new o.Bounds(t,t.add(this.getSize()))
        },
        getPixelOrigin: function() {
            return this._checkIfLoaded(),
            this._initialTopLeftPoint
        },
        getPanes: function() {
            return this._panes
        },
        getContainer: function() {
            return this._container
        },
        getZoomScale: function(t) {
            var e = this.options.crs;
            return e.scale(t) / e.scale(this._zoom)
        },
        getScaleZoom: function(t) {
            return this._zoom + Math.log(t) / Math.LN2
        },
        project: function(t, e) {
            return e = e === n ? this._zoom : e,
            this.options.crs.latLngToPoint(o.latLng(t), e)
        },
        unproject: function(t, e) {
            return e = e === n ? this._zoom : e,
            this.options.crs.pointToLatLng(o.point(t), e)
        },
        layerPointToLatLng: function(t) {
            var e = o.point(t).add(this.getPixelOrigin());
            return this.unproject(e)
        },
        latLngToLayerPoint: function(t) {
            var e = this.project(o.latLng(t))._round();
            return e._subtract(this.getPixelOrigin())
        },
        containerPointToLayerPoint: function(t) {
            return o.point(t).subtract(this._getMapPanePos())
        },
        layerPointToContainerPoint: function(t) {
            return o.point(t).add(this._getMapPanePos())
        },
        containerPointToLatLng: function(t) {
            var e = this.containerPointToLayerPoint(o.point(t));
            return this.layerPointToLatLng(e)
        },
        latLngToContainerPoint: function(t) {
            return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))
        },
        mouseEventToContainerPoint: function(t) {
            return o.DomEvent.getMousePosition(t, this._container)
        },
        mouseEventToLayerPoint: function(t) {
            return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))
        },
        mouseEventToLatLng: function(t) {
            return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))
        },
        _initContainer: function(t) {
            var e = this._container = o.DomUtil.get(t);
            if (!e)
                throw new Error("Map container not found.");
            if (e._leaflet)
                throw new Error("Map container is already initialized.");
            e._leaflet = !0
        },
        _initLayout: function() {
            var t = this._container;
            o.DomUtil.addClass(t, "leaflet-container" + (o.Browser.touch ? " leaflet-touch" : "") + (o.Browser.retina ? " leaflet-retina" : "") + (o.Browser.ielt9 ? " leaflet-oldie" : "") + (this.options.fadeAnimation ? " leaflet-fade-anim" : ""));
            var e = o.DomUtil.getStyle(t, "position");
            "absolute" !== e && "relative" !== e && "fixed" !== e && (t.style.position = "relative"),
            this._initPanes(),
            this._initControlPos && this._initControlPos()
        },
        _initPanes: function() {
            var t = this._panes = {};
            this._mapPane = t.mapPane = this._createPane("leaflet-map-pane", this._container),
            this._tilePane = t.tilePane = this._createPane("leaflet-tile-pane", this._mapPane),
            t.objectsPane = this._createPane("leaflet-objects-pane", this._mapPane),
            t.shadowPane = this._createPane("leaflet-shadow-pane"),
            t.overlayPane = this._createPane("leaflet-overlay-pane"),
            t.markerPane = this._createPane("leaflet-marker-pane"),
            t.popupPane = this._createPane("leaflet-popup-pane");
            var e = " leaflet-zoom-hide";
            this.options.markerZoomAnimation || (o.DomUtil.addClass(t.markerPane, e),
            o.DomUtil.addClass(t.shadowPane, e),
            o.DomUtil.addClass(t.popupPane, e))
        },
        _createPane: function(t, e) {
            return o.DomUtil.create("div", t, e || this._panes.objectsPane)
        },
        _clearPanes: function() {
            this._container.removeChild(this._mapPane)
        },
        _addLayers: function(t) {
            t = t ? o.Util.isArray(t) ? t : [t] : [];
            for (var e = 0, n = t.length; n > e; e++)
                this.addLayer(t[e])
        },
        _resetView: function(t, e, n, i) {
            var r = this._zoom !== e;
            i || (this.fire("movestart"),
            r && this.fire("zoomstart")),
            this._zoom = e,
            this._initialCenter = t,
            this._initialTopLeftPoint = this._getNewTopLeftPoint(t),
            n ? this._initialTopLeftPoint._add(this._getMapPanePos()) : o.DomUtil.setPosition(this._mapPane, new o.Point(0,0)),
            this._tileLayersToLoad = this._tileLayersNum;
            var s = !this._loaded;
            this._loaded = !0,
            this.fire("viewreset", {
                hard: !n
            }),
            s && (this.fire("load"),
            this.eachLayer(this._layerAdd, this)),
            this.fire("move"),
            (r || i) && this.fire("zoomend"),
            this.fire("moveend", {
                hard: !n
            })
        },
        _rawPanBy: function(t) {
            o.DomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(t))
        },
        _getZoomSpan: function() {
            return this.getMaxZoom() - this.getMinZoom()
        },
        _updateZoomLevels: function() {
            var t, e = 1 / 0, i = -1 / 0, o = this._getZoomSpan();
            for (t in this._zoomBoundLayers) {
                var r = this._zoomBoundLayers[t];
                isNaN(r.options.minZoom) || (e = Math.min(e, r.options.minZoom)),
                isNaN(r.options.maxZoom) || (i = Math.max(i, r.options.maxZoom))
            }
            t === n ? this._layersMaxZoom = this._layersMinZoom = n : (this._layersMaxZoom = i,
            this._layersMinZoom = e),
            o !== this._getZoomSpan() && this.fire("zoomlevelschange")
        },
        _panInsideMaxBounds: function() {
            this.panInsideBounds(this.options.maxBounds)
        },
        _checkIfLoaded: function() {
            if (!this._loaded)
                throw new Error("Set map center and zoom first.")
        },
        _initEvents: function(e) {
            if (o.DomEvent) {
                e = e || "on",
                o.DomEvent[e](this._container, "click", this._onMouseClick, this);
                var n, i, r = ["dblclick", "mousedown", "mouseup", "mouseenter", "mouseleave", "mousemove", "contextmenu"];
                for (n = 0,
                i = r.length; i > n; n++)
                    o.DomEvent[e](this._container, r[n], this._fireMouseEvent, this);
                this.options.trackResize && o.DomEvent[e](t, "resize", this._onResize, this)
            }
        },
        _onResize: function() {
            o.Util.cancelAnimFrame(this._resizeRequest),
            this._resizeRequest = o.Util.requestAnimFrame(function() {
                this.invalidateSize({
                    debounceMoveend: !0
                })
            }
            , this, !1, this._container)
        },
        _onMouseClick: function(t) {
            !this._loaded || !t._simulated && (this.dragging && this.dragging.moved() || this.boxZoom && this.boxZoom.moved()) || o.DomEvent._skipped(t) || (this.fire("preclick"),
            this._fireMouseEvent(t))
        },
        _fireMouseEvent: function(t) {
            if (this._loaded && !o.DomEvent._skipped(t)) {
                var e = t.type;
                if (e = "mouseenter" === e ? "mouseover" : "mouseleave" === e ? "mouseout" : e,
                this.hasEventListeners(e)) {
                    "contextmenu" === e && o.DomEvent.preventDefault(t);
                    var n = this.mouseEventToContainerPoint(t)
                      , i = this.containerPointToLayerPoint(n)
                      , r = this.layerPointToLatLng(i);
                    this.fire(e, {
                        latlng: r,
                        layerPoint: i,
                        containerPoint: n,
                        originalEvent: t
                    })
                }
            }
        },
        _onTileLayerLoad: function() {
            this._tileLayersToLoad--,
            this._tileLayersNum && !this._tileLayersToLoad && this.fire("tilelayersload")
        },
        _clearHandlers: function() {
            for (var t = 0, e = this._handlers.length; e > t; t++)
                this._handlers[t].disable()
        },
        whenReady: function(t, e) {
            return this._loaded ? t.call(e || this, this) : this.on("load", t, e),
            this
        },
        _layerAdd: function(t) {
            t.onAdd(this),
            this.fire("layeradd", {
                layer: t
            })
        },
        _getMapPanePos: function() {
            return o.DomUtil.getPosition(this._mapPane)
        },
        _moved: function() {
            var t = this._getMapPanePos();
            return t && !t.equals([0, 0])
        },
        _getTopLeftPoint: function() {
            return this.getPixelOrigin().subtract(this._getMapPanePos())
        },
        _getNewTopLeftPoint: function(t, e) {
            var n = this.getSize()._divideBy(2);
            return this.project(t, e)._subtract(n)._round()
        },
        _latLngToNewLayerPoint: function(t, e, n) {
            var i = this._getNewTopLeftPoint(n, e).add(this._getMapPanePos());
            return this.project(t, e)._subtract(i)
        },
        _getCenterLayerPoint: function() {
            return this.containerPointToLayerPoint(this.getSize()._divideBy(2))
        },
        _getCenterOffset: function(t) {
            return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())
        },
        _limitCenter: function(t, e, n) {
            if (!n)
                return t;
            var i = this.project(t, e)
              , r = this.getSize().divideBy(2)
              , s = new o.Bounds(i.subtract(r),i.add(r))
              , a = this._getBoundsOffset(s, n, e);
            return this.unproject(i.add(a), e)
        },
        _limitOffset: function(t, e) {
            if (!e)
                return t;
            var n = this.getPixelBounds()
              , i = new o.Bounds(n.min.add(t),n.max.add(t));
            return t.add(this._getBoundsOffset(i, e))
        },
        _getBoundsOffset: function(t, e, n) {
            var i = this.project(e.getNorthWest(), n).subtract(t.min)
              , r = this.project(e.getSouthEast(), n).subtract(t.max)
              , s = this._rebound(i.x, -r.x)
              , a = this._rebound(i.y, -r.y);
            return new o.Point(s,a)
        },
        _rebound: function(t, e) {
            return t + e > 0 ? Math.round(t - e) / 2 : Math.max(0, Math.ceil(t)) - Math.max(0, Math.floor(e))
        },
        _limitZoom: function(t) {
            var e = this.getMinZoom()
              , n = this.getMaxZoom();
            return Math.max(e, Math.min(n, t))
        }
    }),
    o.map = function(t, e) {
        return new o.Map(t,e)
    }
    ,
    o.Projection.Mercator = {
        MAX_LATITUDE: 85.0840591556,
        R_MINOR: 6356752.314245179,
        R_MAJOR: 6378137,
        project: function(t) {
            var e = o.LatLng.DEG_TO_RAD
              , n = this.MAX_LATITUDE
              , i = Math.max(Math.min(n, t.lat), -n)
              , r = this.R_MAJOR
              , s = this.R_MINOR
              , a = t.lng * e * r
              , l = i * e
              , u = s / r
              , c = Math.sqrt(1 - u * u)
              , h = c * Math.sin(l);
            h = Math.pow((1 - h) / (1 + h), .5 * c);
            var d = Math.tan(.5 * (.5 * Math.PI - l)) / h;
            return l = -r * Math.log(d),
            new o.Point(a,l)
        },
        unproject: function(t) {
            for (var e, n = o.LatLng.RAD_TO_DEG, i = this.R_MAJOR, r = this.R_MINOR, s = t.x * n / i, a = r / i, l = Math.sqrt(1 - a * a), u = Math.exp(-t.y / i), c = Math.PI / 2 - 2 * Math.atan(u), h = 15, d = 1e-7, p = h, f = .1; Math.abs(f) > d && --p > 0; )
                e = l * Math.sin(c),
                f = Math.PI / 2 - 2 * Math.atan(u * Math.pow((1 - e) / (1 + e), .5 * l)) - c,
                c += f;
            return new o.LatLng(c * n,s)
        }
    },
    o.CRS.EPSG3395 = o.extend({}, o.CRS, {
        code: "EPSG:3395",
        projection: o.Projection.Mercator,
        transformation: function() {
            var t = o.Projection.Mercator
              , e = t.R_MAJOR
              , n = .5 / (Math.PI * e);
            return new o.Transformation(n,.5,-n,.5)
        }
        ()
    }),
    o.TileLayer = o.Class.extend({
        includes: o.Mixin.Events,
        options: {
            minZoom: 0,
            maxZoom: 18,
            tileSize: 256,
            subdomains: "abc",
            errorTileUrl: "",
            attribution: "",
            zoomOffset: 0,
            opacity: 1,
            unloadInvisibleTiles: o.Browser.mobile,
            updateWhenIdle: o.Browser.mobile
        },
        initialize: function(t, e) {
            e = o.setOptions(this, e),
            e.detectRetina && o.Browser.retina && e.maxZoom > 0 && (e.tileSize = Math.floor(e.tileSize / 2),
            e.zoomOffset++,
            e.minZoom > 0 && e.minZoom--,
            this.options.maxZoom--),
            e.bounds && (e.bounds = o.latLngBounds(e.bounds)),
            this._url = t;
            var n = this.options.subdomains;
            "string" == typeof n && (this.options.subdomains = n.split(""))
        },
        onAdd: function(t) {
            this._map = t,
            this._animated = t._zoomAnimated,
            this._initContainer(),
            t.on({
                viewreset: this._reset,
                moveend: this._update
            }, this),
            this._animated && t.on({
                zoomanim: this._animateZoom,
                zoomend: this._endZoomAnim
            }, this),
            this.options.updateWhenIdle || (this._limitedUpdate = o.Util.limitExecByInterval(this._update, 150, this),
            t.on("move", this._limitedUpdate, this)),
            this._reset(),
            this._update()
        },
        addTo: function(t) {
            return t.addLayer(this),
            this
        },
        onRemove: function(t) {
            this._container.parentNode.removeChild(this._container),
            t.off({
                viewreset: this._reset,
                moveend: this._update
            }, this),
            this._animated && t.off({
                zoomanim: this._animateZoom,
                zoomend: this._endZoomAnim
            }, this),
            this.options.updateWhenIdle || t.off("move", this._limitedUpdate, this),
            this._container = null ,
            this._map = null 
        },
        bringToFront: function() {
            var t = this._map._panes.tilePane;
            return this._container && (t.appendChild(this._container),
            this._setAutoZIndex(t, Math.max)),
            this
        },
        bringToBack: function() {
            var t = this._map._panes.tilePane;
            return this._container && (t.insertBefore(this._container, t.firstChild),
            this._setAutoZIndex(t, Math.min)),
            this
        },
        getAttribution: function() {
            return this.options.attribution
        },
        getContainer: function() {
            return this._container
        },
        setOpacity: function(t) {
            return this.options.opacity = t,
            this._map && this._updateOpacity(),
            this
        },
        setZIndex: function(t) {
            return this.options.zIndex = t,
            this._updateZIndex(),
            this
        },
        setUrl: function(t, e) {
            return this._url = t,
            e || this.redraw(),
            this
        },
        redraw: function() {
            return this._map && (this._reset({
                hard: !0
            }),
            this._update()),
            this
        },
        _updateZIndex: function() {
            this._container && this.options.zIndex !== n && (this._container.style.zIndex = this.options.zIndex)
        },
        _setAutoZIndex: function(t, e) {
            var n, i, o, r = t.children, s = -e(1 / 0, -1 / 0);
            for (i = 0,
            o = r.length; o > i; i++)
                r[i] !== this._container && (n = parseInt(r[i].style.zIndex, 10),
                isNaN(n) || (s = e(s, n)));
            this.options.zIndex = this._container.style.zIndex = (isFinite(s) ? s : 0) + e(1, -1)
        },
        _updateOpacity: function() {
            var t, e = this._tiles;
            if (o.Browser.ielt9)
                for (t in e)
                    o.DomUtil.setOpacity(e[t], this.options.opacity);
            else
                o.DomUtil.setOpacity(this._container, this.options.opacity)
        },
        _initContainer: function() {
            var t = this._map._panes.tilePane;
            if (!this._container) {
                if (this._container = o.DomUtil.create("div", "leaflet-layer"),
                this._updateZIndex(),
                this._animated) {
                    var e = "leaflet-tile-container";
                    this._bgBuffer = o.DomUtil.create("div", e, this._container),
                    this._tileContainer = o.DomUtil.create("div", e, this._container)
                } else
                    this._tileContainer = this._container;
                t.appendChild(this._container),
                this.options.opacity < 1 && this._updateOpacity()
            }
        },
        _reset: function(t) {
            for (var e in this._tiles)
                this.fire("tileunload", {
                    tile: this._tiles[e]
                });
            this._tiles = {},
            this._tilesToLoad = 0,
            this.options.reuseTiles && (this._unusedTiles = []),
            this._tileContainer.innerHTML = "",
            this._animated && t && t.hard && this._clearBgBuffer(),
            this._initContainer()
        },
        _getTileSize: function() {
            var t = this._map
              , e = t.getZoom() + this.options.zoomOffset
              , n = this.options.maxNativeZoom
              , i = this.options.tileSize;
            return n && e > n && (i = Math.round(t.getZoomScale(e) / t.getZoomScale(n) * i)),
            i
        },
        _update: function() {
            if (this._map) {
                var t = this._map
                  , e = t.getPixelBounds()
                  , n = t.getZoom()
                  , i = this._getTileSize();
                if (!(n > this.options.maxZoom || n < this.options.minZoom)) {
                    var r = o.bounds(e.min.divideBy(i)._floor(), e.max.divideBy(i)._floor());
                    this._addTilesFromCenterOut(r),
                    (this.options.unloadInvisibleTiles || this.options.reuseTiles) && this._removeOtherTiles(r)
                }
            }
        },
        _addTilesFromCenterOut: function(t) {
            var n, i, r, s = [], a = t.getCenter();
            for (n = t.min.y; n <= t.max.y; n++)
                for (i = t.min.x; i <= t.max.x; i++)
                    r = new o.Point(i,n),
                    this._tileShouldBeLoaded(r) && s.push(r);
            var l = s.length;
            if (0 !== l) {
                s.sort(function(t, e) {
                    return t.distanceTo(a) - e.distanceTo(a)
                }
                );
                var u = e.createDocumentFragment();
                for (this._tilesToLoad || this.fire("loading"),
                this._tilesToLoad += l,
                i = 0; l > i; i++)
                    this._addTile(s[i], u);
                this._tileContainer.appendChild(u)
            }
        },
        _tileShouldBeLoaded: function(t) {
            if (t.x + ":" + t.y in this._tiles)
                return !1;
            var e = this.options;
            if (!e.continuousWorld) {
                var n = this._getWrapTileNum();
                if (e.noWrap && (t.x < 0 || t.x >= n.x) || t.y < 0 || t.y >= n.y)
                    return !1
            }
            if (e.bounds) {
                var i = e.tileSize
                  , o = t.multiplyBy(i)
                  , r = o.add([i, i])
                  , s = this._map.unproject(o)
                  , a = this._map.unproject(r);
                if (e.continuousWorld || e.noWrap || (s = s.wrap(),
                a = a.wrap()),
                !e.bounds.intersects([s, a]))
                    return !1
            }
            return !0
        },
        _removeOtherTiles: function(t) {
            var e, n, i, o;
            for (o in this._tiles)
                e = o.split(":"),
                n = parseInt(e[0], 10),
                i = parseInt(e[1], 10),
                (n < t.min.x || n > t.max.x || i < t.min.y || i > t.max.y) && this._removeTile(o)
        },
        _removeTile: function(t) {
            var e = this._tiles[t];
            this.fire("tileunload", {
                tile: e,
                url: e.src
            }),
            this.options.reuseTiles ? (o.DomUtil.removeClass(e, "leaflet-tile-loaded"),
            this._unusedTiles.push(e)) : e.parentNode === this._tileContainer && this._tileContainer.removeChild(e),
            o.Browser.android || (e.onload = null ,
            e.src = o.Util.emptyImageUrl),
            delete this._tiles[t]
        },
        _addTile: function(t, e) {
            var n = this._getTilePos(t)
              , i = this._getTile();
            o.DomUtil.setPosition(i, n, o.Browser.chrome),
            this._tiles[t.x + ":" + t.y] = i,
            this._loadTile(i, t),
            i.parentNode !== this._tileContainer && e.appendChild(i)
        },
        _getZoomForUrl: function() {
            var t = this.options
              , e = this._map.getZoom();
            return t.zoomReverse && (e = t.maxZoom - e),
            e += t.zoomOffset,
            t.maxNativeZoom ? Math.min(e, t.maxNativeZoom) : e
        },
        _getTilePos: function(t) {
            var e = this._map.getPixelOrigin()
              , n = this._getTileSize();
            return t.multiplyBy(n).subtract(e)
        },
        getTileUrl: function(t) {
            return o.Util.template(this._url, o.extend({
                s: this._getSubdomain(t),
                z: t.z,
                x: t.x,
                y: t.y
            }, this.options))
        },
        _getWrapTileNum: function() {
            var t = this._map.options.crs
              , e = t.getSize(this._map.getZoom());
            return e.divideBy(this._getTileSize())._floor()
        },
        _adjustTilePoint: function(t) {
            var e = this._getWrapTileNum();
            this.options.continuousWorld || this.options.noWrap || (t.x = (t.x % e.x + e.x) % e.x),
            this.options.tms && (t.y = e.y - t.y - 1),
            t.z = this._getZoomForUrl()
        },
        _getSubdomain: function(t) {
            var e = Math.abs(t.x + t.y) % this.options.subdomains.length;
            return this.options.subdomains[e]
        },
        _getTile: function() {
            if (this.options.reuseTiles && this._unusedTiles.length > 0) {
                var t = this._unusedTiles.pop();
                return this._resetTile(t),
                t
            }
            return this._createTile()
        },
        _resetTile: function() {},
        _createTile: function() {
            var t = o.DomUtil.create("img", "leaflet-tile");
            return t.style.width = t.style.height = this._getTileSize() + "px",
            t.galleryimg = "no",
            t.onselectstart = t.onmousemove = o.Util.falseFn,
            o.Browser.ielt9 && this.options.opacity !== n && o.DomUtil.setOpacity(t, this.options.opacity),
            o.Browser.mobileWebkit3d && (t.style.WebkitBackfaceVisibility = "hidden"),
            t
        },
        _loadTile: function(t, e) {
            t._layer = this,
            t.onload = this._tileOnLoad,
            t.onerror = this._tileOnError,
            this._adjustTilePoint(e),
            t.src = this.getTileUrl(e),
            this.fire("tileloadstart", {
                tile: t,
                url: t.src
            })
        },
        _tileLoaded: function() {
            this._tilesToLoad--,
            this._animated && o.DomUtil.addClass(this._tileContainer, "leaflet-zoom-animated"),
            this._tilesToLoad || (this.fire("load"),
            this._animated && (clearTimeout(this._clearBgBufferTimer),
            this._clearBgBufferTimer = setTimeout(o.bind(this._clearBgBuffer, this), 500)))
        },
        _tileOnLoad: function() {
            var t = this._layer;
            this.src !== o.Util.emptyImageUrl && (o.DomUtil.addClass(this, "leaflet-tile-loaded"),
            t.fire("tileload", {
                tile: this,
                url: this.src
            })),
            t._tileLoaded()
        },
        _tileOnError: function() {
            var t = this._layer;
            t.fire("tileerror", {
                tile: this,
                url: this.src
            });
            var e = t.options.errorTileUrl;
            e && (this.src = e),
            t._tileLoaded()
        }
    }),
    o.tileLayer = function(t, e) {
        return new o.TileLayer(t,e)
    }
    ,
    o.TileLayer.WMS = o.TileLayer.extend({
        defaultWmsParams: {
            service: "WMS",
            request: "GetMap",
            version: "1.1.1",
            layers: "",
            styles: "",
            format: "image/jpeg",
            transparent: !1
        },
        initialize: function(t, e) {
            this._url = t;
            var n = o.extend({}, this.defaultWmsParams)
              , i = e.tileSize || this.options.tileSize;
            n.width = n.height = e.detectRetina && o.Browser.retina ? 2 * i : i;
            for (var r in e)
                this.options.hasOwnProperty(r) || "crs" === r || (n[r] = e[r]);
            this.wmsParams = n,
            o.setOptions(this, e)
        },
        onAdd: function(t) {
            this._crs = this.options.crs || t.options.crs,
            this._wmsVersion = parseFloat(this.wmsParams.version);
            var e = this._wmsVersion >= 1.3 ? "crs" : "srs";
            this.wmsParams[e] = this._crs.code,
            o.TileLayer.prototype.onAdd.call(this, t)
        },
        getTileUrl: function(t) {
            var e = this._map
              , n = this.options.tileSize
              , i = t.multiplyBy(n)
              , r = i.add([n, n])
              , s = this._crs.project(e.unproject(i, t.z))
              , a = this._crs.project(e.unproject(r, t.z))
              , l = this._wmsVersion >= 1.3 && this._crs === o.CRS.EPSG4326 ? [a.y, s.x, s.y, a.x].join(",") : [s.x, a.y, a.x, s.y].join(",")
              , u = o.Util.template(this._url, {
                s: this._getSubdomain(t)
            });
            return u + o.Util.getParamString(this.wmsParams, u, !0) + "&BBOX=" + l
        },
        setParams: function(t, e) {
            return o.extend(this.wmsParams, t),
            e || this.redraw(),
            this
        }
    }),
    o.tileLayer.wms = function(t, e) {
        return new o.TileLayer.WMS(t,e)
    }
    ,
    o.TileLayer.Canvas = o.TileLayer.extend({
        options: {
            async: !1
        },
        initialize: function(t) {
            o.setOptions(this, t)
        },
        redraw: function() {
            this._map && (this._reset({
                hard: !0
            }),
            this._update());
            for (var t in this._tiles)
                this._redrawTile(this._tiles[t]);
            return this
        },
        _redrawTile: function(t) {
            this.drawTile(t, t._tilePoint, this._map._zoom)
        },
        _createTile: function() {
            var t = o.DomUtil.create("canvas", "leaflet-tile");
            return t.width = t.height = this.options.tileSize,
            t.onselectstart = t.onmousemove = o.Util.falseFn,
            t
        },
        _loadTile: function(t, e) {
            t._layer = this,
            t._tilePoint = e,
            this._redrawTile(t),
            this.options.async || this.tileDrawn(t)
        },
        drawTile: function() {},
        tileDrawn: function(t) {
            this._tileOnLoad.call(t)
        }
    }),
    o.tileLayer.canvas = function(t) {
        return new o.TileLayer.Canvas(t)
    }
    ,
    o.ImageOverlay = o.Class.extend({
        includes: o.Mixin.Events,
        options: {
            opacity: 1
        },
        initialize: function(t, e, n) {
            this._url = t,
            this._bounds = o.latLngBounds(e),
            o.setOptions(this, n)
        },
        onAdd: function(t) {
            this._map = t,
            this._image || this._initImage(),
            t._panes.overlayPane.appendChild(this._image),
            t.on("viewreset", this._reset, this),
            t.options.zoomAnimation && o.Browser.any3d && t.on("zoomanim", this._animateZoom, this),
            this._reset()
        },
        onRemove: function(t) {
            t.getPanes().overlayPane.removeChild(this._image),
            t.off("viewreset", this._reset, this),
            t.options.zoomAnimation && t.off("zoomanim", this._animateZoom, this)
        },
        addTo: function(t) {
            return t.addLayer(this),
            this
        },
        setOpacity: function(t) {
            return this.options.opacity = t,
            this._updateOpacity(),
            this
        },
        bringToFront: function() {
            return this._image && this._map._panes.overlayPane.appendChild(this._image),
            this
        },
        bringToBack: function() {
            var t = this._map._panes.overlayPane;
            return this._image && t.insertBefore(this._image, t.firstChild),
            this
        },
        setUrl: function(t) {
            this._url = t,
            this._image.src = this._url
        },
        getAttribution: function() {
            return this.options.attribution
        },
        _initImage: function() {
            this._image = o.DomUtil.create("img", "leaflet-image-layer"),
            this._map.options.zoomAnimation && o.Browser.any3d ? o.DomUtil.addClass(this._image, "leaflet-zoom-animated") : o.DomUtil.addClass(this._image, "leaflet-zoom-hide"),
            this._updateOpacity(),
            o.extend(this._image, {
                galleryimg: "no",
                onselectstart: o.Util.falseFn,
                onmousemove: o.Util.falseFn,
                onload: o.bind(this._onImageLoad, this),
                src: this._url
            })
        },
        _animateZoom: function(t) {
            var e = this._map
              , n = this._image
              , i = e.getZoomScale(t.zoom)
              , r = this._bounds.getNorthWest()
              , s = this._bounds.getSouthEast()
              , a = e._latLngToNewLayerPoint(r, t.zoom, t.center)
              , l = e._latLngToNewLayerPoint(s, t.zoom, t.center)._subtract(a)
              , u = a._add(l._multiplyBy(.5 * (1 - 1 / i)));
            n.style[o.DomUtil.TRANSFORM] = o.DomUtil.getTranslateString(u) + " scale(" + i + ") "
        },
        _reset: function() {
            var t = this._image
              , e = this._map.latLngToLayerPoint(this._bounds.getNorthWest())
              , n = this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);
            o.DomUtil.setPosition(t, e),
            t.style.width = n.x + "px",
            t.style.height = n.y + "px"
        },
        _onImageLoad: function() {
            this.fire("load")
        },
        _updateOpacity: function() {
            o.DomUtil.setOpacity(this._image, this.options.opacity)
        }
    }),
    o.imageOverlay = function(t, e, n) {
        return new o.ImageOverlay(t,e,n)
    }
    ,
    o.Icon = o.Class.extend({
        options: {
            className: ""
        },
        initialize: function(t) {
            o.setOptions(this, t)
        },
        createIcon: function(t) {
            return this._createIcon("icon", t)
        },
        createShadow: function(t) {
            return this._createIcon("shadow", t)
        },
        _createIcon: function(t, e) {
            var n = this._getIconUrl(t);
            if (!n) {
                if ("icon" === t)
                    throw new Error("iconUrl not set in Icon options (see the docs).");
                return null 
            }
            var i;
            return i = e && "IMG" === e.tagName ? this._createImg(n, e) : this._createImg(n),
            this._setIconStyles(i, t),
            i
        },
        _setIconStyles: function(t, e) {
            var n, i = this.options, r = o.point(i[e + "Size"]);
            n = o.point("shadow" === e ? i.shadowAnchor || i.iconAnchor : i.iconAnchor),
            !n && r && (n = r.divideBy(2, !0)),
            t.className = "leaflet-marker-" + e + " " + i.className,
            n && (t.style.marginLeft = -n.x + "px",
            t.style.marginTop = -n.y + "px"),
            r && (t.style.width = r.x + "px",
            t.style.height = r.y + "px")
        },
        _createImg: function(t, n) {
            return n = n || e.createElement("img"),
            n.src = t,
            n
        },
        _getIconUrl: function(t) {
            return o.Browser.retina && this.options[t + "RetinaUrl"] ? this.options[t + "RetinaUrl"] : this.options[t + "Url"]
        }
    }),
    o.icon = function(t) {
        return new o.Icon(t)
    }
    ,
    o.Icon.Default = o.Icon.extend({
        options: {
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
        },
        _getIconUrl: function(t) {
            var e = t + "Url";
            if (this.options[e])
                return this.options[e];
            o.Browser.retina && "icon" === t && (t += "-2x");
            var n = o.Icon.Default.imagePath;
            if (!n)
                throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");
            return n + "/marker-" + t + ".png"
        }
    }),
    o.Icon.Default.imagePath = function() {
        var t, n, i, o, r, s = e.getElementsByTagName("script"), a = /[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;
        for (t = 0,
        n = s.length; n > t; t++)
            if (i = s[t].src,
            o = i.match(a))
                return r = i.split(a)[0],
                (r ? r + "/" : "") + "images"
    }
    (),
    o.Marker = o.Class.extend({
        includes: o.Mixin.Events,
        options: {
            icon: new o.Icon.Default,
            title: "",
            alt: "",
            clickable: !0,
            draggable: !1,
            keyboard: !0,
            zIndexOffset: 0,
            opacity: 1,
            riseOnHover: !1,
            riseOffset: 250
        },
        initialize: function(t, e) {
            o.setOptions(this, e),
            this._latlng = o.latLng(t)
        },
        onAdd: function(t) {
            this._map = t,
            t.on("viewreset", this.update, this),
            this._initIcon(),
            this.update(),
            this.fire("add"),
            t.options.zoomAnimation && t.options.markerZoomAnimation && t.on("zoomanim", this._animateZoom, this)
        },
        addTo: function(t) {
            return t.addLayer(this),
            this
        },
        onRemove: function(t) {
            this.dragging && this.dragging.disable(),
            this._removeIcon(),
            this._removeShadow(),
            this.fire("remove"),
            t.off({
                viewreset: this.update,
                zoomanim: this._animateZoom
            }, this),
            this._map = null 
        },
        getLatLng: function() {
            return this._latlng
        },
        setLatLng: function(t) {
            return this._latlng = o.latLng(t),
            this.update(),
            this.fire("move", {
                latlng: this._latlng
            })
        },
        setZIndexOffset: function(t) {
            return this.options.zIndexOffset = t,
            this.update(),
            this
        },
        setIcon: function(t) {
            return this.options.icon = t,
            this._map && (this._initIcon(),
            this.update()),
            this._popup && this.bindPopup(this._popup),
            this
        },
        update: function() {
            if (this._icon) {
                var t = this._map.latLngToLayerPoint(this._latlng).round();
                this._setPos(t)
            }
            return this
        },
        _initIcon: function() {
            var t = this.options
              , e = this._map
              , n = e.options.zoomAnimation && e.options.markerZoomAnimation
              , i = n ? "leaflet-zoom-animated" : "leaflet-zoom-hide"
              , r = t.icon.createIcon(this._icon)
              , s = !1;
            r !== this._icon && (this._icon && this._removeIcon(),
            s = !0,
            t.title && (r.title = t.title),
            t.alt && (r.alt = t.alt)),
            o.DomUtil.addClass(r, i),
            t.keyboard && (r.tabIndex = "0"),
            this._icon = r,
            this._initInteraction(),
            t.riseOnHover && o.DomEvent.on(r, "mouseover", this._bringToFront, this).on(r, "mouseout", this._resetZIndex, this);
            var a = t.icon.createShadow(this._shadow)
              , l = !1;
            a !== this._shadow && (this._removeShadow(),
            l = !0),
            a && o.DomUtil.addClass(a, i),
            this._shadow = a,
            t.opacity < 1 && this._updateOpacity();
            var u = this._map._panes;
            s && u.markerPane.appendChild(this._icon),
            a && l && u.shadowPane.appendChild(this._shadow)
        },
        _removeIcon: function() {
            this.options.riseOnHover && o.DomEvent.off(this._icon, "mouseover", this._bringToFront).off(this._icon, "mouseout", this._resetZIndex),
            this._map._panes.markerPane.removeChild(this._icon),
            this._icon = null 
        },
        _removeShadow: function() {
            this._shadow && this._map._panes.shadowPane.removeChild(this._shadow),
            this._shadow = null 
        },
        _setPos: function(t) {
            o.DomUtil.setPosition(this._icon, t),
            this._shadow && o.DomUtil.setPosition(this._shadow, t),
            this._zIndex = t.y + this.options.zIndexOffset,
            this._resetZIndex()
        },
        _updateZIndex: function(t) {
            this._icon.style.zIndex = this._zIndex + t
        },
        _animateZoom: function(t) {
            var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center).round();
            this._setPos(e)
        },
        _initInteraction: function() {
            if (this.options.clickable) {
                var t = this._icon
                  , e = ["dblclick", "mousedown", "mouseover", "mouseout", "contextmenu"];
                o.DomUtil.addClass(t, "leaflet-clickable"),
                o.DomEvent.on(t, "click", this._onMouseClick, this),
                o.DomEvent.on(t, "keypress", this._onKeyPress, this);
                for (var n = 0; n < e.length; n++)
                    o.DomEvent.on(t, e[n], this._fireMouseEvent, this);
                o.Handler.MarkerDrag && (this.dragging = new o.Handler.MarkerDrag(this),
                this.options.draggable && this.dragging.enable())
            }
        },
        _onMouseClick: function(t) {
            var e = this.dragging && this.dragging.moved();
            (this.hasEventListeners(t.type) || e) && o.DomEvent.stopPropagation(t),
            e || (this.dragging && this.dragging._enabled || !this._map.dragging || !this._map.dragging.moved()) && this.fire(t.type, {
                originalEvent: t,
                latlng: this._latlng
            })
        },
        _onKeyPress: function(t) {
            13 === t.keyCode && this.fire("click", {
                originalEvent: t,
                latlng: this._latlng
            })
        },
        _fireMouseEvent: function(t) {
            this.fire(t.type, {
                originalEvent: t,
                latlng: this._latlng
            }),
            "contextmenu" === t.type && this.hasEventListeners(t.type) && o.DomEvent.preventDefault(t),
            "mousedown" !== t.type ? o.DomEvent.stopPropagation(t) : o.DomEvent.preventDefault(t)
        },
        setOpacity: function(t) {
            return this.options.opacity = t,
            this._map && this._updateOpacity(),
            this
        },
        _updateOpacity: function() {
            o.DomUtil.setOpacity(this._icon, this.options.opacity),
            this._shadow && o.DomUtil.setOpacity(this._shadow, this.options.opacity)
        },
        _bringToFront: function() {
            this._updateZIndex(this.options.riseOffset)
        },
        _resetZIndex: function() {
            this._updateZIndex(0)
        }
    }),
    o.marker = function(t, e) {
        return new o.Marker(t,e)
    }
    ,
    o.DivIcon = o.Icon.extend({
        options: {
            iconSize: [12, 12],
            className: "leaflet-div-icon",
            html: !1
        },
        createIcon: function(t) {
            var n = t && "DIV" === t.tagName ? t : e.createElement("div")
              , i = this.options;
            return n.innerHTML = i.html !== !1 ? i.html : "",
            i.bgPos && (n.style.backgroundPosition = -i.bgPos.x + "px " + -i.bgPos.y + "px"),
            this._setIconStyles(n, "icon"),
            n
        },
        createShadow: function() {
            return null 
        }
    }),
    o.divIcon = function(t) {
        return new o.DivIcon(t)
    }
    ,
    o.Map.mergeOptions({
        closePopupOnClick: !0
    }),
    o.Popup = o.Class.extend({
        includes: o.Mixin.Events,
        options: {
            minWidth: 50,
            maxWidth: 300,
            autoPan: !0,
            closeButton: !0,
            offset: [0, 7],
            autoPanPadding: [5, 5],
            keepInView: !1,
            className: "",
            zoomAnimation: !0
        },
        initialize: function(t, e) {
            o.setOptions(this, t),
            this._source = e,
            this._animated = o.Browser.any3d && this.options.zoomAnimation,
            this._isOpen = !1
        },
        onAdd: function(t) {
            this._map = t,
            this._container || this._initLayout();
            var e = t.options.fadeAnimation;
            e && o.DomUtil.setOpacity(this._container, 0),
            t._panes.popupPane.appendChild(this._container),
            t.on(this._getEvents(), this),
            this.update(),
            e && o.DomUtil.setOpacity(this._container, 1),
            this.fire("open"),
            t.fire("popupopen", {
                popup: this
            }),
            this._source && this._source.fire("popupopen", {
                popup: this
            })
        },
        addTo: function(t) {
            return t.addLayer(this),
            this
        },
        openOn: function(t) {
            return t.openPopup(this),
            this
        },
        onRemove: function(t) {
            t._panes.popupPane.removeChild(this._container),
            o.Util.falseFn(this._container.offsetWidth),
            t.off(this._getEvents(), this),
            t.options.fadeAnimation && o.DomUtil.setOpacity(this._container, 0),
            this._map = null ,
            this.fire("close"),
            t.fire("popupclose", {
                popup: this
            }),
            this._source && this._source.fire("popupclose", {
                popup: this
            })
        },
        getLatLng: function() {
            return this._latlng
        },
        setLatLng: function(t) {
            return this._latlng = o.latLng(t),
            this._map && (this._updatePosition(),
            this._adjustPan()),
            this
        },
        getContent: function() {
            return this._content
        },
        setContent: function(t) {
            return this._content = t,
            this.update(),
            this
        },
        update: function() {
            this._map && (this._container.style.visibility = "hidden",
            this._updateContent(),
            this._updateLayout(),
            this._updatePosition(),
            this._container.style.visibility = "",
            this._adjustPan())
        },
        _getEvents: function() {
            var t = {
                viewreset: this._updatePosition
            };
            return this._animated && (t.zoomanim = this._zoomAnimation),
            ("closeOnClick" in this.options ? this.options.closeOnClick : this._map.options.closePopupOnClick) && (t.preclick = this._close),
            this.options.keepInView && (t.moveend = this._adjustPan),
            t
        },
        _close: function() {
            this._map && this._map.closePopup(this)
        },
        _initLayout: function() {
            var t, e = "leaflet-popup", n = e + " " + this.options.className + " leaflet-zoom-" + (this._animated ? "animated" : "hide"), i = this._container = o.DomUtil.create("div", n);
            this.options.closeButton && (t = this._closeButton = o.DomUtil.create("a", e + "-close-button", i),
            t.href = "#close",
            t.innerHTML = "&#215;",
            o.DomEvent.disableClickPropagation(t),
            o.DomEvent.on(t, "click", this._onCloseButtonClick, this));
            var r = this._wrapper = o.DomUtil.create("div", e + "-content-wrapper", i);
            o.DomEvent.disableClickPropagation(r),
            this._contentNode = o.DomUtil.create("div", e + "-content", r),
            o.DomEvent.disableScrollPropagation(this._contentNode),
            o.DomEvent.on(r, "contextmenu", o.DomEvent.stopPropagation),
            this._tipContainer = o.DomUtil.create("div", e + "-tip-container", i),
            this._tip = o.DomUtil.create("div", e + "-tip", this._tipContainer)
        },
        _updateContent: function() {
            if (this._content) {
                if ("string" == typeof this._content)
                    this._contentNode.innerHTML = this._content;
                else {
                    for (; this._contentNode.hasChildNodes(); )
                        this._contentNode.removeChild(this._contentNode.firstChild);
                    this._contentNode.appendChild(this._content)
                }
                this.fire("contentupdate")
            }
        },
        _updateLayout: function() {
            var t = this._contentNode
              , e = t.style;
            e.width = "",
            e.whiteSpace = "nowrap";
            var n = t.offsetWidth;
            n = Math.min(n, this.options.maxWidth),
            n = Math.max(n, this.options.minWidth),
            e.width = n + 1 + "px",
            e.whiteSpace = "",
            e.height = "";
            var i = t.offsetHeight
              , r = this.options.maxHeight
              , s = "leaflet-popup-scrolled";
            r && i > r ? (e.height = r + "px",
            o.DomUtil.addClass(t, s)) : o.DomUtil.removeClass(t, s),
            this._containerWidth = this._container.offsetWidth
        },
        _updatePosition: function() {
            if (this._map) {
                var t = this._map.latLngToLayerPoint(this._latlng)
                  , e = this._animated
                  , n = o.point(this.options.offset);
                e && o.DomUtil.setPosition(this._container, t),
                this._containerBottom = -n.y - (e ? 0 : t.y),
                this._containerLeft = -Math.round(this._containerWidth / 2) + n.x + (e ? 0 : t.x),
                this._container.style.bottom = this._containerBottom + "px",
                this._container.style.left = this._containerLeft + "px"
            }
        },
        _zoomAnimation: function(t) {
            var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center);
            o.DomUtil.setPosition(this._container, e)
        },
        _adjustPan: function() {
            if (this.options.autoPan) {
                var t = this._map
                  , e = this._container.offsetHeight
                  , n = this._containerWidth
                  , i = new o.Point(this._containerLeft,-e - this._containerBottom);
                this._animated && i._add(o.DomUtil.getPosition(this._container));
                var r = t.layerPointToContainerPoint(i)
                  , s = o.point(this.options.autoPanPadding)
                  , a = o.point(this.options.autoPanPaddingTopLeft || s)
                  , l = o.point(this.options.autoPanPaddingBottomRight || s)
                  , u = t.getSize()
                  , c = 0
                  , h = 0;
                r.x + n + l.x > u.x && (c = r.x + n - u.x + l.x),
                r.x - c - a.x < 0 && (c = r.x - a.x),
                r.y + e + l.y > u.y && (h = r.y + e - u.y + l.y),
                r.y - h - a.y < 0 && (h = r.y - a.y),
                (c || h) && t.fire("autopanstart").panBy([c, h])
            }
        },
        _onCloseButtonClick: function(t) {
            this._close(),
            o.DomEvent.stop(t)
        }
    }),
    o.popup = function(t, e) {
        return new o.Popup(t,e)
    }
    ,
    o.Map.include({
        openPopup: function(t, e, n) {
            if (this.closePopup(),
            !(t instanceof o.Popup)) {
                var i = t;
                t = new o.Popup(n).setLatLng(e).setContent(i)
            }
            return t._isOpen = !0,
            this._popup = t,
            this.addLayer(t)
        },
        closePopup: function(t) {
            return t && t !== this._popup || (t = this._popup,
            this._popup = null ),
            t && (this.removeLayer(t),
            t._isOpen = !1),
            this
        }
    }),
    o.Marker.include({
        openPopup: function() {
            return this._popup && this._map && !this._map.hasLayer(this._popup) && (this._popup.setLatLng(this._latlng),
            this._map.openPopup(this._popup)),
            this
        },
        closePopup: function() {
            return this._popup && this._popup._close(),
            this
        },
        togglePopup: function() {
            return this._popup && (this._popup._isOpen ? this.closePopup() : this.openPopup()),
            this
        },
        bindPopup: function(t, e) {
            var n = o.point(this.options.icon.options.popupAnchor || [0, 0]);
            return n = n.add(o.Popup.prototype.options.offset),
            e && e.offset && (n = n.add(e.offset)),
            e = o.extend({
                offset: n
            }, e),
            this._popupHandlersAdded || (this.on("click", this.togglePopup, this).on("remove", this.closePopup, this).on("move", this._movePopup, this),
            this._popupHandlersAdded = !0),
            t instanceof o.Popup ? (o.setOptions(t, e),
            this._popup = t) : this._popup = new o.Popup(e,this).setContent(t),
            this
        },
        setPopupContent: function(t) {
            return this._popup && this._popup.setContent(t),
            this
        },
        unbindPopup: function() {
            return this._popup && (this._popup = null ,
            this.off("click", this.togglePopup, this).off("remove", this.closePopup, this).off("move", this._movePopup, this),
            this._popupHandlersAdded = !1),
            this
        },
        getPopup: function() {
            return this._popup
        },
        _movePopup: function(t) {
            this._popup.setLatLng(t.latlng)
        }
    }),
    o.LayerGroup = o.Class.extend({
        initialize: function(t) {
            this._layers = {};
            var e, n;
            if (t)
                for (e = 0,
                n = t.length; n > e; e++)
                    this.addLayer(t[e])
        },
        addLayer: function(t) {
            var e = this.getLayerId(t);
            return this._layers[e] = t,
            this._map && this._map.addLayer(t),
            this
        },
        removeLayer: function(t) {
            var e = t in this._layers ? t : this.getLayerId(t);
            return this._map && this._layers[e] && this._map.removeLayer(this._layers[e]),
            delete this._layers[e],
            this
        },
        hasLayer: function(t) {
            return t ? t in this._layers || this.getLayerId(t) in this._layers : !1
        },
        clearLayers: function() {
            return this.eachLayer(this.removeLayer, this),
            this
        },
        invoke: function(t) {
            var e, n, i = Array.prototype.slice.call(arguments, 1);
            for (e in this._layers)
                n = this._layers[e],
                n[t] && n[t].apply(n, i);
            return this
        },
        onAdd: function(t) {
            this._map = t,
            this.eachLayer(t.addLayer, t)
        },
        onRemove: function(t) {
            this.eachLayer(t.removeLayer, t),
            this._map = null 
        },
        addTo: function(t) {
            return t.addLayer(this),
            this
        },
        eachLayer: function(t, e) {
            for (var n in this._layers)
                t.call(e, this._layers[n]);
            return this
        },
        getLayer: function(t) {
            return this._layers[t]
        },
        getLayers: function() {
            var t = [];
            for (var e in this._layers)
                t.push(this._layers[e]);
            return t
        },
        setZIndex: function(t) {
            return this.invoke("setZIndex", t)
        },
        getLayerId: function(t) {
            return o.stamp(t)
        }
    }),
    o.layerGroup = function(t) {
        return new o.LayerGroup(t)
    }
    ,
    o.FeatureGroup = o.LayerGroup.extend({
        includes: o.Mixin.Events,
        statics: {
            EVENTS: "click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"
        },
        addLayer: function(t) {
            return this.hasLayer(t) ? this : ("on" in t && t.on(o.FeatureGroup.EVENTS, this._propagateEvent, this),
            o.LayerGroup.prototype.addLayer.call(this, t),
            this._popupContent && t.bindPopup && t.bindPopup(this._popupContent, this._popupOptions),
            this.fire("layeradd", {
                layer: t
            }))
        },
        removeLayer: function(t) {
            return this.hasLayer(t) ? (t in this._layers && (t = this._layers[t]),
            t.off(o.FeatureGroup.EVENTS, this._propagateEvent, this),
            o.LayerGroup.prototype.removeLayer.call(this, t),
            this._popupContent && this.invoke("unbindPopup"),
            this.fire("layerremove", {
                layer: t
            })) : this
        },
        bindPopup: function(t, e) {
            return this._popupContent = t,
            this._popupOptions = e,
            this.invoke("bindPopup", t, e)
        },
        openPopup: function(t) {
            for (var e in this._layers) {
                this._layers[e].openPopup(t);
                break
            }
            return this
        },
        setStyle: function(t) {
            return this.invoke("setStyle", t)
        },
        bringToFront: function() {
            return this.invoke("bringToFront")
        },
        bringToBack: function() {
            return this.invoke("bringToBack")
        },
        getBounds: function() {
            var t = new o.LatLngBounds;
            return this.eachLayer(function(e) {
                t.extend(e instanceof o.Marker ? e.getLatLng() : e.getBounds())
            }
            ),
            t
        },
        _propagateEvent: function(t) {
            t = o.extend({
                layer: t.target,
                target: this
            }, t),
            this.fire(t.type, t)
        }
    }),
    o.featureGroup = function(t) {
        return new o.FeatureGroup(t)
    }
    ,
    o.Path = o.Class.extend({
        includes: [o.Mixin.Events],
        statics: {
            CLIP_PADDING: function() {
                var e = o.Browser.mobile ? 1280 : 2e3
                  , n = (e / Math.max(t.outerWidth, t.outerHeight) - 1) / 2;
                return Math.max(0, Math.min(.5, n))
            }
            ()
        },
        options: {
            stroke: !0,
            color: "#0033ff",
            dashArray: null ,
            lineCap: null ,
            lineJoin: null ,
            weight: 5,
            opacity: .5,
            fill: !1,
            fillColor: null ,
            fillOpacity: .2,
            clickable: !0
        },
        initialize: function(t) {
            o.setOptions(this, t)
        },
        onAdd: function(t) {
            this._map = t,
            this._container || (this._initElements(),
            this._initEvents()),
            this.projectLatlngs(),
            this._updatePath(),
            this._container && this._map._pathRoot.appendChild(this._container),
            this.fire("add"),
            t.on({
                viewreset: this.projectLatlngs,
                moveend: this._updatePath
            }, this)
        },
        addTo: function(t) {
            return t.addLayer(this),
            this
        },
        onRemove: function(t) {
            t._pathRoot.removeChild(this._container),
            this.fire("remove"),
            this._map = null ,
            o.Browser.vml && (this._container = null ,
            this._stroke = null ,
            this._fill = null ),
            t.off({
                viewreset: this.projectLatlngs,
                moveend: this._updatePath
            }, this)
        },
        projectLatlngs: function() {},
        setStyle: function(t) {
            return o.setOptions(this, t),
            this._container && this._updateStyle(),
            this
        },
        redraw: function() {
            return this._map && (this.projectLatlngs(),
            this._updatePath()),
            this
        }
    }),
    o.Map.include({
        _updatePathViewport: function() {
            var t = o.Path.CLIP_PADDING
              , e = this.getSize()
              , n = o.DomUtil.getPosition(this._mapPane)
              , i = n.multiplyBy(-1)._subtract(e.multiplyBy(t)._round())
              , r = i.add(e.multiplyBy(1 + 2 * t)._round());
            this._pathViewport = new o.Bounds(i,r)
        }
    }),
    o.Path.SVG_NS = "http://www.w3.org/2000/svg",
    o.Browser.svg = !(!e.createElementNS || !e.createElementNS(o.Path.SVG_NS, "svg").createSVGRect),
    o.Path = o.Path.extend({
        statics: {
            SVG: o.Browser.svg
        },
        bringToFront: function() {
            var t = this._map._pathRoot
              , e = this._container;
            return e && t.lastChild !== e && t.appendChild(e),
            this
        },
        bringToBack: function() {
            var t = this._map._pathRoot
              , e = this._container
              , n = t.firstChild;
            return e && n !== e && t.insertBefore(e, n),
            this
        },
        getPathString: function() {},
        _createElement: function(t) {
            return e.createElementNS(o.Path.SVG_NS, t)
        },
        _initElements: function() {
            this._map._initPathRoot(),
            this._initPath(),
            this._initStyle()
        },
        _initPath: function() {
            this._container = this._createElement("g"),
            this._path = this._createElement("path"),
            this.options.className && o.DomUtil.addClass(this._path, this.options.className),
            this._container.appendChild(this._path)
        },
        _initStyle: function() {
            this.options.stroke && (this._path.setAttribute("stroke-linejoin", "round"),
            this._path.setAttribute("stroke-linecap", "round")),
            this.options.fill && this._path.setAttribute("fill-rule", "evenodd"),
            this.options.pointerEvents && this._path.setAttribute("pointer-events", this.options.pointerEvents),
            this.options.clickable || this.options.pointerEvents || this._path.setAttribute("pointer-events", "none"),
            this._updateStyle()
        },
        _updateStyle: function() {
            this.options.stroke ? (this._path.setAttribute("stroke", this.options.color),
            this._path.setAttribute("stroke-opacity", this.options.opacity),
            this._path.setAttribute("stroke-width", this.options.weight),
            this.options.dashArray ? this._path.setAttribute("stroke-dasharray", this.options.dashArray) : this._path.removeAttribute("stroke-dasharray"),
            this.options.lineCap && this._path.setAttribute("stroke-linecap", this.options.lineCap),
            this.options.lineJoin && this._path.setAttribute("stroke-linejoin", this.options.lineJoin)) : this._path.setAttribute("stroke", "none"),
            this.options.fill ? (this._path.setAttribute("fill", this.options.fillColor || this.options.color),
            this._path.setAttribute("fill-opacity", this.options.fillOpacity)) : this._path.setAttribute("fill", "none")
        },
        _updatePath: function() {
            var t = this.getPathString();
            t || (t = "M0 0"),
            this._path.setAttribute("d", t)
        },
        _initEvents: function() {
            if (this.options.clickable) {
                (o.Browser.svg || !o.Browser.vml) && o.DomUtil.addClass(this._path, "leaflet-clickable"),
                o.DomEvent.on(this._container, "click", this._onMouseClick, this);
                for (var t = ["dblclick", "mousedown", "mouseover", "mouseout", "mousemove", "contextmenu"], e = 0; e < t.length; e++)
                    o.DomEvent.on(this._container, t[e], this._fireMouseEvent, this)
            }
        },
        _onMouseClick: function(t) {
            this._map.dragging && this._map.dragging.moved() || this._fireMouseEvent(t)
        },
        _fireMouseEvent: function(t) {
            if (this.hasEventListeners(t.type)) {
                var e = this._map
                  , n = e.mouseEventToContainerPoint(t)
                  , i = e.containerPointToLayerPoint(n)
                  , r = e.layerPointToLatLng(i);
                this.fire(t.type, {
                    latlng: r,
                    layerPoint: i,
                    containerPoint: n,
                    originalEvent: t
                }),
                "contextmenu" === t.type && o.DomEvent.preventDefault(t),
                "mousemove" !== t.type && o.DomEvent.stopPropagation(t);
            }
        }
    }),
    o.Map.include({
        _initPathRoot: function() {
            this._pathRoot || (this._pathRoot = o.Path.prototype._createElement("svg"),
            this._panes.overlayPane.appendChild(this._pathRoot),
            this.options.zoomAnimation && o.Browser.any3d ? (o.DomUtil.addClass(this._pathRoot, "leaflet-zoom-animated"),
            this.on({
                zoomanim: this._animatePathZoom,
                zoomend: this._endPathZoom
            })) : o.DomUtil.addClass(this._pathRoot, "leaflet-zoom-hide"),
            this.on("moveend", this._updateSvgViewport),
            this._updateSvgViewport())
        },
        _animatePathZoom: function(t) {
            var e = this.getZoomScale(t.zoom)
              , n = this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);
            this._pathRoot.style[o.DomUtil.TRANSFORM] = o.DomUtil.getTranslateString(n) + " scale(" + e + ") ",
            this._pathZooming = !0
        },
        _endPathZoom: function() {
            this._pathZooming = !1
        },
        _updateSvgViewport: function() {
            if (!this._pathZooming) {
                this._updatePathViewport();
                var t = this._pathViewport
                  , e = t.min
                  , n = t.max
                  , i = n.x - e.x
                  , r = n.y - e.y
                  , s = this._pathRoot
                  , a = this._panes.overlayPane;
                o.Browser.mobileWebkit && a.removeChild(s),
                o.DomUtil.setPosition(s, e),
                s.setAttribute("width", i),
                s.setAttribute("height", r),
                s.setAttribute("viewBox", [e.x, e.y, i, r].join(" ")),
                o.Browser.mobileWebkit && a.appendChild(s)
            }
        }
    }),
    o.Path.include({
        bindPopup: function(t, e) {
            return t instanceof o.Popup ? this._popup = t : ((!this._popup || e) && (this._popup = new o.Popup(e,this)),
            this._popup.setContent(t)),
            this._popupHandlersAdded || (this.on("click", this._openPopup, this).on("remove", this.closePopup, this),
            this._popupHandlersAdded = !0),
            this
        },
        unbindPopup: function() {
            return this._popup && (this._popup = null ,
            this.off("click", this._openPopup).off("remove", this.closePopup),
            this._popupHandlersAdded = !1),
            this
        },
        openPopup: function(t) {
            return this._popup && (t = t || this._latlng || this._latlngs[Math.floor(this._latlngs.length / 2)],
            this._openPopup({
                latlng: t
            })),
            this
        },
        closePopup: function() {
            return this._popup && this._popup._close(),
            this
        },
        _openPopup: function(t) {
            this._popup.setLatLng(t.latlng),
            this._map.openPopup(this._popup)
        }
    }),
    o.Browser.vml = !o.Browser.svg && function() {
        try {
            var t = e.createElement("div");
            t.innerHTML = '<v:shape adj="1"/>';
            var n = t.firstChild;
            return n.style.behavior = "url(#default#VML)",
            n && "object" == typeof n.adj
        } catch (i) {
            return !1
        }
    }
    (),
    o.Path = o.Browser.svg || !o.Browser.vml ? o.Path : o.Path.extend({
        statics: {
            VML: !0,
            CLIP_PADDING: .02
        },
        _createElement: function() {
            try {
                return e.namespaces.add("lvml", "urn:schemas-microsoft-com:vml"),
                function(t) {
                    return e.createElement("<lvml:" + t + ' class="lvml">')
                }
            } catch (t) {
                return function(t) {
                    return e.createElement("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')
                }
            }
        }
        (),
        _initPath: function() {
            var t = this._container = this._createElement("shape");
            o.DomUtil.addClass(t, "leaflet-vml-shape" + (this.options.className ? " " + this.options.className : "")),
            this.options.clickable && o.DomUtil.addClass(t, "leaflet-clickable"),
            t.coordsize = "1 1",
            this._path = this._createElement("path"),
            t.appendChild(this._path),
            this._map._pathRoot.appendChild(t)
        },
        _initStyle: function() {
            this._updateStyle()
        },
        _updateStyle: function() {
            var t = this._stroke
              , e = this._fill
              , n = this.options
              , i = this._container;
            i.stroked = n.stroke,
            i.filled = n.fill,
            n.stroke ? (t || (t = this._stroke = this._createElement("stroke"),
            t.endcap = "round",
            i.appendChild(t)),
            t.weight = n.weight + "px",
            t.color = n.color,
            t.opacity = n.opacity,
            t.dashStyle = n.dashArray ? o.Util.isArray(n.dashArray) ? n.dashArray.join(" ") : n.dashArray.replace(/( *, *)/g, " ") : "",
            n.lineCap && (t.endcap = n.lineCap.replace("butt", "flat")),
            n.lineJoin && (t.joinstyle = n.lineJoin)) : t && (i.removeChild(t),
            this._stroke = null ),
            n.fill ? (e || (e = this._fill = this._createElement("fill"),
            i.appendChild(e)),
            e.color = n.fillColor || n.color,
            e.opacity = n.fillOpacity) : e && (i.removeChild(e),
            this._fill = null )
        },
        _updatePath: function() {
            var t = this._container.style;
            t.display = "none",
            this._path.v = this.getPathString() + " ",
            t.display = ""
        }
    }),
    o.Map.include(o.Browser.svg || !o.Browser.vml ? {} : {
        _initPathRoot: function() {
            if (!this._pathRoot) {
                var t = this._pathRoot = e.createElement("div");
                t.className = "leaflet-vml-container",
                this._panes.overlayPane.appendChild(t),
                this.on("moveend", this._updatePathViewport),
                this._updatePathViewport()
            }
        }
    }),
    o.Browser.canvas = function() {
        return !!e.createElement("canvas").getContext
    }
    (),
    o.Path = o.Path.SVG && !t.L_PREFER_CANVAS || !o.Browser.canvas ? o.Path : o.Path.extend({
        statics: {
            CANVAS: !0,
            SVG: !1
        },
        redraw: function() {
            return this._map && (this.projectLatlngs(),
            this._requestUpdate()),
            this
        },
        setStyle: function(t) {
            return o.setOptions(this, t),
            this._map && (this._updateStyle(),
            this._requestUpdate()),
            this
        },
        onRemove: function(t) {
            t.off("viewreset", this.projectLatlngs, this).off("moveend", this._updatePath, this),
            this.options.clickable && (this._map.off("click", this._onClick, this),
            this._map.off("mousemove", this._onMouseMove, this)),
            this._requestUpdate(),
            this.fire("remove"),
            this._map = null 
        },
        _requestUpdate: function() {
            this._map && !o.Path._updateRequest && (o.Path._updateRequest = o.Util.requestAnimFrame(this._fireMapMoveEnd, this._map))
        },
        _fireMapMoveEnd: function() {
            o.Path._updateRequest = null ,
            this.fire("moveend")
        },
        _initElements: function() {
            this._map._initPathRoot(),
            this._ctx = this._map._canvasCtx
        },
        _updateStyle: function() {
            var t = this.options;
            t.stroke && (this._ctx.lineWidth = t.weight,
            this._ctx.strokeStyle = t.color),
            t.fill && (this._ctx.fillStyle = t.fillColor || t.color)
        },
        _drawPath: function() {
            var t, e, n, i, r, s;
            for (this._ctx.beginPath(),
            t = 0,
            n = this._parts.length; n > t; t++) {
                for (e = 0,
                i = this._parts[t].length; i > e; e++)
                    r = this._parts[t][e],
                    s = (0 === e ? "move" : "line") + "To",
                    this._ctx[s](r.x, r.y);
                this instanceof o.Polygon && this._ctx.closePath()
            }
        },
        _checkIfEmpty: function() {
            return !this._parts.length
        },
        _updatePath: function() {
            if (!this._checkIfEmpty()) {
                var t = this._ctx
                  , e = this.options;
                this._drawPath(),
                t.save(),
                this._updateStyle(),
                e.fill && (t.globalAlpha = e.fillOpacity,
                t.fill()),
                e.stroke && (t.globalAlpha = e.opacity,
                t.stroke()),
                t.restore()
            }
        },
        _initEvents: function() {
            this.options.clickable && (this._map.on("mousemove", this._onMouseMove, this),
            this._map.on("click", this._onClick, this))
        },
        _onClick: function(t) {
            this._containsPoint(t.layerPoint) && this.fire("click", t)
        },
        _onMouseMove: function(t) {
            this._map && !this._map._animatingZoom && (this._containsPoint(t.layerPoint) ? (this._ctx.canvas.style.cursor = "pointer",
            this._mouseInside = !0,
            this.fire("mouseover", t)) : this._mouseInside && (this._ctx.canvas.style.cursor = "",
            this._mouseInside = !1,
            this.fire("mouseout", t)))
        }
    }),
    o.Map.include(o.Path.SVG && !t.L_PREFER_CANVAS || !o.Browser.canvas ? {} : {
        _initPathRoot: function() {
            var t, n = this._pathRoot;
            n || (n = this._pathRoot = e.createElement("canvas"),
            n.style.position = "absolute",
            t = this._canvasCtx = n.getContext("2d"),
            t.lineCap = "round",
            t.lineJoin = "round",
            this._panes.overlayPane.appendChild(n),
            this.options.zoomAnimation && (this._pathRoot.className = "leaflet-zoom-animated",
            this.on("zoomanim", this._animatePathZoom),
            this.on("zoomend", this._endPathZoom)),
            this.on("moveend", this._updateCanvasViewport),
            this._updateCanvasViewport())
        },
        _updateCanvasViewport: function() {
            if (!this._pathZooming) {
                this._updatePathViewport();
                var t = this._pathViewport
                  , e = t.min
                  , n = t.max.subtract(e)
                  , i = this._pathRoot;
                o.DomUtil.setPosition(i, e),
                i.width = n.x,
                i.height = n.y,
                i.getContext("2d").translate(-e.x, -e.y)
            }
        }
    }),
    o.LineUtil = {
        simplify: function(t, e) {
            if (!e || !t.length)
                return t.slice();
            var n = e * e;
            return t = this._reducePoints(t, n),
            t = this._simplifyDP(t, n)
        },
        pointToSegmentDistance: function(t, e, n) {
            return Math.sqrt(this._sqClosestPointOnSegment(t, e, n, !0))
        },
        closestPointOnSegment: function(t, e, n) {
            return this._sqClosestPointOnSegment(t, e, n)
        },
        _simplifyDP: function(t, e) {
            var i = t.length
              , o = typeof Uint8Array != n + "" ? Uint8Array : Array
              , r = new o(i);
            r[0] = r[i - 1] = 1,
            this._simplifyDPStep(t, r, e, 0, i - 1);
            var s, a = [];
            for (s = 0; i > s; s++)
                r[s] && a.push(t[s]);
            return a
        },
        _simplifyDPStep: function(t, e, n, i, o) {
            var r, s, a, l = 0;
            for (s = i + 1; o - 1 >= s; s++)
                a = this._sqClosestPointOnSegment(t[s], t[i], t[o], !0),
                a > l && (r = s,
                l = a);
            l > n && (e[r] = 1,
            this._simplifyDPStep(t, e, n, i, r),
            this._simplifyDPStep(t, e, n, r, o))
        },
        _reducePoints: function(t, e) {
            for (var n = [t[0]], i = 1, o = 0, r = t.length; r > i; i++)
                this._sqDist(t[i], t[o]) > e && (n.push(t[i]),
                o = i);
            return r - 1 > o && n.push(t[r - 1]),
            n
        },
        clipSegment: function(t, e, n, i) {
            var o, r, s, a = i ? this._lastCode : this._getBitCode(t, n), l = this._getBitCode(e, n);
            for (this._lastCode = l; ; ) {
                if (!(a | l))
                    return [t, e];
                if (a & l)
                    return !1;
                o = a || l,
                r = this._getEdgeIntersection(t, e, o, n),
                s = this._getBitCode(r, n),
                o === a ? (t = r,
                a = s) : (e = r,
                l = s)
            }
        },
        _getEdgeIntersection: function(t, e, n, i) {
            var r = e.x - t.x
              , s = e.y - t.y
              , a = i.min
              , l = i.max;
            return 8 & n ? new o.Point(t.x + r * (l.y - t.y) / s,l.y) : 4 & n ? new o.Point(t.x + r * (a.y - t.y) / s,a.y) : 2 & n ? new o.Point(l.x,t.y + s * (l.x - t.x) / r) : 1 & n ? new o.Point(a.x,t.y + s * (a.x - t.x) / r) : void 0
        },
        _getBitCode: function(t, e) {
            var n = 0;
            return t.x < e.min.x ? n |= 1 : t.x > e.max.x && (n |= 2),
            t.y < e.min.y ? n |= 4 : t.y > e.max.y && (n |= 8),
            n
        },
        _sqDist: function(t, e) {
            var n = e.x - t.x
              , i = e.y - t.y;
            return n * n + i * i
        },
        _sqClosestPointOnSegment: function(t, e, n, i) {
            var r, s = e.x, a = e.y, l = n.x - s, u = n.y - a, c = l * l + u * u;
            return c > 0 && (r = ((t.x - s) * l + (t.y - a) * u) / c,
            r > 1 ? (s = n.x,
            a = n.y) : r > 0 && (s += l * r,
            a += u * r)),
            l = t.x - s,
            u = t.y - a,
            i ? l * l + u * u : new o.Point(s,a)
        }
    },
    o.Polyline = o.Path.extend({
        initialize: function(t, e) {
            o.Path.prototype.initialize.call(this, e),
            this._latlngs = this._convertLatLngs(t)
        },
        options: {
            smoothFactor: 1,
            noClip: !1
        },
        projectLatlngs: function() {
            this._originalPoints = [];
            for (var t = 0, e = this._latlngs.length; e > t; t++)
                this._originalPoints[t] = this._map.latLngToLayerPoint(this._latlngs[t])
        },
        getPathString: function() {
            for (var t = 0, e = this._parts.length, n = ""; e > t; t++)
                n += this._getPathPartStr(this._parts[t]);
            return n
        },
        getLatLngs: function() {
            return this._latlngs
        },
        setLatLngs: function(t) {
            return this._latlngs = this._convertLatLngs(t),
            this.redraw()
        },
        addLatLng: function(t) {
            return this._latlngs.push(o.latLng(t)),
            this.redraw()
        },
        spliceLatLngs: function() {
            var t = [].splice.apply(this._latlngs, arguments);
            return this._convertLatLngs(this._latlngs, !0),
            this.redraw(),
            t
        },
        closestLayerPoint: function(t) {
            for (var e, n, i = 1 / 0, r = this._parts, s = null , a = 0, l = r.length; l > a; a++)
                for (var u = r[a], c = 1, h = u.length; h > c; c++) {
                    e = u[c - 1],
                    n = u[c];
                    var d = o.LineUtil._sqClosestPointOnSegment(t, e, n, !0);
                    i > d && (i = d,
                    s = o.LineUtil._sqClosestPointOnSegment(t, e, n))
                }
            return s && (s.distance = Math.sqrt(i)),
            s
        },
        getBounds: function() {
            return new o.LatLngBounds(this.getLatLngs())
        },
        _convertLatLngs: function(t, e) {
            var n, i, r = e ? t : [];
            for (n = 0,
            i = t.length; i > n; n++) {
                if (o.Util.isArray(t[n]) && "number" != typeof t[n][0])
                    return;
                r[n] = o.latLng(t[n])
            }
            return r
        },
        _initEvents: function() {
            o.Path.prototype._initEvents.call(this)
        },
        _getPathPartStr: function(t) {
            for (var e, n = o.Path.VML, i = 0, r = t.length, s = ""; r > i; i++)
                e = t[i],
                n && e._round(),
                s += (i ? "L" : "M") + e.x + " " + e.y;
            return s
        },
        _clipPoints: function() {
            var t, e, n, i = this._originalPoints, r = i.length;
            if (this.options.noClip)
                return void (this._parts = [i]);
            this._parts = [];
            var s = this._parts
              , a = this._map._pathViewport
              , l = o.LineUtil;
            for (t = 0,
            e = 0; r - 1 > t; t++)
                n = l.clipSegment(i[t], i[t + 1], a, t),
                n && (s[e] = s[e] || [],
                s[e].push(n[0]),
                (n[1] !== i[t + 1] || t === r - 2) && (s[e].push(n[1]),
                e++))
        },
        _simplifyPoints: function() {
            for (var t = this._parts, e = o.LineUtil, n = 0, i = t.length; i > n; n++)
                t[n] = e.simplify(t[n], this.options.smoothFactor)
        },
        _updatePath: function() {
            this._map && (this._clipPoints(),
            this._simplifyPoints(),
            o.Path.prototype._updatePath.call(this))
        }
    }),
    o.polyline = function(t, e) {
        return new o.Polyline(t,e)
    }
    ,
    o.PolyUtil = {},
    o.PolyUtil.clipPolygon = function(t, e) {
        var n, i, r, s, a, l, u, c, h, d = [1, 4, 2, 8], p = o.LineUtil;
        for (i = 0,
        u = t.length; u > i; i++)
            t[i]._code = p._getBitCode(t[i], e);
        for (s = 0; 4 > s; s++) {
            for (c = d[s],
            n = [],
            i = 0,
            u = t.length,
            r = u - 1; u > i; r = i++)
                a = t[i],
                l = t[r],
                a._code & c ? l._code & c || (h = p._getEdgeIntersection(l, a, c, e),
                h._code = p._getBitCode(h, e),
                n.push(h)) : (l._code & c && (h = p._getEdgeIntersection(l, a, c, e),
                h._code = p._getBitCode(h, e),
                n.push(h)),
                n.push(a));
            t = n
        }
        return t
    }
    ,
    o.Polygon = o.Polyline.extend({
        options: {
            fill: !0
        },
        initialize: function(t, e) {
            o.Polyline.prototype.initialize.call(this, t, e),
            this._initWithHoles(t)
        },
        _initWithHoles: function(t) {
            var e, n, i;
            if (t && o.Util.isArray(t[0]) && "number" != typeof t[0][0])
                for (this._latlngs = this._convertLatLngs(t[0]),
                this._holes = t.slice(1),
                e = 0,
                n = this._holes.length; n > e; e++)
                    i = this._holes[e] = this._convertLatLngs(this._holes[e]),
                    i[0].equals(i[i.length - 1]) && i.pop();
            t = this._latlngs,
            t.length >= 2 && t[0].equals(t[t.length - 1]) && t.pop()
        },
        projectLatlngs: function() {
            if (o.Polyline.prototype.projectLatlngs.call(this),
            this._holePoints = [],
            this._holes) {
                var t, e, n, i;
                for (t = 0,
                n = this._holes.length; n > t; t++)
                    for (this._holePoints[t] = [],
                    e = 0,
                    i = this._holes[t].length; i > e; e++)
                        this._holePoints[t][e] = this._map.latLngToLayerPoint(this._holes[t][e])
            }
        },
        setLatLngs: function(t) {
            return t && o.Util.isArray(t[0]) && "number" != typeof t[0][0] ? (this._initWithHoles(t),
            this.redraw()) : o.Polyline.prototype.setLatLngs.call(this, t)
        },
        _clipPoints: function() {
            var t = this._originalPoints
              , e = [];
            if (this._parts = [t].concat(this._holePoints),
            !this.options.noClip) {
                for (var n = 0, i = this._parts.length; i > n; n++) {
                    var r = o.PolyUtil.clipPolygon(this._parts[n], this._map._pathViewport);
                    r.length && e.push(r)
                }
                this._parts = e
            }
        },
        _getPathPartStr: function(t) {
            var e = o.Polyline.prototype._getPathPartStr.call(this, t);
            return e + (o.Browser.svg ? "z" : "x")
        }
    }),
    o.polygon = function(t, e) {
        return new o.Polygon(t,e)
    }
    ,
    function() {
        function t(t) {
            return o.FeatureGroup.extend({
                initialize: function(t, e) {
                    this._layers = {},
                    this._options = e,
                    this.setLatLngs(t)
                },
                setLatLngs: function(e) {
                    var n = 0
                      , i = e.length;
                    for (this.eachLayer(function(t) {
                        i > n ? t.setLatLngs(e[n++]) : this.removeLayer(t)
                    }
                    , this); i > n; )
                        this.addLayer(new t(e[n++],this._options));
                    return this
                },
                getLatLngs: function() {
                    var t = [];
                    return this.eachLayer(function(e) {
                        t.push(e.getLatLngs())
                    }
                    ),
                    t
                }
            })
        }
        o.MultiPolyline = t(o.Polyline),
        o.MultiPolygon = t(o.Polygon),
        o.multiPolyline = function(t, e) {
            return new o.MultiPolyline(t,e)
        }
        ,
        o.multiPolygon = function(t, e) {
            return new o.MultiPolygon(t,e)
        }
    }
    (),
    o.Rectangle = o.Polygon.extend({
        initialize: function(t, e) {
            o.Polygon.prototype.initialize.call(this, this._boundsToLatLngs(t), e)
        },
        setBounds: function(t) {
            this.setLatLngs(this._boundsToLatLngs(t))
        },
        _boundsToLatLngs: function(t) {
            return t = o.latLngBounds(t),
            [t.getSouthWest(), t.getNorthWest(), t.getNorthEast(), t.getSouthEast()]
        }
    }),
    o.rectangle = function(t, e) {
        return new o.Rectangle(t,e)
    }
    ,
    o.Circle = o.Path.extend({
        initialize: function(t, e, n) {
            o.Path.prototype.initialize.call(this, n),
            this._latlng = o.latLng(t),
            this._mRadius = e
        },
        options: {
            fill: !0
        },
        setLatLng: function(t) {
            return this._latlng = o.latLng(t),
            this.redraw()
        },
        setRadius: function(t) {
            return this._mRadius = t,
            this.redraw()
        },
        projectLatlngs: function() {
            var t = this._getLngRadius()
              , e = this._latlng
              , n = this._map.latLngToLayerPoint([e.lat, e.lng - t]);
            this._point = this._map.latLngToLayerPoint(e),
            this._radius = Math.max(this._point.x - n.x, 1)
        },
        getBounds: function() {
            var t = this._getLngRadius()
              , e = this._mRadius / 40075017 * 360
              , n = this._latlng;
            return new o.LatLngBounds([n.lat - e, n.lng - t],[n.lat + e, n.lng + t])
        },
        getLatLng: function() {
            return this._latlng
        },
        getPathString: function() {
            var t = this._point
              , e = this._radius;
            return this._checkIfEmpty() ? "" : o.Browser.svg ? "M" + t.x + "," + (t.y - e) + "A" + e + "," + e + ",0,1,1," + (t.x - .1) + "," + (t.y - e) + " z" : (t._round(),
            e = Math.round(e),
            "AL " + t.x + "," + t.y + " " + e + "," + e + " 0,23592600")
        },
        getRadius: function() {
            return this._mRadius
        },
        _getLatRadius: function() {
            return this._mRadius / 40075017 * 360
        },
        _getLngRadius: function() {
            return this._getLatRadius() / Math.cos(o.LatLng.DEG_TO_RAD * this._latlng.lat)
        },
        _checkIfEmpty: function() {
            if (!this._map)
                return !1;
            var t = this._map._pathViewport
              , e = this._radius
              , n = this._point;
            return n.x - e > t.max.x || n.y - e > t.max.y || n.x + e < t.min.x || n.y + e < t.min.y
        }
    }),
    o.circle = function(t, e, n) {
        return new o.Circle(t,e,n)
    }
    ,
    o.CircleMarker = o.Circle.extend({
        options: {
            radius: 10,
            weight: 2
        },
        initialize: function(t, e) {
            o.Circle.prototype.initialize.call(this, t, null , e),
            this._radius = this.options.radius
        },
        projectLatlngs: function() {
            this._point = this._map.latLngToLayerPoint(this._latlng)
        },
        _updateStyle: function() {
            o.Circle.prototype._updateStyle.call(this),
            this.setRadius(this.options.radius)
        },
        setLatLng: function(t) {
            return o.Circle.prototype.setLatLng.call(this, t),
            this._popup && this._popup._isOpen && this._popup.setLatLng(t),
            this
        },
        setRadius: function(t) {
            return this.options.radius = this._radius = t,
            this.redraw()
        },
        getRadius: function() {
            return this._radius
        }
    }),
    o.circleMarker = function(t, e) {
        return new o.CircleMarker(t,e)
    }
    ,
    o.Polyline.include(o.Path.CANVAS ? {
        _containsPoint: function(t, e) {
            var n, i, r, s, a, l, u, c = this.options.weight / 2;
            for (o.Browser.touch && (c += 10),
            n = 0,
            s = this._parts.length; s > n; n++)
                for (u = this._parts[n],
                i = 0,
                a = u.length,
                r = a - 1; a > i; r = i++)
                    if ((e || 0 !== i) && (l = o.LineUtil.pointToSegmentDistance(t, u[r], u[i]),
                    c >= l))
                        return !0;
            return !1
        }
    } : {}),
    o.Polygon.include(o.Path.CANVAS ? {
        _containsPoint: function(t) {
            var e, n, i, r, s, a, l, u, c = !1;
            if (o.Polyline.prototype._containsPoint.call(this, t, !0))
                return !0;
            for (r = 0,
            l = this._parts.length; l > r; r++)
                for (e = this._parts[r],
                s = 0,
                u = e.length,
                a = u - 1; u > s; a = s++)
                    n = e[s],
                    i = e[a],
                    n.y > t.y != i.y > t.y && t.x < (i.x - n.x) * (t.y - n.y) / (i.y - n.y) + n.x && (c = !c);
            return c
        }
    } : {}),
    o.Circle.include(o.Path.CANVAS ? {
        _drawPath: function() {
            var t = this._point;
            this._ctx.beginPath(),
            this._ctx.arc(t.x, t.y, this._radius, 0, 2 * Math.PI, !1)
        },
        _containsPoint: function(t) {
            var e = this._point
              , n = this.options.stroke ? this.options.weight / 2 : 0;
            return t.distanceTo(e) <= this._radius + n
        }
    } : {}),
    o.CircleMarker.include(o.Path.CANVAS ? {
        _updateStyle: function() {
            o.Path.prototype._updateStyle.call(this)
        }
    } : {}),
    o.GeoJSON = o.FeatureGroup.extend({
        initialize: function(t, e) {
            o.setOptions(this, e),
            this._layers = {},
            t && this.addData(t)
        },
        addData: function(t) {
            var e, n, i, r = o.Util.isArray(t) ? t : t.features;
            if (r) {
                for (e = 0,
                n = r.length; n > e; e++)
                    i = r[e],
                    (i.geometries || i.geometry || i.features || i.coordinates) && this.addData(r[e]);
                return this
            }
            var s = this.options;
            if (!s.filter || s.filter(t)) {
                var a = o.GeoJSON.geometryToLayer(t, s.pointToLayer, s.coordsToLatLng, s);
                return a.feature = o.GeoJSON.asFeature(t),
                a.defaultOptions = a.options,
                this.resetStyle(a),
                s.onEachFeature && s.onEachFeature(t, a),
                this.addLayer(a)
            }
        },
        resetStyle: function(t) {
            var e = this.options.style;
            e && (o.Util.extend(t.options, t.defaultOptions),
            this._setLayerStyle(t, e))
        },
        setStyle: function(t) {
            this.eachLayer(function(e) {
                this._setLayerStyle(e, t)
            }
            , this)
        },
        _setLayerStyle: function(t, e) {
            "function" == typeof e && (e = e(t.feature)),
            t.setStyle && t.setStyle(e)
        }
    }),
    o.extend(o.GeoJSON, {
        geometryToLayer: function(t, e, n, i) {
            var r, s, a, l, u = "Feature" === t.type ? t.geometry : t, c = u.coordinates, h = [];
            switch (n = n || this.coordsToLatLng,
            u.type) {
            case "Point":
                return r = n(c),
                e ? e(t, r) : new o.Marker(r);
            case "MultiPoint":
                for (a = 0,
                l = c.length; l > a; a++)
                    r = n(c[a]),
                    h.push(e ? e(t, r) : new o.Marker(r));
                return new o.FeatureGroup(h);
            case "LineString":
                return s = this.coordsToLatLngs(c, 0, n),
                new o.Polyline(s,i);
            case "Polygon":
                if (2 === c.length && !c[1].length)
                    throw new Error("Invalid GeoJSON object.");
                return s = this.coordsToLatLngs(c, 1, n),
                new o.Polygon(s,i);
            case "MultiLineString":
                return s = this.coordsToLatLngs(c, 1, n),
                new o.MultiPolyline(s,i);
            case "MultiPolygon":
                return s = this.coordsToLatLngs(c, 2, n),
                new o.MultiPolygon(s,i);
            case "GeometryCollection":
                for (a = 0,
                l = u.geometries.length; l > a; a++)
                    h.push(this.geometryToLayer({
                        geometry: u.geometries[a],
                        type: "Feature",
                        properties: t.properties
                    }, e, n, i));
                return new o.FeatureGroup(h);
            default:
                throw new Error("Invalid GeoJSON object.")
            }
        },
        coordsToLatLng: function(t) {
            return new o.LatLng(t[1],t[0],t[2])
        },
        coordsToLatLngs: function(t, e, n) {
            var i, o, r, s = [];
            for (o = 0,
            r = t.length; r > o; o++)
                i = e ? this.coordsToLatLngs(t[o], e - 1, n) : (n || this.coordsToLatLng)(t[o]),
                s.push(i);
            return s
        },
        latLngToCoords: function(t) {
            var e = [t.lng, t.lat];
            return t.alt !== n && e.push(t.alt),
            e
        },
        latLngsToCoords: function(t) {
            for (var e = [], n = 0, i = t.length; i > n; n++)
                e.push(o.GeoJSON.latLngToCoords(t[n]));
            return e
        },
        getFeature: function(t, e) {
            return t.feature ? o.extend({}, t.feature, {
                geometry: e
            }) : o.GeoJSON.asFeature(e)
        },
        asFeature: function(t) {
            return "Feature" === t.type ? t : {
                type: "Feature",
                properties: {},
                geometry: t
            }
        }
    });
    var s = {
        toGeoJSON: function() {
            return o.GeoJSON.getFeature(this, {
                type: "Point",
                coordinates: o.GeoJSON.latLngToCoords(this.getLatLng())
            })
        }
    };
    o.Marker.include(s),
    o.Circle.include(s),
    o.CircleMarker.include(s),
    o.Polyline.include({
        toGeoJSON: function() {
            return o.GeoJSON.getFeature(this, {
                type: "LineString",
                coordinates: o.GeoJSON.latLngsToCoords(this.getLatLngs())
            })
        }
    }),
    o.Polygon.include({
        toGeoJSON: function() {
            var t, e, n, i = [o.GeoJSON.latLngsToCoords(this.getLatLngs())];
            if (i[0].push(i[0][0]),
            this._holes)
                for (t = 0,
                e = this._holes.length; e > t; t++)
                    n = o.GeoJSON.latLngsToCoords(this._holes[t]),
                    n.push(n[0]),
                    i.push(n);
            return o.GeoJSON.getFeature(this, {
                type: "Polygon",
                coordinates: i
            })
        }
    }),
    function() {
        function t(t) {
            return function() {
                var e = [];
                return this.eachLayer(function(t) {
                    e.push(t.toGeoJSON().geometry.coordinates)
                }
                ),
                o.GeoJSON.getFeature(this, {
                    type: t,
                    coordinates: e
                })
            }
        }
        o.MultiPolyline.include({
            toGeoJSON: t("MultiLineString")
        }),
        o.MultiPolygon.include({
            toGeoJSON: t("MultiPolygon")
        }),
        o.LayerGroup.include({
            toGeoJSON: function() {
                var e, n = this.feature && this.feature.geometry, i = [];
                if (n && "MultiPoint" === n.type)
                    return t("MultiPoint").call(this);
                var r = n && "GeometryCollection" === n.type;
                return this.eachLayer(function(t) {
                    t.toGeoJSON && (e = t.toGeoJSON(),
                    i.push(r ? e.geometry : o.GeoJSON.asFeature(e)))
                }
                ),
                r ? o.GeoJSON.getFeature(this, {
                    geometries: i,
                    type: "GeometryCollection"
                }) : {
                    type: "FeatureCollection",
                    features: i
                }
            }
        })
    }
    (),
    o.geoJson = function(t, e) {
        return new o.GeoJSON(t,e)
    }
    ,
    o.DomEvent = {
        addListener: function(t, e, n, i) {
            var r, s, a, l = o.stamp(n), u = "_leaflet_" + e + l;
            return t[u] ? this : (r = function(e) {
                return n.call(i || t, e || o.DomEvent._getEvent())
            }
            ,
            o.Browser.pointer && 0 === e.indexOf("touch") ? this.addPointerListener(t, e, r, l) : (o.Browser.touch && "dblclick" === e && this.addDoubleTapListener && this.addDoubleTapListener(t, r, l),
            "addEventListener" in t ? "mousewheel" === e ? (t.addEventListener("DOMMouseScroll", r, !1),
            t.addEventListener(e, r, !1)) : "mouseenter" === e || "mouseleave" === e ? (s = r,
            a = "mouseenter" === e ? "mouseover" : "mouseout",
            r = function(e) {
                return o.DomEvent._checkMouse(t, e) ? s(e) : void 0
            }
            ,
            t.addEventListener(a, r, !1)) : "click" === e && o.Browser.android ? (s = r,
            r = function(t) {
                return o.DomEvent._filterClick(t, s)
            }
            ,
            t.addEventListener(e, r, !1)) : t.addEventListener(e, r, !1) : "attachEvent" in t && t.attachEvent("on" + e, r),
            t[u] = r,
            this))
        },
        removeListener: function(t, e, n) {
            var i = o.stamp(n)
              , r = "_leaflet_" + e + i
              , s = t[r];
            return s ? (o.Browser.pointer && 0 === e.indexOf("touch") ? this.removePointerListener(t, e, i) : o.Browser.touch && "dblclick" === e && this.removeDoubleTapListener ? this.removeDoubleTapListener(t, i) : "removeEventListener" in t ? "mousewheel" === e ? (t.removeEventListener("DOMMouseScroll", s, !1),
            t.removeEventListener(e, s, !1)) : "mouseenter" === e || "mouseleave" === e ? t.removeEventListener("mouseenter" === e ? "mouseover" : "mouseout", s, !1) : t.removeEventListener(e, s, !1) : "detachEvent" in t && t.detachEvent("on" + e, s),
            t[r] = null ,
            this) : this
        },
        stopPropagation: function(t) {
            return t.stopPropagation ? t.stopPropagation() : t.cancelBubble = !0,
            o.DomEvent._skipped(t),
            this
        },
        disableScrollPropagation: function(t) {
            var e = o.DomEvent.stopPropagation;
            return o.DomEvent.on(t, "mousewheel", e).on(t, "MozMousePixelScroll", e)
        },
        disableClickPropagation: function(t) {
            for (var e = o.DomEvent.stopPropagation, n = o.Draggable.START.length - 1; n >= 0; n--)
                o.DomEvent.on(t, o.Draggable.START[n], e);
            return o.DomEvent.on(t, "click", o.DomEvent._fakeStop).on(t, "dblclick", e)
        },
        preventDefault: function(t) {
            return t.preventDefault ? t.preventDefault() : t.returnValue = !1,
            this
        },
        stop: function(t) {
            return o.DomEvent.preventDefault(t).stopPropagation(t)
        },
        getMousePosition: function(t, e) {
            if (!e)
                return new o.Point(t.clientX,t.clientY);
            var n = e.getBoundingClientRect();
            return new o.Point(t.clientX - n.left - e.clientLeft,t.clientY - n.top - e.clientTop)
        },
        getWheelDelta: function(t) {
            var e = 0;
            return t.wheelDelta && (e = t.wheelDelta / 120),
            t.detail && (e = -t.detail / 3),
            e
        },
        _skipEvents: {},
        _fakeStop: function(t) {
            o.DomEvent._skipEvents[t.type] = !0
        },
        _skipped: function(t) {
            var e = this._skipEvents[t.type];
            return this._skipEvents[t.type] = !1,
            e
        },
        _checkMouse: function(t, e) {
            var n = e.relatedTarget;
            if (!n)
                return !0;
            try {
                for (; n && n !== t; )
                    n = n.parentNode
            } catch (i) {
                return !1
            }
            return n !== t
        },
        _getEvent: function() {
            var e = t.event;
            if (!e)
                for (var n = arguments.callee.caller; n && (e = n.arguments[0],
                !e || t.Event !== e.constructor); )
                    n = n.caller;
            return e
        },
        _filterClick: function(t, e) {
            var n = t.timeStamp || t.originalEvent.timeStamp
              , i = o.DomEvent._lastClick && n - o.DomEvent._lastClick;
            return i && i > 100 && 500 > i || t.target._simulatedClick && !t._simulated ? void o.DomEvent.stop(t) : (o.DomEvent._lastClick = n,
            e(t))
        }
    },
    o.DomEvent.on = o.DomEvent.addListener,
    o.DomEvent.off = o.DomEvent.removeListener,
    o.Draggable = o.Class.extend({
        includes: o.Mixin.Events,
        statics: {
            START: o.Browser.touch ? ["touchstart", "mousedown"] : ["mousedown"],
            END: {
                mousedown: "mouseup",
                touchstart: "touchend",
                pointerdown: "touchend",
                MSPointerDown: "touchend"
            },
            MOVE: {
                mousedown: "mousemove",
                touchstart: "touchmove",
                pointerdown: "touchmove",
                MSPointerDown: "touchmove"
            }
        },
        initialize: function(t, e) {
            this._element = t,
            this._dragStartTarget = e || t
        },
        enable: function() {
            if (!this._enabled) {
                for (var t = o.Draggable.START.length - 1; t >= 0; t--)
                    o.DomEvent.on(this._dragStartTarget, o.Draggable.START[t], this._onDown, this);
                this._enabled = !0
            }
        },
        disable: function() {
            if (this._enabled) {
                for (var t = o.Draggable.START.length - 1; t >= 0; t--)
                    o.DomEvent.off(this._dragStartTarget, o.Draggable.START[t], this._onDown, this);
                this._enabled = !1,
                this._moved = !1
            }
        },
        _onDown: function(t) {
            if (this._moved = !1,
            !(t.shiftKey || 1 !== t.which && 1 !== t.button && !t.touches || (o.DomEvent.stopPropagation(t),
            o.Draggable._disabled || (o.DomUtil.disableImageDrag(),
            o.DomUtil.disableTextSelection(),
            this._moving)))) {
                var n = t.touches ? t.touches[0] : t;
                this._startPoint = new o.Point(n.clientX,n.clientY),
                this._startPos = this._newPos = o.DomUtil.getPosition(this._element),
                o.DomEvent.on(e, o.Draggable.MOVE[t.type], this._onMove, this).on(e, o.Draggable.END[t.type], this._onUp, this)
            }
        },
        _onMove: function(t) {
            if (t.touches && t.touches.length > 1)
                return void (this._moved = !0);
            var n = t.touches && 1 === t.touches.length ? t.touches[0] : t
              , i = new o.Point(n.clientX,n.clientY)
              , r = i.subtract(this._startPoint);
            (r.x || r.y) && (o.Browser.touch && Math.abs(r.x) + Math.abs(r.y) < 3 || (o.DomEvent.preventDefault(t),
            this._moved || (this.fire("dragstart"),
            this._moved = !0,
            this._startPos = o.DomUtil.getPosition(this._element).subtract(r),
            o.DomUtil.addClass(e.body, "leaflet-dragging"),
            this._lastTarget = t.target || t.srcElement,
            o.DomUtil.addClass(this._lastTarget, "leaflet-drag-target")),
            this._newPos = this._startPos.add(r),
            this._moving = !0,
            o.Util.cancelAnimFrame(this._animRequest),
            this._animRequest = o.Util.requestAnimFrame(this._updatePosition, this, !0, this._dragStartTarget)))
        },
        _updatePosition: function() {
            this.fire("predrag"),
            o.DomUtil.setPosition(this._element, this._newPos),
            this.fire("drag")
        },
        _onUp: function() {
            o.DomUtil.removeClass(e.body, "leaflet-dragging"),
            this._lastTarget && (o.DomUtil.removeClass(this._lastTarget, "leaflet-drag-target"),
            this._lastTarget = null );
            for (var t in o.Draggable.MOVE)
                o.DomEvent.off(e, o.Draggable.MOVE[t], this._onMove).off(e, o.Draggable.END[t], this._onUp);
            o.DomUtil.enableImageDrag(),
            o.DomUtil.enableTextSelection(),
            this._moved && this._moving && (o.Util.cancelAnimFrame(this._animRequest),
            this.fire("dragend", {
                distance: this._newPos.distanceTo(this._startPos)
            })),
            this._moving = !1
        }
    }),
    o.Handler = o.Class.extend({
        initialize: function(t) {
            this._map = t
        },
        enable: function() {
            this._enabled || (this._enabled = !0,
            this.addHooks())
        },
        disable: function() {
            this._enabled && (this._enabled = !1,
            this.removeHooks())
        },
        enabled: function() {
            return !!this._enabled
        }
    }),
    o.Map.mergeOptions({
        dragging: !0,
        inertia: !o.Browser.android23,
        inertiaDeceleration: 3400,
        inertiaMaxSpeed: 1 / 0,
        inertiaThreshold: o.Browser.touch ? 32 : 18,
        easeLinearity: .25,
        worldCopyJump: !1
    }),
    o.Map.Drag = o.Handler.extend({
        addHooks: function() {
            if (!this._draggable) {
                var t = this._map;
                this._draggable = new o.Draggable(t._mapPane,t._container),
                this._draggable.on({
                    dragstart: this._onDragStart,
                    drag: this._onDrag,
                    dragend: this._onDragEnd
                }, this),
                t.options.worldCopyJump && (this._draggable.on("predrag", this._onPreDrag, this),
                t.on("viewreset", this._onViewReset, this),
                t.whenReady(this._onViewReset, this))
            }
            this._draggable.enable()
        },
        removeHooks: function() {
            this._draggable.disable()
        },
        moved: function() {
            return this._draggable && this._draggable._moved
        },
        _onDragStart: function() {
            var t = this._map;
            t._panAnim && t._panAnim.stop(),
            t.fire("movestart").fire("dragstart"),
            t.options.inertia && (this._positions = [],
            this._times = [])
        },
        _onDrag: function() {
            if (this._map.options.inertia) {
                var t = this._lastTime = +new Date
                  , e = this._lastPos = this._draggable._newPos;
                this._positions.push(e),
                this._times.push(t),
                t - this._times[0] > 200 && (this._positions.shift(),
                this._times.shift())
            }
            this._map.fire("move").fire("drag")
        },
        _onViewReset: function() {
            var t = this._map.getSize()._divideBy(2)
              , e = this._map.latLngToLayerPoint([0, 0]);
            this._initialWorldOffset = e.subtract(t).x,
            this._worldWidth = this._map.project([0, 180]).x
        },
        _onPreDrag: function() {
            var t = this._worldWidth
              , e = Math.round(t / 2)
              , n = this._initialWorldOffset
              , i = this._draggable._newPos.x
              , o = (i - e + n) % t + e - n
              , r = (i + e + n) % t - e - n
              , s = Math.abs(o + n) < Math.abs(r + n) ? o : r;
            this._draggable._newPos.x = s
        },
        _onDragEnd: function(t) {
            var e = this._map
              , n = e.options
              , i = +new Date - this._lastTime
              , r = !n.inertia || i > n.inertiaThreshold || !this._positions[0];
            if (e.fire("dragend", t),
            r)
                e.fire("moveend");
            else {
                var s = this._lastPos.subtract(this._positions[0])
                  , a = (this._lastTime + i - this._times[0]) / 1e3
                  , l = n.easeLinearity
                  , u = s.multiplyBy(l / a)
                  , c = u.distanceTo([0, 0])
                  , h = Math.min(n.inertiaMaxSpeed, c)
                  , d = u.multiplyBy(h / c)
                  , p = h / (n.inertiaDeceleration * l)
                  , f = d.multiplyBy(-p / 2).round();
                f.x && f.y ? (f = e._limitOffset(f, e.options.maxBounds),
                o.Util.requestAnimFrame(function() {
                    e.panBy(f, {
                        duration: p,
                        easeLinearity: l,
                        noMoveStart: !0
                    })
                }
                )) : e.fire("moveend")
            }
        }
    }),
    o.Map.addInitHook("addHandler", "dragging", o.Map.Drag),
    o.Map.mergeOptions({
        doubleClickZoom: !0
    }),
    o.Map.DoubleClickZoom = o.Handler.extend({
        addHooks: function() {
            this._map.on("dblclick", this._onDoubleClick, this)
        },
        removeHooks: function() {
            this._map.off("dblclick", this._onDoubleClick, this)
        },
        _onDoubleClick: function(t) {
            var e = this._map
              , n = e.getZoom() + (t.originalEvent.shiftKey ? -1 : 1);
            "center" === e.options.doubleClickZoom ? e.setZoom(n) : e.setZoomAround(t.containerPoint, n)
        }
    }),
    o.Map.addInitHook("addHandler", "doubleClickZoom", o.Map.DoubleClickZoom),
    o.Map.mergeOptions({
        scrollWheelZoom: !0
    }),
    o.Map.ScrollWheelZoom = o.Handler.extend({
        addHooks: function() {
            o.DomEvent.on(this._map._container, "mousewheel", this._onWheelScroll, this),
            o.DomEvent.on(this._map._container, "MozMousePixelScroll", o.DomEvent.preventDefault),
            this._delta = 0
        },
        removeHooks: function() {
            o.DomEvent.off(this._map._container, "mousewheel", this._onWheelScroll),
            o.DomEvent.off(this._map._container, "MozMousePixelScroll", o.DomEvent.preventDefault)
        },
        _onWheelScroll: function(t) {
            var e = o.DomEvent.getWheelDelta(t);
            this._delta += e,
            this._lastMousePos = this._map.mouseEventToContainerPoint(t),
            this._startTime || (this._startTime = +new Date);
            var n = Math.max(40 - (+new Date - this._startTime), 0);
            clearTimeout(this._timer),
            this._timer = setTimeout(o.bind(this._performZoom, this), n),
            o.DomEvent.preventDefault(t),
            o.DomEvent.stopPropagation(t)
        },
        _performZoom: function() {
            var t = this._map
              , e = this._delta
              , n = t.getZoom();
            e = e > 0 ? Math.ceil(e) : Math.floor(e),
            e = Math.max(Math.min(e, 4), -4),
            e = t._limitZoom(n + e) - n,
            this._delta = 0,
            this._startTime = null ,
            e && ("center" === t.options.scrollWheelZoom ? t.setZoom(n + e) : t.setZoomAround(this._lastMousePos, n + e))
        }
    }),
    o.Map.addInitHook("addHandler", "scrollWheelZoom", o.Map.ScrollWheelZoom),
    o.extend(o.DomEvent, {
        _touchstart: o.Browser.msPointer ? "MSPointerDown" : o.Browser.pointer ? "pointerdown" : "touchstart",
        _touchend: o.Browser.msPointer ? "MSPointerUp" : o.Browser.pointer ? "pointerup" : "touchend",
        addDoubleTapListener: function(t, n, i) {
            function r(t) {
                var e;
                if (o.Browser.pointer ? (f.push(t.pointerId),
                e = f.length) : e = t.touches.length,
                !(e > 1)) {
                    var n = Date.now()
                      , i = n - (a || n);
                    l = t.touches ? t.touches[0] : t,
                    u = i > 0 && c >= i,
                    a = n
                }
            }
            function s(t) {
                if (o.Browser.pointer) {
                    var e = f.indexOf(t.pointerId);
                    if (-1 === e)
                        return;
                    f.splice(e, 1)
                }
                if (u) {
                    if (o.Browser.pointer) {
                        var i, r = {};
                        for (var s in l)
                            i = l[s],
                            r[s] = "function" == typeof i ? i.bind(l) : i;
                        l = r
                    }
                    l.type = "dblclick",
                    n(l),
                    a = null 
                }
            }
            var a, l, u = !1, c = 250, h = "_leaflet_", d = this._touchstart, p = this._touchend, f = [];
            t[h + d + i] = r,
            t[h + p + i] = s;
            var m = o.Browser.pointer ? e.documentElement : t;
            return t.addEventListener(d, r, !1),
            m.addEventListener(p, s, !1),
            o.Browser.pointer && m.addEventListener(o.DomEvent.POINTER_CANCEL, s, !1),
            this
        },
        removeDoubleTapListener: function(t, n) {
            var i = "_leaflet_";
            return t.removeEventListener(this._touchstart, t[i + this._touchstart + n], !1),
            (o.Browser.pointer ? e.documentElement : t).removeEventListener(this._touchend, t[i + this._touchend + n], !1),
            o.Browser.pointer && e.documentElement.removeEventListener(o.DomEvent.POINTER_CANCEL, t[i + this._touchend + n], !1),
            this
        }
    }),
    o.extend(o.DomEvent, {
        POINTER_DOWN: o.Browser.msPointer ? "MSPointerDown" : "pointerdown",
        POINTER_MOVE: o.Browser.msPointer ? "MSPointerMove" : "pointermove",
        POINTER_UP: o.Browser.msPointer ? "MSPointerUp" : "pointerup",
        POINTER_CANCEL: o.Browser.msPointer ? "MSPointerCancel" : "pointercancel",
        _pointers: [],
        _pointerDocumentListener: !1,
        addPointerListener: function(t, e, n, i) {
            switch (e) {
            case "touchstart":
                return this.addPointerListenerStart(t, e, n, i);
            case "touchend":
                return this.addPointerListenerEnd(t, e, n, i);
            case "touchmove":
                return this.addPointerListenerMove(t, e, n, i);
            default:
                throw "Unknown touch event type"
            }
        },
        addPointerListenerStart: function(t, n, i, r) {
            var s = "_leaflet_"
              , a = this._pointers
              , l = function(t) {
                o.DomEvent.preventDefault(t);
                for (var e = !1, n = 0; n < a.length; n++)
                    if (a[n].pointerId === t.pointerId) {
                        e = !0;
                        break
                    }
                e || a.push(t),
                t.touches = a.slice(),
                t.changedTouches = [t],
                i(t)
            }
            ;
            if (t[s + "touchstart" + r] = l,
            t.addEventListener(this.POINTER_DOWN, l, !1),
            !this._pointerDocumentListener) {
                var u = function(t) {
                    for (var e = 0; e < a.length; e++)
                        if (a[e].pointerId === t.pointerId) {
                            a.splice(e, 1);
                            break
                        }
                }
                ;
                e.documentElement.addEventListener(this.POINTER_UP, u, !1),
                e.documentElement.addEventListener(this.POINTER_CANCEL, u, !1),
                this._pointerDocumentListener = !0
            }
            return this
        },
        addPointerListenerMove: function(t, e, n, i) {
            function o(t) {
                if (t.pointerType !== t.MSPOINTER_TYPE_MOUSE && "mouse" !== t.pointerType || 0 !== t.buttons) {
                    for (var e = 0; e < s.length; e++)
                        if (s[e].pointerId === t.pointerId) {
                            s[e] = t;
                            break
                        }
                    t.touches = s.slice(),
                    t.changedTouches = [t],
                    n(t)
                }
            }
            var r = "_leaflet_"
              , s = this._pointers;
            return t[r + "touchmove" + i] = o,
            t.addEventListener(this.POINTER_MOVE, o, !1),
            this
        },
        addPointerListenerEnd: function(t, e, n, i) {
            var o = "_leaflet_"
              , r = this._pointers
              , s = function(t) {
                for (var e = 0; e < r.length; e++)
                    if (r[e].pointerId === t.pointerId) {
                        r.splice(e, 1);
                        break
                    }
                t.touches = r.slice(),
                t.changedTouches = [t],
                n(t)
            }
            ;
            return t[o + "touchend" + i] = s,
            t.addEventListener(this.POINTER_UP, s, !1),
            t.addEventListener(this.POINTER_CANCEL, s, !1),
            this
        },
        removePointerListener: function(t, e, n) {
            var i = "_leaflet_"
              , o = t[i + e + n];
            switch (e) {
            case "touchstart":
                t.removeEventListener(this.POINTER_DOWN, o, !1);
                break;
            case "touchmove":
                t.removeEventListener(this.POINTER_MOVE, o, !1);
                break;
            case "touchend":
                t.removeEventListener(this.POINTER_UP, o, !1),
                t.removeEventListener(this.POINTER_CANCEL, o, !1)
            }
            return this
        }
    }),
    o.Map.mergeOptions({
        touchZoom: o.Browser.touch && !o.Browser.android23,
        bounceAtZoomLimits: !0
    }),
    o.Map.TouchZoom = o.Handler.extend({
        addHooks: function() {
            o.DomEvent.on(this._map._container, "touchstart", this._onTouchStart, this)
        },
        removeHooks: function() {
            o.DomEvent.off(this._map._container, "touchstart", this._onTouchStart, this)
        },
        _onTouchStart: function(t) {
            var n = this._map;
            if (t.touches && 2 === t.touches.length && !n._animatingZoom && !this._zooming) {
                var i = n.mouseEventToLayerPoint(t.touches[0])
                  , r = n.mouseEventToLayerPoint(t.touches[1])
                  , s = n._getCenterLayerPoint();
                this._startCenter = i.add(r)._divideBy(2),
                this._startDist = i.distanceTo(r),
                this._moved = !1,
                this._zooming = !0,
                this._centerOffset = s.subtract(this._startCenter),
                n._panAnim && n._panAnim.stop(),
                o.DomEvent.on(e, "touchmove", this._onTouchMove, this).on(e, "touchend", this._onTouchEnd, this),
                o.DomEvent.preventDefault(t)
            }
        },
        _onTouchMove: function(t) {
            var e = this._map;
            if (t.touches && 2 === t.touches.length && this._zooming) {
                var n = e.mouseEventToLayerPoint(t.touches[0])
                  , i = e.mouseEventToLayerPoint(t.touches[1]);
                this._scale = n.distanceTo(i) / this._startDist,
                this._delta = n._add(i)._divideBy(2)._subtract(this._startCenter),
                1 !== this._scale && (e.options.bounceAtZoomLimits || !(e.getZoom() === e.getMinZoom() && this._scale < 1 || e.getZoom() === e.getMaxZoom() && this._scale > 1)) && (this._moved || (o.DomUtil.addClass(e._mapPane, "leaflet-touching"),
                e.fire("movestart").fire("zoomstart"),
                this._moved = !0),
                o.Util.cancelAnimFrame(this._animRequest),
                this._animRequest = o.Util.requestAnimFrame(this._updateOnMove, this, !0, this._map._container),
                o.DomEvent.preventDefault(t))
            }
        },
        _updateOnMove: function() {
            var t = this._map
              , e = this._getScaleOrigin()
              , n = t.layerPointToLatLng(e)
              , i = t.getScaleZoom(this._scale);
            t._animateZoom(n, i, this._startCenter, this._scale, this._delta, !1, !0)
        },
        _onTouchEnd: function() {
            if (!this._moved || !this._zooming)
                return void (this._zooming = !1);
            var t = this._map;
            this._zooming = !1,
            o.DomUtil.removeClass(t._mapPane, "leaflet-touching"),
            o.Util.cancelAnimFrame(this._animRequest),
            o.DomEvent.off(e, "touchmove", this._onTouchMove).off(e, "touchend", this._onTouchEnd);
            var n = this._getScaleOrigin()
              , i = t.layerPointToLatLng(n)
              , r = t.getZoom()
              , s = t.getScaleZoom(this._scale) - r
              , a = s > 0 ? Math.ceil(s) : Math.floor(s)
              , l = t._limitZoom(r + a)
              , u = t.getZoomScale(l) / this._scale;
            t._animateZoom(i, l, n, u)
        },
        _getScaleOrigin: function() {
            var t = this._centerOffset.subtract(this._delta).divideBy(this._scale);
            return this._startCenter.add(t)
        }
    }),
    o.Map.addInitHook("addHandler", "touchZoom", o.Map.TouchZoom),
    o.Map.mergeOptions({
        tap: !0,
        tapTolerance: 15
    }),
    o.Map.Tap = o.Handler.extend({
        addHooks: function() {
            o.DomEvent.on(this._map._container, "touchstart", this._onDown, this)
        },
        removeHooks: function() {
            o.DomEvent.off(this._map._container, "touchstart", this._onDown, this)
        },
        _onDown: function(t) {
            if (t.touches) {
                if (o.DomEvent.preventDefault(t),
                this._fireClick = !0,
                t.touches.length > 1)
                    return this._fireClick = !1,
                    void clearTimeout(this._holdTimeout);
                var n = t.touches[0]
                  , i = n.target;
                this._startPos = this._newPos = new o.Point(n.clientX,n.clientY),
                i.tagName && "a" === i.tagName.toLowerCase() && o.DomUtil.addClass(i, "leaflet-active"),
                this._holdTimeout = setTimeout(o.bind(function() {
                    this._isTapValid() && (this._fireClick = !1,
                    this._onUp(),
                    this._simulateEvent("contextmenu", n))
                }
                , this), 1e3),
                o.DomEvent.on(e, "touchmove", this._onMove, this).on(e, "touchend", this._onUp, this)
            }
        },
        _onUp: function(t) {
            if (clearTimeout(this._holdTimeout),
            o.DomEvent.off(e, "touchmove", this._onMove, this).off(e, "touchend", this._onUp, this),
            this._fireClick && t && t.changedTouches) {
                var n = t.changedTouches[0]
                  , i = n.target;
                i && i.tagName && "a" === i.tagName.toLowerCase() && o.DomUtil.removeClass(i, "leaflet-active"),
                this._isTapValid() && this._simulateEvent("click", n)
            }
        },
        _isTapValid: function() {
            return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance
        },
        _onMove: function(t) {
            var e = t.touches[0];
            this._newPos = new o.Point(e.clientX,e.clientY)
        },
        _simulateEvent: function(n, i) {
            var o = e.createEvent("MouseEvents");
            o._simulated = !0,
            i.target._simulatedClick = !0,
            o.initMouseEvent(n, !0, !0, t, 1, i.screenX, i.screenY, i.clientX, i.clientY, !1, !1, !1, !1, 0, null ),
            i.target.dispatchEvent(o)
        }
    }),
    o.Browser.touch && !o.Browser.pointer && o.Map.addInitHook("addHandler", "tap", o.Map.Tap),
    o.Map.mergeOptions({
        boxZoom: !0
    }),
    o.Map.BoxZoom = o.Handler.extend({
        initialize: function(t) {
            this._map = t,
            this._container = t._container,
            this._pane = t._panes.overlayPane,
            this._moved = !1
        },
        addHooks: function() {
            o.DomEvent.on(this._container, "mousedown", this._onMouseDown, this)
        },
        removeHooks: function() {
            o.DomEvent.off(this._container, "mousedown", this._onMouseDown),
            this._moved = !1
        },
        moved: function() {
            return this._moved
        },
        _onMouseDown: function(t) {
            return this._moved = !1,
            !t.shiftKey || 1 !== t.which && 1 !== t.button ? !1 : (o.DomUtil.disableTextSelection(),
            o.DomUtil.disableImageDrag(),
            this._startLayerPoint = this._map.mouseEventToLayerPoint(t),
            void o.DomEvent.on(e, "mousemove", this._onMouseMove, this).on(e, "mouseup", this._onMouseUp, this).on(e, "keydown", this._onKeyDown, this))
        },
        _onMouseMove: function(t) {
            this._moved || (this._box = o.DomUtil.create("div", "leaflet-zoom-box", this._pane),
            o.DomUtil.setPosition(this._box, this._startLayerPoint),
            this._container.style.cursor = "crosshair",
            this._map.fire("boxzoomstart"));
            var e = this._startLayerPoint
              , n = this._box
              , i = this._map.mouseEventToLayerPoint(t)
              , r = i.subtract(e)
              , s = new o.Point(Math.min(i.x, e.x),Math.min(i.y, e.y));
            o.DomUtil.setPosition(n, s),
            this._moved = !0,
            n.style.width = Math.max(0, Math.abs(r.x) - 4) + "px",
            n.style.height = Math.max(0, Math.abs(r.y) - 4) + "px"
        },
        _finish: function() {
            this._moved && (this._pane.removeChild(this._box),
            this._container.style.cursor = ""),
            o.DomUtil.enableTextSelection(),
            o.DomUtil.enableImageDrag(),
            o.DomEvent.off(e, "mousemove", this._onMouseMove).off(e, "mouseup", this._onMouseUp).off(e, "keydown", this._onKeyDown)
        },
        _onMouseUp: function(t) {
            this._finish();
            var e = this._map
              , n = e.mouseEventToLayerPoint(t);
            if (!this._startLayerPoint.equals(n)) {
                var i = new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(n));
                e.fitBounds(i),
                e.fire("boxzoomend", {
                    boxZoomBounds: i
                })
            }
        },
        _onKeyDown: function(t) {
            27 === t.keyCode && this._finish()
        }
    }),
    o.Map.addInitHook("addHandler", "boxZoom", o.Map.BoxZoom),
    o.Map.mergeOptions({
        keyboard: !0,
        keyboardPanOffset: 80,
        keyboardZoomOffset: 1
    }),
    o.Map.Keyboard = o.Handler.extend({
        keyCodes: {
            left: [37],
            right: [39],
            down: [40],
            up: [38],
            zoomIn: [187, 107, 61, 171],
            zoomOut: [189, 109, 173]
        },
        initialize: function(t) {
            this._map = t,
            this._setPanOffset(t.options.keyboardPanOffset),
            this._setZoomOffset(t.options.keyboardZoomOffset)
        },
        addHooks: function() {
            var t = this._map._container;
            -1 === t.tabIndex && (t.tabIndex = "0"),
            o.DomEvent.on(t, "focus", this._onFocus, this).on(t, "blur", this._onBlur, this).on(t, "mousedown", this._onMouseDown, this),
            this._map.on("focus", this._addHooks, this).on("blur", this._removeHooks, this)
        },
        removeHooks: function() {
            this._removeHooks();
            var t = this._map._container;
            o.DomEvent.off(t, "focus", this._onFocus, this).off(t, "blur", this._onBlur, this).off(t, "mousedown", this._onMouseDown, this),
            this._map.off("focus", this._addHooks, this).off("blur", this._removeHooks, this)
        },
        _onMouseDown: function() {
            if (!this._focused) {
                var n = e.body
                  , i = e.documentElement
                  , o = n.scrollTop || i.scrollTop
                  , r = n.scrollLeft || i.scrollLeft;
                this._map._container.focus(),
                t.scrollTo(r, o)
            }
        },
        _onFocus: function() {
            this._focused = !0,
            this._map.fire("focus")
        },
        _onBlur: function() {
            this._focused = !1,
            this._map.fire("blur")
        },
        _setPanOffset: function(t) {
            var e, n, i = this._panKeys = {}, o = this.keyCodes;
            for (e = 0,
            n = o.left.length; n > e; e++)
                i[o.left[e]] = [-1 * t, 0];
            for (e = 0,
            n = o.right.length; n > e; e++)
                i[o.right[e]] = [t, 0];
            for (e = 0,
            n = o.down.length; n > e; e++)
                i[o.down[e]] = [0, t];
            for (e = 0,
            n = o.up.length; n > e; e++)
                i[o.up[e]] = [0, -1 * t]
        },
        _setZoomOffset: function(t) {
            var e, n, i = this._zoomKeys = {}, o = this.keyCodes;
            for (e = 0,
            n = o.zoomIn.length; n > e; e++)
                i[o.zoomIn[e]] = t;
            for (e = 0,
            n = o.zoomOut.length; n > e; e++)
                i[o.zoomOut[e]] = -t
        },
        _addHooks: function() {
            o.DomEvent.on(e, "keydown", this._onKeyDown, this)
        },
        _removeHooks: function() {
            o.DomEvent.off(e, "keydown", this._onKeyDown, this)
        },
        _onKeyDown: function(t) {
            var e = t.keyCode
              , n = this._map;
            if (e in this._panKeys) {
                if (n._panAnim && n._panAnim._inProgress)
                    return;
                n.panBy(this._panKeys[e]),
                n.options.maxBounds && n.panInsideBounds(n.options.maxBounds)
            } else {
                if (!(e in this._zoomKeys))
                    return;
                n.setZoom(n.getZoom() + this._zoomKeys[e])
            }
            o.DomEvent.stop(t)
        }
    }),
    o.Map.addInitHook("addHandler", "keyboard", o.Map.Keyboard),
    o.Handler.MarkerDrag = o.Handler.extend({
        initialize: function(t) {
            this._marker = t
        },
        addHooks: function() {
            var t = this._marker._icon;
            this._draggable || (this._draggable = new o.Draggable(t,t)),
            this._draggable.on("dragstart", this._onDragStart, this).on("drag", this._onDrag, this).on("dragend", this._onDragEnd, this),
            this._draggable.enable(),
            o.DomUtil.addClass(this._marker._icon, "leaflet-marker-draggable")
        },
        removeHooks: function() {
            this._draggable.off("dragstart", this._onDragStart, this).off("drag", this._onDrag, this).off("dragend", this._onDragEnd, this),
            this._draggable.disable(),
            o.DomUtil.removeClass(this._marker._icon, "leaflet-marker-draggable")
        },
        moved: function() {
            return this._draggable && this._draggable._moved
        },
        _onDragStart: function() {
            this._marker.closePopup().fire("movestart").fire("dragstart")
        },
        _onDrag: function() {
            var t = this._marker
              , e = t._shadow
              , n = o.DomUtil.getPosition(t._icon)
              , i = t._map.layerPointToLatLng(n);
            e && o.DomUtil.setPosition(e, n),
            t._latlng = i,
            t.fire("move", {
                latlng: i
            }).fire("drag")
        },
        _onDragEnd: function(t) {
            this._marker.fire("moveend").fire("dragend", t)
        }
    }),
    o.Control = o.Class.extend({
        options: {
            position: "topright"
        },
        initialize: function(t) {
            o.setOptions(this, t)
        },
        getPosition: function() {
            return this.options.position
        },
        setPosition: function(t) {
            var e = this._map;
            return e && e.removeControl(this),
            this.options.position = t,
            e && e.addControl(this),
            this
        },
        getContainer: function() {
            return this._container
        },
        addTo: function(t) {
            this._map = t;
            var e = this._container = this.onAdd(t)
              , n = this.getPosition()
              , i = t._controlCorners[n];
            return o.DomUtil.addClass(e, "leaflet-control"),
            -1 !== n.indexOf("bottom") ? i.insertBefore(e, i.firstChild) : i.appendChild(e),
            this
        },
        removeFrom: function(t) {
            var e = this.getPosition()
              , n = t._controlCorners[e];
            return n.removeChild(this._container),
            this._map = null ,
            this.onRemove && this.onRemove(t),
            this
        },
        _refocusOnMap: function() {
            this._map && this._map.getContainer().focus()
        }
    }),
    o.control = function(t) {
        return new o.Control(t)
    }
    ,
    o.Map.include({
        addControl: function(t) {
            return t.addTo(this),
            this
        },
        removeControl: function(t) {
            return t.removeFrom(this),
            this
        },
        _initControlPos: function() {
            function t(t, r) {
                var s = n + t + " " + n + r;
                e[t + r] = o.DomUtil.create("div", s, i)
            }
            var e = this._controlCorners = {}
              , n = "leaflet-"
              , i = this._controlContainer = o.DomUtil.create("div", n + "control-container", this._container);
            t("top", "left"),
            t("top", "right"),
            t("bottom", "left"),
            t("bottom", "right")
        },
        _clearControlPos: function() {
            this._container.removeChild(this._controlContainer)
        }
    }),
    o.Control.Zoom = o.Control.extend({
        options: {
            position: "topleft",
            zoomInText: "+",
            zoomInTitle: "Zoom in",
            zoomOutText: "-",
            zoomOutTitle: "Zoom out"
        },
        onAdd: function(t) {
            var e = "leaflet-control-zoom"
              , n = o.DomUtil.create("div", e + " leaflet-bar");
            return this._map = t,
            this._zoomInButton = this._createButton(this.options.zoomInText, this.options.zoomInTitle, e + "-in", n, this._zoomIn, this),
            this._zoomOutButton = this._createButton(this.options.zoomOutText, this.options.zoomOutTitle, e + "-out", n, this._zoomOut, this),
            this._updateDisabled(),
            t.on("zoomend zoomlevelschange", this._updateDisabled, this),
            n
        },
        onRemove: function(t) {
            t.off("zoomend zoomlevelschange", this._updateDisabled, this)
        },
        _zoomIn: function(t) {
            this._map.zoomIn(t.shiftKey ? 3 : 1)
        },
        _zoomOut: function(t) {
            this._map.zoomOut(t.shiftKey ? 3 : 1)
        },
        _createButton: function(t, e, n, i, r, s) {
            var a = o.DomUtil.create("a", n, i);
            a.innerHTML = t,
            a.href = "#",
            a.title = e;
            var l = o.DomEvent.stopPropagation;
            return o.DomEvent.on(a, "click", l).on(a, "mousedown", l).on(a, "dblclick", l).on(a, "click", o.DomEvent.preventDefault).on(a, "click", r, s).on(a, "click", this._refocusOnMap, s),
            a
        },
        _updateDisabled: function() {
            var t = this._map
              , e = "leaflet-disabled";
            o.DomUtil.removeClass(this._zoomInButton, e),
            o.DomUtil.removeClass(this._zoomOutButton, e),
            t._zoom === t.getMinZoom() && o.DomUtil.addClass(this._zoomOutButton, e),
            t._zoom === t.getMaxZoom() && o.DomUtil.addClass(this._zoomInButton, e)
        }
    }),
    o.Map.mergeOptions({
        zoomControl: !0
    }),
    o.Map.addInitHook(function() {
        this.options.zoomControl && (this.zoomControl = new o.Control.Zoom,
        this.addControl(this.zoomControl))
    }
    ),
    o.control.zoom = function(t) {
        return new o.Control.Zoom(t)
    }
    ,
    o.Control.Attribution = o.Control.extend({
        options: {
            position: "bottomright",
            prefix: '<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'
        },
        initialize: function(t) {
            o.setOptions(this, t),
            this._attributions = {}
        },
        onAdd: function(t) {
            this._container = o.DomUtil.create("div", "leaflet-control-attribution"),
            o.DomEvent.disableClickPropagation(this._container);
            for (var e in t._layers)
                t._layers[e].getAttribution && this.addAttribution(t._layers[e].getAttribution());
            return t.on("layeradd", this._onLayerAdd, this).on("layerremove", this._onLayerRemove, this),
            this._update(),
            this._container
        },
        onRemove: function(t) {
            t.off("layeradd", this._onLayerAdd).off("layerremove", this._onLayerRemove)
        },
        setPrefix: function(t) {
            return this.options.prefix = t,
            this._update(),
            this
        },
        addAttribution: function(t) {
            return t ? (this._attributions[t] || (this._attributions[t] = 0),
            this._attributions[t]++,
            this._update(),
            this) : void 0
        },
        removeAttribution: function(t) {
            return t ? (this._attributions[t] && (this._attributions[t]--,
            this._update()),
            this) : void 0
        },
        _update: function() {
            if (this._map) {
                var t = [];
                for (var e in this._attributions)
                    this._attributions[e] && t.push(e);
                var n = [];
                this.options.prefix && n.push(this.options.prefix),
                t.length && n.push(t.join(", ")),
                this._container.innerHTML = n.join(" | ")
            }
        },
        _onLayerAdd: function(t) {
            t.layer.getAttribution && this.addAttribution(t.layer.getAttribution())
        },
        _onLayerRemove: function(t) {
            t.layer.getAttribution && this.removeAttribution(t.layer.getAttribution())
        }
    }),
    o.Map.mergeOptions({
        attributionControl: !0
    }),
    o.Map.addInitHook(function() {
        this.options.attributionControl && (this.attributionControl = (new o.Control.Attribution).addTo(this))
    }
    ),
    o.control.attribution = function(t) {
        return new o.Control.Attribution(t)
    }
    ,
    o.Control.Scale = o.Control.extend({
        options: {
            position: "bottomleft",
            maxWidth: 100,
            metric: !0,
            imperial: !0,
            updateWhenIdle: !1
        },
        onAdd: function(t) {
            this._map = t;
            var e = "leaflet-control-scale"
              , n = o.DomUtil.create("div", e)
              , i = this.options;
            return this._addScales(i, e, n),
            t.on(i.updateWhenIdle ? "moveend" : "move", this._update, this),
            t.whenReady(this._update, this),
            n
        },
        onRemove: function(t) {
            t.off(this.options.updateWhenIdle ? "moveend" : "move", this._update, this)
        },
        _addScales: function(t, e, n) {
            t.metric && (this._mScale = o.DomUtil.create("div", e + "-line", n)),
            t.imperial && (this._iScale = o.DomUtil.create("div", e + "-line", n))
        },
        _update: function() {
            var t = this._map.getBounds()
              , e = t.getCenter().lat
              , n = 6378137 * Math.PI * Math.cos(e * Math.PI / 180)
              , i = n * (t.getNorthEast().lng - t.getSouthWest().lng) / 180
              , o = this._map.getSize()
              , r = this.options
              , s = 0;
            o.x > 0 && (s = i * (r.maxWidth / o.x)),
            this._updateScales(r, s)
        },
        _updateScales: function(t, e) {
            t.metric && e && this._updateMetric(e),
            t.imperial && e && this._updateImperial(e)
        },
        _updateMetric: function(t) {
            var e = this._getRoundNum(t);
            this._mScale.style.width = this._getScaleWidth(e / t) + "px",
            this._mScale.innerHTML = 1e3 > e ? e + " m" : e / 1e3 + " km"
        },
        _updateImperial: function(t) {
            var e, n, i, o = 3.2808399 * t, r = this._iScale;
            o > 5280 ? (e = o / 5280,
            n = this._getRoundNum(e),
            r.style.width = this._getScaleWidth(n / e) + "px",
            r.innerHTML = n + " mi") : (i = this._getRoundNum(o),
            r.style.width = this._getScaleWidth(i / o) + "px",
            r.innerHTML = i + " ft")
        },
        _getScaleWidth: function(t) {
            return Math.round(this.options.maxWidth * t) - 10
        },
        _getRoundNum: function(t) {
            var e = Math.pow(10, (Math.floor(t) + "").length - 1)
              , n = t / e;
            return n = n >= 10 ? 10 : n >= 5 ? 5 : n >= 3 ? 3 : n >= 2 ? 2 : 1,
            e * n
        }
    }),
    o.control.scale = function(t) {
        return new o.Control.Scale(t)
    }
    ,
    o.Control.Layers = o.Control.extend({
        options: {
            collapsed: !0,
            position: "topright",
            autoZIndex: !0
        },
        initialize: function(t, e, n) {
            o.setOptions(this, n),
            this._layers = {},
            this._lastZIndex = 0,
            this._handlingClick = !1;
            for (var i in t)
                this._addLayer(t[i], i);
            for (i in e)
                this._addLayer(e[i], i, !0)
        },
        onAdd: function(t) {
            return this._initLayout(),
            this._update(),
            t.on("layeradd", this._onLayerChange, this).on("layerremove", this._onLayerChange, this),
            this._container
        },
        onRemove: function(t) {
            t.off("layeradd", this._onLayerChange, this).off("layerremove", this._onLayerChange, this)
        },
        addBaseLayer: function(t, e) {
            return this._addLayer(t, e),
            this._update(),
            this
        },
        addOverlay: function(t, e) {
            return this._addLayer(t, e, !0),
            this._update(),
            this
        },
        removeLayer: function(t) {
            var e = o.stamp(t);
            return delete this._layers[e],
            this._update(),
            this
        },
        _initLayout: function() {
            var t = "leaflet-control-layers"
              , e = this._container = o.DomUtil.create("div", t);
            e.setAttribute("aria-haspopup", !0),
            o.Browser.touch ? o.DomEvent.on(e, "click", o.DomEvent.stopPropagation) : o.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);
            var n = this._form = o.DomUtil.create("form", t + "-list");
            if (this.options.collapsed) {
                o.Browser.android || o.DomEvent.on(e, "mouseover", this._expand, this).on(e, "mouseout", this._collapse, this);
                var i = this._layersLink = o.DomUtil.create("a", t + "-toggle", e);
                i.href = "#",
                i.title = "Layers",
                o.Browser.touch ? o.DomEvent.on(i, "click", o.DomEvent.stop).on(i, "click", this._expand, this) : o.DomEvent.on(i, "focus", this._expand, this),
                o.DomEvent.on(n, "click", function() {
                    setTimeout(o.bind(this._onInputClick, this), 0)
                }
                , this),
                this._map.on("click", this._collapse, this)
            } else
                this._expand();
            this._baseLayersList = o.DomUtil.create("div", t + "-base", n),
            this._separator = o.DomUtil.create("div", t + "-separator", n),
            this._overlaysList = o.DomUtil.create("div", t + "-overlays", n),
            e.appendChild(n)
        },
        _addLayer: function(t, e, n) {
            var i = o.stamp(t);
            this._layers[i] = {
                layer: t,
                name: e,
                overlay: n
            },
            this.options.autoZIndex && t.setZIndex && (this._lastZIndex++,
            t.setZIndex(this._lastZIndex))
        },
        _update: function() {
            if (this._container) {
                this._baseLayersList.innerHTML = "",
                this._overlaysList.innerHTML = "";
                var t, e, n = !1, i = !1;
                for (t in this._layers)
                    e = this._layers[t],
                    this._addItem(e),
                    i = i || e.overlay,
                    n = n || !e.overlay;
                this._separator.style.display = i && n ? "" : "none"
            }
        },
        _onLayerChange: function(t) {
            var e = this._layers[o.stamp(t.layer)];
            if (e) {
                this._handlingClick || this._update();
                var n = e.overlay ? "layeradd" === t.type ? "overlayadd" : "overlayremove" : "layeradd" === t.type ? "baselayerchange" : null ;
                n && this._map.fire(n, e)
            }
        },
        _createRadioElement: function(t, n) {
            var i = '<input type="radio" class="leaflet-control-layers-selector" name="' + t + '"';
            n && (i += ' checked="checked"'),
            i += "/>";
            var o = e.createElement("div");
            return o.innerHTML = i,
            o.firstChild
        },
        _addItem: function(t) {
            var n, i = e.createElement("label"), r = this._map.hasLayer(t.layer);
            t.overlay ? (n = e.createElement("input"),
            n.type = "checkbox",
            n.className = "leaflet-control-layers-selector",
            n.defaultChecked = r) : n = this._createRadioElement("leaflet-base-layers", r),
            n.layerId = o.stamp(t.layer),
            o.DomEvent.on(n, "click", this._onInputClick, this);
            var s = e.createElement("span");
            s.innerHTML = " " + t.name,
            i.appendChild(n),
            i.appendChild(s);
            var a = t.overlay ? this._overlaysList : this._baseLayersList;
            return a.appendChild(i),
            i
        },
        _onInputClick: function() {
            var t, e, n, i = this._form.getElementsByTagName("input"), o = i.length;
            for (this._handlingClick = !0,
            t = 0; o > t; t++)
                e = i[t],
                n = this._layers[e.layerId],
                e.checked && !this._map.hasLayer(n.layer) ? this._map.addLayer(n.layer) : !e.checked && this._map.hasLayer(n.layer) && this._map.removeLayer(n.layer);
            this._handlingClick = !1,
            this._refocusOnMap()
        },
        _expand: function() {
            o.DomUtil.addClass(this._container, "leaflet-control-layers-expanded")
        },
        _collapse: function() {
            this._container.className = this._container.className.replace(" leaflet-control-layers-expanded", "")
        }
    }),
    o.control.layers = function(t, e, n) {
        return new o.Control.Layers(t,e,n)
    }
    ,
    o.PosAnimation = o.Class.extend({
        includes: o.Mixin.Events,
        run: function(t, e, n, i) {
            this.stop(),
            this._el = t,
            this._inProgress = !0,
            this._newPos = e,
            this.fire("start"),
            t.style[o.DomUtil.TRANSITION] = "all " + (n || .25) + "s cubic-bezier(0,0," + (i || .5) + ",1)",
            o.DomEvent.on(t, o.DomUtil.TRANSITION_END, this._onTransitionEnd, this),
            o.DomUtil.setPosition(t, e),
            o.Util.falseFn(t.offsetWidth),
            this._stepTimer = setInterval(o.bind(this._onStep, this), 50)
        },
        stop: function() {
            this._inProgress && (o.DomUtil.setPosition(this._el, this._getPos()),
            this._onTransitionEnd(),
            o.Util.falseFn(this._el.offsetWidth))
        },
        _onStep: function() {
            var t = this._getPos();
            return t ? (this._el._leaflet_pos = t,
            void this.fire("step")) : void this._onTransitionEnd()
        },
        _transformRe: /([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,
        _getPos: function() {
            var e, n, i, r = this._el, s = t.getComputedStyle(r);
            if (o.Browser.any3d) {
                if (i = s[o.DomUtil.TRANSFORM].match(this._transformRe),
                !i)
                    return;
                e = parseFloat(i[1]),
                n = parseFloat(i[2])
            } else
                e = parseFloat(s.left),
                n = parseFloat(s.top);
            return new o.Point(e,n,!0)
        },
        _onTransitionEnd: function() {
            o.DomEvent.off(this._el, o.DomUtil.TRANSITION_END, this._onTransitionEnd, this),
            this._inProgress && (this._inProgress = !1,
            this._el.style[o.DomUtil.TRANSITION] = "",
            this._el._leaflet_pos = this._newPos,
            clearInterval(this._stepTimer),
            this.fire("step").fire("end"))
        }
    }),
    o.Map.include({
        setView: function(t, e, i) {
            if (e = e === n ? this._zoom : this._limitZoom(e),
            t = this._limitCenter(o.latLng(t), e, this.options.maxBounds),
            i = i || {},
            this._panAnim && this._panAnim.stop(),
            this._loaded && !i.reset && i !== !0) {
                i.animate !== n && (i.zoom = o.extend({
                    animate: i.animate
                }, i.zoom),
                i.pan = o.extend({
                    animate: i.animate
                }, i.pan));
                var r = this._zoom !== e ? this._tryAnimatedZoom && this._tryAnimatedZoom(t, e, i.zoom) : this._tryAnimatedPan(t, i.pan);
                if (r)
                    return clearTimeout(this._sizeTimer),
                    this
            }
            return this._resetView(t, e),
            this
        },
        panBy: function(t, e) {
            if (t = o.point(t).round(),
            e = e || {},
            !t.x && !t.y)
                return this;
            if (this._panAnim || (this._panAnim = new o.PosAnimation,
            this._panAnim.on({
                step: this._onPanTransitionStep,
                end: this._onPanTransitionEnd
            }, this)),
            e.noMoveStart || this.fire("movestart"),
            e.animate !== !1) {
                o.DomUtil.addClass(this._mapPane, "leaflet-pan-anim");
                var n = this._getMapPanePos().subtract(t);
                this._panAnim.run(this._mapPane, n, e.duration || .25, e.easeLinearity)
            } else
                this._rawPanBy(t),
                this.fire("move").fire("moveend");
            return this
        },
        _onPanTransitionStep: function() {
            this.fire("move")
        },
        _onPanTransitionEnd: function() {
            o.DomUtil.removeClass(this._mapPane, "leaflet-pan-anim"),
            this.fire("moveend")
        },
        _tryAnimatedPan: function(t, e) {
            var n = this._getCenterOffset(t)._floor();
            return (e && e.animate) === !0 || this.getSize().contains(n) ? (this.panBy(n, e),
            !0) : !1
        }
    }),
    o.PosAnimation = o.DomUtil.TRANSITION ? o.PosAnimation : o.PosAnimation.extend({
        run: function(t, e, n, i) {
            this.stop(),
            this._el = t,
            this._inProgress = !0,
            this._duration = n || .25,
            this._easeOutPower = 1 / Math.max(i || .5, .2),
            this._startPos = o.DomUtil.getPosition(t),
            this._offset = e.subtract(this._startPos),
            this._startTime = +new Date,
            this.fire("start"),
            this._animate()
        },
        stop: function() {
            this._inProgress && (this._step(),
            this._complete())
        },
        _animate: function() {
            this._animId = o.Util.requestAnimFrame(this._animate, this),
            this._step()
        },
        _step: function() {
            var t = +new Date - this._startTime
              , e = 1e3 * this._duration;
            e > t ? this._runFrame(this._easeOut(t / e)) : (this._runFrame(1),
            this._complete())
        },
        _runFrame: function(t) {
            var e = this._startPos.add(this._offset.multiplyBy(t));
            o.DomUtil.setPosition(this._el, e),
            this.fire("step")
        },
        _complete: function() {
            o.Util.cancelAnimFrame(this._animId),
            this._inProgress = !1,
            this.fire("end")
        },
        _easeOut: function(t) {
            return 1 - Math.pow(1 - t, this._easeOutPower)
        }
    }),
    o.Map.mergeOptions({
        zoomAnimation: !0,
        zoomAnimationThreshold: 4
    }),
    o.DomUtil.TRANSITION && o.Map.addInitHook(function() {
        this._zoomAnimated = this.options.zoomAnimation && o.DomUtil.TRANSITION && o.Browser.any3d && !o.Browser.android23 && !o.Browser.mobileOpera,
        this._zoomAnimated && o.DomEvent.on(this._mapPane, o.DomUtil.TRANSITION_END, this._catchTransitionEnd, this)
    }
    ),
    o.Map.include(o.DomUtil.TRANSITION ? {
        _catchTransitionEnd: function(t) {
            this._animatingZoom && t.propertyName.indexOf("transform") >= 0 && this._onZoomTransitionEnd()
        },
        _nothingToAnimate: function() {
            return !this._container.getElementsByClassName("leaflet-zoom-animated").length
        },
        _tryAnimatedZoom: function(t, e, n) {
            if (this._animatingZoom)
                return !0;
            if (n = n || {},
            !this._zoomAnimated || n.animate === !1 || this._nothingToAnimate() || Math.abs(e - this._zoom) > this.options.zoomAnimationThreshold)
                return !1;
            var i = this.getZoomScale(e)
              , o = this._getCenterOffset(t)._divideBy(1 - 1 / i)
              , r = this._getCenterLayerPoint()._add(o);
            return n.animate === !0 || this.getSize().contains(o) ? (this.fire("movestart").fire("zoomstart"),
            this._animateZoom(t, e, r, i, null , !0),
            !0) : !1
        },
        _animateZoom: function(t, e, n, i, r, s, a) {
            a || (this._animatingZoom = !0),
            o.DomUtil.addClass(this._mapPane, "leaflet-zoom-anim"),
            this._animateToCenter = t,
            this._animateToZoom = e,
            o.Draggable && (o.Draggable._disabled = !0),
            o.Util.requestAnimFrame(function() {
                this.fire("zoomanim", {
                    center: t,
                    zoom: e,
                    origin: n,
                    scale: i,
                    delta: r,
                    backwards: s
                })
            }
            , this)
        },
        _onZoomTransitionEnd: function() {
            this._animatingZoom = !1,
            o.DomUtil.removeClass(this._mapPane, "leaflet-zoom-anim"),
            this._resetView(this._animateToCenter, this._animateToZoom, !0, !0),
            o.Draggable && (o.Draggable._disabled = !1)
        }
    } : {}),
    o.TileLayer.include({
        _animateZoom: function(t) {
            this._animating || (this._animating = !0,
            this._prepareBgBuffer());
            var e = this._bgBuffer
              , n = o.DomUtil.TRANSFORM
              , i = t.delta ? o.DomUtil.getTranslateString(t.delta) : e.style[n]
              , r = o.DomUtil.getScaleString(t.scale, t.origin);
            e.style[n] = t.backwards ? r + " " + i : i + " " + r
        },
        _endZoomAnim: function() {
            var t = this._tileContainer
              , e = this._bgBuffer;
            t.style.visibility = "",
            t.parentNode.appendChild(t),
            o.Util.falseFn(e.offsetWidth),
            this._animating = !1
        },
        _clearBgBuffer: function() {
            var t = this._map;
            !t || t._animatingZoom || t.touchZoom._zooming || (this._bgBuffer.innerHTML = "",
            this._bgBuffer.style[o.DomUtil.TRANSFORM] = "")
        },
        _prepareBgBuffer: function() {
            var t = this._tileContainer
              , e = this._bgBuffer
              , n = this._getLoadedTilesPercentage(e)
              , i = this._getLoadedTilesPercentage(t);
            return e && n > .5 && .5 > i ? (t.style.visibility = "hidden",
            void this._stopLoadingImages(t)) : (e.style.visibility = "hidden",
            e.style[o.DomUtil.TRANSFORM] = "",
            this._tileContainer = e,
            e = this._bgBuffer = t,
            this._stopLoadingImages(e),
            void clearTimeout(this._clearBgBufferTimer))
        },
        _getLoadedTilesPercentage: function(t) {
            var e, n, i = t.getElementsByTagName("img"), o = 0;
            for (e = 0,
            n = i.length; n > e; e++)
                i[e].complete && o++;
            return o / n
        },
        _stopLoadingImages: function(t) {
            var e, n, i, r = Array.prototype.slice.call(t.getElementsByTagName("img"));
            for (e = 0,
            n = r.length; n > e; e++)
                i = r[e],
                i.complete || (i.onload = o.Util.falseFn,
                i.onerror = o.Util.falseFn,
                i.src = o.Util.emptyImageUrl,
                i.parentNode.removeChild(i))
        }
    }),
    o.Map.include({
        _defaultLocateOptions: {
            watch: !1,
            setView: !1,
            maxZoom: 1 / 0,
            timeout: 1e4,
            maximumAge: 0,
            enableHighAccuracy: !1
        },
        locate: function(t) {
            if (t = this._locateOptions = o.extend(this._defaultLocateOptions, t),
            !navigator.geolocation)
                return this._handleGeolocationError({
                    code: 0,
                    message: "Geolocation not supported."
                }),
                this;
            var e = o.bind(this._handleGeolocationResponse, this)
              , n = o.bind(this._handleGeolocationError, this);
            return t.watch ? this._locationWatchId = navigator.geolocation.watchPosition(e, n, t) : navigator.geolocation.getCurrentPosition(e, n, t),
            this
        },
        stopLocate: function() {
            return navigator.geolocation && navigator.geolocation.clearWatch(this._locationWatchId),
            this._locateOptions && (this._locateOptions.setView = !1),
            this
        },
        _handleGeolocationError: function(t) {
            var e = t.code
              , n = t.message || (1 === e ? "permission denied" : 2 === e ? "position unavailable" : "timeout");
            this._locateOptions.setView && !this._loaded && this.fitWorld(),
            this.fire("locationerror", {
                code: e,
                message: "Geolocation error: " + n + "."
            })
        },
        _handleGeolocationResponse: function(t) {
            var e = t.coords.latitude
              , n = t.coords.longitude
              , i = new o.LatLng(e,n)
              , r = 180 * t.coords.accuracy / 40075017
              , s = r / Math.cos(o.LatLng.DEG_TO_RAD * e)
              , a = o.latLngBounds([e - r, n - s], [e + r, n + s])
              , l = this._locateOptions;
            if (l.setView) {
                var u = Math.min(this.getBoundsZoom(a), l.maxZoom);
                this.setView(i, u)
            }
            var c = {
                latlng: i,
                bounds: a,
                timestamp: t.timestamp
            };
            for (var h in t.coords)
                "number" == typeof t.coords[h] && (c[h] = t.coords[h]);
            this.fire("locationfound", c)
        }
    })
}
(window, document),
define("enketo-widget/geo/geopicker", ["jquery", "enketo-js/Widget", "text!enketo-config", "leaflet", "q"], function(t, e, n, i, o) {
    "use strict";
    function r(t, n) {
        this.namespace = l,
        e.call(this, t, n),
        this._init()
    }
    var s, a, l = "geopicker", u = JSON.parse(n), c = 15, h = u && u.maps && u.maps.length > 0 ? u.maps : [{
        name: "streets",
        maxzoom: 24,
        tiles: ["http://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png"],
        attribution: 'Tiles courtesy of <a href="http://hot.openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'
    }], d = "https://maps.googleapis.com/maps/api/geocode/json?address={address}&sensor=true&key={api_key}", p = u.googleApiKey || u.google_api_key, f = i.divIcon({
        iconSize: 24,
        className: "enketo-geopoint-marker"
    }), m = i.divIcon({
        iconSize: 16,
        className: "enketo-geopoint-circle-marker"
    }), g = i.divIcon({
        iconSize: 16,
        className: "enketo-geopoint-circle-marker-active"
    });
    return r.prototype = Object.create(e.prototype),
    r.prototype.constructor = r,
    r.prototype._init = function() {
        var e = t(this.element).val().trim()
          , n = this;
        this.$form = t(this.element).closest("form.or"),
        this.$question = t(this.element).closest(".question"),
        this.mapId = Math.round(1e7 * Math.random()),
        this.props = this._getProps(),
        this._addDomElements(),
        this.currentIndex = 0,
        this.points = [],
        e && t(this.element).val().trim().split(";").forEach(function(t, e) {
            n.points[e] = t.trim().split(" "),
            n.points[e].forEach(function(t, e, n) {
                n[e] = Number(t)
            }
            )
        }
        ),
        this.$widget.find('[name="lat"], [name="long"], [name="alt"], [name="acc"]').on("change change.bymap change.bysearch", function(t) {
            var e = n.$lat.val() ? Number(n.$lat.val()) : ""
              , i = n.$lng.val() ? Number(n.$lng.val()) : ""
              , o = n.$alt.val() ? Number(n.$alt.val()) : ""
              , r = n.$acc.val() ? Number(n.$acc.val()) : ""
              , s = {
                lat: e,
                lng: i
            };
            t.stopImmediatePropagation(),
            "bymap" !== t.namespace && "bysearch" !== t.namespace && n.polyline && !n.containsEmptyPoints(n.points, n.currentIndex) && n.updatedPolylineWouldIntersect(s, n.currentIndex) ? (n._showIntersectError(),
            n._updateInputs(n.points[n.currentIndex], "nochange")) : (n._editPoint([e, i, o, r]),
            "bysearch" !== t.namespace && n.$search && n.$search.val(""))
        }
        ),
        this.$kmlInput.on("change", function(e) {
            var i = n.$points.find(".addpoint")
              , o = t(this).prev(".paste-progress").removeClass("hide")
              , r = e.target.value
              , s = n._convertKmlCoordinatesToLeafletCoordinates(r);
            e.target.value = "",
            setTimeout(function() {
                s.forEach(function(t, e) {
                    n._updateInputs(t),
                    e < s.length - 1 && i.click()
                }
                ),
                o.remove(),
                n._switchInputType("points")
            }
            , 10)
        }
        ),
        this.$widget.find(".toggle-input-type-btn").on("click", function(t) {
            var e = n.$inputGroup.hasClass("kml-input-mode") ? "points" : "kml";
            return n._switchInputType(e),
            !1
        }
        ),
        t(this.element).on("change", function() {
            n.$kmlInput.prop("disabled", !!this.value)
        }
        ),
        this.$points.on("click", ".point", function() {
            return n._setCurrent(n.$points.find(".point").index(t(this))),
            n._switchInputType("points"),
            !1
        }
        ),
        this.$points.find(".addpoint").on("click", function() {
            return n._addPoint(),
            !1
        }
        ),
        this.$widget.find(".close-chain-btn").on("click", function() {
            return n._closePolygon(),
            !1
        }
        ),
        this.$widget.find(".btn-remove").on("click", function() {
            n.points.length < 2 ? n._updateInputs([]) : window.confirm("This will completely remove the current geopoint from the list of geopoints and cannot be undone. Are you sure you want to do this?") && n._removePoint()
        }
        ),
        this.$map.find(".show-map-btn").on("click", function() {
            return n.$widget.find(".search-bar").removeClass("hide-search"),
            n.$widget.addClass("full-screen"),
            n._updateMap(),
            !1
        }
        ),
        this.$form.on("pageflip.enketo.map" + this.mapId, function(e) {
            n.map && t.contains(e.target, n.element) && (n.map.invalidateSize(),
            n.$form.off("pageflip.enketo.map" + n.mapId))
        }
        ),
        this.props.wide && this.$widget.addClass("wide"),
        this.$widget.toggleClass("hide-input", this.$question.hasClass("or-appearance-hide-input")).find(".toggle-input-visibility-btn").on("click", function() {
            n.$widget.toggleClass("hide-input"),
            t(this).toggleClass("open", n.$widget.hasClass("hide-input")),
            n.map && n.map.invalidateSize(!1)
        }
        ).toggleClass("open", n.$widget.hasClass("hide-input")),
        this.$widget.find(".hide-map-btn").on("click", function() {
            return n.$widget.find(".search-bar").addClass("hide-search"),
            n.$widget.removeClass("full-screen").find(".map-canvas").removeClass("leaflet-container"),
            n.map && (n.map.remove(),
            n.map = null ,
            n.polygon = null ,
            n.polyline = null ),
            !1
        }
        ),
        this.$widget.on("focus blur", "input", function(e) {
            t(n.element).trigger(e.type)
        }
        ),
        this.props.search && this._enableSearch(),
        this.props.detect && this._enableDetection(),
        e ? this.points.forEach(function(t, e) {
            n._addPointBtn(e + 1)
        }
        ) : this._addPoint(),
        e ? (this._updateMap(),
        this._setCurrent(this.currentIndex)) : (this._updateMap([0, 0], 1),
        this.props.detect && navigator.geolocation.getCurrentPosition(function(t) {
            n._updateMap([t.coords.latitude, t.coords.longitude], c)
        }
        ))
    }
    ,
    r.prototype._switchInputType = function(t) {
        "kml" === t ? this.$inputGroup.addClass("kml-input-mode") : "points" === t && this.$inputGroup.removeClass("kml-input-mode")
    }
    ,
    r.prototype._getProps = function() {
        var e = []
          , n = this.options.touch !== !0 || this.options.touch === !0 && t(this.element).closest(".or-appearance-maps").length > 0;
        return n && (e = t(this.element).closest(".question").attr("class").split(" ").filter(function(t) {
            return "or-appearance-maps" !== t && /or-appearance-/.test(t)
        }
        ),
        e.forEach(function(t, n) {
            e[n] = t.substring(14)
        }
        )),
        {
            detect: !!navigator.geolocation,
            map: n,
            search: n,
            appearances: e,
            type: this.element.attributes["data-type-xml"].value,
            touch: this.options.touch,
            wide: this.$question.width() / this.$question.closest("form.or").width() > .8
        }
    }
    ,
    r.prototype._addPointBtn = function(t) {
        this.$points.find(".addpoint").before('<a href="#" class="point"> </a>')
    }
    ,
    r.prototype._addDomElements = function() {
        var e = '<div class="map-canvas-wrapper"><div class=map-canvas id="map' + this.mapId + '"></div></div>'
          , n = '<div class="points"><button type="button" class="addpoint">+</button></div>'
          , i = '<a href="#" class="toggle-input-type-btn"><span class="kml-input">KML</span><span class="points-input">points</span></a><label class="geo kml">KML coordinates<progress class="paste-progress hide"></progress><textarea class="ignore" name="kml" placeholder="paste KML coordinates here"></textarea><span class="disabled-msg">remove all points to enable</span></label>'
          , o = '<button type="button" class="close-chain-btn btn btn-default btn-xs">close polygon</button>'
          , r = '<button type="button" class="show-map-btn btn btn-default">Map</button>';
        if (this.$widget = t('<div class="geopicker widget"><div class="search-bar hide-search no-map no-detect"><button type="button" class="hide-map-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button><button name="geodetect" type="button" class="btn btn-default" title="detect current location" data-placement="top"><span class="icon icon-crosshairs"> </span></button><div class="input-group"><input class="geo ignore" name="search" type="text" placeholder="search for place or address" disabled="disabled"/><button type="button" class="btn btn-default search-btn"><i class="icon icon-search"> </i></button></div></div><div class="geo-inputs"><label class="geo lat">latitude (x.y &deg;)<input class="ignore" name="lat" type="number" step="0.000001" min="-90" max="90"/></label><label class="geo long">longitude (x.y &deg;)<input class="ignore" name="long" type="number" step="0.000001" min="-180" max="180"/></label><label class="geo alt">altitude (m)<input class="ignore" name="alt" type="number" step="0.1" /></label><label class="geo acc">accuracy (m)<input class="ignore" name="acc" type="number" step="0.1" /></label><button type="button" class="btn-icon-only btn-remove"><span class="icon icon-trash"> </span></button></div></div>'),
        this.props.detect && (this.$widget.find(".search-bar").removeClass("no-detect"),
        this.$detect = this.$widget.find('button[name="geodetect"]')),
        this.$search = this.$widget.find('[name="search"]'),
        this.$inputGroup = this.$widget.find(".geo-inputs"),
        this.props.map ? (this.$widget.find(".search-bar").removeClass("no-map").after(e),
        this.$map = this.$widget.find(".map-canvas"),
        this.$map.parent().append('<button type="button" class="toggle-input-visibility-btn"> </button>')) : this.$map = t(),
        this.props.touch && this.props.map && this.$map.append(r),
        this.props.touch || this.$widget.find(".search-bar").removeClass("hide-search"),
        "geopoint" !== this.props.type) {
            this.$points = t(n),
            this.$widget.prepend(this.$points),
            "geoshape" === this.props.type && this.$inputGroup.append(o);
            var s = t(i);
            this.$kmlInput = s.find('[name="kml"]'),
            this.$inputGroup.prepend(s)
        } else
            this.$points = t(),
            this.$kmlInput = t();
        this.$lat = this.$widget.find('[name="lat"]'),
        this.$lng = this.$widget.find('[name="long"]'),
        this.$alt = this.$widget.find('[name="alt"]'),
        this.$acc = this.$widget.find('[name="acc"]'),
        t(this.element).hide().after(this.$widget).parent().addClass("clearfix")
    }
    ,
    r.prototype._updateValue = function() {
        var e = t(this.element).val()
          , n = ""
          , i = this;
        return this._markAsValid(),
        this.points.forEach(function(t, e, o) {
            var r, s = "number" == typeof t[0] ? t[0] : "number" == typeof t.lat ? t.lat : null , a = "number" == typeof t[1] ? t[1] : "number" == typeof t.lng ? t.lng : null , l = "number" == typeof t[2] ? t[2] : 0, u = "number" == typeof t[3] ? t[3] : 0;
            r = s && a ? s + " " + a + " " + l + " " + u : "",
            i._isValidGeopoint(r) || "" === r && e === o.length - 1 || i._markAsInvalid(e),
            "" !== r || e !== o.length - 1 ? (n += r,
            e !== o.length - 1 && (n += ";")) : n = n.substring(0, n.lastIndexOf(";"))
        }
        ),
        e !== n ? (t(this.element).val(n).trigger("change"),
        !0) : !1
    }
    ,
    r.prototype._isValidGeopoint = function(t) {
        var e;
        return t ? (e = t.toString().split(" "),
        "" !== e[0] && e[0] >= -90 && e[0] <= 90 && "" !== e[1] && e[1] >= -180 && e[1] <= 180 && ("undefined" == typeof e[2] || !isNaN(e[2])) && ("undefined" == typeof e[3] || !isNaN(e[3]) && e[3] >= 0)) : !1
    }
    ,
    r.prototype._isValidLatLngList = function(t) {
        var e = this;
        return t.every(function(t, n, i) {
            return e._isValidLatLng(t) || "" === t.join() && n === i.length - 1
        }
        )
    }
    ,
    r.prototype._isValidLatLng = function(t) {
        var e, n;
        return e = "number" == typeof t[0] ? t[0] : "number" == typeof t.lat ? t.lat : null ,
        n = "number" == typeof t[1] ? t[1] : "number" == typeof t.lng ? t.lng : null ,
        null  !== e && null  !== n && e >= -90 && 90 >= e && n >= -180 && 180 >= n
    }
    ,
    r.prototype._markAsInvalid = function(t) {
        this.$points.find(".point").eq(t).addClass("has-error")
    }
    ,
    r.prototype._markAsValid = function() {
        this.$points.find(".point").removeClass("has-error")
    }
    ,
    r.prototype._setCurrent = function(t) {
        this.currentIndex = t,
        this.$points.find(".point").removeClass("active").eq(t).addClass("active"),
        this._updateInputs(this.points[t], ""),
        !this.map || this.props.touch && !this._inFullScreenMode() || this._updateMarkers()
    }
    ,
    r.prototype._enableDetection = function() {
        var t = this
          , e = {
            enableHighAccuracy: !0,
            maximumAge: 0
        };
        this.$detect.click(function(n) {
            return n.preventDefault(),
            navigator.geolocation.getCurrentPosition(function(e) {
                var n = {
                    lat: Math.round(1e6 * e.coords.latitude) / 1e6,
                    lng: Math.round(1e6 * e.coords.longitude) / 1e6
                };
                t.polyline && t.updatedPolylineWouldIntersect(n, t.currentIndex) ? t._showIntersectError() : (t._updateInputs([n.lat, n.lng, e.coords.altitude, e.coords.accuracy]),
                t.currentIndex === t.points.length - 1 && "geopoint" !== t.props.type && t._addPoint())
            }
            , function() {
                console.error("error occurred trying to obtain position")
            }
            , e),
            !1
        }
        )
    }
    ,
    r.prototype._enableSearch = function() {
        var e = this;
        d = p ? d.replace("{api_key}", p) : d.replace("&key={api_key}", ""),
        this.$search.prop("disabled", !1).on("change", function(n) {
            var i = t(this).val();
            n.stopImmediatePropagation(),
            i && (i = i.split(/\s+/).join("+"),
            t.get(d.replace("{address}", i), function(t) {
                var n;
                t.results && t.results.length > 0 && t.results[0].geometry && t.results[0].geometry.location ? (n = t.results[0].geometry.location,
                e._updateMap([n.lat, n.lng], c),
                e.$search.closest(".input-group").removeClass("has-error")) : (e.$search.closest(".input-group").addClass("has-error"),
                console.log('Location "' + i + '" not found'))
            }
            , "json").fail(function() {
                e.$search.closest(".input-group").addClass("has-error"),
                console.log("Error. Geocoding service may not be available or app is offline")
            }
            ).always(function() {}
            ))
        }
        )
    }
    ,
    r.prototype._dynamicMapAvailable = function() {
        return !!this.map
    }
    ,
    r.prototype._inFullScreenMode = function() {
        return this.$widget.hasClass("full-screen")
    }
    ,
    r.prototype._updateMap = function(t, e) {
        var n = this;
        this.props.map && (e || (e = this.map ? this.map.getZoom() || c : c),
        t && (this.lastLatLng = t,
        this.lastZoom = e),
        (!this.props.touch || this._inFullScreenMode()) && (this.map ? n._updateDynamicMapView(t, e) : this._addDynamicMap().then(function() {
            n._updateDynamicMapView(t, e)
        }
        )))
    }
    ,
    r.prototype._addDynamicMap = function() {
        var t = this;
        return this._getLayers().then(function(e) {
            var n = o.defer()
              , r = {
                layers: t._getDefaultLayer(e)
            };
            return t.map = i.map("map" + t.mapId, r).on("click", function(e) {
                var n = e.latlng
                  , i = t.$lat.val() && t.$lng.val() ? t.points.length : t.currentIndex;
                n.lat = Math.round(1e6 * n.lat) / 1e6,
                n.lng = Math.round(1e6 * n.lng) / 1e6,
                "geopoint" !== t.props.type && !t.containsEmptyPoints(t.points, i) && t.updatedPolylineWouldIntersect(n, i) ? t._showIntersectError() : t.$lat.val() && t.$lng.val() && "geopoint" !== t.props.type ? t.$lat.val() && t.$lng.val() && (t._addPoint(),
                t._updateInputs(n, "change.bymap")) : t._updateInputs(n, "change.bymap")
            }
            ),
            t.map.attributionControl.setPrefix(""),
            e.length > 1 && i.control.layers(t._getBaseLayers(e), null ).addTo(t.map),
            t.$widget.find(".leaflet-control-layers-toggle").append('<span class="icon icon-globe"></span>'),
            t.map.on("baselayerchange", function() {
                t.$widget.find(".leaflet-control-container input").addClass("ignore no-unselect").next("span").addClass("option-label")
            }
            ),
            n.resolve(),
            n.promise
        }
        )
    }
    ,
    r.prototype._updateDynamicMapView = function(t, e) {
        t ? this.map.setView(t, e || c) : (this._updatePolyline(),
        this._updateMarkers(),
        1 === this.points.length && "" === this.points[0].toString() && (this.lastLatLng ? this.map.setView(this.lastLatLng, this.lastZoom || c) : this.map.setView(i.latLng(0, 0), e || c)))
    }
    ,
    r.prototype._showIntersectError = function() {
        alert("Borders cannot intersect!")
    }
    ,
    r.prototype._getLayers = function() {
        var t = this
          , e = [];
        return h.forEach(function(n, i) {
            "string" == typeof n.tiles && /^GOOGLE_(SATELLITE|ROADMAP|HYBRID|TERRAIN)/.test(n.tiles) ? e.push(t._getGoogleTileLayer(n, i)) : n.tiles ? e.push(t._getLeafletTileLayer(n, i)) : console.error("Configuration error for map tiles. Not a valid tile layer: ", n)
        }
        ),
        o.all(e)
    }
    ,
    r.prototype._getLeafletTileLayer = function(t, e) {
        var n, r = this._getTileOptions(t, e), s = o.defer();
        return t.tileIndex = void 0 === t.tileIndex ? Math.round(100 * Math.random()) % t.tiles.length : t.tileIndex,
        n = t.tiles[t.tileIndex],
        s.resolve(i.tileLayer(n, r)),
        s.promise
    }
    ,
    r.prototype._getGoogleTileLayer = function(t, e) {
        var n = o.defer()
          , r = this._getTileOptions(t, e)
          , s = t.tiles.substring(7);
        return this._loadGoogleMapsScript().then(function() {
            n.resolve(new i.Google(s,r))
        }
        ),
        n.promise
    }
    ,
    r.prototype._getTileOptions = function(t, e) {
        var n = t.name || "map-" + (e + 1);
        return {
            id: t.id || n,
            maxZoom: t.maxzoom || 18,
            minZoom: t.minzoom || 0,
            name: n,
            attribution: t.attribution || ""
        }
    }
    ,
    r.prototype._loadGoogleMapsScript = function() {
        var t, e;
        return s || (a = o.defer(),
        window.gmapsLoaded = function() {
            delete window.gmapsLoaded,
            a.resolve()
        }
        ,
        t = p ? "&key=" + p : "",
        e = "http://maps.google.com/maps/api/js?v=3.exp" + t + "&sensor=false&libraries=places&callback=gmapsLoaded",
        require([e]),
        s = !0),
        a.promise
    }
    ,
    r.prototype._getDefaultLayer = function(t) {
        var e, n = this;
        return t.reverse().some(function(t) {
            return e = t,
            n.props.appearances.some(function(e) {
                return e === t.options.name
            }
            )
        }
        ),
        e
    }
    ,
    r.prototype._getBaseLayers = function(t) {
        var e = {};
        return t.forEach(function(t) {
            e[t.options.name] = t
        }
        ),
        e
    }
    ,
    r.prototype._updateMarkers = function() {
        var t = []
          , e = []
          , n = this;
        this.markerLayer && this.markerLayer.clearLayers(),
        this.points.length < 2 && "" === this.points[0].join() || (this.points.forEach(function(o, r) {
            var s = "geopoint" === n.props.type ? f : r === n.currentIndex ? g : m;
            n._isValidLatLng(o) ? (t.push(o),
            e.push(i.marker(o, {
                icon: s,
                clickable: !0,
                draggable: !0,
                alt: r,
                opacity: .9
            }).on("click", function(t) {
                0 === t.target.options.alt && "geoshape" === n.props.type ? n._closePolygon() : n._setCurrent(t.target.options.alt)
            }
            ).on("dragend", function(t) {
                var e = t.target.getLatLng()
                  , i = t.target.options.alt;
                e.lat = Math.round(1e6 * e.lat) / 1e6,
                e.lng = Math.round(1e6 * e.lng) / 1e6,
                n.polyline && n.updatedPolylineWouldIntersect(e, i) ? (n._showIntersectError(),
                n._updateMarkers()) : (n._setCurrent(i),
                n._updateInputs(e, "change.bymap"),
                n._updateMap())
            }
            ))) : console.debug("this latLng was not considered valid", o)
        }
        ),
        e.length > 0 && (this.markerLayer = i.layerGroup(e).addTo(this.map),
        1 !== this.points.length && this._isValidLatLngList(this.points) || this.map.setView(t[0], this.lastZoom || c)))
    }
    ,
    r.prototype._updatePolyline = function() {
        var t, e = this;
        if ("geopoint" !== this.props.type) {
            if (this.points.length < 2 || !this._isValidLatLngList(this.points))
                return this.map && (this.polyline && this.map.removeLayer(this.polyline),
                this.polygon && this.map.removeLayer(this.polygon)),
                this.polyline = null ,
                void (this.polygon = null );
            "geoshape" === this.props.type && this._updatePolygon(),
            t = "" !== this.points[this.points.length - 1].join("") ? this.points : this.points.slice(0, this.points.length - 1),
            this.polyline ? this.polyline.setLatLngs(t) : (this.polyline = i.polyline(t, {
                color: "red"
            }),
            this.map.addLayer(this.polyline)),
            setTimeout(function() {
                e.map.fitBounds(e.polyline.getBounds())
            }
            , 0)
        }
    }
    ,
    r.prototype._updatePolygon = function() {
        var t;
        "geopoint" !== this.props.type && "geotrace" !== this.props.type && (t = "" !== this.points[this.points.length - 1].join("") ? this.points : this.points.slice(0, this.points.length - 1),
        this.polygon ? this.polygon.setLatLngs(t) : (this.polygon = i.polygon(t, {
            color: "red",
            stroke: !1
        }),
        this.map.addLayer(this.polygon)),
        this._updateArea(t))
    }
    ,
    r.prototype._updateArea = function(t) {
        var e, n;
        t.length > 2 ? (e = i.GeometryUtil.geodesicArea(t),
        n = i.GeometryUtil.readableArea(e),
        i.popup({
            className: "enketo-area-popup"
        }).setLatLng(this.polygon.getBounds().getCenter()).setContent(n).openOn(this.map)) : this.map.closePopup()
    }
    ,
    r.prototype._addPoint = function() {
        this._addPointBtn(this.points.length + 1),
        this.points.push([]),
        this._setCurrent(this.points.length - 1),
        this._updateValue()
    }
    ,
    r.prototype._editPoint = function(t) {
        var e;
        return this.points[this.currentIndex] = t,
        e = this._updateValue(),
        e && this._updateMap(),
        e
    }
    ,
    r.prototype._removePoint = function() {
        var t = this.currentIndex;
        this.points.splice(this.currentIndex, 1),
        this._updateValue(),
        this.$points.find(".point").eq(this.currentIndex).remove(),
        "undefined" == typeof this.points[this.currentIndex] && (t = this.currentIndex - 1),
        this._setCurrent(t),
        this._updateMap()
    }
    ,
    r.prototype._closePolygon = function() {
        var t = this.points[this.points.length - 1];
        if (!(this.points.length < 3 || 3 === this.points.length && !this._isValidLatLng(this.points[2]) || JSON.stringify(this.points[0]) === JSON.stringify(t)))
            return this._isValidLatLng(t) ? (console.log("current last point is valid, so will create a new one to use to close"),
            this._addPoint()) : (console.log("current last point is not a valid point, so will use this as closing point"),
            this.currentIndex = this.points.length - 1),
            this.polyline && !this.containsEmptyPoints(this.points, this.points.length) && this.updatedPolylineWouldIntersect(this.points[0], this.currentIndex) ? this._showIntersectError() : void this._updateInputs(this.points[0])
    }
    ,
    r.prototype._updateInputs = function(t, e) {
        var n = t[0] || t.lat || ""
          , i = t[1] || t.lng || ""
          , o = t[2] || t.alt || ""
          , r = t[3] || t.acc || "";
        e = "undefined" != typeof e ? e : "change",
        this.$lat.val(n || ""),
        this.$lng.val(i || ""),
        this.$alt.val(o || ""),
        this.$acc.val(r || "").trigger(e)
    }
    ,
    r.prototype._convertKmlCoordinatesToLeafletCoordinates = function(t) {
        var e = []
          , n = /<\s?coordinates>(([^<]|\n)*)<\/\s?coordinates\s?>/
          , i = n.test(t);
        return t = i ? t.match(n)[1] : t,
        t.trim().split(/\s+/).forEach(function(t) {
            var n = [];
            t.split(",").forEach(function(t, e) {
                var i = Number(t);
                0 === e ? n[1] = i : 1 === e ? n[0] = i : 2 === e && (n[2] = i)
            }
            ),
            e.push(n)
        }
        ),
        e
    }
    ,
    r.prototype.disable = function() {
        this.$map.hide(),
        this.$widget.find(".btn").addClass("disabled")
    }
    ,
    r.prototype.enable = function() {
        this.$map.show(),
        this.$widget.find(".btn").removeClass("disabled"),
        this.map && this.map.invalidateSize()
    }
    ,
    r.prototype.containsEmptyPoints = function(t, e) {
        return t.some(function(t, n) {
            return !(n === e || t[0] && t[1])
        }
        )
    }
    ,
    r.prototype.updatedPolylineWouldIntersect = function(e, n) {
        var o, r, s, a = [];
        return this.points < 3 ? !1 : (t.extend(!0, a, this.points),
        a[n] = [e[0] || e.lat, e[1] || e.lng],
        o = "" !== a[a.length - 1].join("") ? a : a.slice(0, a.length - 1),
        o[0][0] === o[o.length - 1][0] && o[0][1] === o[o.length - 1][1] && (o = o.slice(0, o.length - 1)),
        r = i.polyline(o, {
            color: "white"
        }),
        this.map.addLayer(r),
        s = r.intersects(),
        this.map.removeLayer(r),
        s)
    }
    ,
    i.GeometryUtil = i.extend(i.GeometryUtil || {}, {
        geodesicArea: function(t) {
            var e, n, o = 6378100, r = t.length, s = 0, a = i.LatLng.DEG_TO_RAD;
            if (r > 2) {
                for (var l = 0; r > l; l++)
                    e = {
                        lat: t[l][0],
                        lng: t[l][1]
                    },
                    n = {
                        lat: t[(l + 1) % r][0],
                        lng: t[(l + 1) % r][1]
                    },
                    s += (n.lng - e.lng) * a * (2 + Math.sin(e.lat * a) + Math.sin(n.lat * a));
                s = s * o * o / 2
            }
            return Math.abs(s)
        },
        readableArea: function(t) {
            var e;
            return e = t >= 1e4 ? (1e-4 * t).toFixed(2) + " ha" : t.toFixed(0) + " m&sup2;"
        }
    }),
    i.Polyline.include({
        intersects: function() {
            var t, e, n, i = this._originalPoints, o = i ? i.length : 0;
            if (this._tooFewPointsForIntersection())
                return !1;
            for (t = o - 1; t >= 3; t--)
                if (e = i[t - 1],
                n = i[t],
                this._lineSegmentsIntersectsRange(e, n, t - 2))
                    return !0;
            return !1
        },
        _tooFewPointsForIntersection: function(t) {
            var e = this._originalPoints
              , n = e ? e.length : 0;
            return n += t || 0,
            !this._originalPoints || 3 >= n
        },
        _lineSegmentsIntersectsRange: function(t, e, n, o) {
            var r, s, a = this._originalPoints;
            o = o || 0;
            for (var l = n; l > o; l--)
                if (r = a[l - 1],
                s = a[l],
                i.LineUtil.segmentsIntersect(t, e, r, s))
                    return !0;
            return !1
        }
    }),
    i.Util.extend(i.LineUtil, {
        segmentsIntersect: function(t, e, n, i) {
            return this._checkCounterclockwise(t, n, i) !== this._checkCounterclockwise(e, n, i) && this._checkCounterclockwise(t, e, n) !== this._checkCounterclockwise(t, e, i)
        },
        _checkCounterclockwise: function(t, e, n) {
            return (n.y - t.y) * (e.x - t.x) > (e.y - t.y) * (n.x - t.x)
        }
    }),
    t.fn[l] = function(e, n) {
        return this.each(function() {
            var i = t(this)
              , o = t(this).data(l);
            e = e || {},
            o || "object" != typeof e ? o && "string" == typeof e && o[e](this) : i.data(l, o = new r(this,e,n))
        }
        )
    }
    ,
    i.Google = i.Class.extend({
        includes: i.Mixin.Events,
        options: {
            minZoom: 0,
            maxZoom: 18,
            tileSize: 256,
            subdomains: "abc",
            errorTileUrl: "",
            attribution: "",
            opacity: 1,
            continuousWorld: !1,
            noWrap: !1,
            mapOptions: {
                backgroundColor: "#dddddd"
            }
        },
        initialize: function(t, e) {
            i.Util.setOptions(this, e),
            this._ready = void 0 !== google.maps.Map,
            this._ready || i.Google.asyncWait.push(this),
            this._type = t || "SATELLITE"
        },
        onAdd: function(t, e) {
            this._map = t,
            this._insertAtTheBottom = e,
            this._initContainer(),
            this._initMapObject(),
            t.on("viewreset", this._resetCallback, this),
            this._limitedUpdate = i.Util.limitExecByInterval(this._update, 150, this),
            t.on("move", this._update, this),
            t.on("zoomanim", this._handleZoomAnim, this),
            t._controlCorners.bottomright.style.marginBottom = "20px",
            this._reset(),
            this._update()
        },
        onRemove: function(t) {
            t._container.removeChild(this._container),
            t.off("viewreset", this._resetCallback, this),
            t.off("move", this._update, this),
            t.off("zoomanim", this._handleZoomAnim, this),
            t._controlCorners.bottomright.style.marginBottom = "0em"
        },
        getAttribution: function() {
            return this.options.attribution
        },
        setOpacity: function(t) {
            this.options.opacity = t,
            1 > t && i.DomUtil.setOpacity(this._container, t)
        },
        setElementSize: function(t, e) {
            t.style.width = e.x + "px",
            t.style.height = e.y + "px"
        },
        _initContainer: function() {
            var t = this._map._container
              , e = t.firstChild;
            this._container || (this._container = i.DomUtil.create("div", "leaflet-google-layer leaflet-top leaflet-left"),
            this._container.id = "_GMapContainer_" + i.Util.stamp(this),
            this._container.style.zIndex = "auto"),
            t.insertBefore(this._container, e),
            this.setOpacity(this.options.opacity),
            this.setElementSize(this._container, this._map.getSize())
        },
        _initMapObject: function() {
            if (this._ready) {
                this._google_center = new google.maps.LatLng(0,0);
                var t = new google.maps.Map(this._container,{
                    center: this._google_center,
                    zoom: 0,
                    tilt: 0,
                    mapTypeId: google.maps.MapTypeId[this._type],
                    disableDefaultUI: !0,
                    keyboardShortcuts: !1,
                    draggable: !1,
                    disableDoubleClickZoom: !0,
                    scrollwheel: !1,
                    streetViewControl: !1,
                    styles: this.options.mapOptions.styles,
                    backgroundColor: this.options.mapOptions.backgroundColor
                })
                  , e = this;
                this._reposition = google.maps.event.addListenerOnce(t, "center_changed", function() {
                    e.onReposition()
                }
                ),
                this._google = t,
                google.maps.event.addListenerOnce(t, "idle", function() {
                    e._checkZoomLevels()
                }
                ),
                this.fire("MapObjectInitialized", {
                    mapObject: t
                })
            }
        },
        _checkZoomLevels: function() {
            this._google.getZoom() !== this._map.getZoom() && this._map.setZoom(this._google.getZoom())
        },
        _resetCallback: function(t) {
            this._reset(t.hard)
        },
        _reset: function(t) {
            this._initContainer()
        },
        _update: function(t) {
            if (this._google) {
                this._resize();
                var e = this._map.getCenter()
                  , n = new google.maps.LatLng(e.lat,e.lng);
                this._google.setCenter(n),
                this._google.setZoom(Math.round(this._map.getZoom())),
                this._checkZoomLevels()
            }
        },
        _resize: function() {
            var t = this._map.getSize();
            (this._container.style.width !== t.x || this._container.style.height !== t.y) && (this.setElementSize(this._container, t),
            this.onReposition())
        },
        _handleZoomAnim: function(t) {
            var e = t.center
              , n = new google.maps.LatLng(e.lat,e.lng);
            this._google.setCenter(n),
            this._google.setZoom(Math.round(t.zoom))
        },
        onReposition: function() {
            this._google && google.maps.event.trigger(this._google, "resize")
        }
    }),
    i.Google.asyncWait = [],
    i.Google.asyncInitialize = function() {
        var t;
        for (t = 0; t < i.Google.asyncWait.length; t++) {
            var e = i.Google.asyncWait[t];
            e._ready = !0,
            e._container && (e._initMapObject(),
            e._update())
        }
        i.Google.asyncWait = []
    }
    ,
    l
}
),
define("enketo-widget/table/tablewidget", function() {}
),
define("enketo-widget/radio/radiopicker", ["enketo-js/Widget", "jquery", "enketo-js/plugins"], function(t, e) {
    "use strict";
    function n(e, n) {
        this.namespace = o,
        t.call(this, e, n),
        this._init()
    }
    var i = null 
      , o = "radiopicker";
    return n.prototype = Object.create(t.prototype),
    n.prototype.constructor = n,
    n.prototype._init = function() {
        this._setDelegatedHandlers()
    }
    ,
    n.prototype._setDelegatedHandlers = function() {
        var t, n, o = e(this.element);
        o.on("click", 'input[type="radio"]:checked', function(t) {
            e(this).parent("label").siblings().removeAttr("data-checked").end().attr("data-checked", "true")
        }
        ),
        o.on("click", 'input[type="checkbox"]', function(i) {
            n = e(this),
            t = n.parent("label"),
            n.is(":checked") ? t.attr("data-checked", "true") : t.removeAttr("data-checked")
        }
        ),
        o.on("click", 'input[type="radio"], input[type="checkbox"]', function(t) {
            i && i.trigger("fakeblur"),
            i = e(this).trigger("fakefocus")
        }
        ),
        o.on("focusin fakefocus", 'input:not([type="radio"], [type="checkbox"]), textarea, select', function(t) {
            i && i.trigger("fakeblur"),
            i = null 
        }
        ),
        o.find('input[type="radio"]:checked, input[type="checkbox"]:checked').parent("label").attr("data-checked", "true"),
        o.on("click", '[data-checked]>input[type="radio"]:not(.no-unselect)', function(t) {
            e(this).prop("checked", !1).trigger("change").parent().removeAttr("data-checked")
        }
        )
    }
    ,
    n.prototype.destroy = function(t) {}
    ,
    e.fn[o] = function(t, i) {
        var r = e(this)
          , s = r.data(o);
        return t = t || {},
        s || "object" != typeof t ? s && "string" == typeof t && s[t](this) : r.data(o, s = new n(r[0],t,i)),
        this
    }
    ,
    o
}
),
function(t, e, n, i) {
    "use strict";
    var o = function(e, n) {
        this.widget = "",
        this.$element = t(e),
        this.defaultTime = n.defaultTime,
        this.disableFocus = n.disableFocus,
        this.disableMousewheel = n.disableMousewheel,
        this.isOpen = n.isOpen,
        this.minuteStep = n.minuteStep,
        this.modalBackdrop = n.modalBackdrop,
        this.orientation = n.orientation,
        this.secondStep = n.secondStep,
        this.showInputs = n.showInputs,
        this.showMeridian = n.showMeridian,
        this.showSeconds = n.showSeconds,
        this.template = n.template,
        this.appendWidgetTo = n.appendWidgetTo,
        this.showWidgetOnAddonClick = n.showWidgetOnAddonClick,
        this._init()
    }
    ;
    o.prototype = {
        constructor: o,
        _init: function() {
            var e = this;
            this.showWidgetOnAddonClick && (this.$element.parent().hasClass("input-group") || this.$element.parent().hasClass("input-prepend")) ? (this.$element.parent(".input-group, .input-prepend").find(".input-group-addon").on({
                "click.timepicker": t.proxy(this.showWidget, this)
            }),
            this.$element.on({
                "focus.timepicker": t.proxy(this.highlightUnit, this),
                "click.timepicker": t.proxy(this.highlightUnit, this),
                "keydown.timepicker": t.proxy(this.elementKeydown, this),
                "blur.timepicker": t.proxy(this.blurElement, this),
                "mousewheel.timepicker DOMMouseScroll.timepicker": t.proxy(this.mousewheel, this)
            })) : this.template ? this.$element.on({
                "focus.timepicker": t.proxy(this.showWidget, this),
                "click.timepicker": t.proxy(this.showWidget, this),
                "blur.timepicker": t.proxy(this.blurElement, this),
                "mousewheel.timepicker DOMMouseScroll.timepicker": t.proxy(this.mousewheel, this)
            }) : this.$element.on({
                "focus.timepicker": t.proxy(this.highlightUnit, this),
                "click.timepicker": t.proxy(this.highlightUnit, this),
                "keydown.timepicker": t.proxy(this.elementKeydown, this),
                "blur.timepicker": t.proxy(this.blurElement, this),
                "mousewheel.timepicker DOMMouseScroll.timepicker": t.proxy(this.mousewheel, this)
            }),
            this.template !== !1 ? this.$widget = t(this.getTemplate()).on("click", t.proxy(this.widgetClick, this)) : this.$widget = !1,
            this.showInputs && this.$widget !== !1 && this.$widget.find("input").each(function() {
                t(this).on({
                    "click.timepicker": function() {
                        t(this).select()
                    },
                    "keydown.timepicker": t.proxy(e.widgetKeydown, e),
                    "keyup.timepicker": t.proxy(e.widgetKeyup, e)
                })
            }
            ),
            this.setDefaultTime(this.defaultTime)
        },
        blurElement: function() {
            this.highlightedUnit = null ,
            this.updateFromElementVal()
        },
        clear: function() {
            this.hour = "",
            this.minute = "",
            this.second = "",
            this.meridian = "",
            this.$element.val("")
        },
        decrementHour: function() {
            if (this.showMeridian)
                if (1 === this.hour)
                    this.hour = 12;
                else {
                    if (12 === this.hour)
                        return this.hour--,
                        this.toggleMeridian();
                    if (0 === this.hour)
                        return this.hour = 11,
                        this.toggleMeridian();
                    this.hour--
                }
            else
                this.hour <= 0 ? this.hour = 23 : this.hour--
        },
        decrementMinute: function(t) {
            var e;
            e = t ? this.minute - t : this.minute - this.minuteStep,
            0 > e ? (this.decrementHour(),
            this.minute = e + 60) : this.minute = e
        },
        decrementSecond: function() {
            var t = this.second - this.secondStep;
            0 > t ? (this.decrementMinute(!0),
            this.second = t + 60) : this.second = t
        },
        elementKeydown: function(t) {
            switch (t.keyCode) {
            case 9:
            case 27:
                this.updateFromElementVal();
                break;
            case 37:
                t.preventDefault(),
                this.highlightPrevUnit();
                break;
            case 38:
                switch (t.preventDefault(),
                this.highlightedUnit) {
                case "hour":
                    this.incrementHour(),
                    this.highlightHour();
                    break;
                case "minute":
                    this.incrementMinute(),
                    this.highlightMinute();
                    break;
                case "second":
                    this.incrementSecond(),
                    this.highlightSecond();
                    break;
                case "meridian":
                    this.toggleMeridian(),
                    this.highlightMeridian()
                }
                this.update();
                break;
            case 39:
                t.preventDefault(),
                this.highlightNextUnit();
                break;
            case 40:
                switch (t.preventDefault(),
                this.highlightedUnit) {
                case "hour":
                    this.decrementHour(),
                    this.highlightHour();
                    break;
                case "minute":
                    this.decrementMinute(),
                    this.highlightMinute();
                    break;
                case "second":
                    this.decrementSecond(),
                    this.highlightSecond();
                    break;
                case "meridian":
                    this.toggleMeridian(),
                    this.highlightMeridian()
                }
                this.update()
            }
        },
        getCursorPosition: function() {
            var t = this.$element.get(0);
            if ("selectionStart" in t)
                return t.selectionStart;
            if (n.selection) {
                t.focus();
                var e = n.selection.createRange()
                  , i = n.selection.createRange().text.length;
                return e.moveStart("character", -t.value.length),
                e.text.length - i
            }
        },
        getTemplate: function() {
            var t, e, n, i, o, r;
            switch (this.showInputs ? (e = '<input type="text" data-name="hour" class="bootstrap-timepicker-hour form-control" maxlength="2"/>',
            n = '<input type="text" data-name="minute" class="bootstrap-timepicker-minute form-control" maxlength="2"/>',
            i = '<input type="text" data-name="second" class="bootstrap-timepicker-second form-control" maxlength="2"/>',
            o = '<input type="text" data-name="meridian" class="bootstrap-timepicker-meridian form-control" maxlength="2"/>') : (e = '<span class="bootstrap-timepicker-hour"></span>',
            n = '<span class="bootstrap-timepicker-minute"></span>',
            i = '<span class="bootstrap-timepicker-second"></span>',
            o = '<span class="bootstrap-timepicker-meridian"></span>'),
            r = '<table><tr><td><a href="#" data-action="incrementHour"><i class="glyphicon glyphicon-chevron-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="glyphicon glyphicon-chevron-up"></i></a></td>' + (this.showSeconds ? '<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="glyphicon glyphicon-chevron-up"></i></a></td>' : "") + (this.showMeridian ? '<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="glyphicon glyphicon-chevron-up"></i></a></td>' : "") + "</tr><tr><td>" + e + '</td> <td class="separator">:</td><td>' + n + "</td> " + (this.showSeconds ? '<td class="separator">:</td><td>' + i + "</td>" : "") + (this.showMeridian ? '<td class="separator">&nbsp;</td><td>' + o + "</td>" : "") + '</tr><tr><td><a href="#" data-action="decrementHour"><i class="glyphicon glyphicon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="glyphicon glyphicon-chevron-down"></i></a></td>' + (this.showSeconds ? '<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="glyphicon glyphicon-chevron-down"></i></a></td>' : "") + (this.showMeridian ? '<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="glyphicon glyphicon-chevron-down"></i></a></td>' : "") + "</tr></table>",
            this.template) {
            case "modal":
                t = '<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="' + (this.modalBackdrop ? "true" : "false") + '"><div class="modal-header"><a href="#" class="close" data-dismiss="modal"></a><h3>Pick a Time</h3></div><div class="modal-content">' + r + '</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';
                break;
            case "dropdown":
                t = '<div class="bootstrap-timepicker-widget dropdown-menu">' + r + "</div>"
            }
            return t
        },
        getTime: function() {
            return "" === this.hour ? "" : this.hour + ":" + (1 === this.minute.toString().length ? "0" + this.minute : this.minute) + (this.showSeconds ? ":" + (1 === this.second.toString().length ? "0" + this.second : this.second) : "") + (this.showMeridian ? " " + this.meridian : "")
        },
        hideWidget: function() {
            this.isOpen !== !1 && (this.$element.trigger({
                type: "hide.timepicker",
                time: {
                    value: this.getTime(),
                    hours: this.hour,
                    minutes: this.minute,
                    seconds: this.second,
                    meridian: this.meridian
                }
            }),
            "modal" === this.template && this.$widget.modal ? this.$widget.modal("hide") : this.$widget.removeClass("open"),
            t(n).off("mousedown.timepicker, touchend.timepicker"),
            this.isOpen = !1,
            this.$widget.detach())
        },
        highlightUnit: function() {
            this.position = this.getCursorPosition(),
            this.position >= 0 && this.position <= 2 ? this.highlightHour() : this.position >= 3 && this.position <= 5 ? this.highlightMinute() : this.position >= 6 && this.position <= 8 ? this.showSeconds ? this.highlightSecond() : this.highlightMeridian() : this.position >= 9 && this.position <= 11 && this.highlightMeridian()
        },
        highlightNextUnit: function() {
            switch (this.highlightedUnit) {
            case "hour":
                this.highlightMinute();
                break;
            case "minute":
                this.showSeconds ? this.highlightSecond() : this.showMeridian ? this.highlightMeridian() : this.highlightHour();
                break;
            case "second":
                this.showMeridian ? this.highlightMeridian() : this.highlightHour();
                break;
            case "meridian":
                this.highlightHour()
            }
        },
        highlightPrevUnit: function() {
            switch (this.highlightedUnit) {
            case "hour":
                this.showMeridian ? this.highlightMeridian() : this.showSeconds ? this.highlightSecond() : this.highlightMinute();
                break;
            case "minute":
                this.highlightHour();
                break;
            case "second":
                this.highlightMinute();
                break;
            case "meridian":
                this.showSeconds ? this.highlightSecond() : this.highlightMinute()
            }
        },
        highlightHour: function() {
            var t = this.$element.get(0)
              , e = this;
            this.highlightedUnit = "hour",
            t.setSelectionRange && setTimeout(function() {
                e.hour < 10 ? t.setSelectionRange(0, 1) : t.setSelectionRange(0, 2);
            }
            , 0)
        },
        highlightMinute: function() {
            var t = this.$element.get(0)
              , e = this;
            this.highlightedUnit = "minute",
            t.setSelectionRange && setTimeout(function() {
                e.hour < 10 ? t.setSelectionRange(2, 4) : t.setSelectionRange(3, 5)
            }
            , 0)
        },
        highlightSecond: function() {
            var t = this.$element.get(0)
              , e = this;
            this.highlightedUnit = "second",
            t.setSelectionRange && setTimeout(function() {
                e.hour < 10 ? t.setSelectionRange(5, 7) : t.setSelectionRange(6, 8)
            }
            , 0)
        },
        highlightMeridian: function() {
            var t = this.$element.get(0)
              , e = this;
            this.highlightedUnit = "meridian",
            t.setSelectionRange && (this.showSeconds ? setTimeout(function() {
                e.hour < 10 ? t.setSelectionRange(8, 10) : t.setSelectionRange(9, 11)
            }
            , 0) : setTimeout(function() {
                e.hour < 10 ? t.setSelectionRange(5, 7) : t.setSelectionRange(6, 8)
            }
            , 0))
        },
        incrementHour: function() {
            if (this.showMeridian) {
                if (11 === this.hour)
                    return this.hour++,
                    this.toggleMeridian();
                12 === this.hour && (this.hour = 0)
            }
            return 23 === this.hour ? void (this.hour = 0) : void this.hour++
        },
        incrementMinute: function(t) {
            var e;
            e = t ? this.minute + t : this.minute + this.minuteStep - this.minute % this.minuteStep,
            e > 59 ? (this.incrementHour(),
            this.minute = e - 60) : this.minute = e
        },
        incrementSecond: function() {
            var t = this.second + this.secondStep - this.second % this.secondStep;
            t > 59 ? (this.incrementMinute(!0),
            this.second = t - 60) : this.second = t
        },
        mousewheel: function(e) {
            if (!this.disableMousewheel) {
                e.preventDefault(),
                e.stopPropagation();
                var n = e.originalEvent.wheelDelta || -e.originalEvent.detail
                  , i = null ;
                switch ("mousewheel" === e.type ? i = -1 * e.originalEvent.wheelDelta : "DOMMouseScroll" === e.type && (i = 40 * e.originalEvent.detail),
                i && (e.preventDefault(),
                t(this).scrollTop(i + t(this).scrollTop())),
                this.highlightedUnit) {
                case "minute":
                    n > 0 ? this.incrementMinute() : this.decrementMinute(),
                    this.highlightMinute();
                    break;
                case "second":
                    n > 0 ? this.incrementSecond() : this.decrementSecond(),
                    this.highlightSecond();
                    break;
                case "meridian":
                    this.toggleMeridian(),
                    this.highlightMeridian();
                    break;
                default:
                    n > 0 ? this.incrementHour() : this.decrementHour(),
                    this.highlightHour()
                }
                return !1
            }
        },
        place: function() {
            if (!this.isInline) {
                var n = this.$widget.outerWidth()
                  , i = this.$widget.outerHeight()
                  , o = 10
                  , r = t(e).width()
                  , s = t(e).height()
                  , a = t(e).scrollTop()
                  , l = parseInt(this.$element.parents().filter(function() {}
                ).first().css("z-index"), 10) + 10
                  , u = this.component ? this.component.parent().offset() : this.$element.offset()
                  , c = this.component ? this.component.outerHeight(!0) : this.$element.outerHeight(!1)
                  , h = this.component ? this.component.outerWidth(!0) : this.$element.outerWidth(!1)
                  , d = u.left
                  , p = u.top;
                this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left"),
                "auto" !== this.orientation.x ? (this.picker.addClass("datepicker-orient-" + this.orientation.x),
                "right" === this.orientation.x && (d -= n - h)) : (this.$widget.addClass("timepicker-orient-left"),
                u.left < 0 ? d -= u.left - o : u.left + n > r && (d = r - n - o));
                var f, m, g = this.orientation.y;
                "auto" === g && (f = -a + u.top - i,
                m = a + s - (u.top + c + i),
                g = Math.max(f, m) === m ? "top" : "bottom"),
                this.$widget.addClass("timepicker-orient-" + g),
                "top" === g ? p += c : p -= i + parseInt(this.$widget.css("padding-top"), 10),
                this.$widget.css({
                    top: p,
                    left: d,
                    zIndex: l
                })
            }
        },
        remove: function() {
            t("document").off(".timepicker"),
            this.$widget && this.$widget.remove(),
            delete this.$element.data().timepicker
        },
        setDefaultTime: function(t) {
            if (this.$element.val())
                this.updateFromElementVal();
            else if ("current" === t) {
                var e = new Date
                  , n = e.getHours()
                  , i = e.getMinutes()
                  , o = e.getSeconds()
                  , r = "AM";
                0 !== o && (o = Math.ceil(e.getSeconds() / this.secondStep) * this.secondStep,
                60 === o && (i += 1,
                o = 0)),
                0 !== i && (i = Math.ceil(e.getMinutes() / this.minuteStep) * this.minuteStep,
                60 === i && (n += 1,
                i = 0)),
                this.showMeridian && (0 === n ? n = 12 : n >= 12 ? (n > 12 && (n -= 12),
                r = "PM") : r = "AM"),
                this.hour = n,
                this.minute = i,
                this.second = o,
                this.meridian = r,
                this.update()
            } else
                t === !1 ? (this.hour = 0,
                this.minute = 0,
                this.second = 0,
                this.meridian = "AM") : this.setTime(t)
        },
        setTime: function(t, e) {
            if (!t)
                return void this.clear();
            var n, i, o, r, s;
            "object" == typeof t && t.getMonth ? (i = t.getHours(),
            o = t.getMinutes(),
            r = t.getSeconds(),
            this.showMeridian && (s = "AM",
            i > 12 && (s = "PM",
            i %= 12),
            12 === i && (s = "PM"))) : (s = null  !== t.match(/p/i) ? "PM" : "AM",
            t = t.replace(/[^0-9\:]/g, ""),
            n = t.split(":"),
            i = n[0] ? n[0].toString() : n.toString(),
            o = n[1] ? n[1].toString() : "",
            r = n[2] ? n[2].toString() : "",
            i.length > 4 && (r = i.substr(4, 2)),
            i.length > 2 && (o = i.substr(2, 2),
            i = i.substr(0, 2)),
            o.length > 2 && (r = o.substr(2, 2),
            o = o.substr(0, 2)),
            r.length > 2 && (r = r.substr(2, 2)),
            i = parseInt(i, 10),
            o = parseInt(o, 10),
            r = parseInt(r, 10),
            isNaN(i) && (i = 0),
            isNaN(o) && (o = 0),
            isNaN(r) && (r = 0),
            this.showMeridian ? 1 > i ? i = 1 : i > 12 && (i = 12) : (i >= 24 ? i = 23 : 0 > i && (i = 0),
            13 > i && "PM" === s && (i += 12)),
            0 > o ? o = 0 : o >= 60 && (o = 59),
            this.showSeconds && (isNaN(r) ? r = 0 : 0 > r ? r = 0 : r >= 60 && (r = 59))),
            this.hour = i,
            this.minute = o,
            this.second = r,
            this.meridian = s,
            this.update(e)
        },
        showWidget: function() {
            if (!this.isOpen && !this.$element.is(":disabled")) {
                this.$widget.appendTo(this.appendWidgetTo);
                var e = this;
                t(n).on("mousedown.timepicker, touchend.timepicker", function(t) {
                    e.$element.parent().find(t.target).length || e.$widget.is(t.target) || e.$widget.find(t.target).length || e.hideWidget()
                }
                ),
                this.$element.trigger({
                    type: "show.timepicker",
                    time: {
                        value: this.getTime(),
                        hours: this.hour,
                        minutes: this.minute,
                        seconds: this.second,
                        meridian: this.meridian
                    }
                }),
                this.place(),
                this.disableFocus && this.$element.blur(),
                "" === this.hour && (this.defaultTime ? this.setDefaultTime(this.defaultTime) : this.setTime("0:0:0")),
                "modal" === this.template && this.$widget.modal ? this.$widget.modal("show").on("hidden", t.proxy(this.hideWidget, this)) : this.isOpen === !1 && this.$widget.addClass("open"),
                this.isOpen = !0
            }
        },
        toggleMeridian: function() {
            this.meridian = "AM" === this.meridian ? "PM" : "AM"
        },
        update: function(t) {
            this.updateElement(),
            t || this.updateWidget(),
            this.$element.trigger({
                type: "changeTime.timepicker",
                time: {
                    value: this.getTime(),
                    hours: this.hour,
                    minutes: this.minute,
                    seconds: this.second,
                    meridian: this.meridian
                }
            })
        },
        updateElement: function() {
            this.$element.val(this.getTime()).change()
        },
        updateFromElementVal: function() {
            this.setTime(this.$element.val())
        },
        updateWidget: function() {
            if (this.$widget !== !1) {
                var t = this.hour
                  , e = 1 === this.minute.toString().length ? "0" + this.minute : this.minute
                  , n = 1 === this.second.toString().length ? "0" + this.second : this.second;
                this.showInputs ? (this.$widget.find("input.bootstrap-timepicker-hour").val(t),
                this.$widget.find("input.bootstrap-timepicker-minute").val(e),
                this.showSeconds && this.$widget.find("input.bootstrap-timepicker-second").val(n),
                this.showMeridian && this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)) : (this.$widget.find("span.bootstrap-timepicker-hour").text(t),
                this.$widget.find("span.bootstrap-timepicker-minute").text(e),
                this.showSeconds && this.$widget.find("span.bootstrap-timepicker-second").text(n),
                this.showMeridian && this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))
            }
        },
        updateFromWidgetInputs: function() {
            if (this.$widget !== !1) {
                var t = this.$widget.find("input.bootstrap-timepicker-hour").val() + ":" + this.$widget.find("input.bootstrap-timepicker-minute").val() + (this.showSeconds ? ":" + this.$widget.find("input.bootstrap-timepicker-second").val() : "") + (this.showMeridian ? this.$widget.find("input.bootstrap-timepicker-meridian").val() : "");
                this.setTime(t, !0)
            }
        },
        widgetClick: function(e) {
            e.stopPropagation(),
            e.preventDefault();
            var n = t(e.target)
              , i = n.closest("a").data("action");
            i && this[i](),
            this.update(),
            n.is("input") && n.get(0).setSelectionRange(0, 2)
        },
        widgetKeydown: function(e) {
            var n = t(e.target)
              , i = n.data("name");
            switch (e.keyCode) {
            case 9:
                if (this.showMeridian && "meridian" === i || this.showSeconds && "second" === i || !this.showMeridian && !this.showSeconds && "minute" === i)
                    return this.hideWidget();
                break;
            case 27:
                this.hideWidget();
                break;
            case 38:
                switch (e.preventDefault(),
                i) {
                case "hour":
                    this.incrementHour();
                    break;
                case "minute":
                    this.incrementMinute();
                    break;
                case "second":
                    this.incrementSecond();
                    break;
                case "meridian":
                    this.toggleMeridian()
                }
                this.setTime(this.getTime()),
                n.get(0).setSelectionRange(0, 2);
                break;
            case 40:
                switch (e.preventDefault(),
                i) {
                case "hour":
                    this.decrementHour();
                    break;
                case "minute":
                    this.decrementMinute();
                    break;
                case "second":
                    this.decrementSecond();
                    break;
                case "meridian":
                    this.toggleMeridian()
                }
                this.setTime(this.getTime()),
                n.get(0).setSelectionRange(0, 2)
            }
        },
        widgetKeyup: function(t) {
            (65 === t.keyCode || 77 === t.keyCode || 80 === t.keyCode || 46 === t.keyCode || 8 === t.keyCode || t.keyCode >= 46 && t.keyCode <= 57) && this.updateFromWidgetInputs()
        }
    },
    t.fn.timepicker = function(e) {
        var n = Array.apply(null , arguments);
        return n.shift(),
        this.each(function() {
            var i = t(this)
              , r = i.data("timepicker")
              , s = "object" == typeof e && e;
            r || i.data("timepicker", r = new o(this,t.extend({}, t.fn.timepicker.defaults, s, t(this).data()))),
            "string" == typeof e && r[e].apply(r, n)
        }
        )
    }
    ,
    t.fn.timepicker.defaults = {
        defaultTime: "current",
        disableFocus: !1,
        disableMousewheel: !1,
        isOpen: !1,
        minuteStep: 15,
        modalBackdrop: !1,
        orientation: {
            x: "auto",
            y: "auto"
        },
        secondStep: 15,
        showSeconds: !1,
        showInputs: !0,
        showMeridian: !0,
        template: "dropdown",
        appendWidgetTo: "body",
        showWidgetOnAddonClick: !0
    },
    t.fn.timepicker.Constructor = o
}
(jQuery, window, document),
define("enketo-widget/time/bootstrap3-timepicker/js/bootstrap-timepicker", ["jquery"], function(t) {
    return function() {
        var e;
        return e || t.jQuery.fn.timepicker
    }
}
(this)),
define("enketo-widget/time/timepicker-extended", ["enketo-js/Widget", "enketo-js/support", "jquery", "enketo-widget/time/bootstrap3-timepicker/js/bootstrap-timepicker"], function(t, e, n) {
    "use strict";
    function i(e, n) {
        this.namespace = o,
        t.call(this, e, n),
        this._init()
    }
    var o = "timepickerExtended";
    return i.prototype = Object.create(t.prototype),
    i.prototype.constructor = i,
    i.prototype._init = function() {
        var t = n(this.element)
          , e = n(this.element).val()
          , i = n('<div class="widget bootstrap-timepicker"><input class="ignore timepicker-default input-small" readonly="readonly" type="text" value="' + e + '" placeholder="hh:mm" /><button class="btn-icon-only btn-reset" type="button"><i class="icon icon-refresh"> </i></button></div>')
          , o = i.find(".btn-reset")
          , r = i.find("input");
        t.next(".widget.bootstrap-timepicker-component").remove(),
        t.hide().after(i),
        r.timepicker({
            defaultTime: e.length > 0 ? e : "current",
            showMeridian: !1
        }).val(e).closest(".widget").find("input").addClass("ignore"),
        r.on("change", function() {
            var e = n(this)
              , i = /^[0-9]:/.test(e.val()) ? "0" + e.val() : e.val();
            return i = /^[0-9]{2}:$/.test(i) ? i + "00" : i,
            t.val(i).trigger("change").blur(),
            !1
        }
        ),
        o.on("click", function() {
            r.val("").trigger("change")
        }
        ),
        r.on("focus blur", function(e) {
            t.trigger("fake" + e.type)
        }
        )
    }
    ,
    n.fn[o] = function(t, r) {
        return t = t || {},
        this.each(function() {
            var s = n(this)
              , a = s.data(o);
            a || "object" != typeof t || t.touch && e.inputtypes.time ? a && "string" == typeof t && a[t](this) : s.data(o, a = new i(this,t,r))
        }
        )
    }
    ,
    o
}
),
function(t, e) {
    function n() {
        return new Date(Date.UTC.apply(Date, arguments))
    }
    function i() {
        var t = new Date;
        return n(t.getFullYear(), t.getMonth(), t.getDate())
    }
    function o(t) {
        return function() {
            return this[t].apply(this, arguments)
        }
    }
    function r(e, n) {
        function i(t, e) {
            return e.toLowerCase()
        }
        var o, r = t(e).data(), s = {}, a = new RegExp("^" + n.toLowerCase() + "([A-Z])");
        n = new RegExp("^" + n.toLowerCase());
        for (var l in r)
            n.test(l) && (o = l.replace(a, i),
            s[o] = r[l]);
        return s
    }
    function s(e) {
        var n = {};
        if (f[e] || (e = e.split("-")[0],
        f[e])) {
            var i = f[e];
            return t.each(p, function(t, e) {
                e in i && (n[e] = i[e])
            }
            ),
            n
        }
    }
    var a = t(window)
      , l = function() {
        var e = {
            get: function(t) {
                return this.slice(t)[0]
            },
            contains: function(t) {
                for (var e = t && t.valueOf(), n = 0, i = this.length; i > n; n++)
                    if (this[n].valueOf() === e)
                        return n;
                return -1
            },
            remove: function(t) {
                this.splice(t, 1)
            },
            replace: function(e) {
                e && (t.isArray(e) || (e = [e]),
                this.clear(),
                this.push.apply(this, e))
            },
            clear: function() {
                this.length = 0
            },
            copy: function() {
                var t = new l;
                return t.replace(this),
                t
            }
        };
        return function() {
            var n = [];
            return n.push.apply(n, arguments),
            t.extend(n, e),
            n
        }
    }
    ()
      , u = function(e, n) {
        this.dates = new l,
        this.viewDate = i(),
        this.focusDate = null ,
        this._process_options(n),
        this.element = t(e),
        this.isInline = !1,
        this.isInput = this.element.is("input"),
        this.component = this.element.is(".date") ? this.element.find(".add-on, .input-group-addon, .btn") : !1,
        this.hasInput = this.component && this.element.find("input").length,
        this.component && 0 === this.component.length && (this.component = !1),
        this.picker = t(m.template),
        this._buildEvents(),
        this._attachEvents(),
        this.isInline ? this.picker.addClass("datepicker-inline").appendTo(this.element) : this.picker.addClass("datepicker-dropdown dropdown-menu"),
        this.o.rtl && this.picker.addClass("datepicker-rtl"),
        this.viewMode = this.o.startView,
        this.o.calendarWeeks && this.picker.find("tfoot th.today").attr("colspan", function(t, e) {
            return parseInt(e) + 1
        }
        ),
        this._allow_update = !1,
        this.setStartDate(this._o.startDate),
        this.setEndDate(this._o.endDate),
        this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),
        this.fillDow(),
        this.fillMonths(),
        this._allow_update = !0,
        this.update(),
        this.showMode(),
        this.isInline && this.show()
    }
    ;
    u.prototype = {
        constructor: u,
        _process_options: function(e) {
            this._o = t.extend({}, this._o, e);
            var n = this.o = t.extend({}, this._o)
              , i = n.language;
            switch (f[i] || (i = i.split("-")[0],
            f[i] || (i = d.language)),
            n.language = i,
            n.startView) {
            case 2:
            case "decade":
                n.startView = 2;
                break;
            case 1:
            case "year":
                n.startView = 1;
                break;
            default:
                n.startView = 0
            }
            switch (n.minViewMode) {
            case 1:
            case "months":
                n.minViewMode = 1;
                break;
            case 2:
            case "years":
                n.minViewMode = 2;
                break;
            default:
                n.minViewMode = 0
            }
            n.startView = Math.max(n.startView, n.minViewMode),
            n.multidate !== !0 && (n.multidate = Number(n.multidate) || !1,
            n.multidate !== !1 ? n.multidate = Math.max(0, n.multidate) : n.multidate = 1),
            n.multidateSeparator = String(n.multidateSeparator),
            n.weekStart %= 7,
            n.weekEnd = (n.weekStart + 6) % 7;
            var o = m.parseFormat(n.format);
            n.startDate !== -(1 / 0) && (n.startDate ? n.startDate instanceof Date ? n.startDate = this._local_to_utc(this._zero_time(n.startDate)) : n.startDate = m.parseDate(n.startDate, o, n.language) : n.startDate = -(1 / 0)),
            n.endDate !== 1 / 0 && (n.endDate ? n.endDate instanceof Date ? n.endDate = this._local_to_utc(this._zero_time(n.endDate)) : n.endDate = m.parseDate(n.endDate, o, n.language) : n.endDate = 1 / 0),
            n.daysOfWeekDisabled = n.daysOfWeekDisabled || [],
            t.isArray(n.daysOfWeekDisabled) || (n.daysOfWeekDisabled = n.daysOfWeekDisabled.split(/[,\s]*/)),
            n.daysOfWeekDisabled = t.map(n.daysOfWeekDisabled, function(t) {
                return parseInt(t, 10)
            }
            );
            var r = String(n.orientation).toLowerCase().split(/\s+/g)
              , s = n.orientation.toLowerCase();
            if (r = t.grep(r, function(t) {
                return /^auto|left|right|top|bottom$/.test(t)
            }
            ),
            n.orientation = {
                x: "auto",
                y: "auto"
            },
            s && "auto" !== s)
                if (1 === r.length)
                    switch (r[0]) {
                    case "top":
                    case "bottom":
                        n.orientation.y = r[0];
                        break;
                    case "left":
                    case "right":
                        n.orientation.x = r[0]
                    }
                else
                    s = t.grep(r, function(t) {
                        return /^left|right$/.test(t)
                    }
                    ),
                    n.orientation.x = s[0] || "auto",
                    s = t.grep(r, function(t) {
                        return /^top|bottom$/.test(t)
                    }
                    ),
                    n.orientation.y = s[0] || "auto";
            else
                ;
        },
        _events: [],
        _secondaryEvents: [],
        _applyEvents: function(t) {
            for (var n, i, o, r = 0; r < t.length; r++)
                n = t[r][0],
                2 === t[r].length ? (i = e,
                o = t[r][1]) : 3 === t[r].length && (i = t[r][1],
                o = t[r][2]),
                n.on(o, i)
        },
        _unapplyEvents: function(t) {
            for (var n, i, o, r = 0; r < t.length; r++)
                n = t[r][0],
                2 === t[r].length ? (o = e,
                i = t[r][1]) : 3 === t[r].length && (o = t[r][1],
                i = t[r][2]),
                n.off(i, o)
        },
        _buildEvents: function() {
            this.isInput ? this._events = [[this.element, {
                focus: t.proxy(this.show, this),
                keyup: t.proxy(function(e) {
                    -1 === t.inArray(e.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) && this.update()
                }
                , this),
                keydown: t.proxy(this.keydown, this)
            }]] : this.component && this.hasInput ? this._events = [[this.element.find("input"), {
                focus: t.proxy(this.show, this),
                keyup: t.proxy(function(e) {
                    -1 === t.inArray(e.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) && this.update()
                }
                , this),
                keydown: t.proxy(this.keydown, this)
            }], [this.component, {
                click: t.proxy(this.show, this)
            }]] : this.element.is("div") ? this.isInline = !0 : this._events = [[this.element, {
                click: t.proxy(this.show, this)
            }]],
            this._events.push([this.element, "*", {
                blur: t.proxy(function(t) {
                    this._focused_from = t.target
                }
                , this)
            }], [this.element, {
                blur: t.proxy(function(t) {
                    this._focused_from = t.target
                }
                , this)
            }]),
            this._secondaryEvents = [[this.picker, {
                click: t.proxy(this.click, this)
            }], [t(window), {
                resize: t.proxy(this.place, this)
            }], [t(document), {
                "mousedown touchstart": t.proxy(function(t) {
                    this.element.is(t.target) || this.element.find(t.target).length || this.picker.is(t.target) || this.picker.find(t.target).length || this.hide()
                }
                , this)
            }]]
        },
        _attachEvents: function() {
            this._detachEvents(),
            this._applyEvents(this._events)
        },
        _detachEvents: function() {
            this._unapplyEvents(this._events)
        },
        _attachSecondaryEvents: function() {
            this._detachSecondaryEvents(),
            this._applyEvents(this._secondaryEvents)
        },
        _detachSecondaryEvents: function() {
            this._unapplyEvents(this._secondaryEvents)
        },
        _trigger: function(e, n) {
            var i = n || this.dates.get(-1)
              , o = this._utc_to_local(i);
            this.element.trigger({
                type: e,
                date: o,
                dates: t.map(this.dates, this._utc_to_local),
                format: t.proxy(function(t, e) {
                    0 === arguments.length ? (t = this.dates.length - 1,
                    e = this.o.format) : "string" == typeof t && (e = t,
                    t = this.dates.length - 1),
                    e = e || this.o.format;
                    var n = this.dates.get(t);
                    return m.formatDate(n, e, this.o.language)
                }
                , this)
            })
        },
        show: function() {
            this.isInline || this.picker.appendTo("body"),
            this.picker.show(),
            this.place(),
            this._attachSecondaryEvents(),
            this._trigger("show")
        },
        hide: function() {
            this.isInline || this.picker.is(":visible") && (this.focusDate = null ,
            this.picker.hide().detach(),
            this._detachSecondaryEvents(),
            this.viewMode = this.o.startView,
            this.showMode(),
            this.o.forceParse && (this.isInput && this.element.val() || this.hasInput && this.element.find("input").val()) && this.setValue(),
            this._trigger("hide"))
        },
        remove: function() {
            this.hide(),
            this._detachEvents(),
            this._detachSecondaryEvents(),
            this.picker.remove(),
            delete this.element.data().datepicker,
            this.isInput || delete this.element.data().date
        },
        _utc_to_local: function(t) {
            return t && new Date(t.getTime() + 6e4 * t.getTimezoneOffset())
        },
        _local_to_utc: function(t) {
            return t && new Date(t.getTime() - 6e4 * t.getTimezoneOffset())
        },
        _zero_time: function(t) {
            return t && new Date(t.getFullYear(),t.getMonth(),t.getDate())
        },
        _zero_utc_time: function(t) {
            return t && new Date(Date.UTC(t.getUTCFullYear(), t.getUTCMonth(), t.getUTCDate()))
        },
        getDates: function() {
            return t.map(this.dates, this._utc_to_local)
        },
        getUTCDates: function() {
            return t.map(this.dates, function(t) {
                return new Date(t)
            }
            )
        },
        getDate: function() {
            return this._utc_to_local(this.getUTCDate())
        },
        getUTCDate: function() {
            return new Date(this.dates.get(-1))
        },
        setDates: function() {
            var e = t.isArray(arguments[0]) ? arguments[0] : arguments;
            this.update.apply(this, e),
            this._trigger("changeDate"),
            this.setValue()
        },
        setUTCDates: function() {
            var e = t.isArray(arguments[0]) ? arguments[0] : arguments;
            this.update.apply(this, t.map(e, this._utc_to_local)),
            this._trigger("changeDate"),
            this.setValue()
        },
        setDate: o("setDates"),
        setUTCDate: o("setUTCDates"),
        setValue: function() {
            var t = this.getFormattedDate();
            this.isInput ? this.element.val(t).change() : this.component && this.element.find("input").val(t).change()
        },
        getFormattedDate: function(n) {
            n === e && (n = this.o.format);
            var i = this.o.language;
            return t.map(this.dates, function(t) {
                return m.formatDate(t, n, i)
            }
            ).join(this.o.multidateSeparator)
        },
        setStartDate: function(t) {
            this._process_options({
                startDate: t
            }),
            this.update(),
            this.updateNavArrows()
        },
        setEndDate: function(t) {
            this._process_options({
                endDate: t
            }),
            this.update(),
            this.updateNavArrows()
        },
        setDaysOfWeekDisabled: function(t) {
            this._process_options({
                daysOfWeekDisabled: t
            }),
            this.update(),
            this.updateNavArrows()
        },
        place: function() {
            if (!this.isInline) {
                var e = this.picker.outerWidth()
                  , n = this.picker.outerHeight()
                  , i = 10
                  , o = a.width()
                  , r = a.height()
                  , s = a.scrollTop()
                  , l = parseInt(this.element.parents().filter(function() {
                    return "auto" !== t(this).css("z-index")
                }
                ).first().css("z-index")) + 10
                  , u = this.component ? this.component.parent().offset() : this.element.offset()
                  , c = this.component ? this.component.outerHeight(!0) : this.element.outerHeight(!1)
                  , h = this.component ? this.component.outerWidth(!0) : this.element.outerWidth(!1)
                  , d = u.left
                  , p = u.top;
                this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),
                "auto" !== this.o.orientation.x ? (this.picker.addClass("datepicker-orient-" + this.o.orientation.x),
                "right" === this.o.orientation.x && (d -= e - h)) : (this.picker.addClass("datepicker-orient-left"),
                u.left < 0 ? d -= u.left - i : u.left + e > o && (d = o - e - i));
                var f, m, g = this.o.orientation.y;
                "auto" === g && (f = -s + u.top - n,
                m = s + r - (u.top + c + n),
                g = Math.max(f, m) === m ? "top" : "bottom"),
                this.picker.addClass("datepicker-orient-" + g),
                "top" === g ? p += c : p -= n + parseInt(this.picker.css("padding-top")),
                this.picker.css({
                    top: p,
                    left: d,
                    zIndex: l
                })
            }
        },
        _allow_update: !0,
        update: function() {
            if (this._allow_update) {
                var e = this.dates.copy()
                  , n = []
                  , i = !1;
                arguments.length ? (t.each(arguments, t.proxy(function(t, e) {
                    e instanceof Date && (e = this._local_to_utc(e)),
                    n.push(e)
                }
                , this)),
                i = !0) : (n = this.isInput ? this.element.val() : this.element.data("date") || this.element.find("input").val(),
                n = n && this.o.multidate ? n.split(this.o.multidateSeparator) : [n],
                delete this.element.data().date),
                n = t.map(n, t.proxy(function(t) {
                    return m.parseDate(t, this.o.format, this.o.language)
                }
                , this)),
                n = t.grep(n, t.proxy(function(t) {
                    return t < this.o.startDate || t > this.o.endDate || !t
                }
                , this), !0),
                this.dates.replace(n),
                this.dates.length ? this.viewDate = new Date(this.dates.get(-1)) : this.viewDate < this.o.startDate ? this.viewDate = new Date(this.o.startDate) : this.viewDate > this.o.endDate && (this.viewDate = new Date(this.o.endDate)),
                i ? this.setValue() : n.length && String(e) !== String(this.dates) && this._trigger("changeDate"),
                !this.dates.length && e.length && this._trigger("clearDate"),
                this.fill()
            }
        },
        fillDow: function() {
            var t = this.o.weekStart
              , e = "<tr>";
            if (this.o.calendarWeeks) {
                var n = '<th class="cw">&nbsp;</th>';
                e += n,
                this.picker.find(".datepicker-days thead tr:first-child").prepend(n)
            }
            for (; t < this.o.weekStart + 7; )
                e += '<th class="dow">' + f[this.o.language].daysMin[t++ % 7] + "</th>";
            e += "</tr>",
            this.picker.find(".datepicker-days thead").append(e)
        },
        fillMonths: function() {
            for (var t = "", e = 0; 12 > e; )
                t += '<span class="month">' + f[this.o.language].monthsShort[e++] + "</span>";
            this.picker.find(".datepicker-months td").html(t)
        },
        setRange: function(e) {
            e && e.length ? this.range = t.map(e, function(t) {
                return t.valueOf()
            }
            ) : delete this.range,
            this.fill()
        },
        getClassNames: function(e) {
            var n = []
              , i = this.viewDate.getUTCFullYear()
              , o = this.viewDate.getUTCMonth()
              , r = new Date;
            return e.getUTCFullYear() < i || e.getUTCFullYear() === i && e.getUTCMonth() < o ? n.push("old") : (e.getUTCFullYear() > i || e.getUTCFullYear() === i && e.getUTCMonth() > o) && n.push("new"),
            this.focusDate && e.valueOf() === this.focusDate.valueOf() && n.push("focused"),
            this.o.todayHighlight && e.getUTCFullYear() === r.getFullYear() && e.getUTCMonth() === r.getMonth() && e.getUTCDate() === r.getDate() && n.push("today"),
            -1 !== this.dates.contains(e) && n.push("active"),
            (e.valueOf() < this.o.startDate || e.valueOf() > this.o.endDate || -1 !== t.inArray(e.getUTCDay(), this.o.daysOfWeekDisabled)) && n.push("disabled"),
            this.range && (e > this.range[0] && e < this.range[this.range.length - 1] && n.push("range"),
            -1 !== t.inArray(e.valueOf(), this.range) && n.push("selected")),
            n
        },
        fill: function() {
            var i, o = new Date(this.viewDate), r = o.getUTCFullYear(), s = o.getUTCMonth(), a = this.o.startDate !== -(1 / 0) ? this.o.startDate.getUTCFullYear() : -(1 / 0), l = this.o.startDate !== -(1 / 0) ? this.o.startDate.getUTCMonth() : -(1 / 0), u = this.o.endDate !== 1 / 0 ? this.o.endDate.getUTCFullYear() : 1 / 0, c = this.o.endDate !== 1 / 0 ? this.o.endDate.getUTCMonth() : 1 / 0, h = f[this.o.language].today || f.en.today || "", d = f[this.o.language].clear || f.en.clear || "";
            this.picker.find(".datepicker-days thead th.datepicker-switch").text(f[this.o.language].months[s] + " " + r),
            this.picker.find("tfoot th.today").text(h).toggle(this.o.todayBtn !== !1),
            this.picker.find("tfoot th.clear").text(d).toggle(this.o.clearBtn !== !1),
            this.updateNavArrows(),
            this.fillMonths();
            var p = n(r, s - 1, 28)
              , g = m.getDaysInMonth(p.getUTCFullYear(), p.getUTCMonth());
            p.setUTCDate(g),
            p.setUTCDate(g - (p.getUTCDay() - this.o.weekStart + 7) % 7);
            var v = new Date(p);
            v.setUTCDate(v.getUTCDate() + 42),
            v = v.valueOf();
            for (var y, b = []; p.valueOf() < v; ) {
                if (p.getUTCDay() === this.o.weekStart && (b.push("<tr>"),
                this.o.calendarWeeks)) {
                    var _ = new Date(+p + (this.o.weekStart - p.getUTCDay() - 7) % 7 * 864e5)
                      , w = new Date(Number(_) + (11 - _.getUTCDay()) % 7 * 864e5)
                      , x = new Date(Number(x = n(w.getUTCFullYear(), 0, 1)) + (11 - x.getUTCDay()) % 7 * 864e5)
                      , T = (w - x) / 864e5 / 7 + 1;
                    b.push('<td class="cw">' + T + "</td>")
                }
                if (y = this.getClassNames(p),
                y.push("day"),
                this.o.beforeShowDay !== t.noop) {
                    var k = this.o.beforeShowDay(this._utc_to_local(p));
                    k === e ? k = {} : "boolean" == typeof k ? k = {
                        enabled: k
                    } : "string" == typeof k && (k = {
                        classes: k
                    }),
                    k.enabled === !1 && y.push("disabled"),
                    k.classes && (y = y.concat(k.classes.split(/\s+/))),
                    k.tooltip && (i = k.tooltip)
                }
                y = t.unique(y),
                b.push('<td class="' + y.join(" ") + '"' + (i ? ' title="' + i + '"' : "") + ">" + p.getUTCDate() + "</td>"),
                p.getUTCDay() === this.o.weekEnd && b.push("</tr>"),
                p.setUTCDate(p.getUTCDate() + 1)
            }
            this.picker.find(".datepicker-days tbody").empty().append(b.join(""));
            var E = this.picker.find(".datepicker-months").find("th:eq(1)").text(r).end().find("span").removeClass("active");
            t.each(this.dates, function(t, e) {
                e.getUTCFullYear() === r && E.eq(e.getUTCMonth()).addClass("active")
            }
            ),
            (a > r || r > u) && E.addClass("disabled"),
            r === a && E.slice(0, l).addClass("disabled"),
            r === u && E.slice(c + 1).addClass("disabled"),
            b = "",
            r = 10 * parseInt(r / 10, 10);
            var D = this.picker.find(".datepicker-years").find("th:eq(1)").text(r + "-" + (r + 9)).end().find("td");
            r -= 1;
            for (var S, C = t.map(this.dates, function(t) {
                return t.getUTCFullYear()
            }
            ), P = -1; 11 > P; P++)
                S = ["year"],
                -1 === P ? S.push("old") : 10 === P && S.push("new"),
                -1 !== t.inArray(r, C) && S.push("active"),
                (a > r || r > u) && S.push("disabled"),
                b += '<span class="' + S.join(" ") + '">' + r + "</span>",
                r += 1;
            D.html(b)
        },
        updateNavArrows: function() {
            if (this._allow_update) {
                var t = new Date(this.viewDate)
                  , e = t.getUTCFullYear()
                  , n = t.getUTCMonth();
                switch (this.viewMode) {
                case 0:
                    this.o.startDate !== -(1 / 0) && e <= this.o.startDate.getUTCFullYear() && n <= this.o.startDate.getUTCMonth() ? this.picker.find(".prev").css({
                        visibility: "hidden"
                    }) : this.picker.find(".prev").css({
                        visibility: "visible"
                    }),
                    this.o.endDate !== 1 / 0 && e >= this.o.endDate.getUTCFullYear() && n >= this.o.endDate.getUTCMonth() ? this.picker.find(".next").css({
                        visibility: "hidden"
                    }) : this.picker.find(".next").css({
                        visibility: "visible"
                    });
                    break;
                case 1:
                case 2:
                    this.o.startDate !== -(1 / 0) && e <= this.o.startDate.getUTCFullYear() ? this.picker.find(".prev").css({
                        visibility: "hidden"
                    }) : this.picker.find(".prev").css({
                        visibility: "visible"
                    }),
                    this.o.endDate !== 1 / 0 && e >= this.o.endDate.getUTCFullYear() ? this.picker.find(".next").css({
                        visibility: "hidden"
                    }) : this.picker.find(".next").css({
                        visibility: "visible"
                    })
                }
            }
        },
        click: function(e) {
            e.preventDefault();
            var i, o, r, s = t(e.target).closest("span, td, th");
            if (1 === s.length)
                switch (s[0].nodeName.toLowerCase()) {
                case "th":
                    switch (s[0].className) {
                    case "datepicker-switch":
                        this.showMode(1);
                        break;
                    case "prev":
                    case "next":
                        var a = m.modes[this.viewMode].navStep * ("prev" === s[0].className ? -1 : 1);
                        switch (this.viewMode) {
                        case 0:
                            this.viewDate = this.moveMonth(this.viewDate, a),
                            this._trigger("changeMonth", this.viewDate);
                            break;
                        case 1:
                        case 2:
                            this.viewDate = this.moveYear(this.viewDate, a),
                            1 === this.viewMode && this._trigger("changeYear", this.viewDate)
                        }
                        this.fill();
                        break;
                    case "today":
                        var l = new Date;
                        l = n(l.getFullYear(), l.getMonth(), l.getDate(), 0, 0, 0),
                        this.showMode(-2);
                        var u = "linked" === this.o.todayBtn ? null  : "view";
                        this._setDate(l, u);
                        break;
                    case "clear":
                        var c;
                        this.isInput ? c = this.element : this.component && (c = this.element.find("input")),
                        c && c.val("").change(),
                        this.update(),
                        this._trigger("changeDate"),
                        this.o.autoclose && this.hide()
                    }
                    break;
                case "span":
                    s.is(".disabled") || (this.viewDate.setUTCDate(1),
                    s.is(".month") ? (r = 1,
                    o = s.parent().find("span").index(s),
                    i = this.viewDate.getUTCFullYear(),
                    this.viewDate.setUTCMonth(o),
                    this._trigger("changeMonth", this.viewDate),
                    1 === this.o.minViewMode && this._setDate(n(i, o, r))) : (r = 1,
                    o = 0,
                    i = parseInt(s.text(), 10) || 0,
                    this.viewDate.setUTCFullYear(i),
                    this._trigger("changeYear", this.viewDate),
                    2 === this.o.minViewMode && this._setDate(n(i, o, r))),
                    this.showMode(-1),
                    this.fill());
                    break;
                case "td":
                    s.is(".day") && !s.is(".disabled") && (r = parseInt(s.text(), 10) || 1,
                    i = this.viewDate.getUTCFullYear(),
                    o = this.viewDate.getUTCMonth(),
                    s.is(".old") ? 0 === o ? (o = 11,
                    i -= 1) : o -= 1 : s.is(".new") && (11 === o ? (o = 0,
                    i += 1) : o += 1),
                    this._setDate(n(i, o, r)))
                }
            this.picker.is(":visible") && this._focused_from && t(this._focused_from).focus(),
            delete this._focused_from
        },
        _toggle_multidate: function(t) {
            var e = this.dates.contains(t);
            if (t ? -1 !== e ? this.dates.remove(e) : this.dates.push(t) : this.dates.clear(),
            "number" == typeof this.o.multidate)
                for (; this.dates.length > this.o.multidate; )
                    this.dates.remove(0)
        },
        _setDate: function(t, e) {
            e && "date" !== e || this._toggle_multidate(t && new Date(t)),
            e && "view" !== e || (this.viewDate = t && new Date(t)),
            this.fill(),
            this.setValue(),
            this._trigger("changeDate");
            var n;
            this.isInput ? n = this.element : this.component && (n = this.element.find("input")),
            n && n.change(),
            !this.o.autoclose || e && "date" !== e || this.hide()
        },
        moveMonth: function(t, n) {
            if (!t)
                return e;
            if (!n)
                return t;
            var i, o, r = new Date(t.valueOf()), s = r.getUTCDate(), a = r.getUTCMonth(), l = Math.abs(n);
            if (n = n > 0 ? 1 : -1,
            1 === l)
                o = -1 === n ? function() {
                    return r.getUTCMonth() === a
                }
                 : function() {
                    return r.getUTCMonth() !== i
                }
                ,
                i = a + n,
                r.setUTCMonth(i),
                (0 > i || i > 11) && (i = (i + 12) % 12);
            else {
                for (var u = 0; l > u; u++)
                    r = this.moveMonth(r, n);
                i = r.getUTCMonth(),
                r.setUTCDate(s),
                o = function() {
                    return i !== r.getUTCMonth()
                }
            }
            for (; o(); )
                r.setUTCDate(--s),
                r.setUTCMonth(i);
            return r
        },
        moveYear: function(t, e) {
            return this.moveMonth(t, 12 * e)
        },
        dateWithinRange: function(t) {
            return t >= this.o.startDate && t <= this.o.endDate
        },
        keydown: function(t) {
            if (this.picker.is(":not(:visible)"))
                return void (27 === t.keyCode && this.show());
            var e, n, o, r = !1, s = this.focusDate || this.viewDate;
            switch (t.keyCode) {
            case 27:
                this.focusDate ? (this.focusDate = null ,
                this.viewDate = this.dates.get(-1) || this.viewDate,
                this.fill()) : this.hide(),
                t.preventDefault();
                break;
            case 37:
            case 39:
                if (!this.o.keyboardNavigation)
                    break;
                e = 37 === t.keyCode ? -1 : 1,
                t.ctrlKey ? (n = this.moveYear(this.dates.get(-1) || i(), e),
                o = this.moveYear(s, e),
                this._trigger("changeYear", this.viewDate)) : t.shiftKey ? (n = this.moveMonth(this.dates.get(-1) || i(), e),
                o = this.moveMonth(s, e),
                this._trigger("changeMonth", this.viewDate)) : (n = new Date(this.dates.get(-1) || i()),
                n.setUTCDate(n.getUTCDate() + e),
                o = new Date(s),
                o.setUTCDate(s.getUTCDate() + e)),
                this.dateWithinRange(n) && (this.focusDate = this.viewDate = o,
                this.setValue(),
                this.fill(),
                t.preventDefault());
                break;
            case 38:
            case 40:
                if (!this.o.keyboardNavigation)
                    break;
                e = 38 === t.keyCode ? -1 : 1,
                t.ctrlKey ? (n = this.moveYear(this.dates.get(-1) || i(), e),
                o = this.moveYear(s, e),
                this._trigger("changeYear", this.viewDate)) : t.shiftKey ? (n = this.moveMonth(this.dates.get(-1) || i(), e),
                o = this.moveMonth(s, e),
                this._trigger("changeMonth", this.viewDate)) : (n = new Date(this.dates.get(-1) || i()),
                n.setUTCDate(n.getUTCDate() + 7 * e),
                o = new Date(s),
                o.setUTCDate(s.getUTCDate() + 7 * e)),
                this.dateWithinRange(n) && (this.focusDate = this.viewDate = o,
                this.setValue(),
                this.fill(),
                t.preventDefault());
                break;
            case 32:
                break;
            case 13:
                s = this.focusDate || this.dates.get(-1) || this.viewDate,
                this._toggle_multidate(s),
                r = !0,
                this.focusDate = null ,
                this.viewDate = this.dates.get(-1) || this.viewDate,
                this.setValue(),
                this.fill(),
                this.picker.is(":visible") && (t.preventDefault(),
                this.o.autoclose && this.hide());
                break;
            case 9:
                this.focusDate = null ,
                this.viewDate = this.dates.get(-1) || this.viewDate,
                this.fill(),
                this.hide()
            }
            if (r) {
                this.dates.length ? this._trigger("changeDate") : this._trigger("clearDate");
                var a;
                this.isInput ? a = this.element : this.component && (a = this.element.find("input")),
                a && a.change()
            }
        },
        showMode: function(t) {
            t && (this.viewMode = Math.max(this.o.minViewMode, Math.min(2, this.viewMode + t))),
            this.picker.find(">div").hide().filter(".datepicker-" + m.modes[this.viewMode].clsName).css("display", "block"),
            this.updateNavArrows()
        }
    };
    var c = function(e, n) {
        this.element = t(e),
        this.inputs = t.map(n.inputs, function(t) {
            return t.jquery ? t[0] : t
        }
        ),
        delete n.inputs,
        t(this.inputs).datepicker(n).bind("changeDate", t.proxy(this.dateUpdated, this)),
        this.pickers = t.map(this.inputs, function(e) {
            return t(e).data("datepicker")
        }
        ),
        this.updateDates()
    }
    ;
    c.prototype = {
        updateDates: function() {
            this.dates = t.map(this.pickers, function(t) {
                return t.getUTCDate()
            }
            ),
            this.updateRanges()
        },
        updateRanges: function() {
            var e = t.map(this.dates, function(t) {
                return t.valueOf()
            }
            );
            t.each(this.pickers, function(t, n) {
                n.setRange(e)
            }
            )
        },
        dateUpdated: function(e) {
            if (!this.updating) {
                this.updating = !0;
                var n = t(e.target).data("datepicker")
                  , i = n.getUTCDate()
                  , o = t.inArray(e.target, this.inputs)
                  , r = this.inputs.length;
                if (-1 !== o) {
                    if (t.each(this.pickers, function(t, e) {
                        e.getUTCDate() || e.setUTCDate(i)
                    }
                    ),
                    i < this.dates[o])
                        for (; o >= 0 && i < this.dates[o]; )
                            this.pickers[o--].setUTCDate(i);
                    else if (i > this.dates[o])
                        for (; r > o && i > this.dates[o]; )
                            this.pickers[o++].setUTCDate(i);
                    this.updateDates(),
                    delete this.updating
                }
            }
        },
        remove: function() {
            t.map(this.pickers, function(t) {
                t.remove()
            }
            ),
            delete this.element.data().datepicker
        }
    };
    var h = t.fn.datepicker;
    t.fn.datepicker = function(n) {
        var i = Array.apply(null , arguments);
        i.shift();
        var o;
        return this.each(function() {
            var a = t(this)
              , l = a.data("datepicker")
              , h = "object" == typeof n && n;
            if (!l) {
                var p = r(this, "date")
                  , f = t.extend({}, d, p, h)
                  , m = s(f.language)
                  , g = t.extend({}, d, m, p, h);
                if (a.is(".input-daterange") || g.inputs) {
                    var v = {
                        inputs: g.inputs || a.find("input").toArray()
                    };
                    a.data("datepicker", l = new c(this,t.extend(g, v)))
                } else
                    a.data("datepicker", l = new u(this,g))
            }
            return "string" == typeof n && "function" == typeof l[n] && (o = l[n].apply(l, i),
            o !== e) ? !1 : void 0
        }
        ),
        o !== e ? o : this
    }
    ;
    var d = t.fn.datepicker.defaults = {
        autoclose: !1,
        beforeShowDay: t.noop,
        calendarWeeks: !1,
        clearBtn: !1,
        daysOfWeekDisabled: [],
        endDate: 1 / 0,
        forceParse: !0,
        format: "mm/dd/yyyy",
        keyboardNavigation: !0,
        language: "en",
        minViewMode: 0,
        multidate: !1,
        multidateSeparator: ",",
        orientation: "auto",
        rtl: !1,
        startDate: -(1 / 0),
        startView: 0,
        todayBtn: !1,
        todayHighlight: !1,
        weekStart: 0
    }
      , p = t.fn.datepicker.locale_opts = ["format", "rtl", "weekStart"];
    t.fn.datepicker.Constructor = u;
    var f = t.fn.datepicker.dates = {
        en: {
            days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
            daysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
            daysMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa", "Su"],
            months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthsShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            today: "Today",
            clear: "Clear"
        }
    }
      , m = {
        modes: [{
            clsName: "days",
            navFnc: "Month",
            navStep: 1
        }, {
            clsName: "months",
            navFnc: "FullYear",
            navStep: 1
        }, {
            clsName: "years",
            navFnc: "FullYear",
            navStep: 10
        }],
        isLeapYear: function(t) {
            return t % 4 === 0 && t % 100 !== 0 || t % 400 === 0
        },
        getDaysInMonth: function(t, e) {
            return [31, m.isLeapYear(t) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][e]
        },
        validParts: /dd?|DD?|mm?|MM?|yy(?:yy)?/g,
        nonpunctuation: /[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,
        parseFormat: function(t) {
            var e = t.replace(this.validParts, "\x00").split("\x00")
              , n = t.match(this.validParts);
            if (!e || !e.length || !n || 0 === n.length)
                throw new Error("Invalid date format.");
            return {
                separators: e,
                parts: n
            }
        },
        parseDate: function(i, o, r) {
            function s() {
                var t = this.slice(0, d[c].length)
                  , e = d[c].slice(0, t.length);
                return t === e
            }
            if (!i)
                return e;
            if (i instanceof Date)
                return i;
            "string" == typeof o && (o = m.parseFormat(o));
            var a, l, c, h = /([\-+]\d+)([dmwy])/, d = i.match(/([\-+]\d+)([dmwy])/g);
            if (/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)) {
                for (i = new Date,
                c = 0; c < d.length; c++)
                    switch (a = h.exec(d[c]),
                    l = parseInt(a[1]),
                    a[2]) {
                    case "d":
                        i.setUTCDate(i.getUTCDate() + l);
                        break;
                    case "m":
                        i = u.prototype.moveMonth.call(u.prototype, i, l);
                        break;
                    case "w":
                        i.setUTCDate(i.getUTCDate() + 7 * l);
                        break;
                    case "y":
                        i = u.prototype.moveYear.call(u.prototype, i, l)
                    }
                return n(i.getUTCFullYear(), i.getUTCMonth(), i.getUTCDate(), 0, 0, 0)
            }
            d = i && i.match(this.nonpunctuation) || [],
            i = new Date;
            var p, g, v = {}, y = ["yyyy", "yy", "M", "MM", "m", "mm", "d", "dd"], b = {
                yyyy: function(t, e) {
                    return t.setUTCFullYear(e)
                },
                yy: function(t, e) {
                    return t.setUTCFullYear(2e3 + e)
                },
                m: function(t, e) {
                    if (isNaN(t))
                        return t;
                    for (e -= 1; 0 > e; )
                        e += 12;
                    for (e %= 12,
                    t.setUTCMonth(e); t.getUTCMonth() !== e; )
                        t.setUTCDate(t.getUTCDate() - 1);
                    return t
                },
                d: function(t, e) {
                    return t.setUTCDate(e)
                }
            };
            b.M = b.MM = b.mm = b.m,
            b.dd = b.d,
            i = n(i.getFullYear(), i.getMonth(), i.getDate(), 0, 0, 0);
            var _ = o.parts.slice();
            if (d.length !== _.length && (_ = t(_).filter(function(e, n) {
                return -1 !== t.inArray(n, y)
            }
            ).toArray()),
            d.length === _.length) {
                var w;
                for (c = 0,
                w = _.length; w > c; c++) {
                    if (p = parseInt(d[c], 10),
                    a = _[c],
                    isNaN(p))
                        switch (a) {
                        case "MM":
                            g = t(f[r].months).filter(s),
                            p = t.inArray(g[0], f[r].months) + 1;
                            break;
                        case "M":
                            g = t(f[r].monthsShort).filter(s),
                            p = t.inArray(g[0], f[r].monthsShort) + 1
                        }
                    v[a] = p
                }
                var x, T;
                for (c = 0; c < y.length; c++)
                    T = y[c],
                    T in v && !isNaN(v[T]) && (x = new Date(i),
                    b[T](x, v[T]),
                    isNaN(x) || (i = x))
            }
            return i
        },
        formatDate: function(e, n, i) {
            if (!e)
                return "";
            "string" == typeof n && (n = m.parseFormat(n));
            var o = {
                d: e.getUTCDate(),
                D: f[i].daysShort[e.getUTCDay()],
                DD: f[i].days[e.getUTCDay()],
                m: e.getUTCMonth() + 1,
                M: f[i].monthsShort[e.getUTCMonth()],
                MM: f[i].months[e.getUTCMonth()],
                yy: e.getUTCFullYear().toString().substring(2),
                yyyy: e.getUTCFullYear()
            };
            o.dd = (o.d < 10 ? "0" : "") + o.d,
            o.mm = (o.m < 10 ? "0" : "") + o.m,
            e = [];
            for (var r = t.extend([], n.separators), s = 0, a = n.parts.length; a >= s; s++)
                r.length && e.push(r.shift()),
                e.push(o[n.parts[s]]);
            return e.join("")
        },
        headTemplate: '<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',
        contTemplate: '<tbody><tr><td colspan="7"></td></tr></tbody>',
        footTemplate: '<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'
    };
    m.template = '<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">' + m.headTemplate + "<tbody></tbody>" + m.footTemplate + '</table></div><div class="datepicker-months"><table class="table-condensed">' + m.headTemplate + m.contTemplate + m.footTemplate + '</table></div><div class="datepicker-years"><table class="table-condensed">' + m.headTemplate + m.contTemplate + m.footTemplate + "</table></div></div>",
    t.fn.datepicker.DPGlobal = m,
    t.fn.datepicker.noConflict = function() {
        return t.fn.datepicker = h,
        this
    }
    ,
    t(document).on("focus.datepicker.data-api click.datepicker.data-api", '[data-provide="datepicker"]', function(e) {
        var n = t(this);
        n.data("datepicker") || (e.preventDefault(),
        n.datepicker("show"))
    }
    ),
    t(function() {
        t('[data-provide="datepicker-inline"]').datepicker()
    }
    )
}
(window.jQuery),
define("enketo-widget/date/bootstrap3-datepicker/js/bootstrap-datepicker", ["jquery"], function(t) {
    return function() {
        var e;
        return e || t.jQuery.fn.datepicker
    }
}
(this)),
define("enketo-widget/date/datepicker-extended", ["enketo-js/Widget", "enketo-js/support", "jquery", "enketo-widget/date/bootstrap3-datepicker/js/bootstrap-datepicker"], function(t, e, n) {
    "use strict";
    function i(e, n) {
        this.namespace = o,
        t.call(this, e, n),
        this._init()
    }
    var o = "datepickerExtended";
    return i.prototype = Object.create(t.prototype),
    i.prototype.constructor = i,
    i.prototype._init = function() {
        var t = this
          , e = n(this.element).parent("label")
          , i = e.hasClass("or-appearance-year") ? {
            format: "yyyy",
            startView: "decade",
            minViewMode: "years"
        } : e.hasClass("or-appearance-month-year") ? {
            format: "yyyy-mm",
            startView: "year",
            minViewMode: "months"
        } : {
            format: "yyyy-mm-dd",
            startView: "month",
            minViewMode: "day"
        }
          , o = this._createFakeDateInput(i.format);
        this._setManualHandler(o),
        this._setFocusHandler(o),
        this._setResetHandler(o),
        o.datepicker({
            format: i.format,
            autoclose: !0,
            todayHighlight: !0,
            startView: i.startView,
            minViewMode: i.minViewMode,
            orientation: "top"
        }).on("changeDate", function() {
            var e = n(this).val();
            "decade" === i.startView && 4 === e.length ? e += "-01-01" : "year" === i.startView && e.length < 8 && (e += "-01"),
            n(t.element).val(e).trigger("change").blur()
        }
        )
    }
    ,
    i.prototype._createFakeDateInput = function(t) {
        var e = n(this.element)
          , i = n('<div class="widget date"><input class="ignore input-small" readonly="readonly" type="text" value="' + e.val() + '" placeholder="' + t + '" /><button class="btn-icon-only btn-reset" type="button"><i class="icon icon-refresh"> </i></button></div>')
          , o = i.find("input");
        return e.hide().after(i),
        o
    }
    ,
    i.prototype._setManualHandler = function(t) {}
    ,
    i.prototype._setResetHandler = function(t) {
        t.next(".btn-reset").on("click", function() {
            t.val("").trigger("changeDate").datepicker("update")
        }
        )
    }
    ,
    i.prototype._setFocusHandler = function(t) {
        var e = this;
        t.on("focus blur", function(t) {
            n(e.element).trigger("fake" + t.type)
        }
        )
    }
    ,
    n.fn[o] = function(t, r) {
        return t = t || {},
        this.each(function() {
            var s = n(this)
              , a = s.data(o)
              , l = /GT-P31[0-9]{2}.+AppleWebKit\/534\.30/;
            a || "object" != typeof t || t.touch && e.inputtypes.date && !l.test(navigator.userAgent) ? a && "string" == typeof t && a[t](this) : s.data(o, a = new i(this,t,r))
        }
        )
    }
    ,
    o
}
),
define("enketo-widget/datetime/datetimepicker-extended", ["enketo-js/Widget", "enketo-js/support", "jquery", "enketo-js/extend", "enketo-widget/date/bootstrap3-datepicker/js/bootstrap-datepicker", "enketo-widget/time/bootstrap3-timepicker/js/bootstrap-timepicker"], function(t, e, n) {
    "use strict";
    function i(e, n) {
        this.namespace = o,
        t.call(this, e, n),
        this._init()
    }
    var o = "datetimepickerExtended";
    return i.prototype = Object.create(t.prototype),
    i.prototype.constructor = i,
    i.prototype._init = function() {
        function t() {
            if (a.val().length > 0 && l.val().length > 0) {
                var t = a.val().split("-")
                  , n = l.val().split(":");
                e.val(new Date(t[0],t[1] - 1,t[2],n[0],n[1]).toISOLocalString()).trigger("change").blur()
            } else
                e.val("").trigger("change").blur()
        }
        var e = n(this.element)
          , i = e.val().length > 0 ? new Date(e.val()).toISOLocalString() : ""
          , o = i.split("T")
          , r = o[0]
          , s = o[1] && o[1].length > 4 ? o[1].substring(0, 5) : ""
          , a = this._createFakeDateInput(r)
          , l = this._createFakeTimeInput(s);
        e.hide().after('<div class="datetimepicker widget" />'),
        e.siblings(".datetimepicker").append(a.closest(".date")).append(l.closest(".bootstrap-timepicker")),
        a.datepicker({
            format: "yyyy-mm-dd",
            autoclose: !0,
            todayHighlight: !0
        }),
        l.timepicker({
            defaultTime: s.length > 0 ? "value" : "current",
            showMeridian: !1
        }).val(s).closest(".widget").find("input").addClass("ignore"),
        this._setManualHandler(a),
        this._setFocusHandler(a.add(l)),
        a.on("change changeDate", function() {
            return t(),
            !1
        }
        ),
        l.on("change", function() {
            return t(),
            !1
        }
        ),
        l.next(".btn-reset").on("click", function() {
            a.val("").trigger("change").datepicker("update"),
            l.val("").trigger("change")
        }
        )
    }
    ,
    i.prototype._createFakeDateInput = function(t) {
        var e = n('<div class="date"><input class="ignore input-small" type="text" readonly="readonly" value="' + t + '" placeholder="yyyy-mm-dd"/></div>')
          , i = e.find("input");
        return i
    }
    ,
    i.prototype._createFakeTimeInput = function(t) {
        var e = n('<div class="bootstrap-timepicker"><input class="ignore timepicker-default input-small" readonly="readonly" type="text" value="' + t + '" placeholder="hh:mm"/><button class="btn-icon-only btn-reset" type="button"><i class="icon icon-refresh"> </i></button></div>')
          , i = e.find("input");
        return i
    }
    ,
    i.prototype._setManualHandler = function() {}
    ,
    i.prototype._setFocusHandler = function(t) {
        var e = this;
        t.on("focus blur", function(t) {
            n(e.element).trigger("fake" + t.type)
        }
        )
    }
    ,
    n.fn[o] = function(t, r) {
        return t = t || {},
        this.each(function() {
            var s = n(this)
              , a = s.data(o)
              , l = /GT-P31[0-9]{2}.+AppleWebKit\/534\.30/;
            a || "object" != typeof t || t.touch && e.inputtypes.datetime && !l.test(navigator.userAgent) ? a && "string" == typeof t && a[t](this) : s.data(o, a = new i(this,t,r))
        }
        )
    }
    ,
    o
}
),
define("enketo-widget/mediagrid/mediagridpicker", function() {}
),
define("enketo-widget/file/filepicker", ["jquery", "enketo-js/Widget", "file-manager"], function(t, e, n) {
    "use strict";
    function i(t, n, i) {
        i && (i.stopPropagation(),
        i.preventDefault()),
        this.namespace = o,
        e.call(this, t, n),
        this._init()
    }
    var o = "filepicker";
    return i.prototype = Object.create(e.prototype),
    i.prototype.constructor = i,
    i.prototype._init = function() {
        var e = t(this.element)
          , i = e.attr("data-loaded-file-name")
          , o = this;
        if (this.mediaType = e.attr("accept"),
        e.attr("disabled", "disabled").addClass("transparent").parent().addClass("with-media clearfix"),
        this.$widget = t('<div class="widget file-picker"><div class="fake-file-input"></div><div class="file-feedback"></div><div class="file-preview"></div></div>').insertAfter(e),
        this.$feedback = this.$widget.find(".file-feedback"),
        this.$preview = this.$widget.find(".file-preview"),
        this.$fakeInput = this.$widget.find(".fake-file-input"),
        i && this._showFileName(i, this.mediaType),
        !n || !n.isSupported()) {
            var r = n.notSupportedAdvisoryMsg ? n.notSupportedAdvisoryMsg : "";
            return void this._showFeedback("Media questions are not supported in this browser. " + r, "warning")
        }
        n.isWaitingForPermissions() && this._showFeedback("Waiting for user permissions.", "warning"),
        n.init().then(function() {
            o._showFeedback(),
            o._changeListener(),
            e.removeAttr("disabled"),
            i && n.getFileUrl(i).then(function(t) {
                o._showPreview(t, o.mediaType)
            }
            )["catch"](function() {
                o._showFeedback('File "' + i + '" could not be found (leave unchanged if already submitted and you want to preserve it).', "error")
            }
            )
        }
        )["catch"](function(t) {
            o._showFeedback(t.message, "error")
        }
        )
    }
    ,
    i.prototype._getMaxSubmissionSize = function() {
        var e = t(document).data("maxSubmissionSize");
        return e || 5242880
    }
    ,
    i.prototype._changeListener = function() {
        var e = this;
        t(this.element).on("change.propagate." + this.namespace, function(i) {
            var o, r, s = t(this), a = s.attr("data-loaded-file-name");
            return "propagate" === i.namespace ? (s.trigger("change.file"),
            !1) : (i.stopImmediatePropagation(),
            o = this.files[0],
            r = e._getFileName(o),
            void n.getFileUrl(o).then(function(t) {
                e._showPreview(t, e.mediaType),
                e._showFeedback(""),
                e._showFileName(r),
                a && a !== r && s.removeAttr("data-loaded-file-name"),
                s.trigger("change.propagate")
            }
            )["catch"](function(t) {
                s.val("").trigger("change.propagate"),
                e._showFileName(""),
                e._showPreview(null ),
                e._showFeedback(t.message, "error")
            }
            ))
        }
        )
    }
    ,
    i.prototype._getFileName = function(t) {
        return "object" == typeof t && t.name ? t.name : ""
    }
    ,
    i.prototype._showFileName = function(t) {
        this.$fakeInput.text(t)
    }
    ,
    i.prototype._showFeedback = function(t, e) {
        t = t || "",
        e = e || "",
        this.$feedback.text(t).attr("class", "file-feedback " + e)
    }
    ,
    i.prototype._showPreview = function(e, n) {
        var i;
        switch (this.$widget.find(".file-preview").empty(),
        n) {
        case "image/*":
            i = t("<img />");
            break;
        case "audio/*":
            i = t('<audio controls="controls"/>');
            break;
        case "video/*":
            i = t('<video controls="controls"/>');
            break;
        default:
            i = t("<span>No preview for this mediatype</span>")
        }
        e && this.$preview.append(i.attr("src", e))
    }
    ,
    t.fn[o] = function(e, n) {
        return e = e || {},
        this.each(function() {
            var r = t(this)
              , s = r.data(o);
            s || "object" != typeof e ? s && "string" == typeof e && s[e](this) : r.data(o, s = new i(this,e,n))
        }
        )
    }
    ,
    o
}
),
define("enketo-widget/select-likert/likertitem", function() {}
),
function(t) {
    "function" == typeof define && define.amd && define.amd.jQuery ? define("bootstrap-slider", ["jquery"], t) : t(jQuery)
}
(function(t) {
    function e(e, i) {
        if (s[e]) {
            var o = n(this)
              , r = s[e].apply(o, i);
            return "undefined" == typeof r ? t(this) : r
        }
        throw new Error("method '" + e + "()' does not exist for slider.")
    }
    function n(e) {
        var n = t(e).data("slider");
        if (n && n instanceof r)
            return n;
        throw new Error(o.callingContextNotSliderInstance)
    }
    function i(e) {
        var n = t(this);
        return n.each(function() {
            var n = t(this)
              , i = n.data("slider")
              , o = "object" == typeof e && e;
            i && !o && (o = {},
            t.each(t.fn.slider.defaults, function(t) {
                o[t] = i[t]
            }
            )),
            n.data("slider", new r(this,t.extend({}, t.fn.slider.defaults, o)))
        }
        ),
        n
    }
    var o = {
        formatInvalidInputErrorMsg: function(t) {
            return "Invalid input value '" + t + "' passed in"
        },
        callingContextNotSliderInstance: "Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"
    }
      , r = function(e, n) {
        var i = this.element = t(e).hide()
          , o = t(e)[0].style.width
          , r = !1
          , s = this.element.next(".widget");
        switch (s.hasClass("slider") === !0 ? (r = !0,
        this.picker = s) : this.picker = t('<div class="slider widget"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div></div>').insertAfter(this.element),
        this.id = this.element.data("slider-id") || n.id,
        this.id && (this.picker[0].id = this.id),
        ("ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch) && (this.touchCapable = !0),
        r === !0 && (this.picker.removeClass("slider-horizontal"),
        this.picker.removeClass("slider-vertical")),
        this.orientation = this.element.data("slider-orientation") || n.orientation,
        this.orientation) {
        case "vertical":
            this.picker.addClass("slider-vertical"),
            this.stylePos = "top",
            this.mousePos = "pageY",
            this.sizePos = "offsetHeight";
            break;
        default:
            this.picker.addClass("slider-horizontal").css("width", o),
            this.orientation = "horizontal",
            this.stylePos = "left",
            this.mousePos = "pageX",
            this.sizePos = "offsetWidth"
        }
        var a = this;
        switch (t.each(["min", "max", "step", "precision", "value", "reversed", "handle"], function(t, e) {
            "undefined" != typeof i.data("slider-" + e) ? a[e] = i.data("slider-" + e) : "undefined" != typeof n[e] ? a[e] = n[e] : "undefined" != typeof i.prop(e) ? a[e] = i.prop(e) : a[e] = 0
        }
        ),
        this.value instanceof Array ? r && !this.range ? this.value = this.value[0] : this.range = !0 : this.range && (this.value = [this.value, this.max]),
        this.selection = this.element.data("slider-selection") || n.selection,
        this.selectionEl = this.picker.find(".slider-selection"),
        "none" === this.selection && this.selectionEl.addClass("hide"),
        this.selectionElStyle = this.selectionEl[0].style,
        this.handle1 = this.picker.find(".slider-handle:first"),
        this.handle1Stype = this.handle1[0].style,
        this.handle2 = this.picker.find(".slider-handle:last"),
        this.handle2Stype = this.handle2[0].style,
        r === !0 && (this.handle1.removeClass("round triangle"),
        this.handle2.removeClass("round triangle hide")),
        this.handle) {
        case "round":
            this.handle1.addClass("round"),
            this.handle2.addClass("round");
            break;
        case "triangle":
            this.handle1.addClass("triangle"),
            this.handle2.addClass("triangle")
        }
        this.offset = this.picker.offset(),
        this.size = this.picker[0][this.sizePos],
        this.formater = n.formater,
        this.setValue(this.value),
        this.handle1.on({
            keydown: t.proxy(this.keydown, this, 0)
        }),
        this.handle2.on({
            keydown: t.proxy(this.keydown, this, 1)
        }),
        this.touchCapable && this.picker.on({
            touchstart: t.proxy(this.mousedown, this)
        }),
        this.picker.on({
            mousedown: t.proxy(this.mousedown, this)
        }),
        this.enabled = n.enabled && (void 0 === this.element.data("slider-enabled") || this.element.data("slider-enabled") === !0),
        this.enabled ? this.enable() : this.disable(),
        this.natural_arrow_keys = this.element.data("slider-natural_arrow_keys") || n.natural_arrow_keys
    }
    ;
    r.prototype = {
        constructor: r,
        over: !1,
        inDrag: !1,
        layout: function() {
            var t;
            t = this.reversed ? [100 - this.percentage[0], this.percentage[1]] : [this.percentage[0], this.percentage[1]],
            this.handle1Stype[this.stylePos] = t[0] + "%",
            this.handle2Stype[this.stylePos] = t[1] + "%",
            "vertical" === this.orientation ? (this.selectionElStyle.top = Math.min(t[0], t[1]) + "%",
            this.selectionElStyle.height = Math.abs(t[0] - t[1]) + "%") : (this.selectionElStyle.left = Math.min(t[0], t[1]) + "%",
            this.selectionElStyle.width = Math.abs(t[0] - t[1]) + "%")
        },
        mousedown: function(e) {
            if (!this.isEnabled())
                return !1;
            this.touchCapable && "touchstart" === e.type && (e = e.originalEvent),
            this.triggerFocusOnHandle(),
            this.offset = this.picker.offset(),
            this.size = this.picker[0][this.sizePos];
            var n = this.getPercentage(e);
            if (this.range) {
                var i = Math.abs(this.percentage[0] - n)
                  , o = Math.abs(this.percentage[1] - n);
                this.dragged = o > i ? 0 : 1
            } else
                this.dragged = 0;
            this.percentage[this.dragged] = this.reversed ? 100 - n : n,
            this.layout(),
            this.touchCapable && t(document).on({
                touchmove: t.proxy(this.mousemove, this),
                touchend: t.proxy(this.mouseup, this)
            }),
            t(document).on({
                mousemove: t.proxy(this.mousemove, this),
                mouseup: t.proxy(this.mouseup, this)
            }),
            this.inDrag = !0;
            var r = this.calculateValue();
            return this.element.trigger({
                type: "slideStart",
                value: r
            }).data("value", r).prop("value", r),
            this.setValue(r),
            !0
        },
        triggerFocusOnHandle: function(t) {
            0 === t && this.handle1.focus(),
            1 === t && this.handle2.focus()
        },
        keydown: function(t, e) {
            if (!this.isEnabled())
                return !1;
            var n;
            switch (e.which) {
            case 37:
            case 40:
                n = -1;
                break;
            case 39:
            case 38:
                n = 1
            }
            if (n) {
                this.natural_arrow_keys && ("vertical" === this.orientation && !this.reversed || "horizontal" === this.orientation && this.reversed) && (n = -1 * n);
                var i = n * this.percentage[2]
                  , o = this.percentage[t] + i;
                o > 100 ? o = 100 : 0 > o && (o = 0),
                this.dragged = t,
                this.adjustPercentageForRangeSliders(o),
                this.percentage[this.dragged] = o,
                this.layout();
                var r = this.calculateValue();
                return this.element.trigger({
                    type: "slideStart",
                    value: r
                }).data("value", r).prop("value", r),
                this.setValue(r, !0),
                this.element.trigger({
                    type: "slideStop",
                    value: r
                }).data("value", r).prop("value", r),
                !1
            }
        },
        mousemove: function(t) {
            if (!this.isEnabled())
                return !1;
            this.touchCapable && "touchmove" === t.type && (t = t.originalEvent);
            var e = this.getPercentage(t);
            this.adjustPercentageForRangeSliders(e),
            this.percentage[this.dragged] = this.reversed ? 100 - e : e,
            this.layout();
            var n = this.calculateValue();
            return this.setValue(n, !0),
            !1
        },
        adjustPercentageForRangeSliders: function(t) {
            this.range && (0 === this.dragged && this.percentage[1] < t ? (this.percentage[0] = this.percentage[1],
            this.dragged = 1) : 1 === this.dragged && this.percentage[0] > t && (this.percentage[1] = this.percentage[0],
            this.dragged = 0))
        },
        mouseup: function() {
            if (!this.isEnabled())
                return !1;
            this.touchCapable && t(document).off({
                touchmove: this.mousemove,
                touchend: this.mouseup
            }),
            t(document).off({
                mousemove: this.mousemove,
                mouseup: this.mouseup
            }),
            this.inDrag = !1;
            var e = this.calculateValue();
            return this.layout(),
            this.element.data("value", e).prop("value", e).trigger({
                type: "slideStop",
                value: e
            }),
            !1
        },
        calculateValue: function() {
            var t;
            return this.range ? (t = [this.min, this.max],
            0 !== this.percentage[0] && (t[0] = Math.max(this.min, this.min + Math.round(this.diff * this.percentage[0] / 100 / this.step) * this.step),
            t[0] = this.applyPrecision(t[0])),
            100 !== this.percentage[1] && (t[1] = Math.min(this.max, this.min + Math.round(this.diff * this.percentage[1] / 100 / this.step) * this.step),
            t[1] = this.applyPrecision(t[1])),
            this.value = t) : (t = this.min + Math.round(this.diff * this.percentage[0] / 100 / this.step) * this.step,
            t < this.min ? t = this.min : t > this.max && (t = this.max),
            t = parseFloat(t),
            t = this.applyPrecision(t),
            this.value = [t, this.value[1]]),
            t
        },
        applyPrecision: function(t) {
            var e = this.precision || this.getNumDigitsAfterDecimalPlace(this.step);
            return this.applyToFixedAndParseFloat(t, e)
        },
        getNumDigitsAfterDecimalPlace: function(t) {
            var e = ("" + t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
            return e ? Math.max(0, (e[1] ? e[1].length : 0) - (e[2] ? +e[2] : 0)) : 0
        },
        applyToFixedAndParseFloat: function(t, e) {
            var n = t.toFixed(e);
            return parseFloat(n)
        },
        getPercentage: function(t) {
            !this.touchCapable || "touchstart" !== t.type && "touchmove" !== t.type || (t = t.touches[0]);
            var e = 100 * (t[this.mousePos] - this.offset[this.stylePos]) / this.size;
            return e = Math.round(e / this.percentage[2]) * this.percentage[2],
            Math.max(0, Math.min(100, e))
        },
        getValue: function() {
            return this.range ? this.value : this.value[0]
        },
        setValue: function(t, e) {
            if (t || (t = 0),
            this.value = this.validateInputValue(t),
            this.range ? (this.value[0] = this.applyPrecision(this.value[0]),
            this.value[1] = this.applyPrecision(this.value[1]),
            this.value[0] = Math.max(this.min, Math.min(this.max, this.value[0])),
            this.value[1] = Math.max(this.min, Math.min(this.max, this.value[1]))) : (this.value = this.applyPrecision(this.value),
            this.value = [Math.max(this.min, Math.min(this.max, this.value))],
            this.handle2.addClass("hide"),
            "after" === this.selection ? this.value[1] = this.max : this.value[1] = this.min),
            this.diff = this.max - this.min,
            this.diff > 0 ? this.percentage = [100 * (this.value[0] - this.min) / this.diff, 100 * (this.value[1] - this.min) / this.diff, 100 * this.step / this.diff] : this.percentage = [0, 0, 100],
            this.layout(),
            e === !0) {
                var n = this.range ? this.value : this.value[0];
                this.element.trigger({
                    type: "slide",
                    value: n
                }).data("value", n).prop("value", n)
            }
        },
        validateInputValue: function(e) {
            if ("number" == typeof e)
                return e;
            if (e instanceof Array)
                return t.each(e, function(t, e) {
                    if ("number" != typeof e)
                        throw new Error(o.formatInvalidInputErrorMsg(e))
                }
                ),
                e;
            throw new Error(o.formatInvalidInputErrorMsg(e))
        },
        destroy: function() {
            this.handle1.off(),
            this.handle2.off(),
            this.element.off().show(),
            this.picker.off().remove(),
            t(this.element).removeData("slider")
        },
        disable: function() {
            this.enabled = !1,
            this.handle1.removeAttr("tabindex"),
            this.handle2.removeAttr("tabindex"),
            this.picker.addClass("slider-disabled"),
            this.element.trigger("slideDisabled")
        },
        enable: function() {
            this.enabled = !0,
            this.handle1.attr("tabindex", 0),
            this.handle2.attr("tabindex", 0),
            this.picker.removeClass("slider-disabled"),
            this.element.trigger("slideEnabled")
        },
        toggle: function() {
            this.enabled ? this.disable() : this.enable()
        },
        isEnabled: function() {
            return this.enabled
        },
        setAttribute: function(t, e) {
            this[t] = e
        },
        getAttribute: function(t) {
            return this[t]
        }
    };
    var s = {
        getValue: r.prototype.getValue,
        setValue: r.prototype.setValue,
        setAttribute: r.prototype.setAttribute,
        getAttribute: r.prototype.getAttribute,
        destroy: r.prototype.destroy,
        disable: r.prototype.disable,
        enable: r.prototype.enable,
        toggle: r.prototype.toggle,
        isEnabled: r.prototype.isEnabled
    };
    t.fn.slider = function(t) {
        if ("string" == typeof t && "refresh" !== t) {
            var n = Array.prototype.slice.call(arguments, 1);
            return e.call(this, t, n)
        }
        return i.call(this, t)
    }
    ,
    t.fn.slider.defaults = {
        min: 0,
        max: 10,
        step: 1,
        precision: 0,
        orientation: "horizontal",
        value: 5,
        range: !1,
        selection: "before",
        natural_arrow_keys: !1,
        handle: "round",
        reversed: !1,
        enabled: !0,
        formater: function(t) {
            return t
        }
    },
    t.fn.slider.Constructor = r
}
),
define("enketo-widget/distress/distresspicker", ["enketo-js/Widget", "jquery", "bootstrap-slider"], function(t, e) {
    "use strict";
    function n(e, n, o) {
        this.namespace = i,
        t.call(this, e, n),
        this._init()
    }
    var i = "distresspicker";
    return n.prototype = Object.create(t.prototype),
    n.prototype.constructor = n,
    n.prototype._init = function() {
        var t = "decimal" === e(this.element).attr("data-type-xml") ? .1 : 1
          , n = Number(this.element.value) || -1;
        e(this.element).slider({
            reversed: !0,
            min: -1,
            max: 10,
            orientation: "vertical",
            step: t,
            value: n
        }),
        this.$widget = e(this.element).next(".slider"),
        this._addBulb(),
        this._addScale(),
        this._setChangeHandler()
    }
    ,
    n.prototype._addBulb = function() {
        this.$widget.append('<div class="bulb"><div class="inner"></div></div>')
    }
    ,
    n.prototype._addScale = function() {
        for (var t = e('<div class="scale"></div>'), n = 10; n >= -1; n--)
            t.append('<div class="number"><div class="value">' + n + "</div></div>");
        this.$widget.prepend(t)
    }
    ,
    n.prototype._setChangeHandler = function() {
        e(this.element).on("slideStop." + this.namespace, function(t) {
            -1 === this.value && (this.value = ""),
            e(this).trigger("change")
        }
        )
    }
    ,
    n.prototype.disable = function() {
        console.log("disableing", this.element),
        e(this.element).slider("disable").slider("setValue", this.element.value)
    }
    ,
    n.prototype.enable = function() {
        e(this.element).slider("enable")
    }
    ,
    e.fn[i] = function(t, o) {
        return this.each(function() {
            var r = e(this)
              , s = e(this).data(i);
            t = t || {},
            s || "object" != typeof t ? s && "string" == typeof t && s[t](this) : r.data(i, s = new n(this,t,o))
        }
        )
    }
    ,
    i
}
),
define("enketo-widget/horizontal-choices/horizontalchoices", ["jquery", "enketo-js/Widget"], function(t, e) {
    "use strict";
    function n(t, n) {
        this.namespace = i,
        e.call(this, t, i, n),
        this._init()
    }
    var i = "horizontalChoices";
    return n.prototype = Object.create(e.prototype),
    n.prototype.constructor = n,
    n.prototype._init = function() {
        t(this.element).find(".option-wrapper").each(function() {
            var e = t(this)
              , n = e.find("label");
            n.length % 3 === 2 && e.append('<label class="filler"></label>')
        }
        )
    }
    ,
    n.prototype.destroy = function() {}
    ,
    t.fn[i] = function(e, o) {
        return e = e || {},
        this.each(function() {
            var r = t(this)
              , s = r.data(i);
            s || "object" != typeof e ? s && "string" == typeof e && s[e](this) : r.data(i, s = new n(this,e,o))
        }
        )
    }
    ,
    i
}
),
define("text!enketo-widget/note/config.json", [], function() {
    return '{\n    "stylesheet": "note.scss",\n    "selector": ".note",\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/select-desktop-bootstrap/config.json", [], function() {
    return '{\n    "stylesheet": "selectpicker.scss",\n    "selector": "select:not(#form-languages)",\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/select-mobile/config.json", [], function() {
    return '{\n    "stylesheet": "selectpicker.scss",\n    "selector": "select[multiple]",\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/geo/config.json", [], function() {
    return '{\n    "stylesheet": "geopicker.scss",\n    "selector": "input[data-type-xml=\\"geopoint\\"], input[data-type-xml=\\"geotrace\\"], input[data-type-xml=\\"geoshape\\"]",\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/table/config.json", [], function() {
    return '{\n    "stylesheet": "tablewidget.scss",\n    "selector": null,\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/radio/config.json", [], function() {
    return '{\n    "stylesheet": "radiopicker.scss",\n    "selector": "form",\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/time/config.json", [], function() {
    return '{\n    "stylesheet": "timepicker-extended.scss",\n    "selector": "input[type=\\"time\\"]:not([readonly])",\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/date/config.json", [], function() {
    return '{\n    "stylesheet": "datepicker-extended.scss",\n    "selector": "input[type=\\"date\\"]:not([readonly])",\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/datetime/config.json", [], function() {
    return '{\n    "stylesheet": "datetimepicker-extended.scss",\n    "selector": "input[type=\\"datetime\\"]:not([readonly])",\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/mediagrid/config.json", [], function() {
    return '{\n    "stylesheet": "mediagridpicker.scss",\n    "selector": null,\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/file/config.json", [], function() {
    return '{\n    "stylesheet": "filepicker.scss",\n    "selector": "input[type=\\"file\\"]",\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/select-likert/config.json", [], function() {
    return '{\n    "stylesheet": "likertitem.scss",\n    "selector": null,\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/distress/config.json", [], function() {
    return '{\n    "stylesheet": "distresspicker.scss",\n    "selector": ".or-appearance-distress input[type=\'number\']",\n    "options": {}\n}\n'
}
),
define("text!enketo-widget/horizontal-choices/config.json", [], function() {
    return '{\n    "stylesheet": "horizontalchoices.scss",\n    "selector": ".or-appearance-horizontal",\n    "options": {}\n}\n'
}
);
var refreshDateFields = function(){
$('input[type="date"]')
   .each(function() {
        //this.selected = (this.text == myVal);
        this.setAttribute('type', 'text');
        this.setAttribute('type', 'date');
   });
};